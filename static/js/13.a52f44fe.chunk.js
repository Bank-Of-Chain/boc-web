/*! For license information please see 13.a52f44fe.chunk.js.LICENSE.txt */
(this["webpackJsonpboc-web"]=this["webpackJsonpboc-web"]||[]).push([[13],{1021:function(e,t,r){var n=r(963);e.exports=function(e){return(null==e?0:e.length)?n(e,1):[]}},1022:function(e,t,r){"use strict";var n=r(65),a=r(116);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(r(0)),i=(0,n(r(117)).default)(o.createElement("path",{d:"M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z"}),"Build");t.default=i},1023:function(e,t,r){"use strict";var n=r(65),a=r(116);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(r(0)),i=(0,n(r(117)).default)(o.createElement("path",{d:"M9.01 14H2v2h7.01v3L13 15l-3.99-4v3zm5.98-1v-3H22V8h-7.01V5L11 9l3.99 4z"}),"CompareArrows");t.default=i},1040:function(e,t,r){"use strict";var n=r(62),a=r(0),o=r.n(a),i=r(441),c=r(291),l=r(115),s=r(968),u=r(969),f=r(972),d=r.n(f),m=r(839),p=function(){return{body:{height:"100%",position:"relative"},main:{width:"100%",height:"100%",display:"flex",position:"absolute",background:"rgb(0,0,0,0.8)",alignItems:"center",justifyContent:"center"},text:{marginLeft:"8px",color:"#A68EFE"}}},h=Object(i.a)(p),g=function(e){var t=h(),r=e.children,n=o.a.createElement("div",{className:t.main},o.a.createElement("svg",{viewBox:"0 0 1403 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64"},o.a.createElement("path",{d:"M149.1 418.1c-12.7 0-23 10.3-23 23v51c0 12.7 10.3 23 23 23s23-10.3 23-23v-51c0-12.7-10.3-23-23-23zM807.5 740.5H352c-9.1-22.5-31.2-38.4-57-38.4-33.9 0-61.4 27.5-61.4 61.4s27.5 61.4 61.4 61.4c25.8 0 47.9-15.9 57-38.4h455.5c9.1 22.5 31.2 38.4 57 38.4 33.9 0 61.4-27.5 61.4-61.4s-27.5-61.4-61.4-61.4c-25.9 0-47.9 15.9-57 38.4zM233.6 418.1c-12.7 0-23 10.3-23 23v51c0 12.7 10.3 23 23 23s23-10.3 23-23v-51c0-12.7-10.3-23-23-23zM318 515.1c12.7 0 23-10.3 23-23v-51c0-12.7-10.3-23-23-23s-23 10.3-23 23v51c0 12.7 10.3 23 23 23z",fill:"#A68EFE"}),o.a.createElement("path",{d:"M1353.7 486.2c8.8-28.8 1.9-61.5-20.9-84.2L1088.2 157.4c-1.1-1.2-2.2-2.4-3.4-3.6-1.2-1.2-2.4-2.3-3.6-3.4l-0.8-0.8c-17.2-15.1-39.1-23.4-62.3-23.4-25.3 0-49 9.8-66.8 27.6L763 342l-60.3-213h12.5c12.7 0 23-10.3 23-23s-10.3-23-23-23H464.8c-51.3 0-93 41.7-93 93v132.3H91.4c-9.3 0-18 3.6-24.6 10.2l-56.6 56.6c-6.6 6.6-10.2 15.3-10.2 24.6V563c0 9.3 3.6 18 10.2 24.6l60.1 60.1c6.6 6.6 15.3 10.2 24.6 10.2h78.7c-30.5 29.9-49.5 71.5-49.5 117.4 0 90.6 73.7 164.4 164.4 164.4h582.5c90.6 0 164.4-73.7 164.4-164.4s-73.7-164.4-164.4-164.4h-55.5l173.9-176.2 0.9-52.8 42.3-42.3L1213.8 521c7.1 7.1 15.2 12.7 23.8 16.7l-69.4 117.8-9.8-5.8c-9.5-5.6-21.8-2.4-27.4 7.1l-3 5.2c-5.6 9.5-2.4 21.8 7.1 27.4l51.4 30.3c68.6 40.4 156.9 17.6 197.4-51 35.9-61.1 21.7-137.9-30.2-182.5z m-632.5-123h-77.2l-44.7-44.7c-6.6-6.6-15.3-10.2-24.6-10.2h-42.1V129h122.2l66.4 234.2zM417.8 176c0-25.9 21.1-47 47-47h22v179.3h-69V176zM99.5 611.8l-53.5-53.5V404.4l50-50h474.2L614.9 399c6.6 6.6 15.3 10.2 24.6 10.2H724.9v113.4H492.8c-12.7 0-23 10.3-23 23s10.3 23 23 23H724.9v42.3H288.5c-6 0-12 0.3-17.8 1H99.5z m771.5 45.1c65.3 0 118.4 53.1 118.4 118.4 0 65.3-53.1 118.4-118.4 118.4H288.5c-65.3 0-118.4-53.1-118.4-118.4 0-65.3 53.1-118.4 118.4-118.4h582.5z m73.5-294.4l-0.9 53-172.7 175V399.2l212.9-212.9c9.1-9.1 21.3-14.1 34.2-14.1 13 0 25.2 5 34.2 14.1 18.9 18.9 18.9 49.6 0 68.5L944.5 362.5z m248.9 72.9L1065 307.1l19.8-19.8c12.5-12.5 20.7-27.6 24.7-43.6l137.8 137.8c-12.2 4-23.7 10.8-33.4 20.5-9.8 9.7-16.6 21.2-20.5 33.4z m53-0.9c14.9-14.9 39-14.9 53.9 0 14.9 14.9 14.9 39 0 53.9-14.9 14.9-39 14.9-53.9 0-14.9-14.8-14.9-39 0-53.9z m97.8 210.8c-27.5 46.7-87.7 62.2-134.4 34.7l-2-1.2 79.2-134.4c14.8-2.4 29.1-8.8 41.1-19.2 31.7 30.8 39.5 80.3 16.1 120.1z",fill:"#A68EFE"})),o.a.createElement("p",{className:t.text},"Under construction..."));return o.a.createElement("div",{className:t.body},n,r)},v=r(988),b=r(915),y=r(989),w=r(976);function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}"undefined"!==typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!==typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var x="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?a.useLayoutEffect:a.useEffect,O={status:"not-requested",loading:!1,result:void 0,error:void 0},j={status:"loading",loading:!0,result:void 0,error:void 0},L=function(){},k={initialState:function(e){return e&&e.executeOnMount?j:O},executeOnMount:!0,executeOnUpdate:!0,setLoading:function(e){return j},setResult:function(e,t){return{status:"success",loading:!1,result:e,error:void 0}},setError:function(e,t){return{status:"error",loading:!1,result:void 0,error:e}},onSuccess:L,onError:L},A=function(e,t,r){!t&&(t=[]);var n=function(e){return E({},k,{},e)}(r),o=Object(a.useState)(null),i=o[0],c=o[1],l=function(e){var t=Object(a.useState)((function(){return e.initialState(e)})),r=t[0],n=t[1],o=Object(a.useCallback)((function(){return n(e.initialState(e))}),[n,e]),i=Object(a.useCallback)((function(){return n(e.setLoading(r))}),[r,n]),c=Object(a.useCallback)((function(t){return n(e.setResult(t,r))}),[r,n]),l=Object(a.useCallback)((function(t){return n(e.setError(t,r))}),[r,n]),s=Object(a.useCallback)((function(e){return n(E({},r,{},e))}),[r,n]);return{value:r,set:n,merge:s,reset:o,setLoading:i,setResult:c,setError:l}}(n),s=function(){var e=Object(a.useRef)(!1);return Object(a.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),function(){return e.current}}(),u=function(){var e=Object(a.useRef)(null);return{set:function(t){return e.current=t},get:function(){return e.current},is:function(t){return e.current===t}}}(),f=function(e){return s()&&u.is(e)},d=function(e){var t=Object(a.useRef)(e);return x((function(){t.current=e})),Object(a.useCallback)((function(){return t.current}),[t])}((function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var o=function(){try{return Promise.resolve(e.apply(void 0,r))}catch(t){return Promise.reject(t)}}();return c(r),u.set(o),l.setLoading(),o.then((function(e){f(o)&&l.setResult(e),n.onSuccess(e,{isCurrent:function(){return u.is(o)}})}),(function(e){f(o)&&l.setError(e),n.onError(e,{isCurrent:function(){return u.is(o)}})})),o})),m=Object(a.useCallback)((function(){return d().apply(void 0,arguments)}),[d]),p=!s();return Object(a.useEffect)((function(){var e=function(){return d().apply(void 0,t)};p&&n.executeOnMount&&e(),!p&&n.executeOnUpdate&&e()}),t),E({},l.value,{set:l.set,merge:l.merge,reset:l.reset,execute:m,currentPromise:u.get(),currentParams:i})};function T(e,t,r){return A(e,t,r)}var S=r(970),N=r.n(S),C=r(78),_=r.n(C),I=r(865),F=r(17),R=r(951),P=r(952),V=r(32),B=r(971),D=F.a,M=Object(i.a)(B.a);t.a=function(e){var t,r=e.address,i=e.type,f=e.chain,p=e.userProvider,h=e.wantTokenSymbol,E=e.VAULT_FACTORY_ADDRESS,x=e.VAULT_FACTORY_ABI,O=e.personalVaultAddress,j=e.UNISWAPV3_RISK_ON_VAULT,L=e.UNISWAPV3_RISK_ON_HELPER,k="USDi"===i,A=M(),S=Object(a.useState)({}),C=Object(n.a)(S,2),F=C[0],B=C[1],U=T((function(){return Object(b.c)(V.b,O,"aave-outstanding-loan")}),[O]),z=T((function(){return Object(b.c)(V.b,O,"aave-collateral")}),[O]),W=T((function(){return Object(b.c)(V.b,O,"aave-health-ratio")}),[O]),G=T((function(){return Object(b.c)(V.b,O,"uniswap-position-value")}),[O]),H=T((function(){return Object(b.c)(V.b,O,"profit")}),[O]),Y=Object(y.a)(f,i,r,i),K=Y.dataSource,J=Y.loading,q=Object(w.a)(E,x,O,j,L,p).baseInfo,Q=q.netMarketMakingAmount,X=q.result,Z=q.estimatedTotalAssets,$=q.wantInfo,ee=void 0===$?{}:$,te=q.borrowInfo,re=void 0===te?{}:te,ne=ee.wantTokenDecimals,ae=void 0===ne?D.from(0):ne,oe=re.borrowTokenDecimals,ie=void 0===oe?D.from(0):oe;console.log("borrowTokenDecimals=",ie),Object(a.useEffect)((function(){var e=Object(v.a)([{date:"2022-10-11",balance:"1"},{date:"2022-10-12",balance:"10"},{date:"2022-10-13",balance:"10"},{date:"2022-10-14",balance:"20"},{date:"2022-10-15",balance:"20"},{date:"2022-10-16",balance:"20"},{date:"2022-10-17",balance:"30"}],"balance",K.token,{format:"MM-DD",xAxis:{axisTick:{alignWithLabel:!0}}});B(e)}),[K,r]);var ce=[{title:"Net Deposit",tip:o.a.createElement(m.a,{classes:{tooltip:A.tooltip},placement:"right",title:"Total profits from BoC that are withdrawable and cumulative."},o.a.createElement(d.a,{style:{fontSize:"1.375rem",color:"rgba(255,255,255,0.45)"}})),content:N()(Object(I.b)(Q,ae,k?P.a:R.b)).format(k?"0,0.[00]a":"0,0.[0000]a"),unit:h},{title:"Current Value",tip:o.a.createElement(m.a,{classes:{tooltip:A.tooltip},placement:"right",title:"Yield over the past week."},o.a.createElement(d.a,{style:{fontSize:"1.375rem",color:"rgba(255,255,255,0.45)"}})),content:N()(Object(I.b)(Z,ae,k?P.a:R.b)).format(k?"0,0.[00]a":"0,0.[0000]a"),isAPY:!0,unit:h},{title:"Profit",tip:o.a.createElement(m.a,{classes:{tooltip:A.tooltip},placement:"right",title:"Yield over the past month."},o.a.createElement(d.a,{style:{fontSize:"1.375rem",color:"rgba(255,255,255,0.45)"}})),content:N()(Object(I.b)(X,ae,k?P.a:R.b)).format(k?"0,0.[00]a":"0,0.[0000]a"),isAPY:!0,unit:h}];return o.a.createElement(c.a,null,o.a.createElement(l.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement(c.a,{spacing:2},_()(ce,(function(e,t){return o.a.createElement(l.a,{key:t,xs:12,sm:12,md:4,lg:4},o.a.createElement(s.a,Object.assign({loading:J},e)))}))),o.a.createElement(c.a,{className:A.lineChart},o.a.createElement(l.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement(s.a,{loading:U.loading||z.loading||W.loading,title:o.a.createElement("span",null,"AAVE Lines",o.a.createElement(m.a,{title:"Curve of daily change in the total ".concat(k?"USDi":"ETHi"," held by the user.")},o.a.createElement(d.a,{style:{marginLeft:8,fontSize:"1rem"}}))),loadingOption:{width:"100%",height:"2rem"}},U.error||z.error||W.error?o.a.createElement("div",null,"Error: ",null===U||void 0===U||null===(t=U.error)||void 0===t?void 0:t.message):o.a.createElement(u.b,{option:F,style:{minHeight:"20rem"}})))),o.a.createElement(c.a,{className:A.lineChart},o.a.createElement(l.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement(g,null,o.a.createElement(s.a,{loading:G.loading,title:o.a.createElement("span",null,"Uniswap Position Value",o.a.createElement(m.a,{title:"Curve of daily change in the total ".concat(k?"USDi":"ETHi"," held by the user.")},o.a.createElement(d.a,{style:{marginLeft:8,fontSize:"1rem"}}))),loadingOption:{width:"100%",height:"2rem"}},G.error?o.a.createElement("div",null,"Error: ",G.error.message):o.a.createElement(u.b,{option:F,style:{minHeight:"20rem"}}))))),o.a.createElement(c.a,{className:A.lineChart},o.a.createElement(l.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement(s.a,{loading:H.loading,title:o.a.createElement("span",null,"Profits",o.a.createElement(m.a,{title:"Curve of daily change in the total ".concat(k?"USDi":"ETHi"," held by the user.")},o.a.createElement(d.a,{style:{marginLeft:8,fontSize:"1rem"}}))),loadingOption:{width:"100%",height:"2rem"}},H.error?o.a.createElement("div",null,"Error: ",H.error.message):o.a.createElement(u.b,{option:F,style:{minHeight:"20rem"}}))))))}},1043:function(e,t,r){"use strict";var n=r(0),a=r.n(n),o=r(441),i=r(291),c=r(115),l=r(81),s=r(1022),u=r.n(s),f=r(938),d=r.n(f),m=r(1023),p=r.n(m),h=r(314),g=r.n(h),v=r(868),b=r(10),y=r(62),w=r(172),E=r(78),x=r.n(E),O=r(107),j=r.n(O),L=r(1021),k=r.n(L),A=r(296),T=r(294);function S(){S=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),i=new O(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return L()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=w(i,r);if(c){if(c===u)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,i),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var u={};function f(){}function d(){}function m(){}var p={};c(p,a,(function(){return this}));var h=Object.getPrototypeOf,g=h&&h(h(j([])));g&&g!==t&&r.call(g,a)&&(p=g);var v=m.prototype=f.prototype=Object.create(p);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var n;this._invoke=function(a,o){function i(){return new t((function(n,i){!function n(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(a,o,n,i)}))}return n=n?n.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return d.prototype=m,c(v,"constructor",m),c(m,"constructor",d),d.displayName=c(m,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(y.prototype),c(y.prototype,o,(function(){return this})),e.AsyncIterator=y,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new y(l(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,a,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=j,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var N=w.b,C=[T.e,T.c],_=function(e,t,r){var a=Object(n.useState)([]),o=Object(y.a)(a,2),i=o[0],c=o[1],l=Object(n.useState)([]),s=Object(y.a)(l,2),u=s[0],f=s[1],d=Object(n.useState)(!1),m=Object(y.a)(d,2),p=m[0],h=m[1],g=Object(n.useState)(!1),v=Object(y.a)(g,2),w=v[0],E=v[1],O=Object(A.a)(r),L=Object(n.useCallback)((function(){j()(e)||j()(r)||new N(e,t,r).getVaultImplList().then(c)}),[e,r,t]),_=Object(n.useCallback)((function(){if(!(j()(e)||j()(r)||j()(i)||j()(O))){E(!0);var n=new N(e,t,r),a=x()(i,(function(e){return Promise.all(x()(C,(function(t,r){return n.vaultAddressMap(O,e,r).then((function(r){return r===T.f?{hasCreate:!1,type:e,token:t}:{address:r,type:e,hasCreate:!0,token:t}}))})))}));Promise.all(a).then((function(e){setTimeout((function(){E(!1),f(k()(e))}),1e3)}))}}),[O,e,r,i,t]),I=Object(n.useCallback)(function(){var n=Object(b.a)(S().mark((function n(a,o){var i;return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return h(!0),i=new N(e,t,r),n.next=4,i.connect(r.getSigner()).createNewVault(a,o).then((function(e){return e.wait()})).then(_).finally((function(){h(!1)}));case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),[e,r,_,t]),F=Object(n.useCallback)(function(){var n=Object(b.a)(S().mark((function n(a,o){return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:h(!0),new N(e,t,r).connect(r.getSigner()).deleteVaultAddressMapForDebug(O,a,o).then((function(e){return e.wait()})).then(_).finally((function(){h(!1)}));case 3:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),[e,_,O,r,t]);return Object(n.useEffect)(L,[L]),Object(n.useEffect)(_,[_]),{vaultFactoryAddress:e,vaultImplList:i,personalVault:u,adding:p,loading:w,addVault:I,deleteVault:F}},I=r(45),F=r(295),R=r.n(F),P=r(947),V=r.n(P),B=function(){return{template:{display:"flex",alignItems:"center",padding:"2rem",borderRadius:"1rem",background:"linear-gradient(111.68deg, rgba(87, 97, 125, 0.2) 7.59%, rgba(255, 255, 255, 0.078) 102.04%)",cursor:"pointer"},vault:{padding:"2rem",borderRadius:"1rem",background:"linear-gradient(111.68deg, rgba(87, 97, 125, 0.2) 7.59%, rgba(255, 255, 255, 0.078) 102.04%)"},vaultTitle:{textAlign:"center",height:"203px"},icon:{width:"100%",borderRadius:"50%"},button:{width:"100%",marginTop:"1rem"},logo:{width:"30px",borderRadius:"50%"},checked:{border:"2px solid #A68EFD"},token:{display:"flex",alignItems:"center",marginTop:"1rem"},tokenInfo:{flex:1,display:"flex",alignItems:"center"},name:{marginLeft:"1rem"},input:{maxWidth:"14rem"},setting:{position:"absolute",right:"0rem",top:"-0.5rem",cursor:"pointer"}}},D=r(898),M=Object(o.a)(B);t.a=function(e){var t=e.vaultChangeHandle,r=e.userProvider,o=e.VAULT_FACTORY_ADDRESS,s=e.VAULT_FACTORY_ABI,f=e.tokens,m=_(o,s,r),h=m.personalVault,b=m.addVault,y=m.loading,w=M(),E=Object(I.g)().push,O=V()(h,(function(e){return f.includes(e.token)}));return O.length=2,Object(n.useEffect)((function(){var e=R()(O,{hasCreate:!0});Object(D.isEmpty)(e)||t(e.address,e.token)}),[O,t]),a.a.createElement(i.a,{spacing:2},a.a.createElement(c.a,{md:12},a.a.createElement("div",{className:w.setting},a.a.createElement(g.a,{style:{color:"#A0A0A0"},onClick:function(){return E("/usdi")}}))),a.a.createElement(v.a,{loading:y,width:"100%",height:"2rem"},x()(O,(function(e,r){return a.a.createElement(c.a,{md:6,key:r},Object(D.isEmpty)(e)?a.a.createElement("div",{className:w.vault},a.a.createElement("div",{className:w.vaultTitle},a.a.createElement("img",{alt:"",className:w.icon,src:"https://bankofchain.io/logo256.png"})),a.a.createElement(l.a,{color:"colorfull",startIcon:a.a.createElement(u.a,null),className:w.button},"on Building...")):a.a.createElement("div",{className:w.vault},a.a.createElement("div",{className:w.vaultTitle},a.a.createElement("img",{alt:"",className:w.icon,src:"https://bankofchain.io/images/".concat(e.token,".png")})),e.hasCreate?a.a.createElement(l.a,{color:"colorfull",startIcon:a.a.createElement(p.a,null),className:w.button,onClick:function(){return t(e.address,e.token)}},"Deposit"):a.a.createElement(l.a,{color:"colorfull",startIcon:a.a.createElement(d.a,null),className:w.button,onClick:function(){return b(e.token,e.type)}},"Create")))}))))}},1321:function(e,t,r){"use strict";r.r(t);var n=r(62),a=r(0),o=r.n(a),i=r(44),c=r.n(i),l=r(441),s=r(291),u=r(115),f=r(1305),d=r(938),m=r.n(d),p=r(810),h=r(811),g=r(1308),v=r(1309),b=r(973),y=r.n(b),w=r(974),E=r.n(w),x=r(975),O=r.n(x),j=r(868),L=r(843),k=r(10),A=r(79),T=r(852),S=r(855),N=r(809),C=r(882),_=r(81),I=r(839),F=r(901),R=r.n(F),P=r(236),V=r.n(P),B=r(107),D=r.n(B),M=r(871),U=r.n(M),z=r(172),W=r(17),G=r(872),H=r.n(G),Y=r(89),K=r(865),J=r(877),q=r(884),Q=r(32),X=function(){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},modalBody:{textAlign:"center"},depositContainer:{border:"1px solid #A68EFD",padding:"2.6875rem 2.25rem",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem"},estimateContainer:{border:"1px solid #A68EFD",marginTop:"0.5rem",borderBottomLeftRadius:"1rem",borderBottomRightRadius:"1rem",padding:"2.0625rem 2.6875rem"},estimateWrapper:{display:"flex",marginTop:"1rem",justifyContent:"space-between",fontSize:"1.625rem"},estimateText:{color:"#A0A0A0",margin:0,display:"flex"},estimateBalanceNum:{color:"#A0A0A0"},balance:{display:"flex",color:"#A0A0A0",marginTop:"1rem"},footerContainer:{marginTop:"2.5rem"},tokenInputWrapper:{marginBottom:"16px"},inputLabelWrapper:{display:"flex",justifyContent:"space-between",alignItems:"center"},input:{maxWidth:"14rem"},tokenInfo:{display:"flex",alignItems:"center"},tokenName:{fontSize:"1.625rem"},tokenLogo:{width:30,borderRadius:"50%",marginRight:8},depositModal:{padding:"1rem",maxWidth:"500px",color:"rgba(255, 255, 255, 0.87)",border:"1px solid #A68EFE",backgroundColor:"#000",borderRadius:"1rem"},setting:{position:"absolute",right:"1rem",top:"1rem",cursor:"pointer"}}};function Z(){Z=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),i=new O(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return L()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=w(i,r);if(c){if(c===u)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,i),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var u={};function f(){}function d(){}function m(){}var p={};c(p,a,(function(){return this}));var h=Object.getPrototypeOf,g=h&&h(h(j([])));g&&g!==t&&r.call(g,a)&&(p=g);var v=m.prototype=f.prototype=Object.create(p);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var n;this._invoke=function(a,o){function i(){return new t((function(n,i){!function n(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(a,o,n,i)}))}return n=n?n.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return d.prototype=m,c(v,"constructor",m),c(m,"constructor",d),d.displayName=c(m,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(y.prototype),c(y.prototype,o,(function(){return this})),e.AsyncIterator=y,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new y(l(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,a,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=j,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var $=z.b,ee=W.a,te=Object(l.a)(X);function re(e){var t=e.address,r=e.estimatedTotalAssets,i=e.userProvider,c=e.VAULT_ABI,l=e.VAULT_ADDRESS,f=e.isBalanceLoading,d=e.minimumInvestmentAmount,m=e.wantTokenBalance,p=e.wantTokenDecimals,h=e.wantTokenSymbol,g=e.wantTokenForVault,v=e.manageFeeBps,b=te(),y=Object(A.b)(),w=Object(a.useState)(""),E=Object(n.a)(w,2),x=E[0],O=E[1],L=Object(a.useState)(!1),F=Object(n.a)(L,2),P=F[0],B=F[1];var M=function(){var e=Object(k.a)(Z().mark((function e(){var r,n,a,o,s,u,f,m,h,v,b;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B(!0),e.prev=1,r=ee.from(x).mul(ee.from(10).pow(p)),n=i.getSigner(),a=new $(g,Q.i,i),o=a.connect(n),e.next=8,o.allowance(t,l);case 8:if(s=e.sent,!r.gt(s)){e.next=17;break}if(!s.gt(0)){e.next=15;break}return e.next=13,o.increaseAllowance(l,r.sub(s)).then((function(e){return e.wait()})).catch(function(){var e=Object(k.a)(Z().mark((function e(t){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.table(t),4001!==t.code&&"ACTION_REJECTED"!==t.code){e.next=3;break}return e.abrupt("return",Promise.reject(t));case 3:return e.next=5,o.approve(l,0);case 5:return e.next=7,o.approve(l,r).then((function(e){return e.wait()}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 13:e.next=17;break;case 15:return e.next=17,o.approve(l,r);case 17:if(u=new $(l,c,i),f=u.connect(n),m={},!U()(Q.o)||1===Q.o){e.next=27;break}return e.next=23,f.estimateGas.lend(r);case 23:h=e.sent,v=Math.ceil(h*Q.o),b=v<Q.m?v:Q.m,m.gasLimit=b;case 27:return e.next=29,f.lend(r,m).then((function(e){return e.wait()})).catch((function(e){var t=Object(J.a)(e),r="";Object(J.d)(t)?r="Vault has been shut down, please try again later!":Object(J.b)(t)?r="Vault is in adjustment status, please try again later!":Object(J.i)(t)?r="Vault is in rebase status, please try again later!":Object(J.c)(t)?r="Vault is in distributing, please try again later!":Object(J.f)(t)&&(r="Deposit Amount must be greater than ".concat(Object(K.b)(d,q.a,2),"ETH!")),r&&y(Object(Y.b)({open:!0,type:"error",message:r})),B(!1)}));case 29:O(""),B(!1),y(Object(Y.b)({open:!0,type:"success",message:"Success"})),e.next=39;break;case 34:e.prev=34,e.t0=e.catch(1),console.log("error",e.t0),B(!1),y(Object(Y.b)({open:!0,type:"error",message:"Deposit failed"}));case 39:case"end":return e.stop()}}),e,null,[[1,34]])})));return function(){return e.apply(this,arguments)}}(),z=!D()(i),W=function(){var e=m,t=p;if(""!==x&&"-"!==x&&"0"!==x&&!D()(x.replace(/ /g,""))){if(isNaN(Number(x)))return!1;var r=H()(x),n=r.multipliedBy(ee.from(10).pow(t).toString());return!n.lte(0)&&(-1===r.multipliedBy(ee.from(10).pow(t).toString()).toFixed().indexOf(".")&&!e.lt(ee.from(n.toFixed())))}}(),G=v?v.toString()/1e4:0;return o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,{classes:{root:b.depositContainer}},o.a.createElement("p",{className:b.estimateText},"From"),o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12,className:b.tokenInputWrapper},o.a.createElement(s.a,null,o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("div",{className:b.inputLabelWrapper},o.a.createElement("div",{className:b.tokenInfo},o.a.createElement("img",{className:b.tokenLogo,alt:"",src:"./images/".concat(g,".png")}),o.a.createElement("span",{className:b.tokenName},h)),o.a.createElement(C.a,{classes:{root:b.input},value:x,onChange:function(e){O(e.target.value)},placeholder:"deposit amount",maxEndAdornment:!0,onMaxClick:function(){var e=m;O(Object(K.a)(e.gt(0)?e:0,p,{showAll:!0}))},error:!V()(W)&&!W}))),o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("p",{className:b.estimateText,title:Object(K.a)(m,p,{showAll:!0})},"Balance:\xa0\xa0",o.a.createElement(j.a,{loading:f},Object(K.a)(m,p))))))),o.a.createElement(s.a,{className:b.estimateContainer},o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("p",{className:b.estimateText},"To")),o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("div",{className:b.estimateWrapper},o.a.createElement("span",null,h," VAULT"),o.a.createElement("span",{className:b.estimateBalanceNum},Number(x)*(1-G)))),o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("p",{className:b.balance,title:Object(K.a)(r,p,{showAll:!0})},"Balance:\xa0\xa0",o.a.createElement(j.a,{loading:f},Object(K.a)(r,p))))),o.a.createElement(s.a,null,o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("div",{className:b.footerContainer},o.a.createElement(_.a,{disabled:!z||z&&!W,color:"colorfull",onClick:M,style:{width:"100%"}},"Deposit",o.a.createElement(I.a,{classes:{tooltip:b.tooltip},placement:"top",title:"".concat(100*G,"% manage fee of the principal.")},o.a.createElement(R.a,{style:{marginLeft:"0.5rem"}})))))),o.a.createElement(S.a,{className:b.modal,open:P,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},o.a.createElement(N.a,{elevation:3,className:b.depositModal},o.a.createElement("div",{className:b.modalBody},o.a.createElement(T.a,{color:"inherit"}),o.a.createElement("div",{style:{marginTop:"1rem"}},"On Deposit...")))))}var ne=r(1304),ae=r(967),oe=r.n(ae),ie=r(918),ce=r(919),le=r(920),se=r(921),ue=r(78),fe=r.n(ue),de=function(){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},modalBody:{textAlign:"center"},withdrawContainer:{padding:"2.6875rem 2.25rem",border:"1px solid #A68EFD",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem"},outputContainer:{padding:"2.6875rem 2.25rem",border:"1px solid #A68EFD",marginTop:"0.5rem",borderBottomLeftRadius:"1rem",borderBottomRightRadius:"1rem"},estimateText:{height:"1.25rem",color:"#A0A0A0",margin:0,display:"flex",marginTop:"0.5rem",alignItems:"center"},input:{maxWidth:"14rem"},footerContainer:{marginTop:"2.5rem"},inputLabelWrapper:{display:"flex",justifyContent:"space-between",alignItems:"center"},tokenInfo:{display:"flex",alignItems:"center"},tokenName:{fontSize:"1.625rem"},widthdrawLoadingPaper:{padding:"1rem",maxWidth:"500px",color:"rgba(255, 255, 255, 0.87)",border:"1px solid #A68EFE",backgroundColor:"#000",borderRadius:"1rem",width:"100%"},estimateWrapper:{display:"flex",marginTop:"1rem",justifyContent:"space-between",fontSize:"1.625rem"},estimateBalanceNum:{color:"#A0A0A0"},setting:{position:"absolute",right:"1rem",top:"1rem",cursor:"pointer"},root:{padding:"1.5rem 0"}}};function me(){me=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),i=new O(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return L()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=w(i,r);if(c){if(c===u)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,i),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var u={};function f(){}function d(){}function m(){}var p={};c(p,a,(function(){return this}));var h=Object.getPrototypeOf,g=h&&h(h(j([])));g&&g!==t&&r.call(g,a)&&(p=g);var v=m.prototype=f.prototype=Object.create(p);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var n;this._invoke=function(a,o){function i(){return new t((function(n,i){!function n(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(a,o,n,i)}))}return n=n?n.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return d.prototype=m,c(v,"constructor",m),c(m,"constructor",d),d.displayName=c(m,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(y.prototype),c(y.prototype,o,(function(){return this})),e.AsyncIterator=y,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new y(l(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,a,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=j,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var pe=z.b,he=W.a,ge=Object(l.a)(de),ve=[{title:"Shares Validation"},{title:"Gas Estimates"},{title:"Withdraw"}];function be(e){var t=e.userProvider,r=e.VAULT_ADDRESS,i=e.VAULT_ABI,c=e.isBalanceLoading,l=e.reloadBalance,f=e.estimatedTotalAssets,d=e.wantTokenDecimals,m=e.wantTokenSymbol,p=ge(),h=Object(A.b)(),g=Object(a.useState)(""),v=Object(n.a)(g,2),b=v[0],y=v[1],w=Object(a.useState)(!1),E=Object(n.a)(w,2),x=E[0],O=E[1],L=Object(a.useState)(0),I=Object(n.a)(L,2),F=I[0],R=I[1],P=Object(a.useState)({}),B=Object(n.a)(P,2),M=B[0],z=B[1],W=function(){var e=Object(k.a)(me().mark((function e(){var n,a,o,c,l,s,u,p,g,v,w,E,x,j,L;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O(!0),console.log("----------start withdraw----------"),G()){e.next=4;break}return e.abrupt("return",z({type:"warning",message:"Please enter the correct value."}));case 4:if(R(1),n=new pe(r,i,t),a=t.getSigner(),e.prev=7,o=n.connect(a),R(2),l=he.from(b).mul(he.from(10).pow(d)),!U()(Q.o)||1===Q.o){e.next=23;break}return e.next=14,o.estimateGas.redeem(l,f);case 14:return s=e.sent,R(3),u=Math.ceil(s*Q.o),p=u<Q.m?u:Q.m,e.next=20,o.redeem(l,f,{gasLimit:p});case 20:c=e.sent,e.next=26;break;case 23:return e.next=25,o.redeem(l,f);case 25:c=e.sent;case 26:return e.next=28,c.wait();case 28:g=e.sent,v=g.events,w=[],E=v.length-1;case 32:if(!(E>=0)){e.next=39;break}if("Redeem"!==v[E].event){e.next=36;break}return w=v[E].args,e.abrupt("break",39);case 36:E--,e.next=32;break;case 39:console.log("args",w),x=w._redeemAmount,console.log("_redeemAmount",x.toString()),R(4),y(""),h(Object(Y.b)({open:!0,type:"success",message:"Withdraw ".concat(Object(K.a)(x,d)," ").concat(m)})),e.next=54;break;case 47:e.prev=47,e.t0=e.catch(7),console.log("withdraw original error :",e.t0),j=Object(J.a)(e.t0),L="",L=Object(J.d)(j)?"Vault has been shut down, please try again later!":Object(J.b)(j)?"Vault is in adjustment status, please try again later!":Object(J.i)(j)?"Vault is in rebase status, please try again later!":Object(J.h)(j)?"Failed to withdraw, please increase the Max Loss!":Object(J.g)(j)?"Failed to exchange, please increase the exchange slippage!":Object(J.e)(j)?"Failed to exchange, Please try again later!":"Withdraw failed",h(Object(Y.b)({open:!0,type:"error",message:L}));case 54:setTimeout((function(){O(!1),z({}),R(0)}),2e3);case 55:case"end":return e.stop()}}),e,null,[[7,47]])})));return function(){return e.apply(this,arguments)}}(),G=function(){if(""!==b&&"-"!==b&&!D()(b.replace(/ /g,""))){if(isNaN(Number(b)))return!1;var e=H()(b),t=e.multipliedBy(he.from(10).pow(d).toString());return!t.lte(0)&&(-1===e.multipliedBy(he.from(10).pow(d).toString()).toFixed().indexOf(".")&&!f.lt(he.from(t.toFixed())))}},q=function(){var e=Object(k.a)(me().mark((function e(){var t,r,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:t=e.sent,r=Object(n.a)(t,1),a=r[0],y(Object(K.a)(a,d,{showAll:!0}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=G(),Z=!D()(t);return o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,{className:p.withdrawContainer},o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("p",{className:p.estimateText},"From")),o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("div",{className:p.inputLabelWrapper},o.a.createElement("div",{className:p.tokenInfo},o.a.createElement("span",{className:p.tokenName},m," VAULT")),o.a.createElement(C.a,{classes:{root:p.input},value:b,placeholder:"withdraw amount",maxEndAdornment:!0,onMaxClick:function(){return q()},onChange:function(e){try{y(e.target.value)}catch(t){y("")}},error:!V()(X)&&!X&&"0"!==b}))),o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("p",{className:p.estimateText,title:Object(K.a)(f,d,{showAll:!0})},"Balance:\xa0",o.a.createElement(j.a,{loading:c},Object(K.a)(f,d))))),o.a.createElement(s.a,{className:p.outputContainer},o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("p",{className:p.estimateText},"To")),o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("div",{className:p.estimateWrapper},o.a.createElement("span",null,m),o.a.createElement("span",{className:p.estimateBalanceNum},b)))),o.a.createElement(s.a,null,o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("div",{className:p.footerContainer},o.a.createElement(_.a,{disabled:!Z||Z&&(V()(X)||!X),color:"colorfull",onClick:W,style:{width:"100%",padding:"12px 16px"}},"Withdraw")))),o.a.createElement(S.a,{className:p.modal,open:x,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},o.a.createElement(N.a,{elevation:3,className:p.widthdrawLoadingPaper},o.a.createElement("div",{className:p.modalBody},D()(M)&&o.a.createElement(T.a,{color:"inherit"}),D()(M)?o.a.createElement("p",null,"In Withdrawing..."):o.a.createElement("p",null,"Withdraw Error !"),o.a.createElement(ie.a,{classes:{root:p.root},alternativeLabel:!0,activeStep:F,connector:o.a.createElement(se.a,null)},fe()(ve,(function(e,t){return o.a.createElement(ne.a,{key:t},o.a.createElement(ce.a,{StepIconComponent:le.a},e.title))}))),!D()(M)&&o.a.createElement("p",{style:{color:"error"===M.type?"red":"yellow"}},o.a.createElement(oe.a,{style:{verticalAlign:"bottom"}}),"\xa0\xa0\xa0",M.message),o.a.createElement(_.a,{color:"danger",onClick:function(){O(!1),z({}),R(0)}},"Cancel")))))}var ye=r(1040),we=r(1043),Ee=r(184),xe=r(294),Oe=r(299),je=r(987),Le=r(292),ke=r(976),Ae=r(18),Te=r(21),Se=r(19),Ne=r(914),Ce=function(e){var t;return{container:Object(Te.a)({zIndex:"12",color:"#FFFFFF",marginTop:"1rem",marginBottom:100},Se.b),center:(t={justifyContent:"center",padding:"50px 72px 50px",backgroundColor:"#0c0735cc"},Object(Ae.a)(t,e.breakpoints.down("md"),{padding:"50px 16px 50px"}),Object(Ae.a)(t,"margin",0),t),wrapper:{padding:"5rem 3rem",borderRadius:"1.25rem",background:"linear-gradient(111.68deg, rgba(87, 97, 125, 0.2) 7.59%, rgba(255, 255, 255, 0.078) 102.04%)"},wrapperMobile:{padding:"3rem 2rem",borderRadius:"1.25rem",background:"linear-gradient(111.68deg, rgba(87, 97, 125, 0.2) 7.59%, rgba(255, 255, 255, 0.078) 102.04%)"},deposit:{padding:"1rem",border:"1px solid #F4ACF3",borderTopLeftRadius:"1.25rem",borderTopRightRadius:"1.25rem"},balance:{marginTop:"0.5rem",marginBottom:"2rem",padding:"1rem",border:"1px solid #F4ACF3",borderBottomLeftRadius:"1.25rem",borderBottomRightRadius:"1.25rem"},symbol:Object(Te.a)({color:"#A68EFD",marginLeft:"1rem"},Ne.a),footer:{},item:{color:"#fff",marginBottom:20,"& .MuiListItemIcon-root":{minWidth:"38px"}},centerItem:{width:"630px"},balanceCard:{position:"relative",display:"flex",alignItems:"center",justifyContent:"flex-start",margin:"0 0 1rem 0",textAlign:"left",padding:"2.8125rem 2.4375rem",background:"#323338",color:"#fff",borderRadius:"1.25rem"},check:{color:"#A68EFE"},balanceCardValue:{display:"flex",alignItems:"center",justifyContent:"flex-start",height:30,lineHeight:"30px",fontSize:26,fontWeight:"bold",color:"#fff",marginBottom:8},balanceCardLabel:{color:"#b2add1",fontSize:14},tokenInfo:{display:"flex",position:"absolute",right:12,top:9},addTokenIcon:{cursor:"pointer",marginLeft:"1rem",display:"flex"},scanToken:{width:24,height:"auto",cursor:"pointer",borderRadius:"50%",backgroundColor:"#fff"},hidden:{display:"none"},brand:{color:"#FFFFFF",textAlign:"left"},title:{fontSize:"4.2rem",fontWeight:"600",display:"inline-block",position:"relative"},subtitle:{fontSize:"1.313rem",width:"auto",margin:"10px 0 0"},main:{position:"relative",backgroundColor:"transparent"},mainRaised:{margin:"0 auto",marginTop:65},link:{textDecoration:"none"},textCenter:{textAlign:"center"},switchBar:{backgroundColor:"#91d5ff !important"},img:{width:"25px"},radioUnchecked:{width:"0px",height:"0px",padding:"7px",border:"1px solid #fff",borderRadius:"50%"},radioChecked:{width:"16px",height:"16px",border:"1px solid #fff",borderRadius:"50%"},radioRoot:{padding:"12px","&:hover":{backgroundColor:"unset"}},radio:{color:"#fff !important"},investCard:{padding:"20px 24px",borderRadius:6,backgroundColor:"rgba(39, 31, 114, 0.8)",overflow:"visible"},table:{backgroundColor:"#150752",border:"1px solid rgb(222, 217, 213)"},tableCell:{color:"#fff",fontSize:"12px",letterSpacing:"0.01071em"},switchBase:{color:"#ddd"},switchChecked:{color:"#40a9ff"},modal:{display:"flex",alignItems:"center",justifyContent:"center","& .MuiPaper-root":{minWidth:430,minHeight:120,padding:"32px 24px",fontSize:16,border:0,color:"#fff",boxShadow:"0px 15px 15px rgba(0, 0, 0, 0.05)",borderRadius:"20px",background:"#292B2E",outline:0,width:"550px"}},modalBody:{textAlign:"center"},stepContainer:{padding:20},stepItem:{color:"#fff"},tabsRoot:{padding:"0 20px"},tabsIndicator:{backgroundColor:"transparent",display:"flex",justifyContent:"center","& > span":{maxWidth:120,width:"100%",backgroundColor:"#fff"}},tabTextColor:{color:"#fff"},tabRoot:{width:"50%",fontSize:"16px",maxWidth:"none"},detailWrapper:{margin:"42px 0 0 0"},slider:{position:"absolute",top:"50px",left:"calc(50% - 33rem)",backgroundColor:"#271f72",color:"azure"},text:{color:"azure"},spliter:{display:"flex",justifyContent:"center",bottom:0,height:2,position:"absolute",transition:"all 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",width:"54%",backgroundColor:"#fff"}}},_e=Object(l.a)(Ce),Ie=W.a,Fe=[xe.c];t.default=Object(je.a)((function(e){var t=_e(),r=Object(A.b)(),i=Object(L.a)("(max-width: 960px)"),l=e.address,d=e.userProvider,b=e.VAULT_FACTORY_ADDRESS,w=e.VAULT_FACTORY_ABI,x=e.UNISWAPV3_RISK_ON_VAULT,k=e.UNISWAPV3_RISK_ON_HELPER,T=Object(a.useState)(!1),C=Object(n.a)(T,2),_=C[0],I=C[1],F=Object(a.useState)(),R=Object(n.a)(F,2),P=R[0],V=R[1],B=Object(a.useState)(),M=Object(n.a)(B,2),U=M[0],W=M[1],G=Object(a.useState)(Ie.from(0)),H=Object(n.a)(G,2),Y=H[0],J=H[1],q=Object(a.useState)(0),X=Object(n.a)(q,2),Z=X[0],$=X[1],ee=Object(a.useState)(""),te=Object(n.a)(ee,2),ne=te[0],ae=te[1],oe=Object(a.useState)(!0),ie=Object(n.a)(oe,2),ce=ie[0],le=ie[1],se=Object(A.c)((function(e){return e.investReducer.currentTab})),ue=function(e){ve(),r(Object(Ee.b)(e))},fe=Object(ke.a)(b,w,P,x,k,d).baseInfo,de=fe.netMarketMakingAmount,me=fe.estimatedTotalAssets,pe=fe.manageFeeBps,he=fe.minimumInvestmentAmount,ge=Object(a.useCallback)((function(){Object(Le.a)(U,ne,Z)}),[U,ne,Z]),ve=Object(a.useCallback)((function(){if(!D()(U)&&!D()(P)){I(!0);var e=new z.b(U,Q.i,d);return Promise.all([e.balanceOf(l),e.decimals(),e.symbol()]).then((function(e){var t=Object(n.a)(e,3),r=t[0],a=t[1],o=t[2];J(r),$(a),ae(o)})).finally((function(){setTimeout((function(){I(!1)}),500)})),ve}}),[U,P,l,d]);return Object(a.useEffect)((function(){setInterval(ve,3e3)}),[ve]),o.a.createElement("div",{className:t.container},o.a.createElement(s.a,{spacing:0},o.a.createElement(u.a,{xs:2,sm:2,md:3,style:{paddingLeft:"2rem"}},o.a.createElement(p.a,null,o.a.createElement(h.a,{key:"My Account",button:!0,className:c()(t.item),onClick:function(){return ue(Oe.a.account)}},o.a.createElement(g.a,null,o.a.createElement(y.a,{style:{color:se===Oe.a.account?"#A68EFE":"#fff"}})),!i&&o.a.createElement(v.a,{primary:"My Account",className:c()(se===Oe.a.account?t.check:t.text)})),o.a.createElement(h.a,{key:"Deposit",button:!0,className:c()(t.item,se===Oe.a.deposit&&t.check),onClick:function(){return ue(Oe.a.deposit)}},o.a.createElement(g.a,null,o.a.createElement(E.a,{style:{color:se===Oe.a.deposit?"#A68EFE":"#fff"}})),!i&&o.a.createElement(v.a,{primary:"Deposit",className:c()(se===Oe.a.deposit?t.check:t.text)})),o.a.createElement(h.a,{key:"Withdraw",button:!0,className:c()(t.item),onClick:function(){return ue(Oe.a.withdraw)}},o.a.createElement(g.a,null,o.a.createElement(O.a,{style:{color:se===Oe.a.withdraw?"#A68EFE":"#fff"}})),!i&&o.a.createElement(v.a,{primary:"Withdraw",className:c()(se===Oe.a.withdraw?t.check:t.text)})))),se===Oe.a.deposit&&o.a.createElement(u.a,{xs:9,sm:9,md:6},o.a.createElement("div",{className:i?t.wrapperMobile:t.wrapper},o.a.createElement(re,{address:l,estimatedTotalAssets:me,wantTokenBalance:Y,wantTokenDecimals:Z,userProvider:d,wantTokenSymbol:ne,wantTokenForVault:U,VAULT_ADDRESS:P,VAULT_ABI:x,isBalanceLoading:_,minimumInvestmentAmount:he,manageFeeBps:pe,modalOpenHandle:function(){return le(!0)}}))),se===Oe.a.withdraw&&o.a.createElement(u.a,{xs:9,sm:9,md:6},o.a.createElement("div",{className:i?t.wrapperMobile:t.wrapper},o.a.createElement(be,{address:l,userProvider:d,estimatedTotalAssets:me,wantTokenDecimals:Z,wantTokenSymbol:ne,VAULT_ADDRESS:P,VAULT_ABI:x,isBalanceLoading:_,reloadBalance:ve,modalOpenHandle:function(){return le(!0)}}))),se===Oe.a.account&&o.a.createElement(u.a,{xs:9,sm:9,md:9},o.a.createElement("div",{className:i?t.wrapperMobile:t.wrapper,style:{background:"none",paddingTop:"1rem",paddingLeft:0}},o.a.createElement(f.a,{className:t.balanceCard},o.a.createElement("div",{className:t.balanceCardItem},o.a.createElement("div",{className:t.balanceCardValue},o.a.createElement("span",{title:Object(K.a)(de,Z,{showAll:!0})},o.a.createElement(j.a,{loading:_},Object(K.a)(de,Z))),o.a.createElement("span",{className:t.symbol},o.a.createElement(j.a,{loading:D()(ne)&&_},ne)),d&&o.a.createElement("span",{title:"Add token address to wallet"},o.a.createElement(m.a,{className:t.addTokenIcon,onClick:ge,fontSize:"small"}))),o.a.createElement("div",{className:t.balanceCardLabel},"AVAILABLE BALANCE"))),!D()(l)&&!D()(P)&&o.a.createElement(ye.a,{userProvider:d,VAULT_FACTORY_ABI:w,personalVaultAddress:P,wantTokenSymbol:ne,VAULT_FACTORY_ADDRESS:b,UNISWAPV3_RISK_ON_VAULT:x,UNISWAPV3_RISK_ON_HELPER:k}))),o.a.createElement(S.a,{className:t.modal,open:ce,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},o.a.createElement(N.a,{elevation:3},o.a.createElement(we.a,{tokens:Fe,address:l,userProvider:d,VAULT_FACTORY_ADDRESS:b,VAULT_FACTORY_ABI:w,vaultChangeHandle:function(e,t){le(!1),V(e),W(t)},modalCloseHandle:function(){return le(!1)}})))))}),"usdr")},976:function(e,t,r){"use strict";var n=r(10),a=r(62),o=r(0),i=r(172),c=r(17),l=r(107),s=r.n(l),u=r(296),f=r(32);function d(){d=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(A){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),i=new j(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return k()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=E(i,r);if(c){if(c===u)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,i),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(A){return{type:"throw",arg:A}}}e.wrap=l;var u={};function f(){}function m(){}function p(){}var h={};c(h,a,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(L([])));v&&v!==t&&r.call(v,a)&&(h=v);var b=p.prototype=f.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var n;this._invoke=function(a,o){function i(){return new t((function(n,i){!function n(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(a,o,n,i)}))}return n=n?n.then(i,i):i()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function L(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=p,c(b,"constructor",p),c(p,"constructor",m),m.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(w.prototype),c(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new w(l(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),c(b,i,"Generator"),c(b,a,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=L,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:L(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var m=i.b,p=c.a;t.a=function(e,t,r,i,c,l){var h=Object(o.useState)(),g=Object(a.a)(h,2),v=g[0],b=g[1],y=Object(o.useState)(!1),w=Object(a.a)(y,2),E=w[0],x=w[1],O=Object(o.useState)({}),j=Object(a.a)(O,2),L=j[0],k=j[1],A=Object(u.a)(l),T=function(){return s()(r)?new Error("VAULT_ADDRESS is need!"):s()(i)?new Error("VAULT_ABI is need!"):s()(l)?new Error("userProvider is need!"):void 0},S=function(){var o=T();if(o)return b(o);x(!0),new m(e,t,l).uniswapV3RiskOnHelper().then((function(e){var t=new m(r,i,l),o=new m(e,c,l);return Promise.all([t.borrowToken().then(function(){var e=Object(n.a)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new m(t,f.i,l),e.t0=t,e.next=4,r.symbol();case 4:return e.t1=e.sent,e.t2=p.from(10),e.next=8,r.decimals();case 8:return e.t3=e.sent,e.t4=e.t2.pow.call(e.t2,e.t3),e.abrupt("return",{borrowToken:e.t0,name:e.t1,borrowTokenDecimals:e.t4});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.wantToken().then(function(){var e=Object(n.a)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new m(t,f.i,l),e.t0=t,e.next=4,r.symbol();case 4:return e.t1=e.sent,e.t2=p.from(10),e.next=8,r.decimals();case 8:return e.t3=e.sent,e.t4=e.t2.pow.call(e.t2,e.t3),e.abrupt("return",{wantToken:e.t0,name:e.t1,wantTokenDecimals:e.t4});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())]).then((function(e){var n=Object(a.a)(e,2),i=n[0],c=n[1],l=i.borrowToken,s=c.wantToken;return Promise.all([t.netMarketMakingAmount(),o.getCurrentBorrow(l,2,r),o.getTotalCollateralTokenAmount(r,s),t.depositTo3rdPoolTotalAssets(),t.estimatedTotalAssets(),t.manageFeeBps()]).then((function(e){var t=Object(a.a)(e,6),r=t[0],n=t[1],u=t[2],f=t[3],d=t[4],m=t[5];return o.calcCanonicalAssetValue(l,n,s).then((function(e){var t={netMarketMakingAmount:r,currentBorrow:n,currentBorrowWithCanonical:e,depositTo3rdPoolTotalAssets:f,totalCollateralTokenAmount:u,estimatedTotalAssets:d,manageFeeBps:m,wantInfo:c,borrowInfo:i,result:f.add(u).sub(r).sub(e)};return k(t),t}))}))})).finally((function(){setTimeout((function(){x(!1)}),300)}))}))};return Object(o.useEffect)((function(){if(T())return x(!1),void b();S()}),[A,r,i,l]),{loading:E,error:v,baseInfo:L,queryBaseInfo:S}}}}]);
//# sourceMappingURL=13.a52f44fe.chunk.js.map