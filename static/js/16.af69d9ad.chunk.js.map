{"version":3,"sources":["../node_modules/echarts/lib/component/title/install.js","../node_modules/echarts/lib/component/dataZoom/SelectZoomModel.js","../node_modules/echarts/lib/component/dataZoom/SelectZoomView.js","../node_modules/echarts/lib/component/dataZoom/installDataZoomSelect.js","../node_modules/echarts/lib/component/toolbox/featureManager.js","../node_modules/echarts/lib/component/toolbox/ToolboxModel.js","../node_modules/echarts/lib/component/toolbox/ToolboxView.js","../node_modules/echarts/lib/component/toolbox/feature/SaveAsImage.js","../node_modules/echarts/lib/component/toolbox/feature/MagicType.js","../node_modules/echarts/lib/component/toolbox/feature/DataView.js","../node_modules/echarts/lib/component/dataZoom/history.js","../node_modules/echarts/lib/component/toolbox/feature/Restore.js","../node_modules/echarts/lib/component/helper/interactionMutex.js","../node_modules/echarts/lib/component/helper/BrushController.js","../node_modules/echarts/lib/component/helper/cursorHelper.js","../node_modules/echarts/lib/component/helper/brushHelper.js","../node_modules/echarts/lib/component/helper/BrushTargetManager.js","../node_modules/echarts/lib/component/toolbox/feature/DataZoom.js","../node_modules/echarts/lib/component/toolbox/install.js","../node_modules/echarts/lib/chart/bar/BaseBarSeries.js","../node_modules/echarts/lib/chart/bar/BarSeries.js","../node_modules/echarts/lib/util/shape/sausage.js","../node_modules/echarts/lib/label/sectorLabel.js","../node_modules/echarts/lib/chart/bar/BarView.js","../node_modules/echarts/lib/chart/bar/install.js"],"names":["TitleModel","_super","_this","apply","this","arguments","type","layoutMode","ignoreSize","__extends","defaultOption","z","show","text","target","subtext","subtarget","left","top","backgroundColor","borderColor","borderWidth","padding","itemGap","textStyle","fontSize","fontWeight","color","subtextStyle","ComponentModel","TitleView","prototype","render","titleModel","ecModel","api","group","removeAll","get","textStyleModel","getModel","subtextStyleModel","textAlign","textVerticalAlign","zrUtil","textEl","graphic","style","createTextStyle","fill","getTextColor","disableBox","z2","textRect","getBoundingRect","subText","subTextEl","y","height","verticalAlign","link","sublink","triggerEvent","silent","on","windowOpen","getECData","eventData","componentType","componentIndex","add","groupRect","layoutOption","getBoxLayoutParams","width","layoutRect","getLayoutRect","getWidth","getHeight","x","markRedraw","alignStyle","align","setStyle","margin","getItemStyle","rect","shape","r","subPixelOptimize","ComponentView","install","registers","registerComponentModel","registerComponentView","SelectDataZoomModel","DataZoomModel","SelectDataZoomView","DataZoomView","SelectZoomModel","SelectZoomView","installCommon","ToolboxFeature","features","registerFeature","name","ctor","getFeature","ToolboxModel","optionUpdated","option","feature","featureOpt","featureName","Feature","featureManager","getDefaultOption","orient","borderRadius","itemSize","showTitle","iconStyle","emphasis","tooltip","position","ToolboxView","toolboxModel","payload","isVertical","featureOpts","_features","featureNames","opt","push","DataDiffer","_featureNames","processFeature","update","remove","execute","listComponentHelper","eachChild","icon","titleText","__title","emphasisState","ensureState","emphasisTextConfig","textConfig","textContent","getTextContent","emphasisTextState","emphasisTextStyle","textContain","ZRText","makeFont","offsetX","needPutOnTop","topOffset","newIndex","oldIndex","oldName","featureModel","Model","newTitle","title","indexOf","isUserFeatureName","onclick","uid","getUID","model","isToolboxFeature","unusable","iconsMap","titlesMap","iconStyleModel","iconStyleEmphasisModel","icons","getIcons","titles","iconPaths","iconStr","iconName","path","ignore","setTextContent","el","componentModel","itemName","formatterParamsExtra","hoverStyle","defaultTextPosition","stroke","setTextConfig","enterEmphasis","leaveEmphasis","hide","createIconPaths","setIconStatus","status","iconStatus","dispose","updateView","SaveAsImage","isSvg","getZr","painter","getType","url","getConnectedDataURL","connectedBackgroundColor","excludeComponents","pixelRatio","browser","env","isFunction","MouseEvent","newEdge","ie","edge","$a","document","createElement","download","href","evt","view","defaultView","bubbles","cancelable","dispatchEvent","window","navigator","msSaveOrOpenBlob","parts","split","base64Encoded","bstr","decodeURIComponent","atob","filename","n","length","u8arr","Uint8Array","charCodeAt","blob","Blob","frame","body","appendChild","cw","contentWindow","doc","open","write","close","focus","execCommand","removeChild","lang","html","tab","getLocaleModel","radioTypes","MagicType","availableIcons","line","bar","stack","seriesIndex","seriesOptGenreator","newOption","series","radio","item","eachComponent","mainType","query","seriesModel","seriesType","subType","seriesId","id","newSeriesOpt","coordSys","coordinateSystem","categoryAxis","getAxesByScale","axisType","dim","axisIndex","getReferringComponents","SINGLE_REFERRING","models","i","boundaryGap","currentType","tiled","dispatchAction","data","markPoint","markLine","isStack","echarts","event","mergeOption","BLOCK_SPLITER","Array","join","assembleSeriesWithCategoryAxis","groups","tables","key","valueAxisDim","valueAxis","headers","concat","columns","getCategories","rawData","getRawData","mapArray","mapDimension","val","lines","items","j","trim","str","replace","itemSplitRegex","RegExp","parseContents","blockMetaList","blocks","block","idx","slice","isTSVFormat","result","tsv","tsvLines","shift","categories","header","parseTSVContents","blockMeta","axisKey","axisDim","seriesName","name_1","value","hasName","isNaN","parseListContents","DataView","setTimeout","container","getDom","_dom","root","cssText","innerHTML","viewMain","textarea","optionToContent","contentToOption","seriesGroupByCategoryAxis","otherSeries","meta","eachRawSeries","baseAxis","getBaseAxis","index","getOtherAxis","other","groupSeries","vals","each","dimensions","argLen","dataIndex","getName","getContentFromModel","htmlOrDom","getOption","readOnly","buttonContainer","buttonStyle","closeButton","refreshButton","self","addEventListener","e","Error","clientHeight","textColor","textareaColor","textareaBorderColor","buttonColor","buttonTextColor","tryMergeDataOption","newData","originalData","newVal","original","shouldDeleteName","newSeriesOptList","seriesOpt","getSeriesByName","inner","makeInner","getStoreSnapshots","store","snapshots","RestoreOption","history","from","resetOption","ATTR","getStore","zr","noop","mathMin","Math","min","mathMax","max","mathPow","pow","DIRECTION_MAP","w","s","CURSOR_MAP","ne","sw","nw","se","DEFAULT_BRUSH_OPT","brushStyle","lineWidth","transformable","brushMode","removeOnClick","baseUID","BrushController","call","_track","_covers","_handlers","_zr","_uid","pointerHandlers","handler","eventName","bind","enableBrush","brushOption","_brushType","_doDisableBrush","brushType","_doEnableBrush","_enableGlobalPan","resourceKey","userKey","interactionMutex","_brushOption","merge","clone","off","setPanels","panelOpts","panels_1","_panels","panelId","mount","enableGlobalPan","thisGroup","attr","rotation","scaleX","scaleY","_transform","getLocalTransform","updateCovers","coverConfigList","map","coverConfig","oldCovers","newCovers","controller","creatingCover","_creatingCover","cover","getKey","__brushOption","addOrUpdate","newBrushInternal","endCreating","createCover","updateCoverAfterCreation","unmount","clearCovers","Eventful","coverRenderers","updateZ","coverRenderer","getCoverRenderer","updateCoverShape","range","traverse","updateCommon","getPanelByPoint","localCursorPoint","panel","panels","transform","pn","isTargetByCursor","getPanelByCover","covers","originalLength","trigger","areas","isEnd","getTrackEnds","track","tail","createBaseRectCover","rectRangeConverter","edgeNameSequences","makeStyle","draggable","cursor","drift","curry","driftRect","ondragend","nameSequence","opacity","invisible","updateBaseRect","localRange","handleSize","xa","ya","x2","y2","x2a","y2a","widtha","heighta","updateRectShape","mainEl","childAt","useStyle","childOfName","globalDir","getGlobalDirection1","localDirNameSeq","reverse","getGlobalDirection2","h","setShape","points","xmin","ymin","xmax","ymax","pointsToRect","clipByPanel","defaults","strokeNoScale","formatRectRange","localDirName","right","bottom","getTransform","dirNameSequence","dx","dy","rectRange","toRectRange","localDelta","toLocalDelta","dirName","ind","fromRectRange","driftPolygon","point","localD","transformCoordToLocal","localZero","clipPath","preventDefault","rawE","mainShapeContain","contain","updateCoverByMouse","eventParams","_creatingPanel","thisBrushOption","p2","p1","shouldShowCover","determineBrushType","getCreatingRange","defaultBrushType","mousedown","_dragging","handleDragEnd","offsetY","mousemove","isOutsideZrArea","currPanel","setCursorStyle","resetCursor","mouseup","lineX","getLineRenderer","lineY","returnInput","localTrack","ends","polygon","xyIndex","otherExtent","getLinearBrushOtherExtent","IRRELEVANT_EXCLUDES","makeRectPanelClipPath","normalizeRect","localPoints","graphicUtil","makeLinearBrushOtherExtent","specifiedXYIndex","brushWidth","base","makeRectIsTargetByCursor","targetModel","boundingRect","targetCoordSysModel","getComponentByElement","topTarget","hasOwnProperty","onIrrelevantElement","BoundingRect","create","INCLUDE_FINDER_MAIN_TYPES","BrushTargetManager","finder","_targetInfoList","foundCpts","parseFinder","targetInfoBuilders","builder","include","setOutputRanges","matchOutputRanges","area","coordRange","coordRanges","coordConvert","__rangeOffset","offset","diffProcessor","values","xyMinMax","cb","targetInfo","findTargetInfo","coordSyses","setInputRanges","rangeOffset","xyMinMaxCurr","xyMinMaxOrigin","sizeCurr","getSize","sizeOrigin","scales","getScales","makePanelOpts","getDefaultBrushType","getPanelRect","brushHelper","coordSysModel","controlSeries","targetInfoList","areaPanelId","targetInfoMatchers","formatMinMax","minMax","modelUtilParseFinder","includeMainTypes","grid","xAxisModels","yAxisModels","gridModels","gridModelMap","createHashMap","xAxesHas","yAxesHas","axisModel","gridModel","axis","set","cartesians","getCartesians","cartesian","getAxis","panelRectBuilders","xAxisDeclared","yAxisDeclared","geo","geoModels","geoModel","xAxisModel","yAxisModel","master","getRect","applyTransform","axisConvert","to","rangeOrCoordRange","clamp","xminymin","pointToData","dataToPoint","xmaxymax","Infinity","p","axisNameIndex","coordToData","toLocalCoord","toGlobalCoord","dataToCoord","NaN","axisDiffProcessor","refer","DATA_ZOOM_ID_BASE","makeInternalComponentId","DataZoomFeature","_brushController","_onBrush","zoomActive","_isZoomActive","dataZoomSelectActive","makeAxisFinder","updateZoomBtnStatus","updateBackBtnStatus","handlers","eventParam","snapshot","setBatch","newSnapshot","storedSnapshots","batchItem","dataZoomId","dataZoomModel","queryComponents","percentRange","getPercentRange","start","end","_dispatchZoomAction","dimName","found","dzModel","getAxisModel","findDataZoom","minMaxSpan","findRepresentativeAxisProxy","getMinMaxSpan","minValueSpan","maxValueSpan","sliderMove","scale","getExtent","startValue","endValue","batch","filterMode","zoom","back","nextActive","head","pop","dzFeatureModel","setting","xAxisIndex","yAxisIndex","xAxisId","yAxisId","registerInternalOptionCreator","getComponent","featureDataZoomPath","dzOptions","finderResult","buildInternalOptions","axisMainType","axisIndexPropName","newOpt","$fromToolbox","DataZoom","Restore","use","installDataZoomSelect","BaseBarSeriesModel","getInitialData","createSeriesData","useEncodeDefaulter","getMarkerPosition","clampData","pt","getData","getLayout","size","isHorizontal","legendHoverLink","barMinHeight","barMinAngle","large","largeThreshold","progressive","progressiveChunkMode","SeriesModel","registerClass","BarSeriesModel","createInvertedIndices","getProgressive","getProgressiveThreshold","progressiveThreshold","brushSelector","selectors","getItemLayout","dependencies","inheritDefaultOption","clip","roundCap","showBackground","backgroundStyle","borderType","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","select","itemStyle","realtimeSort","SausageShape","cx","cy","r0","startAngle","endAngle","PI","clockwise","SausagePath","opts","getDefaultShape","buildPath","ctx","dr","rCenter","PI2","lessThanCircle","unitStartX","cos","unitStartY","sin","unitEndX","unitEndY","moveTo","arc","Path","adjustAngleDistanceX","angle","distance","adjustAngleDistanceY","BarView","_isFirstFrame","_model","_removeOnRenderedListener","_updateDrawMode","coordinateSystemType","_progressiveEls","_isLargeDraw","_renderLarge","_renderNormal","incrementalPrepareRender","_clear","_updateLargeClip","incrementalRender","params","_incrementalRenderLarge","eachRendered","traverseElements","isLargeDraw","pipelineContext","isHorizontalOrRadial","oldData","_data","coord","animationModel","isAnimationEnabled","realtimeSortCfg","realtimeSortOption","process","otherAxis","shouldRealtimeSort","_enableRealtimeSort","needsClip","coordSysClipArea","getArea","isCoordinateSystemType","onBand","expandWidth","getClipArea","removeClipPath","drawBackground","backgroundModel","barBorderRadius","bgEls","oldBgEls","_backgroundEls","isInitSort","isChangeOrder","createBackground","bgLayout","bgEl","layout","Sector","Rect","createBackgroundShape","createBackgroundEl","diff","itemModel","getItemModel","hasValue","isValidLayout","isClipped","elementCreator","forceLabelAnimation","updateStyle","updateRealtimeAnimation","initProps","setItemGraphicEl","updateProps","getItemGraphicEl","saveOldStyle","labelInnerStore","labelInner","prevValue","removeElementWithFadeOut","bgGroup","_backgroundGroup","Group","createLarge","_removeBackground","createClipPath","setClipPath","count","_dispatchInitSort","orderMapping_1","abs","_onRendered","_updateSortWithinSameData","_dataSort","orderMapping","info","ordinalNumber","dataIdx","mappedValue","sort","a","b","ordinalNumbers","_isOrderChangedWithinSameData","ordinalDataDim","lastValue","Number","MAX_VALUE","tickNum","len","getOrdinalMeta","rawIdx","rawIndexOf","getRawOrdinalNumber","MIN_VALUE","indexOfRawIndex","_isOrderDifferentInView","orderInfo","extent","tickMax","sortInfo","axisId","sortResult","eachItemGraphicEl","ChartView","cartesian2d","coordSysBoundingRect","signWidth","signHeight","coordSysX2","coordSysY2","xClipped","yClipped","polar","signR","tmp","clipped","isUpdate","extend","__dataIndex","isRadial","ShapeClass","Sausage","sector","positionMap","createPolarPositionMapping","calculateTextPosition","positionMapping","isRoundCap","out","textPosition","mappedSectorPosition","middleR","middleAngle","extraDist","mathCos","mathSin","createSectorCalculateTextPosition","animateProperty","animateTarget","seriesAnimationModel","seriesTarget","axisTarget","axisAnimationModel","checkPropertiesNotValid","obj","props","isFinite","rectPropties","polarPropties","fixedLineWidth","rawLayout","getLineWidth","signX","signY","arcOrAngle","isPolar","getItemVisual","cursorStyle","getShallow","labelPositionOutside","labelStatesModels","getLabelStatesModels","setLabelStyle","labelFetcher","labelDataIndex","defaultText","getDefaultLabel","inheritColor","defaultOpacity","defaultOutsidePosition","label","inside","rotateType","isNumber","isArray","anchorAngle","rotate","setSectorTextRotation","setLabelValueAnimation","getRawValue","getDefaultInterpolatedLabel","emphasisModel","toggleHoverEmphasis","setStatesStylesFromModel","isZeroOnPolar","states","state","LagePathShape","LargePath","baseDimIdx","valueDimIdx","startPoint","barWidth","progressiveEls","incremental","largeDataIndices","bgPoints","ignoreCoarsePointer","getVisual","largePathUpdateDataIndex","throttle","largePath","ii","largePathFindDataIndex","rectShape","coordLayout","sectorShape","registerChartView","registerSeriesModel","BarSeries","registerLayout","PRIORITY","VISUAL","LAYOUT","PROGRESSIVE_LAYOUT","createProgressiveLayout","registerProcessor","PROCESSOR","STATISTIC","dataSample","registerAction","setCategorySortInfo"],"mappings":"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","file":"static/js/16.af69d9ad.chunk.js","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport { getLayoutRect } from '../../util/layout.js';\nimport ComponentModel from '../../model/Component.js';\nimport ComponentView from '../../view/Component.js';\nimport { windowOpen } from '../../util/format.js';\n\nvar TitleModel =\n/** @class */\nfunction (_super) {\n  __extends(TitleModel, _super);\n\n  function TitleModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TitleModel.type;\n    _this.layoutMode = {\n      type: 'box',\n      ignoreSize: true\n    };\n    return _this;\n  }\n\n  TitleModel.type = 'title';\n  TitleModel.defaultOption = {\n    // zlevel: 0,\n    z: 6,\n    show: true,\n    text: '',\n    target: 'blank',\n    subtext: '',\n    subtarget: 'blank',\n    left: 0,\n    top: 0,\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    borderWidth: 0,\n    padding: 5,\n    itemGap: 10,\n    textStyle: {\n      fontSize: 18,\n      fontWeight: 'bold',\n      color: '#464646'\n    },\n    subtextStyle: {\n      fontSize: 12,\n      color: '#6E7079'\n    }\n  };\n  return TitleModel;\n}(ComponentModel); // View\n\n\nvar TitleView =\n/** @class */\nfunction (_super) {\n  __extends(TitleView, _super);\n\n  function TitleView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TitleView.type;\n    return _this;\n  }\n\n  TitleView.prototype.render = function (titleModel, ecModel, api) {\n    this.group.removeAll();\n\n    if (!titleModel.get('show')) {\n      return;\n    }\n\n    var group = this.group;\n    var textStyleModel = titleModel.getModel('textStyle');\n    var subtextStyleModel = titleModel.getModel('subtextStyle');\n    var textAlign = titleModel.get('textAlign');\n    var textVerticalAlign = zrUtil.retrieve2(titleModel.get('textBaseline'), titleModel.get('textVerticalAlign'));\n    var textEl = new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        text: titleModel.get('text'),\n        fill: textStyleModel.getTextColor()\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var textRect = textEl.getBoundingRect();\n    var subText = titleModel.get('subtext');\n    var subTextEl = new graphic.Text({\n      style: createTextStyle(subtextStyleModel, {\n        text: subText,\n        fill: subtextStyleModel.getTextColor(),\n        y: textRect.height + titleModel.get('itemGap'),\n        verticalAlign: 'top'\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var link = titleModel.get('link');\n    var sublink = titleModel.get('sublink');\n    var triggerEvent = titleModel.get('triggerEvent', true);\n    textEl.silent = !link && !triggerEvent;\n    subTextEl.silent = !sublink && !triggerEvent;\n\n    if (link) {\n      textEl.on('click', function () {\n        windowOpen(link, '_' + titleModel.get('target'));\n      });\n    }\n\n    if (sublink) {\n      subTextEl.on('click', function () {\n        windowOpen(sublink, '_' + titleModel.get('subtarget'));\n      });\n    }\n\n    getECData(textEl).eventData = getECData(subTextEl).eventData = triggerEvent ? {\n      componentType: 'title',\n      componentIndex: titleModel.componentIndex\n    } : null;\n    group.add(textEl);\n    subText && group.add(subTextEl); // If no subText, but add subTextEl, there will be an empty line.\n\n    var groupRect = group.getBoundingRect();\n    var layoutOption = titleModel.getBoxLayoutParams();\n    layoutOption.width = groupRect.width;\n    layoutOption.height = groupRect.height;\n    var layoutRect = getLayoutRect(layoutOption, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    }, titleModel.get('padding')); // Adjust text align based on position\n\n    if (!textAlign) {\n      // Align left if title is on the left. center and right is same\n      textAlign = titleModel.get('left') || titleModel.get('right'); // @ts-ignore\n\n      if (textAlign === 'middle') {\n        textAlign = 'center';\n      } // Adjust layout by text align\n\n\n      if (textAlign === 'right') {\n        layoutRect.x += layoutRect.width;\n      } else if (textAlign === 'center') {\n        layoutRect.x += layoutRect.width / 2;\n      }\n    }\n\n    if (!textVerticalAlign) {\n      textVerticalAlign = titleModel.get('top') || titleModel.get('bottom'); // @ts-ignore\n\n      if (textVerticalAlign === 'center') {\n        textVerticalAlign = 'middle';\n      }\n\n      if (textVerticalAlign === 'bottom') {\n        layoutRect.y += layoutRect.height;\n      } else if (textVerticalAlign === 'middle') {\n        layoutRect.y += layoutRect.height / 2;\n      }\n\n      textVerticalAlign = textVerticalAlign || 'top';\n    }\n\n    group.x = layoutRect.x;\n    group.y = layoutRect.y;\n    group.markRedraw();\n    var alignStyle = {\n      align: textAlign,\n      verticalAlign: textVerticalAlign\n    };\n    textEl.setStyle(alignStyle);\n    subTextEl.setStyle(alignStyle); // Render background\n    // Get groupRect again because textAlign has been changed\n\n    groupRect = group.getBoundingRect();\n    var padding = layoutRect.margin;\n    var style = titleModel.getItemStyle(['color', 'opacity']);\n    style.fill = titleModel.get('backgroundColor');\n    var rect = new graphic.Rect({\n      shape: {\n        x: groupRect.x - padding[3],\n        y: groupRect.y - padding[0],\n        width: groupRect.width + padding[1] + padding[3],\n        height: groupRect.height + padding[0] + padding[2],\n        r: titleModel.get('borderRadius')\n      },\n      style: style,\n      subPixelOptimize: true,\n      silent: true\n    });\n    group.add(rect);\n  };\n\n  TitleView.type = 'title';\n  return TitleView;\n}(ComponentView);\n\nexport function install(registers) {\n  registers.registerComponentModel(TitleModel);\n  registers.registerComponentView(TitleView);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomModel from './DataZoomModel.js';\n\nvar SelectDataZoomModel =\n/** @class */\nfunction (_super) {\n  __extends(SelectDataZoomModel, _super);\n\n  function SelectDataZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SelectDataZoomModel.type;\n    return _this;\n  }\n\n  SelectDataZoomModel.type = 'dataZoom.select';\n  return SelectDataZoomModel;\n}(DataZoomModel);\n\nexport default SelectDataZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomView from './DataZoomView.js';\n\nvar SelectDataZoomView =\n/** @class */\nfunction (_super) {\n  __extends(SelectDataZoomView, _super);\n\n  function SelectDataZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SelectDataZoomView.type;\n    return _this;\n  }\n\n  SelectDataZoomView.type = 'dataZoom.select';\n  return SelectDataZoomView;\n}(DataZoomView);\n\nexport default SelectDataZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SelectZoomModel from './SelectZoomModel.js';\nimport SelectZoomView from './SelectZoomView.js';\nimport installCommon from './installCommon.js';\nexport function install(registers) {\n  registers.registerComponentModel(SelectZoomModel);\n  registers.registerComponentView(SelectZoomView);\n  installCommon(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nvar ToolboxFeature =\n/** @class */\nfunction () {\n  function ToolboxFeature() {}\n\n  return ToolboxFeature;\n}();\n\nexport { ToolboxFeature };\nvar features = {};\nexport function registerFeature(name, ctor) {\n  features[name] = ctor;\n}\nexport function getFeature(name) {\n  return features[name];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as featureManager from './featureManager.js';\nimport ComponentModel from '../../model/Component.js';\n\nvar ToolboxModel =\n/** @class */\nfunction (_super) {\n  __extends(ToolboxModel, _super);\n\n  function ToolboxModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ToolboxModel.type;\n    return _this;\n  }\n\n  ToolboxModel.prototype.optionUpdated = function () {\n    _super.prototype.optionUpdated.apply(this, arguments);\n\n    var ecModel = this.ecModel;\n    zrUtil.each(this.option.feature, function (featureOpt, featureName) {\n      var Feature = featureManager.getFeature(featureName);\n\n      if (Feature) {\n        if (Feature.getDefaultOption) {\n          Feature.defaultOption = Feature.getDefaultOption(ecModel);\n        }\n\n        zrUtil.merge(featureOpt, Feature.defaultOption);\n      }\n    });\n  };\n\n  ToolboxModel.type = 'toolbox';\n  ToolboxModel.layoutMode = {\n    type: 'box',\n    ignoreSize: true\n  };\n  ToolboxModel.defaultOption = {\n    show: true,\n    z: 6,\n    // zlevel: 0,\n    orient: 'horizontal',\n    left: 'right',\n    top: 'top',\n    // right\n    // bottom\n    backgroundColor: 'transparent',\n    borderColor: '#ccc',\n    borderRadius: 0,\n    borderWidth: 0,\n    padding: 5,\n    itemSize: 15,\n    itemGap: 8,\n    showTitle: true,\n    iconStyle: {\n      borderColor: '#666',\n      color: 'none'\n    },\n    emphasis: {\n      iconStyle: {\n        borderColor: '#3E98C5'\n      }\n    },\n    // textStyle: {},\n    // feature\n    tooltip: {\n      show: false,\n      position: 'bottom'\n    }\n  };\n  return ToolboxModel;\n}(ComponentModel);\n\nexport default ToolboxModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as textContain from 'zrender/lib/contain/text.js';\nimport * as graphic from '../../util/graphic.js';\nimport { enterEmphasis, leaveEmphasis } from '../../util/states.js';\nimport Model from '../../model/Model.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport * as listComponentHelper from '../helper/listComponent.js';\nimport ComponentView from '../../view/Component.js';\nimport { ToolboxFeature, getFeature } from './featureManager.js';\nimport { getUID } from '../../util/component.js';\nimport ZRText from 'zrender/lib/graphic/Text.js';\n\nvar ToolboxView =\n/** @class */\nfunction (_super) {\n  __extends(ToolboxView, _super);\n\n  function ToolboxView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ToolboxView.prototype.render = function (toolboxModel, ecModel, api, payload) {\n    var group = this.group;\n    group.removeAll();\n\n    if (!toolboxModel.get('show')) {\n      return;\n    }\n\n    var itemSize = +toolboxModel.get('itemSize');\n    var isVertical = toolboxModel.get('orient') === 'vertical';\n    var featureOpts = toolboxModel.get('feature') || {};\n    var features = this._features || (this._features = {});\n    var featureNames = [];\n    zrUtil.each(featureOpts, function (opt, name) {\n      featureNames.push(name);\n    });\n    new DataDiffer(this._featureNames || [], featureNames).add(processFeature).update(processFeature).remove(zrUtil.curry(processFeature, null)).execute(); // Keep for diff.\n\n    this._featureNames = featureNames;\n\n    function processFeature(newIndex, oldIndex) {\n      var featureName = featureNames[newIndex];\n      var oldName = featureNames[oldIndex];\n      var featureOpt = featureOpts[featureName];\n      var featureModel = new Model(featureOpt, toolboxModel, toolboxModel.ecModel);\n      var feature; // FIX#11236, merge feature title from MagicType newOption. TODO: consider seriesIndex ?\n\n      if (payload && payload.newTitle != null && payload.featureName === featureName) {\n        featureOpt.title = payload.newTitle;\n      }\n\n      if (featureName && !oldName) {\n        // Create\n        if (isUserFeatureName(featureName)) {\n          feature = {\n            onclick: featureModel.option.onclick,\n            featureName: featureName\n          };\n        } else {\n          var Feature = getFeature(featureName);\n\n          if (!Feature) {\n            return;\n          }\n\n          feature = new Feature();\n        }\n\n        features[featureName] = feature;\n      } else {\n        feature = features[oldName]; // If feature does not exsit.\n\n        if (!feature) {\n          return;\n        }\n      }\n\n      feature.uid = getUID('toolbox-feature');\n      feature.model = featureModel;\n      feature.ecModel = ecModel;\n      feature.api = api;\n      var isToolboxFeature = feature instanceof ToolboxFeature;\n\n      if (!featureName && oldName) {\n        isToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n        return;\n      }\n\n      if (!featureModel.get('show') || isToolboxFeature && feature.unusable) {\n        isToolboxFeature && feature.remove && feature.remove(ecModel, api);\n        return;\n      }\n\n      createIconPaths(featureModel, feature, featureName);\n\n      featureModel.setIconStatus = function (iconName, status) {\n        var option = this.option;\n        var iconPaths = this.iconPaths;\n        option.iconStatus = option.iconStatus || {};\n        option.iconStatus[iconName] = status;\n\n        if (iconPaths[iconName]) {\n          (status === 'emphasis' ? enterEmphasis : leaveEmphasis)(iconPaths[iconName]);\n        }\n      };\n\n      if (feature instanceof ToolboxFeature) {\n        if (feature.render) {\n          feature.render(featureModel, ecModel, api, payload);\n        }\n      }\n    }\n\n    function createIconPaths(featureModel, feature, featureName) {\n      var iconStyleModel = featureModel.getModel('iconStyle');\n      var iconStyleEmphasisModel = featureModel.getModel(['emphasis', 'iconStyle']); // If one feature has mutiple icon. they are orginaized as\n      // {\n      //     icon: {\n      //         foo: '',\n      //         bar: ''\n      //     },\n      //     title: {\n      //         foo: '',\n      //         bar: ''\n      //     }\n      // }\n\n      var icons = feature instanceof ToolboxFeature && feature.getIcons ? feature.getIcons() : featureModel.get('icon');\n      var titles = featureModel.get('title') || {};\n      var iconsMap;\n      var titlesMap;\n\n      if (zrUtil.isString(icons)) {\n        iconsMap = {};\n        iconsMap[featureName] = icons;\n      } else {\n        iconsMap = icons;\n      }\n\n      if (zrUtil.isString(titles)) {\n        titlesMap = {};\n        titlesMap[featureName] = titles;\n      } else {\n        titlesMap = titles;\n      }\n\n      var iconPaths = featureModel.iconPaths = {};\n      zrUtil.each(iconsMap, function (iconStr, iconName) {\n        var path = graphic.createIcon(iconStr, {}, {\n          x: -itemSize / 2,\n          y: -itemSize / 2,\n          width: itemSize,\n          height: itemSize\n        }); // TODO handling image\n\n        path.setStyle(iconStyleModel.getItemStyle());\n        var pathEmphasisState = path.ensureState('emphasis');\n        pathEmphasisState.style = iconStyleEmphasisModel.getItemStyle(); // Text position calculation\n\n        var textContent = new ZRText({\n          style: {\n            text: titlesMap[iconName],\n            align: iconStyleEmphasisModel.get('textAlign'),\n            borderRadius: iconStyleEmphasisModel.get('textBorderRadius'),\n            padding: iconStyleEmphasisModel.get('textPadding'),\n            fill: null\n          },\n          ignore: true\n        });\n        path.setTextContent(textContent);\n        graphic.setTooltipConfig({\n          el: path,\n          componentModel: toolboxModel,\n          itemName: iconName,\n          formatterParamsExtra: {\n            title: titlesMap[iconName]\n          }\n        });\n        path.__title = titlesMap[iconName];\n        path.on('mouseover', function () {\n          // Should not reuse above hoverStyle, which might be modified.\n          var hoverStyle = iconStyleEmphasisModel.getItemStyle();\n          var defaultTextPosition = isVertical ? toolboxModel.get('right') == null && toolboxModel.get('left') !== 'right' ? 'right' : 'left' : toolboxModel.get('bottom') == null && toolboxModel.get('top') !== 'bottom' ? 'bottom' : 'top';\n          textContent.setStyle({\n            fill: iconStyleEmphasisModel.get('textFill') || hoverStyle.fill || hoverStyle.stroke || '#000',\n            backgroundColor: iconStyleEmphasisModel.get('textBackgroundColor')\n          });\n          path.setTextConfig({\n            position: iconStyleEmphasisModel.get('textPosition') || defaultTextPosition\n          });\n          textContent.ignore = !toolboxModel.get('showTitle'); // Use enterEmphasis and leaveEmphasis provide by ec.\n          // There are flags managed by the echarts.\n\n          api.enterEmphasis(this);\n        }).on('mouseout', function () {\n          if (featureModel.get(['iconStatus', iconName]) !== 'emphasis') {\n            api.leaveEmphasis(this);\n          }\n\n          textContent.hide();\n        });\n        (featureModel.get(['iconStatus', iconName]) === 'emphasis' ? enterEmphasis : leaveEmphasis)(path);\n        group.add(path);\n        path.on('click', zrUtil.bind(feature.onclick, feature, ecModel, api, iconName));\n        iconPaths[iconName] = path;\n      });\n    }\n\n    listComponentHelper.layout(group, toolboxModel, api); // Render background after group is layout\n    // FIXME\n\n    group.add(listComponentHelper.makeBackground(group.getBoundingRect(), toolboxModel)); // Adjust icon title positions to avoid them out of screen\n\n    isVertical || group.eachChild(function (icon) {\n      var titleText = icon.__title; // const hoverStyle = icon.hoverStyle;\n      // TODO simplify code?\n\n      var emphasisState = icon.ensureState('emphasis');\n      var emphasisTextConfig = emphasisState.textConfig || (emphasisState.textConfig = {});\n      var textContent = icon.getTextContent();\n      var emphasisTextState = textContent && textContent.ensureState('emphasis'); // May be background element\n\n      if (emphasisTextState && !zrUtil.isFunction(emphasisTextState) && titleText) {\n        var emphasisTextStyle = emphasisTextState.style || (emphasisTextState.style = {});\n        var rect = textContain.getBoundingRect(titleText, ZRText.makeFont(emphasisTextStyle));\n        var offsetX = icon.x + group.x;\n        var offsetY = icon.y + group.y + itemSize;\n        var needPutOnTop = false;\n\n        if (offsetY + rect.height > api.getHeight()) {\n          emphasisTextConfig.position = 'top';\n          needPutOnTop = true;\n        }\n\n        var topOffset = needPutOnTop ? -5 - rect.height : itemSize + 10;\n\n        if (offsetX + rect.width / 2 > api.getWidth()) {\n          emphasisTextConfig.position = ['100%', topOffset];\n          emphasisTextStyle.align = 'right';\n        } else if (offsetX - rect.width / 2 < 0) {\n          emphasisTextConfig.position = [0, topOffset];\n          emphasisTextStyle.align = 'left';\n        }\n      }\n    });\n  };\n\n  ToolboxView.prototype.updateView = function (toolboxModel, ecModel, api, payload) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.updateView && feature.updateView(feature.model, ecModel, api, payload);\n    });\n  }; // updateLayout(toolboxModel, ecModel, api, payload) {\n  //     zrUtil.each(this._features, function (feature) {\n  //         feature.updateLayout && feature.updateLayout(feature.model, ecModel, api, payload);\n  //     });\n  // },\n\n\n  ToolboxView.prototype.remove = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.remove && feature.remove(ecModel, api);\n    });\n    this.group.removeAll();\n  };\n\n  ToolboxView.prototype.dispose = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n    });\n  };\n\n  ToolboxView.type = 'toolbox';\n  return ToolboxView;\n}(ComponentView);\n\nfunction isUserFeatureName(featureName) {\n  return featureName.indexOf('my') === 0;\n}\n\nexport default ToolboxView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global Uint8Array, document */\n\nimport env from 'zrender/lib/core/env.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { isFunction } from 'zrender/lib/core/util.js';\n/* global window, document */\n\nvar SaveAsImage =\n/** @class */\nfunction (_super) {\n  __extends(SaveAsImage, _super);\n\n  function SaveAsImage() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  SaveAsImage.prototype.onclick = function (ecModel, api) {\n    var model = this.model;\n    var title = model.get('name') || ecModel.get('title.0.text') || 'echarts';\n    var isSvg = api.getZr().painter.getType() === 'svg';\n    var type = isSvg ? 'svg' : model.get('type', true) || 'png';\n    var url = api.getConnectedDataURL({\n      type: type,\n      backgroundColor: model.get('backgroundColor', true) || ecModel.get('backgroundColor') || '#fff',\n      connectedBackgroundColor: model.get('connectedBackgroundColor'),\n      excludeComponents: model.get('excludeComponents'),\n      pixelRatio: model.get('pixelRatio')\n    });\n    var browser = env.browser; // Chrome, Firefox, New Edge\n\n    if (isFunction(MouseEvent) && (browser.newEdge || !browser.ie && !browser.edge)) {\n      var $a = document.createElement('a');\n      $a.download = title + '.' + type;\n      $a.target = '_blank';\n      $a.href = url;\n      var evt = new MouseEvent('click', {\n        // some micro front-end framework window maybe is a Proxy\n        view: document.defaultView,\n        bubbles: true,\n        cancelable: false\n      });\n      $a.dispatchEvent(evt);\n    } // IE or old Edge\n    else {\n        // @ts-ignore\n        if (window.navigator.msSaveOrOpenBlob || isSvg) {\n          var parts = url.split(','); // data:[<mime type>][;charset=<charset>][;base64],<encoded data>\n\n          var base64Encoded = parts[0].indexOf('base64') > -1;\n          var bstr = isSvg // should decode the svg data uri first\n          ? decodeURIComponent(parts[1]) : parts[1]; // only `atob` when the data uri is encoded with base64\n          // otherwise, like `svg` data uri exported by zrender,\n          // there will be an error, for it's not encoded with base64.\n          // (just a url-encoded string through `encodeURIComponent`)\n\n          base64Encoded && (bstr = window.atob(bstr));\n          var filename = title + '.' + type; // @ts-ignore\n\n          if (window.navigator.msSaveOrOpenBlob) {\n            var n = bstr.length;\n            var u8arr = new Uint8Array(n);\n\n            while (n--) {\n              u8arr[n] = bstr.charCodeAt(n);\n            }\n\n            var blob = new Blob([u8arr]); // @ts-ignore\n\n            window.navigator.msSaveOrOpenBlob(blob, filename);\n          } else {\n            var frame = document.createElement('iframe');\n            document.body.appendChild(frame);\n            var cw = frame.contentWindow;\n            var doc = cw.document;\n            doc.open('image/svg+xml', 'replace');\n            doc.write(bstr);\n            doc.close();\n            cw.focus();\n            doc.execCommand('SaveAs', true, filename);\n            document.body.removeChild(frame);\n          }\n        } else {\n          var lang = model.get('lang');\n          var html = '' + '<body style=\"margin:0;\">' + '<img src=\"' + url + '\" style=\"max-width:100%;\" title=\"' + (lang && lang[0] || '') + '\" />' + '</body>';\n          var tab = window.open();\n          tab.document.write(html);\n          tab.document.title = title;\n        }\n      }\n  };\n\n  SaveAsImage.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      icon: 'M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0',\n      title: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'title']),\n      type: 'png',\n      // Default use option.backgroundColor\n      // backgroundColor: '#fff',\n      connectedBackgroundColor: '#fff',\n      name: '',\n      excludeComponents: ['toolbox'],\n      // use current pixel ratio of device by default\n      // pixelRatio: 1,\n      lang: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'lang'])\n    };\n    return defaultOption;\n  };\n\n  return SaveAsImage;\n}(ToolboxFeature);\n\nexport default SaveAsImage;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { SINGLE_REFERRING } from '../../../util/model.js';\nvar INNER_STACK_KEYWORD = '__ec_magicType_stack__';\nvar ICON_TYPES = ['line', 'bar', 'stack']; // stack and tiled appears in pair for the title\n\nvar TITLE_TYPES = ['line', 'bar', 'stack', 'tiled'];\nvar radioTypes = [['line', 'bar'], ['stack']];\n\nvar MagicType =\n/** @class */\nfunction (_super) {\n  __extends(MagicType, _super);\n\n  function MagicType() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  MagicType.prototype.getIcons = function () {\n    var model = this.model;\n    var availableIcons = model.get('icon');\n    var icons = {};\n    zrUtil.each(model.get('type'), function (type) {\n      if (availableIcons[type]) {\n        icons[type] = availableIcons[type];\n      }\n    });\n    return icons;\n  };\n\n  MagicType.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      type: [],\n      // Icon group\n      icon: {\n        line: 'M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4',\n        bar: 'M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7',\n        // eslint-disable-next-line\n        stack: 'M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z' // jshint ignore:line\n\n      },\n      // `line`, `bar`, `stack`, `tiled`\n      title: ecModel.getLocaleModel().get(['toolbox', 'magicType', 'title']),\n      option: {},\n      seriesIndex: {}\n    };\n    return defaultOption;\n  };\n\n  MagicType.prototype.onclick = function (ecModel, api, type) {\n    var model = this.model;\n    var seriesIndex = model.get(['seriesIndex', type]); // Not supported magicType\n\n    if (!seriesOptGenreator[type]) {\n      return;\n    }\n\n    var newOption = {\n      series: []\n    };\n\n    var generateNewSeriesTypes = function (seriesModel) {\n      var seriesType = seriesModel.subType;\n      var seriesId = seriesModel.id;\n      var newSeriesOpt = seriesOptGenreator[type](seriesType, seriesId, seriesModel, model);\n\n      if (newSeriesOpt) {\n        // PENDING If merge original option?\n        zrUtil.defaults(newSeriesOpt, seriesModel.option);\n        newOption.series.push(newSeriesOpt);\n      } // Modify boundaryGap\n\n\n      var coordSys = seriesModel.coordinateSystem;\n\n      if (coordSys && coordSys.type === 'cartesian2d' && (type === 'line' || type === 'bar')) {\n        var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n\n        if (categoryAxis) {\n          var axisDim = categoryAxis.dim;\n          var axisType = axisDim + 'Axis';\n          var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\n          var axisIndex = axisModel.componentIndex;\n          newOption[axisType] = newOption[axisType] || [];\n\n          for (var i = 0; i <= axisIndex; i++) {\n            newOption[axisType][axisIndex] = newOption[axisType][axisIndex] || {};\n          }\n\n          newOption[axisType][axisIndex].boundaryGap = type === 'bar';\n        }\n      }\n    };\n\n    zrUtil.each(radioTypes, function (radio) {\n      if (zrUtil.indexOf(radio, type) >= 0) {\n        zrUtil.each(radio, function (item) {\n          model.setIconStatus(item, 'normal');\n        });\n      }\n    });\n    model.setIconStatus(type, 'emphasis');\n    ecModel.eachComponent({\n      mainType: 'series',\n      query: seriesIndex == null ? null : {\n        seriesIndex: seriesIndex\n      }\n    }, generateNewSeriesTypes);\n    var newTitle;\n    var currentType = type; // Change title of stack\n\n    if (type === 'stack') {\n      // use titles in model instead of ecModel\n      // as stack and tiled appears in pair, just flip them\n      // no need of checking stack state\n      newTitle = zrUtil.merge({\n        stack: model.option.title.tiled,\n        tiled: model.option.title.stack\n      }, model.option.title);\n\n      if (model.get(['iconStatus', type]) !== 'emphasis') {\n        currentType = 'tiled';\n      }\n    }\n\n    api.dispatchAction({\n      type: 'changeMagicType',\n      currentType: currentType,\n      newOption: newOption,\n      newTitle: newTitle,\n      featureName: 'magicType'\n    });\n  };\n\n  return MagicType;\n}(ToolboxFeature);\n\nvar seriesOptGenreator = {\n  'line': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'bar') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'line',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'line']) || {}, true);\n    }\n  },\n  'bar': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'line') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'bar',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'bar']) || {}, true);\n    }\n  },\n  'stack': function (seriesType, seriesId, seriesModel, model) {\n    var isStack = seriesModel.get('stack') === INNER_STACK_KEYWORD;\n\n    if (seriesType === 'line' || seriesType === 'bar') {\n      model.setIconStatus('stack', isStack ? 'normal' : 'emphasis');\n      return zrUtil.merge({\n        id: seriesId,\n        stack: isStack ? '' : INNER_STACK_KEYWORD\n      }, model.get(['option', 'stack']) || {}, true);\n    }\n  }\n}; // TODO: SELF REGISTERED.\n\necharts.registerAction({\n  type: 'changeMagicType',\n  event: 'magicTypeChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.mergeOption(payload.newOption);\n});\nexport default MagicType;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global document */\n\nimport * as echarts from '../../../core/echarts.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { addEventListener } from 'zrender/lib/core/event.js';\nimport { warn } from '../../../util/log.js';\n/* global document */\n\nvar BLOCK_SPLITER = new Array(60).join('-');\nvar ITEM_SPLITER = '\\t';\n/**\n * Group series into two types\n *  1. on category axis, like line, bar\n *  2. others, like scatter, pie\n */\n\nfunction groupSeries(ecModel) {\n  var seriesGroupByCategoryAxis = {};\n  var otherSeries = [];\n  var meta = [];\n  ecModel.eachRawSeries(function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys && (coordSys.type === 'cartesian2d' || coordSys.type === 'polar')) {\n      // TODO: TYPE Consider polar? Include polar may increase unecessary bundle size.\n      var baseAxis = coordSys.getBaseAxis();\n\n      if (baseAxis.type === 'category') {\n        var key = baseAxis.dim + '_' + baseAxis.index;\n\n        if (!seriesGroupByCategoryAxis[key]) {\n          seriesGroupByCategoryAxis[key] = {\n            categoryAxis: baseAxis,\n            valueAxis: coordSys.getOtherAxis(baseAxis),\n            series: []\n          };\n          meta.push({\n            axisDim: baseAxis.dim,\n            axisIndex: baseAxis.index\n          });\n        }\n\n        seriesGroupByCategoryAxis[key].series.push(seriesModel);\n      } else {\n        otherSeries.push(seriesModel);\n      }\n    } else {\n      otherSeries.push(seriesModel);\n    }\n  });\n  return {\n    seriesGroupByCategoryAxis: seriesGroupByCategoryAxis,\n    other: otherSeries,\n    meta: meta\n  };\n}\n/**\n * Assemble content of series on cateogory axis\n * @inner\n */\n\n\nfunction assembleSeriesWithCategoryAxis(groups) {\n  var tables = [];\n  zrUtil.each(groups, function (group, key) {\n    var categoryAxis = group.categoryAxis;\n    var valueAxis = group.valueAxis;\n    var valueAxisDim = valueAxis.dim;\n    var headers = [' '].concat(zrUtil.map(group.series, function (series) {\n      return series.name;\n    })); // @ts-ignore TODO Polar\n\n    var columns = [categoryAxis.model.getCategories()];\n    zrUtil.each(group.series, function (series) {\n      var rawData = series.getRawData();\n      columns.push(series.getRawData().mapArray(rawData.mapDimension(valueAxisDim), function (val) {\n        return val;\n      }));\n    }); // Assemble table content\n\n    var lines = [headers.join(ITEM_SPLITER)];\n\n    for (var i = 0; i < columns[0].length; i++) {\n      var items = [];\n\n      for (var j = 0; j < columns.length; j++) {\n        items.push(columns[j][i]);\n      }\n\n      lines.push(items.join(ITEM_SPLITER));\n    }\n\n    tables.push(lines.join('\\n'));\n  });\n  return tables.join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n/**\n * Assemble content of other series\n */\n\n\nfunction assembleOtherSeries(series) {\n  return zrUtil.map(series, function (series) {\n    var data = series.getRawData();\n    var lines = [series.name];\n    var vals = [];\n    data.each(data.dimensions, function () {\n      var argLen = arguments.length;\n      var dataIndex = arguments[argLen - 1];\n      var name = data.getName(dataIndex);\n\n      for (var i = 0; i < argLen - 1; i++) {\n        vals[i] = arguments[i];\n      }\n\n      lines.push((name ? name + ITEM_SPLITER : '') + vals.join(ITEM_SPLITER));\n    });\n    return lines.join('\\n');\n  }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n\nfunction getContentFromModel(ecModel) {\n  var result = groupSeries(ecModel);\n  return {\n    value: zrUtil.filter([assembleSeriesWithCategoryAxis(result.seriesGroupByCategoryAxis), assembleOtherSeries(result.other)], function (str) {\n      return !!str.replace(/[\\n\\t\\s]/g, '');\n    }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n'),\n    meta: result.meta\n  };\n}\n\nfunction trim(str) {\n  return str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n}\n/**\n * If a block is tsv format\n */\n\n\nfunction isTSVFormat(block) {\n  // Simple method to find out if a block is tsv format\n  var firstLine = block.slice(0, block.indexOf('\\n'));\n\n  if (firstLine.indexOf(ITEM_SPLITER) >= 0) {\n    return true;\n  }\n}\n\nvar itemSplitRegex = new RegExp('[' + ITEM_SPLITER + ']+', 'g');\n/**\n * @param {string} tsv\n * @return {Object}\n */\n\nfunction parseTSVContents(tsv) {\n  var tsvLines = tsv.split(/\\n+/g);\n  var headers = trim(tsvLines.shift()).split(itemSplitRegex);\n  var categories = [];\n  var series = zrUtil.map(headers, function (header) {\n    return {\n      name: header,\n      data: []\n    };\n  });\n\n  for (var i = 0; i < tsvLines.length; i++) {\n    var items = trim(tsvLines[i]).split(itemSplitRegex);\n    categories.push(items.shift());\n\n    for (var j = 0; j < items.length; j++) {\n      series[j] && (series[j].data[i] = items[j]);\n    }\n  }\n\n  return {\n    series: series,\n    categories: categories\n  };\n}\n\nfunction parseListContents(str) {\n  var lines = str.split(/\\n+/g);\n  var seriesName = trim(lines.shift());\n  var data = [];\n\n  for (var i = 0; i < lines.length; i++) {\n    // if line is empty, ignore it.\n    // there is a case that a user forgot to delete `\\n`.\n    var line = trim(lines[i]);\n\n    if (!line) {\n      continue;\n    }\n\n    var items = line.split(itemSplitRegex);\n    var name_1 = '';\n    var value = void 0;\n    var hasName = false;\n\n    if (isNaN(items[0])) {\n      // First item is name\n      hasName = true;\n      name_1 = items[0];\n      items = items.slice(1);\n      data[i] = {\n        name: name_1,\n        value: []\n      };\n      value = data[i].value;\n    } else {\n      value = data[i] = [];\n    }\n\n    for (var j = 0; j < items.length; j++) {\n      value.push(+items[j]);\n    }\n\n    if (value.length === 1) {\n      hasName ? data[i].value = value[0] : data[i] = value[0];\n    }\n  }\n\n  return {\n    name: seriesName,\n    data: data\n  };\n}\n\nfunction parseContents(str, blockMetaList) {\n  var blocks = str.split(new RegExp('\\n*' + BLOCK_SPLITER + '\\n*', 'g'));\n  var newOption = {\n    series: []\n  };\n  zrUtil.each(blocks, function (block, idx) {\n    if (isTSVFormat(block)) {\n      var result = parseTSVContents(block);\n      var blockMeta = blockMetaList[idx];\n      var axisKey = blockMeta.axisDim + 'Axis';\n\n      if (blockMeta) {\n        newOption[axisKey] = newOption[axisKey] || [];\n        newOption[axisKey][blockMeta.axisIndex] = {\n          data: result.categories\n        };\n        newOption.series = newOption.series.concat(result.series);\n      }\n    } else {\n      var result = parseListContents(block);\n      newOption.series.push(result);\n    }\n  });\n  return newOption;\n}\n\nvar DataView =\n/** @class */\nfunction (_super) {\n  __extends(DataView, _super);\n\n  function DataView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DataView.prototype.onclick = function (ecModel, api) {\n    // FIXME: better way?\n    setTimeout(function () {\n      api.dispatchAction({\n        type: 'hideTip'\n      });\n    });\n    var container = api.getDom();\n    var model = this.model;\n\n    if (this._dom) {\n      container.removeChild(this._dom);\n    }\n\n    var root = document.createElement('div'); // use padding to avoid 5px whitespace\n\n    root.style.cssText = 'position:absolute;top:0;bottom:0;left:0;right:0;padding:5px';\n    root.style.backgroundColor = model.get('backgroundColor') || '#fff'; // Create elements\n\n    var header = document.createElement('h4');\n    var lang = model.get('lang') || [];\n    header.innerHTML = lang[0] || model.get('title');\n    header.style.cssText = 'margin:10px 20px';\n    header.style.color = model.get('textColor');\n    var viewMain = document.createElement('div');\n    var textarea = document.createElement('textarea');\n    viewMain.style.cssText = 'overflow:auto';\n    var optionToContent = model.get('optionToContent');\n    var contentToOption = model.get('contentToOption');\n    var result = getContentFromModel(ecModel);\n\n    if (zrUtil.isFunction(optionToContent)) {\n      var htmlOrDom = optionToContent(api.getOption());\n\n      if (zrUtil.isString(htmlOrDom)) {\n        viewMain.innerHTML = htmlOrDom;\n      } else if (zrUtil.isDom(htmlOrDom)) {\n        viewMain.appendChild(htmlOrDom);\n      }\n    } else {\n      // Use default textarea\n      textarea.readOnly = model.get('readOnly');\n      var style = textarea.style; // eslint-disable-next-line max-len\n\n      style.cssText = 'display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none';\n      style.color = model.get('textColor');\n      style.borderColor = model.get('textareaBorderColor');\n      style.backgroundColor = model.get('textareaColor');\n      textarea.value = result.value;\n      viewMain.appendChild(textarea);\n    }\n\n    var blockMetaList = result.meta;\n    var buttonContainer = document.createElement('div');\n    buttonContainer.style.cssText = 'position:absolute;bottom:5px;left:0;right:0'; // eslint-disable-next-line max-len\n\n    var buttonStyle = 'float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px';\n    var closeButton = document.createElement('div');\n    var refreshButton = document.createElement('div');\n    buttonStyle += ';background-color:' + model.get('buttonColor');\n    buttonStyle += ';color:' + model.get('buttonTextColor');\n    var self = this;\n\n    function close() {\n      container.removeChild(root);\n      self._dom = null;\n    }\n\n    addEventListener(closeButton, 'click', close);\n    addEventListener(refreshButton, 'click', function () {\n      if (contentToOption == null && optionToContent != null || contentToOption != null && optionToContent == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          // eslint-disable-next-line\n          warn('It seems you have just provided one of `contentToOption` and `optionToContent` functions but missed the other one. Data change is ignored.');\n        }\n\n        close();\n        return;\n      }\n\n      var newOption;\n\n      try {\n        if (zrUtil.isFunction(contentToOption)) {\n          newOption = contentToOption(viewMain, api.getOption());\n        } else {\n          newOption = parseContents(textarea.value, blockMetaList);\n        }\n      } catch (e) {\n        close();\n        throw new Error('Data view format error ' + e);\n      }\n\n      if (newOption) {\n        api.dispatchAction({\n          type: 'changeDataView',\n          newOption: newOption\n        });\n      }\n\n      close();\n    });\n    closeButton.innerHTML = lang[1];\n    refreshButton.innerHTML = lang[2];\n    refreshButton.style.cssText = closeButton.style.cssText = buttonStyle;\n    !model.get('readOnly') && buttonContainer.appendChild(refreshButton);\n    buttonContainer.appendChild(closeButton);\n    root.appendChild(header);\n    root.appendChild(viewMain);\n    root.appendChild(buttonContainer);\n    viewMain.style.height = container.clientHeight - 80 + 'px';\n    container.appendChild(root);\n    this._dom = root;\n  };\n\n  DataView.prototype.remove = function (ecModel, api) {\n    this._dom && api.getDom().removeChild(this._dom);\n  };\n\n  DataView.prototype.dispose = function (ecModel, api) {\n    this.remove(ecModel, api);\n  };\n\n  DataView.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      readOnly: false,\n      optionToContent: null,\n      contentToOption: null,\n      // eslint-disable-next-line\n      icon: 'M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28',\n      title: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'title']),\n      lang: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'lang']),\n      backgroundColor: '#fff',\n      textColor: '#000',\n      textareaColor: '#fff',\n      textareaBorderColor: '#333',\n      buttonColor: '#c23531',\n      buttonTextColor: '#fff'\n    };\n    return defaultOption;\n  };\n\n  return DataView;\n}(ToolboxFeature);\n/**\n * @inner\n */\n\n\nfunction tryMergeDataOption(newData, originalData) {\n  return zrUtil.map(newData, function (newVal, idx) {\n    var original = originalData && originalData[idx];\n\n    if (zrUtil.isObject(original) && !zrUtil.isArray(original)) {\n      var newValIsObject = zrUtil.isObject(newVal) && !zrUtil.isArray(newVal);\n\n      if (!newValIsObject) {\n        newVal = {\n          value: newVal\n        };\n      } // original data has name but new data has no name\n\n\n      var shouldDeleteName = original.name != null && newVal.name == null; // Original data has option\n\n      newVal = zrUtil.defaults(newVal, original);\n      shouldDeleteName && delete newVal.name;\n      return newVal;\n    } else {\n      return newVal;\n    }\n  });\n} // TODO: SELF REGISTERED.\n\n\necharts.registerAction({\n  type: 'changeDataView',\n  event: 'dataViewChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  var newSeriesOptList = [];\n  zrUtil.each(payload.newOption.series, function (seriesOpt) {\n    var seriesModel = ecModel.getSeriesByName(seriesOpt.name)[0];\n\n    if (!seriesModel) {\n      // New created series\n      // Geuss the series type\n      newSeriesOptList.push(zrUtil.extend({\n        // Default is scatter\n        type: 'scatter'\n      }, seriesOpt));\n    } else {\n      var originalData = seriesModel.get('data');\n      newSeriesOptList.push({\n        name: seriesOpt.name,\n        data: tryMergeDataOption(seriesOpt.data, originalData)\n      });\n    }\n  });\n  ecModel.mergeOption(zrUtil.defaults({\n    series: newSeriesOptList\n  }, payload.newOption));\n});\nexport default DataView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nvar each = zrUtil.each;\nvar inner = makeInner();\n/**\n * @param ecModel\n * @param newSnapshot key is dataZoomId\n */\n\nexport function push(ecModel, newSnapshot) {\n  var storedSnapshots = getStoreSnapshots(ecModel); // If previous dataZoom can not be found,\n  // complete an range with current range.\n\n  each(newSnapshot, function (batchItem, dataZoomId) {\n    var i = storedSnapshots.length - 1;\n\n    for (; i >= 0; i--) {\n      var snapshot = storedSnapshots[i];\n\n      if (snapshot[dataZoomId]) {\n        break;\n      }\n    }\n\n    if (i < 0) {\n      // No origin range set, create one by current range.\n      var dataZoomModel = ecModel.queryComponents({\n        mainType: 'dataZoom',\n        subType: 'select',\n        id: dataZoomId\n      })[0];\n\n      if (dataZoomModel) {\n        var percentRange = dataZoomModel.getPercentRange();\n        storedSnapshots[0][dataZoomId] = {\n          dataZoomId: dataZoomId,\n          start: percentRange[0],\n          end: percentRange[1]\n        };\n      }\n    }\n  });\n  storedSnapshots.push(newSnapshot);\n}\nexport function pop(ecModel) {\n  var storedSnapshots = getStoreSnapshots(ecModel);\n  var head = storedSnapshots[storedSnapshots.length - 1];\n  storedSnapshots.length > 1 && storedSnapshots.pop(); // Find top for all dataZoom.\n\n  var snapshot = {};\n  each(head, function (batchItem, dataZoomId) {\n    for (var i = storedSnapshots.length - 1; i >= 0; i--) {\n      batchItem = storedSnapshots[i][dataZoomId];\n\n      if (batchItem) {\n        snapshot[dataZoomId] = batchItem;\n        break;\n      }\n    }\n  });\n  return snapshot;\n}\nexport function clear(ecModel) {\n  inner(ecModel).snapshots = null;\n}\nexport function count(ecModel) {\n  return getStoreSnapshots(ecModel).length;\n}\n/**\n * History length of each dataZoom may be different.\n * this._history[0] is used to store origin range.\n */\n\nfunction getStoreSnapshots(ecModel) {\n  var store = inner(ecModel);\n\n  if (!store.snapshots) {\n    store.snapshots = [{}];\n  }\n\n  return store.snapshots;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts.js';\nimport * as history from '../../dataZoom/history.js';\nimport { ToolboxFeature } from '../featureManager.js';\n\nvar RestoreOption =\n/** @class */\nfunction (_super) {\n  __extends(RestoreOption, _super);\n\n  function RestoreOption() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  RestoreOption.prototype.onclick = function (ecModel, api) {\n    history.clear(ecModel);\n    api.dispatchAction({\n      type: 'restore',\n      from: this.uid\n    });\n  };\n\n  RestoreOption.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      // eslint-disable-next-line\n      icon: 'M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5',\n      title: ecModel.getLocaleModel().get(['toolbox', 'restore', 'title'])\n    };\n    return defaultOption;\n  };\n\n  return RestoreOption;\n}(ToolboxFeature); // TODO: SELF REGISTERED.\n\n\necharts.registerAction({\n  type: 'restore',\n  event: 'restore',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.resetOption('recreate');\n});\nexport default RestoreOption;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as echarts from '../../core/echarts.js';\nimport { noop } from 'zrender/lib/core/util.js';\nvar ATTR = '\\0_ec_interaction_mutex';\nexport function take(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  store[resourceKey] = userKey;\n}\nexport function release(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  var uKey = store[resourceKey];\n\n  if (uKey === userKey) {\n    store[resourceKey] = null;\n  }\n}\nexport function isTaken(zr, resourceKey) {\n  return !!getStore(zr)[resourceKey];\n}\n\nfunction getStore(zr) {\n  return zr[ATTR] || (zr[ATTR] = {});\n}\n/**\n * payload: {\n *     type: 'takeGlobalCursor',\n *     key: 'dataZoomSelect', or 'brush', or ...,\n *         If no userKey, release global cursor.\n * }\n */\n// TODO: SELF REGISTERED.\n\n\necharts.registerAction({\n  type: 'takeGlobalCursor',\n  event: 'globalCursorTaken',\n  update: 'update'\n}, noop);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { curry, each, map, bind, merge, clone, defaults, assert } from 'zrender/lib/core/util.js';\nimport Eventful from 'zrender/lib/core/Eventful.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as interactionMutex from './interactionMutex.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nvar BRUSH_PANEL_GLOBAL = true;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathPow = Math.pow;\nvar COVER_Z = 10000;\nvar UNSELECT_THRESHOLD = 6;\nvar MIN_RESIZE_LINE_WIDTH = 6;\nvar MUTEX_RESOURCE_KEY = 'globalPan';\nvar DIRECTION_MAP = {\n  w: [0, 0],\n  e: [0, 1],\n  n: [1, 0],\n  s: [1, 1]\n};\nvar CURSOR_MAP = {\n  w: 'ew',\n  e: 'ew',\n  n: 'ns',\n  s: 'ns',\n  ne: 'nesw',\n  sw: 'nesw',\n  nw: 'nwse',\n  se: 'nwse'\n};\nvar DEFAULT_BRUSH_OPT = {\n  brushStyle: {\n    lineWidth: 2,\n    stroke: 'rgba(210,219,238,0.3)',\n    fill: '#D2DBEE'\n  },\n  transformable: true,\n  brushMode: 'single',\n  removeOnClick: false\n};\nvar baseUID = 0;\n/**\n * params:\n *     areas: Array.<Array>, coord relates to container group,\n *                             If no container specified, to global.\n *     opt {\n *         isEnd: boolean,\n *         removeOnClick: boolean\n *     }\n */\n\nvar BrushController =\n/** @class */\nfunction (_super) {\n  __extends(BrushController, _super);\n\n  function BrushController(zr) {\n    var _this = _super.call(this) || this;\n    /**\n     * @internal\n     */\n\n\n    _this._track = [];\n    /**\n     * @internal\n     */\n\n    _this._covers = [];\n    _this._handlers = {};\n\n    if (process.env.NODE_ENV !== 'production') {\n      assert(zr);\n    }\n\n    _this._zr = zr;\n    _this.group = new graphic.Group();\n    _this._uid = 'brushController_' + baseUID++;\n    each(pointerHandlers, function (handler, eventName) {\n      this._handlers[eventName] = bind(handler, this);\n    }, _this);\n    return _this;\n  }\n  /**\n   * If set to `false`, select disabled.\n   */\n\n\n  BrushController.prototype.enableBrush = function (brushOption) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(this._mounted);\n    }\n\n    this._brushType && this._doDisableBrush();\n    brushOption.brushType && this._doEnableBrush(brushOption);\n    return this;\n  };\n\n  BrushController.prototype._doEnableBrush = function (brushOption) {\n    var zr = this._zr; // Consider roam, which takes globalPan too.\n\n    if (!this._enableGlobalPan) {\n      interactionMutex.take(zr, MUTEX_RESOURCE_KEY, this._uid);\n    }\n\n    each(this._handlers, function (handler, eventName) {\n      zr.on(eventName, handler);\n    });\n    this._brushType = brushOption.brushType;\n    this._brushOption = merge(clone(DEFAULT_BRUSH_OPT), brushOption, true);\n  };\n\n  BrushController.prototype._doDisableBrush = function () {\n    var zr = this._zr;\n    interactionMutex.release(zr, MUTEX_RESOURCE_KEY, this._uid);\n    each(this._handlers, function (handler, eventName) {\n      zr.off(eventName, handler);\n    });\n    this._brushType = this._brushOption = null;\n  };\n  /**\n   * @param panelOpts If not pass, it is global brush.\n   */\n\n\n  BrushController.prototype.setPanels = function (panelOpts) {\n    if (panelOpts && panelOpts.length) {\n      var panels_1 = this._panels = {};\n      each(panelOpts, function (panelOpts) {\n        panels_1[panelOpts.panelId] = clone(panelOpts);\n      });\n    } else {\n      this._panels = null;\n    }\n\n    return this;\n  };\n\n  BrushController.prototype.mount = function (opt) {\n    opt = opt || {};\n\n    if (process.env.NODE_ENV !== 'production') {\n      this._mounted = true; // should be at first.\n    }\n\n    this._enableGlobalPan = opt.enableGlobalPan;\n    var thisGroup = this.group;\n\n    this._zr.add(thisGroup);\n\n    thisGroup.attr({\n      x: opt.x || 0,\n      y: opt.y || 0,\n      rotation: opt.rotation || 0,\n      scaleX: opt.scaleX || 1,\n      scaleY: opt.scaleY || 1\n    });\n    this._transform = thisGroup.getLocalTransform();\n    return this;\n  }; // eachCover(cb, context): void {\n  //     each(this._covers, cb, context);\n  // }\n\n  /**\n   * Update covers.\n   * @param coverConfigList\n   *        If coverConfigList is null/undefined, all covers removed.\n   */\n\n\n  BrushController.prototype.updateCovers = function (coverConfigList) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(this._mounted);\n    }\n\n    coverConfigList = map(coverConfigList, function (coverConfig) {\n      return merge(clone(DEFAULT_BRUSH_OPT), coverConfig, true);\n    });\n    var tmpIdPrefix = '\\0-brush-index-';\n    var oldCovers = this._covers;\n    var newCovers = this._covers = [];\n    var controller = this;\n    var creatingCover = this._creatingCover;\n    new DataDiffer(oldCovers, coverConfigList, oldGetKey, getKey).add(addOrUpdate).update(addOrUpdate).remove(remove).execute();\n    return this;\n\n    function getKey(brushOption, index) {\n      return (brushOption.id != null ? brushOption.id : tmpIdPrefix + index) + '-' + brushOption.brushType;\n    }\n\n    function oldGetKey(cover, index) {\n      return getKey(cover.__brushOption, index);\n    }\n\n    function addOrUpdate(newIndex, oldIndex) {\n      var newBrushInternal = coverConfigList[newIndex]; // Consider setOption in event listener of brushSelect,\n      // where updating cover when creating should be forbiden.\n\n      if (oldIndex != null && oldCovers[oldIndex] === creatingCover) {\n        newCovers[newIndex] = oldCovers[oldIndex];\n      } else {\n        var cover = newCovers[newIndex] = oldIndex != null ? (oldCovers[oldIndex].__brushOption = newBrushInternal, oldCovers[oldIndex]) : endCreating(controller, createCover(controller, newBrushInternal));\n        updateCoverAfterCreation(controller, cover);\n      }\n    }\n\n    function remove(oldIndex) {\n      if (oldCovers[oldIndex] !== creatingCover) {\n        controller.group.remove(oldCovers[oldIndex]);\n      }\n    }\n  };\n\n  BrushController.prototype.unmount = function () {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!this._mounted) {\n        return;\n      }\n    }\n\n    this.enableBrush(false); // container may 'removeAll' outside.\n\n    clearCovers(this);\n\n    this._zr.remove(this.group);\n\n    if (process.env.NODE_ENV !== 'production') {\n      this._mounted = false; // should be at last.\n    }\n\n    return this;\n  };\n\n  BrushController.prototype.dispose = function () {\n    this.unmount();\n    this.off();\n  };\n\n  return BrushController;\n}(Eventful);\n\nfunction createCover(controller, brushOption) {\n  var cover = coverRenderers[brushOption.brushType].createCover(controller, brushOption);\n  cover.__brushOption = brushOption;\n  updateZ(cover, brushOption);\n  controller.group.add(cover);\n  return cover;\n}\n\nfunction endCreating(controller, creatingCover) {\n  var coverRenderer = getCoverRenderer(creatingCover);\n\n  if (coverRenderer.endCreating) {\n    coverRenderer.endCreating(controller, creatingCover);\n    updateZ(creatingCover, creatingCover.__brushOption);\n  }\n\n  return creatingCover;\n}\n\nfunction updateCoverShape(controller, cover) {\n  var brushOption = cover.__brushOption;\n  getCoverRenderer(cover).updateCoverShape(controller, cover, brushOption.range, brushOption);\n}\n\nfunction updateZ(cover, brushOption) {\n  var z = brushOption.z;\n  z == null && (z = COVER_Z);\n  cover.traverse(function (el) {\n    el.z = z;\n    el.z2 = z; // Consider in given container.\n  });\n}\n\nfunction updateCoverAfterCreation(controller, cover) {\n  getCoverRenderer(cover).updateCommon(controller, cover);\n  updateCoverShape(controller, cover);\n}\n\nfunction getCoverRenderer(cover) {\n  return coverRenderers[cover.__brushOption.brushType];\n} // return target panel or `true` (means global panel)\n\n\nfunction getPanelByPoint(controller, e, localCursorPoint) {\n  var panels = controller._panels;\n\n  if (!panels) {\n    return BRUSH_PANEL_GLOBAL; // Global panel\n  }\n\n  var panel;\n  var transform = controller._transform;\n  each(panels, function (pn) {\n    pn.isTargetByCursor(e, localCursorPoint, transform) && (panel = pn);\n  });\n  return panel;\n} // Return a panel or true\n\n\nfunction getPanelByCover(controller, cover) {\n  var panels = controller._panels;\n\n  if (!panels) {\n    return BRUSH_PANEL_GLOBAL; // Global panel\n  }\n\n  var panelId = cover.__brushOption.panelId; // User may give cover without coord sys info,\n  // which is then treated as global panel.\n\n  return panelId != null ? panels[panelId] : BRUSH_PANEL_GLOBAL;\n}\n\nfunction clearCovers(controller) {\n  var covers = controller._covers;\n  var originalLength = covers.length;\n  each(covers, function (cover) {\n    controller.group.remove(cover);\n  }, controller);\n  covers.length = 0;\n  return !!originalLength;\n}\n\nfunction trigger(controller, opt) {\n  var areas = map(controller._covers, function (cover) {\n    var brushOption = cover.__brushOption;\n    var range = clone(brushOption.range);\n    return {\n      brushType: brushOption.brushType,\n      panelId: brushOption.panelId,\n      range: range\n    };\n  });\n  controller.trigger('brush', {\n    areas: areas,\n    isEnd: !!opt.isEnd,\n    removeOnClick: !!opt.removeOnClick\n  });\n}\n\nfunction shouldShowCover(controller) {\n  var track = controller._track;\n\n  if (!track.length) {\n    return false;\n  }\n\n  var p2 = track[track.length - 1];\n  var p1 = track[0];\n  var dx = p2[0] - p1[0];\n  var dy = p2[1] - p1[1];\n  var dist = mathPow(dx * dx + dy * dy, 0.5);\n  return dist > UNSELECT_THRESHOLD;\n}\n\nfunction getTrackEnds(track) {\n  var tail = track.length - 1;\n  tail < 0 && (tail = 0);\n  return [track[0], track[tail]];\n}\n\n;\n\nfunction createBaseRectCover(rectRangeConverter, controller, brushOption, edgeNameSequences) {\n  var cover = new graphic.Group();\n  cover.add(new graphic.Rect({\n    name: 'main',\n    style: makeStyle(brushOption),\n    silent: true,\n    draggable: true,\n    cursor: 'move',\n    drift: curry(driftRect, rectRangeConverter, controller, cover, ['n', 's', 'w', 'e']),\n    ondragend: curry(trigger, controller, {\n      isEnd: true\n    })\n  }));\n  each(edgeNameSequences, function (nameSequence) {\n    cover.add(new graphic.Rect({\n      name: nameSequence.join(''),\n      style: {\n        opacity: 0\n      },\n      draggable: true,\n      silent: true,\n      invisible: true,\n      drift: curry(driftRect, rectRangeConverter, controller, cover, nameSequence),\n      ondragend: curry(trigger, controller, {\n        isEnd: true\n      })\n    }));\n  });\n  return cover;\n}\n\nfunction updateBaseRect(controller, cover, localRange, brushOption) {\n  var lineWidth = brushOption.brushStyle.lineWidth || 0;\n  var handleSize = mathMax(lineWidth, MIN_RESIZE_LINE_WIDTH);\n  var x = localRange[0][0];\n  var y = localRange[1][0];\n  var xa = x - lineWidth / 2;\n  var ya = y - lineWidth / 2;\n  var x2 = localRange[0][1];\n  var y2 = localRange[1][1];\n  var x2a = x2 - handleSize + lineWidth / 2;\n  var y2a = y2 - handleSize + lineWidth / 2;\n  var width = x2 - x;\n  var height = y2 - y;\n  var widtha = width + lineWidth;\n  var heighta = height + lineWidth;\n  updateRectShape(controller, cover, 'main', x, y, width, height);\n\n  if (brushOption.transformable) {\n    updateRectShape(controller, cover, 'w', xa, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'e', x2a, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'n', xa, ya, widtha, handleSize);\n    updateRectShape(controller, cover, 's', xa, y2a, widtha, handleSize);\n    updateRectShape(controller, cover, 'nw', xa, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'ne', x2a, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'sw', xa, y2a, handleSize, handleSize);\n    updateRectShape(controller, cover, 'se', x2a, y2a, handleSize, handleSize);\n  }\n}\n\nfunction updateCommon(controller, cover) {\n  var brushOption = cover.__brushOption;\n  var transformable = brushOption.transformable;\n  var mainEl = cover.childAt(0);\n  mainEl.useStyle(makeStyle(brushOption));\n  mainEl.attr({\n    silent: !transformable,\n    cursor: transformable ? 'move' : 'default'\n  });\n  each([['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']], function (nameSequence) {\n    var el = cover.childOfName(nameSequence.join(''));\n    var globalDir = nameSequence.length === 1 ? getGlobalDirection1(controller, nameSequence[0]) : getGlobalDirection2(controller, nameSequence);\n    el && el.attr({\n      silent: !transformable,\n      invisible: !transformable,\n      cursor: transformable ? CURSOR_MAP[globalDir] + '-resize' : null\n    });\n  });\n}\n\nfunction updateRectShape(controller, cover, name, x, y, w, h) {\n  var el = cover.childOfName(name);\n  el && el.setShape(pointsToRect(clipByPanel(controller, cover, [[x, y], [x + w, y + h]])));\n}\n\nfunction makeStyle(brushOption) {\n  return defaults({\n    strokeNoScale: true\n  }, brushOption.brushStyle);\n}\n\nfunction formatRectRange(x, y, x2, y2) {\n  var min = [mathMin(x, x2), mathMin(y, y2)];\n  var max = [mathMax(x, x2), mathMax(y, y2)];\n  return [[min[0], max[0]], [min[1], max[1]] // y range\n  ];\n}\n\nfunction getTransform(controller) {\n  return graphic.getTransform(controller.group);\n}\n\nfunction getGlobalDirection1(controller, localDirName) {\n  var map = {\n    w: 'left',\n    e: 'right',\n    n: 'top',\n    s: 'bottom'\n  };\n  var inverseMap = {\n    left: 'w',\n    right: 'e',\n    top: 'n',\n    bottom: 's'\n  };\n  var dir = graphic.transformDirection(map[localDirName], getTransform(controller));\n  return inverseMap[dir];\n}\n\nfunction getGlobalDirection2(controller, localDirNameSeq) {\n  var globalDir = [getGlobalDirection1(controller, localDirNameSeq[0]), getGlobalDirection1(controller, localDirNameSeq[1])];\n  (globalDir[0] === 'e' || globalDir[0] === 'w') && globalDir.reverse();\n  return globalDir.join('');\n}\n\nfunction driftRect(rectRangeConverter, controller, cover, dirNameSequence, dx, dy) {\n  var brushOption = cover.__brushOption;\n  var rectRange = rectRangeConverter.toRectRange(brushOption.range);\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(dirNameSequence, function (dirName) {\n    var ind = DIRECTION_MAP[dirName];\n    rectRange[ind[0]][ind[1]] += localDelta[ind[0]];\n  });\n  brushOption.range = rectRangeConverter.fromRectRange(formatRectRange(rectRange[0][0], rectRange[1][0], rectRange[0][1], rectRange[1][1]));\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\n\nfunction driftPolygon(controller, cover, dx, dy) {\n  var range = cover.__brushOption.range;\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(range, function (point) {\n    point[0] += localDelta[0];\n    point[1] += localDelta[1];\n  });\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\n\nfunction toLocalDelta(controller, dx, dy) {\n  var thisGroup = controller.group;\n  var localD = thisGroup.transformCoordToLocal(dx, dy);\n  var localZero = thisGroup.transformCoordToLocal(0, 0);\n  return [localD[0] - localZero[0], localD[1] - localZero[1]];\n}\n\nfunction clipByPanel(controller, cover, data) {\n  var panel = getPanelByCover(controller, cover);\n  return panel && panel !== BRUSH_PANEL_GLOBAL ? panel.clipPath(data, controller._transform) : clone(data);\n}\n\nfunction pointsToRect(points) {\n  var xmin = mathMin(points[0][0], points[1][0]);\n  var ymin = mathMin(points[0][1], points[1][1]);\n  var xmax = mathMax(points[0][0], points[1][0]);\n  var ymax = mathMax(points[0][1], points[1][1]);\n  return {\n    x: xmin,\n    y: ymin,\n    width: xmax - xmin,\n    height: ymax - ymin\n  };\n}\n\nfunction resetCursor(controller, e, localCursorPoint) {\n  if ( // Check active\n  !controller._brushType // resetCursor should be always called when mouse is in zr area,\n  // but not called when mouse is out of zr area to avoid bad influence\n  // if `mousemove`, `mouseup` are triggered from `document` event.\n  || isOutsideZrArea(controller, e.offsetX, e.offsetY)) {\n    return;\n  }\n\n  var zr = controller._zr;\n  var covers = controller._covers;\n  var currPanel = getPanelByPoint(controller, e, localCursorPoint); // Check whether in covers.\n\n  if (!controller._dragging) {\n    for (var i = 0; i < covers.length; i++) {\n      var brushOption = covers[i].__brushOption;\n\n      if (currPanel && (currPanel === BRUSH_PANEL_GLOBAL || brushOption.panelId === currPanel.panelId) && coverRenderers[brushOption.brushType].contain(covers[i], localCursorPoint[0], localCursorPoint[1])) {\n        // Use cursor style set on cover.\n        return;\n      }\n    }\n  }\n\n  currPanel && zr.setCursorStyle('crosshair');\n}\n\nfunction preventDefault(e) {\n  var rawE = e.event;\n  rawE.preventDefault && rawE.preventDefault();\n}\n\nfunction mainShapeContain(cover, x, y) {\n  return cover.childOfName('main').contain(x, y);\n}\n\nfunction updateCoverByMouse(controller, e, localCursorPoint, isEnd) {\n  var creatingCover = controller._creatingCover;\n  var panel = controller._creatingPanel;\n  var thisBrushOption = controller._brushOption;\n  var eventParams;\n\n  controller._track.push(localCursorPoint.slice());\n\n  if (shouldShowCover(controller) || creatingCover) {\n    if (panel && !creatingCover) {\n      thisBrushOption.brushMode === 'single' && clearCovers(controller);\n      var brushOption = clone(thisBrushOption);\n      brushOption.brushType = determineBrushType(brushOption.brushType, panel);\n      brushOption.panelId = panel === BRUSH_PANEL_GLOBAL ? null : panel.panelId;\n      creatingCover = controller._creatingCover = createCover(controller, brushOption);\n\n      controller._covers.push(creatingCover);\n    }\n\n    if (creatingCover) {\n      var coverRenderer = coverRenderers[determineBrushType(controller._brushType, panel)];\n      var coverBrushOption = creatingCover.__brushOption;\n      coverBrushOption.range = coverRenderer.getCreatingRange(clipByPanel(controller, creatingCover, controller._track));\n\n      if (isEnd) {\n        endCreating(controller, creatingCover);\n        coverRenderer.updateCommon(controller, creatingCover);\n      }\n\n      updateCoverShape(controller, creatingCover);\n      eventParams = {\n        isEnd: isEnd\n      };\n    }\n  } else if (isEnd && thisBrushOption.brushMode === 'single' && thisBrushOption.removeOnClick) {\n    // Help user to remove covers easily, only by a tiny drag, in 'single' mode.\n    // But a single click do not clear covers, because user may have casual\n    // clicks (for example, click on other component and do not expect covers\n    // disappear).\n    // Only some cover removed, trigger action, but not every click trigger action.\n    if (getPanelByPoint(controller, e, localCursorPoint) && clearCovers(controller)) {\n      eventParams = {\n        isEnd: isEnd,\n        removeOnClick: true\n      };\n    }\n  }\n\n  return eventParams;\n}\n\nfunction determineBrushType(brushType, panel) {\n  if (brushType === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(panel && panel.defaultBrushType, 'MUST have defaultBrushType when brushType is \"atuo\"');\n    }\n\n    return panel.defaultBrushType;\n  }\n\n  return brushType;\n}\n\nvar pointerHandlers = {\n  mousedown: function (e) {\n    if (this._dragging) {\n      // In case some browser do not support globalOut,\n      // and release mouse out side the browser.\n      handleDragEnd(this, e);\n    } else if (!e.target || !e.target.draggable) {\n      preventDefault(e);\n      var localCursorPoint = this.group.transformCoordToLocal(e.offsetX, e.offsetY);\n      this._creatingCover = null;\n      var panel = this._creatingPanel = getPanelByPoint(this, e, localCursorPoint);\n\n      if (panel) {\n        this._dragging = true;\n        this._track = [localCursorPoint.slice()];\n      }\n    }\n  },\n  mousemove: function (e) {\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = this.group.transformCoordToLocal(x, y);\n    resetCursor(this, e, localCursorPoint);\n\n    if (this._dragging) {\n      preventDefault(e);\n      var eventParams = updateCoverByMouse(this, e, localCursorPoint, false);\n      eventParams && trigger(this, eventParams);\n    }\n  },\n  mouseup: function (e) {\n    handleDragEnd(this, e);\n  }\n};\n\nfunction handleDragEnd(controller, e) {\n  if (controller._dragging) {\n    preventDefault(e);\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = controller.group.transformCoordToLocal(x, y);\n    var eventParams = updateCoverByMouse(controller, e, localCursorPoint, true);\n    controller._dragging = false;\n    controller._track = [];\n    controller._creatingCover = null; // trigger event shoule be at final, after procedure will be nested.\n\n    eventParams && trigger(controller, eventParams);\n  }\n}\n\nfunction isOutsideZrArea(controller, x, y) {\n  var zr = controller._zr;\n  return x < 0 || x > zr.getWidth() || y < 0 || y > zr.getHeight();\n}\n/**\n * key: brushType\n */\n\n\nvar coverRenderers = {\n  lineX: getLineRenderer(0),\n  lineY: getLineRenderer(1),\n  rect: {\n    createCover: function (controller, brushOption) {\n      function returnInput(range) {\n        return range;\n      }\n\n      return createBaseRectCover({\n        toRectRange: returnInput,\n        fromRectRange: returnInput\n      }, controller, brushOption, [['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']]);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      return formatRectRange(ends[1][0], ends[1][1], ends[0][0], ends[0][1]);\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      updateBaseRect(controller, cover, localRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  },\n  polygon: {\n    createCover: function (controller, brushOption) {\n      var cover = new graphic.Group(); // Do not use graphic.Polygon because graphic.Polyline do not close the\n      // border of the shape when drawing, which is a better experience for user.\n\n      cover.add(new graphic.Polyline({\n        name: 'main',\n        style: makeStyle(brushOption),\n        silent: true\n      }));\n      return cover;\n    },\n    getCreatingRange: function (localTrack) {\n      return localTrack;\n    },\n    endCreating: function (controller, cover) {\n      cover.remove(cover.childAt(0)); // Use graphic.Polygon close the shape.\n\n      cover.add(new graphic.Polygon({\n        name: 'main',\n        draggable: true,\n        drift: curry(driftPolygon, controller, cover),\n        ondragend: curry(trigger, controller, {\n          isEnd: true\n        })\n      }));\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      cover.childAt(0).setShape({\n        points: clipByPanel(controller, cover, localRange)\n      });\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  }\n};\n\nfunction getLineRenderer(xyIndex) {\n  return {\n    createCover: function (controller, brushOption) {\n      return createBaseRectCover({\n        toRectRange: function (range) {\n          var rectRange = [range, [0, 100]];\n          xyIndex && rectRange.reverse();\n          return rectRange;\n        },\n        fromRectRange: function (rectRange) {\n          return rectRange[xyIndex];\n        }\n      }, controller, brushOption, [[['w'], ['e']], [['n'], ['s']]][xyIndex]);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      var min = mathMin(ends[0][xyIndex], ends[1][xyIndex]);\n      var max = mathMax(ends[0][xyIndex], ends[1][xyIndex]);\n      return [min, max];\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      var otherExtent; // If brushWidth not specified, fit the panel.\n\n      var panel = getPanelByCover(controller, cover);\n\n      if (panel !== BRUSH_PANEL_GLOBAL && panel.getLinearBrushOtherExtent) {\n        otherExtent = panel.getLinearBrushOtherExtent(xyIndex);\n      } else {\n        var zr = controller._zr;\n        otherExtent = [0, [zr.getWidth(), zr.getHeight()][1 - xyIndex]];\n      }\n\n      var rectRange = [localRange, otherExtent];\n      xyIndex && rectRange.reverse();\n      updateBaseRect(controller, cover, rectRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  };\n}\n\nexport default BrushController;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar IRRELEVANT_EXCLUDES = {\n  'axisPointer': 1,\n  'tooltip': 1,\n  'brush': 1\n};\n/**\n * Avoid that: mouse click on a elements that is over geo or graph,\n * but roam is triggered.\n */\n\nexport function onIrrelevantElement(e, api, targetCoordSysModel) {\n  var model = api.getComponentByElement(e.topTarget); // If model is axisModel, it works only if it is injected with coordinateSystem.\n\n  var coordSys = model && model.coordinateSystem;\n  return model && model !== targetCoordSysModel && !IRRELEVANT_EXCLUDES.hasOwnProperty(model.mainType) && coordSys && coordSys.model !== targetCoordSysModel;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport { onIrrelevantElement } from './cursorHelper.js';\nimport * as graphicUtil from '../../util/graphic.js';\nexport function makeRectPanelClipPath(rect) {\n  rect = normalizeRect(rect);\n  return function (localPoints) {\n    return graphicUtil.clipPointsByRect(localPoints, rect);\n  };\n}\nexport function makeLinearBrushOtherExtent(rect, specifiedXYIndex) {\n  rect = normalizeRect(rect);\n  return function (xyIndex) {\n    var idx = specifiedXYIndex != null ? specifiedXYIndex : xyIndex;\n    var brushWidth = idx ? rect.width : rect.height;\n    var base = idx ? rect.x : rect.y;\n    return [base, base + (brushWidth || 0)];\n  };\n}\nexport function makeRectIsTargetByCursor(rect, api, targetModel) {\n  var boundingRect = normalizeRect(rect);\n  return function (e, localCursorPoint) {\n    return boundingRect.contain(localCursorPoint[0], localCursorPoint[1]) && !onIrrelevantElement(e, api, targetModel);\n  };\n} // Consider width/height is negative.\n\nfunction normalizeRect(rect) {\n  return BoundingRect.create(rect);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, indexOf, curry, assert, map, createHashMap } from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as brushHelper from './brushHelper.js';\nimport { parseFinder as modelUtilParseFinder } from '../../util/model.js'; // FIXME\n// how to genarialize to more coordinate systems.\n\nvar INCLUDE_FINDER_MAIN_TYPES = ['grid', 'xAxis', 'yAxis', 'geo', 'graph', 'polar', 'radiusAxis', 'angleAxis', 'bmap'];\n\nvar BrushTargetManager =\n/** @class */\nfunction () {\n  /**\n   * @param finder contains Index/Id/Name of xAxis/yAxis/geo/grid\n   *        Each can be {number|Array.<number>}. like: {xAxisIndex: [3, 4]}\n   * @param opt.include include coordinate system types.\n   */\n  function BrushTargetManager(finder, ecModel, opt) {\n    var _this = this;\n\n    this._targetInfoList = [];\n    var foundCpts = parseFinder(ecModel, finder);\n    each(targetInfoBuilders, function (builder, type) {\n      if (!opt || !opt.include || indexOf(opt.include, type) >= 0) {\n        builder(foundCpts, _this._targetInfoList);\n      }\n    });\n  }\n\n  BrushTargetManager.prototype.setOutputRanges = function (areas, ecModel) {\n    this.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n      (area.coordRanges || (area.coordRanges = [])).push(coordRange); // area.coordRange is the first of area.coordRanges\n\n      if (!area.coordRange) {\n        area.coordRange = coordRange; // In 'category' axis, coord to pixel is not reversible, so we can not\n        // rebuild range by coordRange accrately, which may bring trouble when\n        // brushing only one item. So we use __rangeOffset to rebuilding range\n        // by coordRange. And this it only used in brush component so it is no\n        // need to be adapted to coordRanges.\n\n        var result = coordConvert[area.brushType](0, coordSys, coordRange);\n        area.__rangeOffset = {\n          offset: diffProcessor[area.brushType](result.values, area.range, [1, 1]),\n          xyMinMax: result.xyMinMax\n        };\n      }\n    });\n    return areas;\n  };\n\n  BrushTargetManager.prototype.matchOutputRanges = function (areas, ecModel, cb) {\n    each(areas, function (area) {\n      var targetInfo = this.findTargetInfo(area, ecModel);\n\n      if (targetInfo && targetInfo !== true) {\n        each(targetInfo.coordSyses, function (coordSys) {\n          var result = coordConvert[area.brushType](1, coordSys, area.range, true);\n          cb(area, result.values, coordSys, ecModel);\n        });\n      }\n    }, this);\n  };\n  /**\n   * the `areas` is `BrushModel.areas`.\n   * Called in layout stage.\n   * convert `area.coordRange` to global range and set panelId to `area.range`.\n   */\n\n\n  BrushTargetManager.prototype.setInputRanges = function (areas, ecModel) {\n    each(areas, function (area) {\n      var targetInfo = this.findTargetInfo(area, ecModel);\n\n      if (process.env.NODE_ENV !== 'production') {\n        assert(!targetInfo || targetInfo === true || area.coordRange, 'coordRange must be specified when coord index specified.');\n        assert(!targetInfo || targetInfo !== true || area.range, 'range must be specified in global brush.');\n      }\n\n      area.range = area.range || []; // convert coordRange to global range and set panelId.\n\n      if (targetInfo && targetInfo !== true) {\n        area.panelId = targetInfo.panelId; // (1) area.range shoule always be calculate from coordRange but does\n        // not keep its original value, for the sake of the dataZoom scenario,\n        // where area.coordRange remains unchanged but area.range may be changed.\n        // (2) Only support converting one coordRange to pixel range in brush\n        // component. So do not consider `coordRanges`.\n        // (3) About __rangeOffset, see comment above.\n\n        var result = coordConvert[area.brushType](0, targetInfo.coordSys, area.coordRange);\n        var rangeOffset = area.__rangeOffset;\n        area.range = rangeOffset ? diffProcessor[area.brushType](result.values, rangeOffset.offset, getScales(result.xyMinMax, rangeOffset.xyMinMax)) : result.values;\n      }\n    }, this);\n  };\n\n  BrushTargetManager.prototype.makePanelOpts = function (api, getDefaultBrushType) {\n    return map(this._targetInfoList, function (targetInfo) {\n      var rect = targetInfo.getPanelRect();\n      return {\n        panelId: targetInfo.panelId,\n        defaultBrushType: getDefaultBrushType ? getDefaultBrushType(targetInfo) : null,\n        clipPath: brushHelper.makeRectPanelClipPath(rect),\n        isTargetByCursor: brushHelper.makeRectIsTargetByCursor(rect, api, targetInfo.coordSysModel),\n        getLinearBrushOtherExtent: brushHelper.makeLinearBrushOtherExtent(rect)\n      };\n    });\n  };\n\n  BrushTargetManager.prototype.controlSeries = function (area, seriesModel, ecModel) {\n    // Check whether area is bound in coord, and series do not belong to that coord.\n    // If do not do this check, some brush (like lineX) will controll all axes.\n    var targetInfo = this.findTargetInfo(area, ecModel);\n    return targetInfo === true || targetInfo && indexOf(targetInfo.coordSyses, seriesModel.coordinateSystem) >= 0;\n  };\n  /**\n   * If return Object, a coord found.\n   * If reutrn true, global found.\n   * Otherwise nothing found.\n   */\n\n\n  BrushTargetManager.prototype.findTargetInfo = function (area, ecModel) {\n    var targetInfoList = this._targetInfoList;\n    var foundCpts = parseFinder(ecModel, area);\n\n    for (var i = 0; i < targetInfoList.length; i++) {\n      var targetInfo = targetInfoList[i];\n      var areaPanelId = area.panelId;\n\n      if (areaPanelId) {\n        if (targetInfo.panelId === areaPanelId) {\n          return targetInfo;\n        }\n      } else {\n        for (var j = 0; j < targetInfoMatchers.length; j++) {\n          if (targetInfoMatchers[j](foundCpts, targetInfo)) {\n            return targetInfo;\n          }\n        }\n      }\n    }\n\n    return true;\n  };\n\n  return BrushTargetManager;\n}();\n\nfunction formatMinMax(minMax) {\n  minMax[0] > minMax[1] && minMax.reverse();\n  return minMax;\n}\n\nfunction parseFinder(ecModel, finder) {\n  return modelUtilParseFinder(ecModel, finder, {\n    includeMainTypes: INCLUDE_FINDER_MAIN_TYPES\n  });\n}\n\nvar targetInfoBuilders = {\n  grid: function (foundCpts, targetInfoList) {\n    var xAxisModels = foundCpts.xAxisModels;\n    var yAxisModels = foundCpts.yAxisModels;\n    var gridModels = foundCpts.gridModels; // Remove duplicated.\n\n    var gridModelMap = createHashMap();\n    var xAxesHas = {};\n    var yAxesHas = {};\n\n    if (!xAxisModels && !yAxisModels && !gridModels) {\n      return;\n    }\n\n    each(xAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n    });\n    each(yAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      yAxesHas[gridModel.id] = true;\n    });\n    each(gridModels, function (gridModel) {\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n      yAxesHas[gridModel.id] = true;\n    });\n    gridModelMap.each(function (gridModel) {\n      var grid = gridModel.coordinateSystem;\n      var cartesians = [];\n      each(grid.getCartesians(), function (cartesian, index) {\n        if (indexOf(xAxisModels, cartesian.getAxis('x').model) >= 0 || indexOf(yAxisModels, cartesian.getAxis('y').model) >= 0) {\n          cartesians.push(cartesian);\n        }\n      });\n      targetInfoList.push({\n        panelId: 'grid--' + gridModel.id,\n        gridModel: gridModel,\n        coordSysModel: gridModel,\n        // Use the first one as the representitive coordSys.\n        coordSys: cartesians[0],\n        coordSyses: cartesians,\n        getPanelRect: panelRectBuilders.grid,\n        xAxisDeclared: xAxesHas[gridModel.id],\n        yAxisDeclared: yAxesHas[gridModel.id]\n      });\n    });\n  },\n  geo: function (foundCpts, targetInfoList) {\n    each(foundCpts.geoModels, function (geoModel) {\n      var coordSys = geoModel.coordinateSystem;\n      targetInfoList.push({\n        panelId: 'geo--' + geoModel.id,\n        geoModel: geoModel,\n        coordSysModel: geoModel,\n        coordSys: coordSys,\n        coordSyses: [coordSys],\n        getPanelRect: panelRectBuilders.geo\n      });\n    });\n  }\n};\nvar targetInfoMatchers = [// grid\nfunction (foundCpts, targetInfo) {\n  var xAxisModel = foundCpts.xAxisModel;\n  var yAxisModel = foundCpts.yAxisModel;\n  var gridModel = foundCpts.gridModel;\n  !gridModel && xAxisModel && (gridModel = xAxisModel.axis.grid.model);\n  !gridModel && yAxisModel && (gridModel = yAxisModel.axis.grid.model);\n  return gridModel && gridModel === targetInfo.gridModel;\n}, // geo\nfunction (foundCpts, targetInfo) {\n  var geoModel = foundCpts.geoModel;\n  return geoModel && geoModel === targetInfo.geoModel;\n}];\nvar panelRectBuilders = {\n  grid: function () {\n    // grid is not Transformable.\n    return this.coordSys.master.getRect().clone();\n  },\n  geo: function () {\n    var coordSys = this.coordSys;\n    var rect = coordSys.getBoundingRect().clone(); // geo roam and zoom transform\n\n    rect.applyTransform(graphic.getTransform(coordSys));\n    return rect;\n  }\n};\nvar coordConvert = {\n  lineX: curry(axisConvert, 0),\n  lineY: curry(axisConvert, 1),\n  rect: function (to, coordSys, rangeOrCoordRange, clamp) {\n    var xminymin = to ? coordSys.pointToData([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]], clamp) : coordSys.dataToPoint([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]], clamp);\n    var xmaxymax = to ? coordSys.pointToData([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]], clamp) : coordSys.dataToPoint([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]], clamp);\n    var values = [formatMinMax([xminymin[0], xmaxymax[0]]), formatMinMax([xminymin[1], xmaxymax[1]])];\n    return {\n      values: values,\n      xyMinMax: values\n    };\n  },\n  polygon: function (to, coordSys, rangeOrCoordRange, clamp) {\n    var xyMinMax = [[Infinity, -Infinity], [Infinity, -Infinity]];\n    var values = map(rangeOrCoordRange, function (item) {\n      var p = to ? coordSys.pointToData(item, clamp) : coordSys.dataToPoint(item, clamp);\n      xyMinMax[0][0] = Math.min(xyMinMax[0][0], p[0]);\n      xyMinMax[1][0] = Math.min(xyMinMax[1][0], p[1]);\n      xyMinMax[0][1] = Math.max(xyMinMax[0][1], p[0]);\n      xyMinMax[1][1] = Math.max(xyMinMax[1][1], p[1]);\n      return p;\n    });\n    return {\n      values: values,\n      xyMinMax: xyMinMax\n    };\n  }\n};\n\nfunction axisConvert(axisNameIndex, to, coordSys, rangeOrCoordRange) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(coordSys.type === 'cartesian2d', 'lineX/lineY brush is available only in cartesian2d.');\n  }\n\n  var axis = coordSys.getAxis(['x', 'y'][axisNameIndex]);\n  var values = formatMinMax(map([0, 1], function (i) {\n    return to ? axis.coordToData(axis.toLocalCoord(rangeOrCoordRange[i]), true) : axis.toGlobalCoord(axis.dataToCoord(rangeOrCoordRange[i]));\n  }));\n  var xyMinMax = [];\n  xyMinMax[axisNameIndex] = values;\n  xyMinMax[1 - axisNameIndex] = [NaN, NaN];\n  return {\n    values: values,\n    xyMinMax: xyMinMax\n  };\n}\n\nvar diffProcessor = {\n  lineX: curry(axisDiffProcessor, 0),\n  lineY: curry(axisDiffProcessor, 1),\n  rect: function (values, refer, scales) {\n    return [[values[0][0] - scales[0] * refer[0][0], values[0][1] - scales[0] * refer[0][1]], [values[1][0] - scales[1] * refer[1][0], values[1][1] - scales[1] * refer[1][1]]];\n  },\n  polygon: function (values, refer, scales) {\n    return map(values, function (item, idx) {\n      return [item[0] - scales[0] * refer[idx][0], item[1] - scales[1] * refer[idx][1]];\n    });\n  }\n};\n\nfunction axisDiffProcessor(axisNameIndex, values, refer, scales) {\n  return [values[0] - scales[axisNameIndex] * refer[0], values[1] - scales[axisNameIndex] * refer[1]];\n} // We have to process scale caused by dataZoom manually,\n// although it might be not accurate.\n// Return [0~1, 0~1]\n\n\nfunction getScales(xyMinMaxCurr, xyMinMaxOrigin) {\n  var sizeCurr = getSize(xyMinMaxCurr);\n  var sizeOrigin = getSize(xyMinMaxOrigin);\n  var scales = [sizeCurr[0] / sizeOrigin[0], sizeCurr[1] / sizeOrigin[1]];\n  isNaN(scales[0]) && (scales[0] = 1);\n  isNaN(scales[1]) && (scales[1] = 1);\n  return scales;\n}\n\nfunction getSize(xyMinMax) {\n  return xyMinMax ? [xyMinMax[0][1] - xyMinMax[0][0], xyMinMax[1][1] - xyMinMax[1][0]] : [NaN, NaN];\n}\n\nexport default BrushTargetManager;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\"; // TODO depends on DataZoom and Brush\n\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport BrushController from '../../helper/BrushController.js';\nimport BrushTargetManager from '../../helper/BrushTargetManager.js';\nimport * as history from '../../dataZoom/history.js';\nimport sliderMove from '../../helper/sliderMove.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { makeInternalComponentId, parseFinder } from '../../../util/model.js';\nimport { registerInternalOptionCreator } from '../../../model/internalComponentCreator.js';\nvar each = zrUtil.each;\nvar DATA_ZOOM_ID_BASE = makeInternalComponentId('toolbox-dataZoom_');\nvar ICON_TYPES = ['zoom', 'back'];\n\nvar DataZoomFeature =\n/** @class */\nfunction (_super) {\n  __extends(DataZoomFeature, _super);\n\n  function DataZoomFeature() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DataZoomFeature.prototype.render = function (featureModel, ecModel, api, payload) {\n    if (!this._brushController) {\n      this._brushController = new BrushController(api.getZr());\n\n      this._brushController.on('brush', zrUtil.bind(this._onBrush, this)).mount();\n    }\n\n    updateZoomBtnStatus(featureModel, ecModel, this, payload, api);\n    updateBackBtnStatus(featureModel, ecModel);\n  };\n\n  DataZoomFeature.prototype.onclick = function (ecModel, api, type) {\n    handlers[type].call(this);\n  };\n\n  DataZoomFeature.prototype.remove = function (ecModel, api) {\n    this._brushController && this._brushController.unmount();\n  };\n\n  DataZoomFeature.prototype.dispose = function (ecModel, api) {\n    this._brushController && this._brushController.dispose();\n  };\n\n  DataZoomFeature.prototype._onBrush = function (eventParam) {\n    var areas = eventParam.areas;\n\n    if (!eventParam.isEnd || !areas.length) {\n      return;\n    }\n\n    var snapshot = {};\n    var ecModel = this.ecModel;\n\n    this._brushController.updateCovers([]); // remove cover\n\n\n    var brushTargetManager = new BrushTargetManager(makeAxisFinder(this.model), ecModel, {\n      include: ['grid']\n    });\n    brushTargetManager.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n      if (coordSys.type !== 'cartesian2d') {\n        return;\n      }\n\n      var brushType = area.brushType;\n\n      if (brushType === 'rect') {\n        setBatch('x', coordSys, coordRange[0]);\n        setBatch('y', coordSys, coordRange[1]);\n      } else {\n        setBatch({\n          lineX: 'x',\n          lineY: 'y'\n        }[brushType], coordSys, coordRange);\n      }\n    });\n    history.push(ecModel, snapshot);\n\n    this._dispatchZoomAction(snapshot);\n\n    function setBatch(dimName, coordSys, minMax) {\n      var axis = coordSys.getAxis(dimName);\n      var axisModel = axis.model;\n      var dataZoomModel = findDataZoom(dimName, axisModel, ecModel); // Restrict range.\n\n      var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy(axisModel).getMinMaxSpan();\n\n      if (minMaxSpan.minValueSpan != null || minMaxSpan.maxValueSpan != null) {\n        minMax = sliderMove(0, minMax.slice(), axis.scale.getExtent(), 0, minMaxSpan.minValueSpan, minMaxSpan.maxValueSpan);\n      }\n\n      dataZoomModel && (snapshot[dataZoomModel.id] = {\n        dataZoomId: dataZoomModel.id,\n        startValue: minMax[0],\n        endValue: minMax[1]\n      });\n    }\n\n    function findDataZoom(dimName, axisModel, ecModel) {\n      var found;\n      ecModel.eachComponent({\n        mainType: 'dataZoom',\n        subType: 'select'\n      }, function (dzModel) {\n        var has = dzModel.getAxisModel(dimName, axisModel.componentIndex);\n        has && (found = dzModel);\n      });\n      return found;\n    }\n  };\n\n  ;\n\n  DataZoomFeature.prototype._dispatchZoomAction = function (snapshot) {\n    var batch = []; // Convert from hash map to array.\n\n    each(snapshot, function (batchItem, dataZoomId) {\n      batch.push(zrUtil.clone(batchItem));\n    });\n    batch.length && this.api.dispatchAction({\n      type: 'dataZoom',\n      from: this.uid,\n      batch: batch\n    });\n  };\n\n  DataZoomFeature.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      filterMode: 'filter',\n      // Icon group\n      icon: {\n        zoom: 'M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1',\n        back: 'M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26'\n      },\n      // `zoom`, `back`\n      title: ecModel.getLocaleModel().get(['toolbox', 'dataZoom', 'title']),\n      brushStyle: {\n        borderWidth: 0,\n        color: 'rgba(210,219,238,0.2)'\n      }\n    };\n    return defaultOption;\n  };\n\n  return DataZoomFeature;\n}(ToolboxFeature);\n\nvar handlers = {\n  zoom: function () {\n    var nextActive = !this._isZoomActive;\n    this.api.dispatchAction({\n      type: 'takeGlobalCursor',\n      key: 'dataZoomSelect',\n      dataZoomSelectActive: nextActive\n    });\n  },\n  back: function () {\n    this._dispatchZoomAction(history.pop(this.ecModel));\n  }\n};\n\nfunction makeAxisFinder(dzFeatureModel) {\n  var setting = {\n    xAxisIndex: dzFeatureModel.get('xAxisIndex', true),\n    yAxisIndex: dzFeatureModel.get('yAxisIndex', true),\n    xAxisId: dzFeatureModel.get('xAxisId', true),\n    yAxisId: dzFeatureModel.get('yAxisId', true)\n  }; // If both `xAxisIndex` `xAxisId` not set, it means 'all'.\n  // If both `yAxisIndex` `yAxisId` not set, it means 'all'.\n  // Some old cases set like this below to close yAxis control but leave xAxis control:\n  // `{ feature: { dataZoom: { yAxisIndex: false } }`.\n\n  if (setting.xAxisIndex == null && setting.xAxisId == null) {\n    setting.xAxisIndex = 'all';\n  }\n\n  if (setting.yAxisIndex == null && setting.yAxisId == null) {\n    setting.yAxisIndex = 'all';\n  }\n\n  return setting;\n}\n\nfunction updateBackBtnStatus(featureModel, ecModel) {\n  featureModel.setIconStatus('back', history.count(ecModel) > 1 ? 'emphasis' : 'normal');\n}\n\nfunction updateZoomBtnStatus(featureModel, ecModel, view, payload, api) {\n  var zoomActive = view._isZoomActive;\n\n  if (payload && payload.type === 'takeGlobalCursor') {\n    zoomActive = payload.key === 'dataZoomSelect' ? payload.dataZoomSelectActive : false;\n  }\n\n  view._isZoomActive = zoomActive;\n  featureModel.setIconStatus('zoom', zoomActive ? 'emphasis' : 'normal');\n  var brushTargetManager = new BrushTargetManager(makeAxisFinder(featureModel), ecModel, {\n    include: ['grid']\n  });\n  var panels = brushTargetManager.makePanelOpts(api, function (targetInfo) {\n    return targetInfo.xAxisDeclared && !targetInfo.yAxisDeclared ? 'lineX' : !targetInfo.xAxisDeclared && targetInfo.yAxisDeclared ? 'lineY' : 'rect';\n  });\n\n  view._brushController.setPanels(panels).enableBrush(zoomActive && panels.length ? {\n    brushType: 'auto',\n    brushStyle: featureModel.getModel('brushStyle').getItemStyle()\n  } : false);\n}\n\nregisterInternalOptionCreator('dataZoom', function (ecModel) {\n  var toolboxModel = ecModel.getComponent('toolbox', 0);\n  var featureDataZoomPath = ['feature', 'dataZoom'];\n\n  if (!toolboxModel || toolboxModel.get(featureDataZoomPath) == null) {\n    return;\n  }\n\n  var dzFeatureModel = toolboxModel.getModel(featureDataZoomPath);\n  var dzOptions = [];\n  var finder = makeAxisFinder(dzFeatureModel);\n  var finderResult = parseFinder(ecModel, finder);\n  each(finderResult.xAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'xAxis', 'xAxisIndex');\n  });\n  each(finderResult.yAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'yAxis', 'yAxisIndex');\n  });\n\n  function buildInternalOptions(axisModel, axisMainType, axisIndexPropName) {\n    var axisIndex = axisModel.componentIndex;\n    var newOpt = {\n      type: 'select',\n      $fromToolbox: true,\n      // Default to be filter\n      filterMode: dzFeatureModel.get('filterMode', true) || 'filter',\n      // Id for merge mapping.\n      id: DATA_ZOOM_ID_BASE + axisMainType + axisIndex\n    };\n    newOpt[axisIndexPropName] = axisIndex;\n    dzOptions.push(newOpt);\n  }\n\n  return dzOptions;\n});\nexport default DataZoomFeature;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport { install as installDataZoomSelect } from '../../component/dataZoom/installDataZoomSelect.js';\nimport ToolboxModel from './ToolboxModel.js';\nimport ToolboxView from './ToolboxView.js'; // TODOD: REGISTER IN INSTALL\n\nimport { registerFeature } from './featureManager.js';\nimport SaveAsImage from './feature/SaveAsImage.js';\nimport MagicType from './feature/MagicType.js';\nimport DataView from './feature/DataView.js';\nimport Restore from './feature/Restore.js';\nimport DataZoom from './feature/DataZoom.js';\nexport function install(registers) {\n  registers.registerComponentModel(ToolboxModel);\n  registers.registerComponentView(ToolboxView);\n  registerFeature('saveAsImage', SaveAsImage);\n  registerFeature('magicType', MagicType);\n  registerFeature('dataView', DataView);\n  registerFeature('dataZoom', DataZoom);\n  registerFeature('restore', Restore);\n  use(installDataZoomSelect);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport createSeriesData from '../helper/createSeriesData.js';\n\nvar BaseBarSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(BaseBarSeriesModel, _super);\n\n  function BaseBarSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = BaseBarSeriesModel.type;\n    return _this;\n  }\n\n  BaseBarSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true\n    });\n  };\n\n  BaseBarSeriesModel.prototype.getMarkerPosition = function (value) {\n    var coordSys = this.coordinateSystem;\n\n    if (coordSys && coordSys.clampData) {\n      // PENDING if clamp ?\n      var pt = coordSys.dataToPoint(coordSys.clampData(value));\n      var data = this.getData();\n      var offset = data.getLayout('offset');\n      var size = data.getLayout('size');\n      var offsetIndex = coordSys.getBaseAxis().isHorizontal() ? 0 : 1;\n      pt[offsetIndex] += offset + size / 2;\n      return pt;\n    }\n\n    return [NaN, NaN];\n  };\n\n  BaseBarSeriesModel.type = 'series.__base_bar__';\n  BaseBarSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    // stack: null\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    barMinHeight: 0,\n    barMinAngle: 0,\n    // cursor: null,\n    large: false,\n    largeThreshold: 400,\n    progressive: 3e3,\n    progressiveChunkMode: 'mod'\n  };\n  return BaseBarSeriesModel;\n}(SeriesModel);\n\nSeriesModel.registerClass(BaseBarSeriesModel);\nexport default BaseBarSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BaseBarSeriesModel from './BaseBarSeries.js';\nimport createSeriesData from '../helper/createSeriesData.js';\nimport { inheritDefaultOption } from '../../util/component.js';\n\nvar BarSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(BarSeriesModel, _super);\n\n  function BarSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = BarSeriesModel.type;\n    return _this;\n  }\n\n  BarSeriesModel.prototype.getInitialData = function () {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true,\n      createInvertedIndices: !!this.get('realtimeSort', true) || null\n    });\n  };\n  /**\n   * @override\n   */\n\n\n  BarSeriesModel.prototype.getProgressive = function () {\n    // Do not support progressive in normal mode.\n    return this.get('large') ? this.get('progressive') : false;\n  };\n  /**\n   * @override\n   */\n\n\n  BarSeriesModel.prototype.getProgressiveThreshold = function () {\n    // Do not support progressive in normal mode.\n    var progressiveThreshold = this.get('progressiveThreshold');\n    var largeThreshold = this.get('largeThreshold');\n\n    if (largeThreshold > progressiveThreshold) {\n      progressiveThreshold = largeThreshold;\n    }\n\n    return progressiveThreshold;\n  };\n\n  BarSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    return selectors.rect(data.getItemLayout(dataIndex));\n  };\n\n  BarSeriesModel.type = 'series.bar';\n  BarSeriesModel.dependencies = ['grid', 'polar'];\n  BarSeriesModel.defaultOption = inheritDefaultOption(BaseBarSeriesModel.defaultOption, {\n    // If clipped\n    // Only available on cartesian2d\n    clip: true,\n    roundCap: false,\n    showBackground: false,\n    backgroundStyle: {\n      color: 'rgba(180, 180, 180, 0.2)',\n      borderColor: null,\n      borderWidth: 0,\n      borderType: 'solid',\n      borderRadius: 0,\n      shadowBlur: 0,\n      shadowColor: null,\n      shadowOffsetX: 0,\n      shadowOffsetY: 0,\n      opacity: 1\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    },\n    realtimeSort: false\n  });\n  return BarSeriesModel;\n}(BaseBarSeriesModel);\n\nexport default BarSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { Path } from '../graphic.js';\n/**\n * Sausage: similar to sector, but have half circle on both sides\n */\n\nvar SausageShape =\n/** @class */\nfunction () {\n  function SausageShape() {\n    this.cx = 0;\n    this.cy = 0;\n    this.r0 = 0;\n    this.r = 0;\n    this.startAngle = 0;\n    this.endAngle = Math.PI * 2;\n    this.clockwise = true;\n  }\n\n  return SausageShape;\n}();\n\nvar SausagePath =\n/** @class */\nfunction (_super) {\n  __extends(SausagePath, _super);\n\n  function SausagePath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'sausage';\n    return _this;\n  }\n\n  SausagePath.prototype.getDefaultShape = function () {\n    return new SausageShape();\n  };\n\n  SausagePath.prototype.buildPath = function (ctx, shape) {\n    var cx = shape.cx;\n    var cy = shape.cy;\n    var r0 = Math.max(shape.r0 || 0, 0);\n    var r = Math.max(shape.r, 0);\n    var dr = (r - r0) * 0.5;\n    var rCenter = r0 + dr;\n    var startAngle = shape.startAngle;\n    var endAngle = shape.endAngle;\n    var clockwise = shape.clockwise;\n    var PI2 = Math.PI * 2;\n    var lessThanCircle = clockwise ? endAngle - startAngle < PI2 : startAngle - endAngle < PI2;\n\n    if (!lessThanCircle) {\n      // Normalize angles\n      startAngle = endAngle - (clockwise ? PI2 : -PI2);\n    }\n\n    var unitStartX = Math.cos(startAngle);\n    var unitStartY = Math.sin(startAngle);\n    var unitEndX = Math.cos(endAngle);\n    var unitEndY = Math.sin(endAngle);\n\n    if (lessThanCircle) {\n      ctx.moveTo(unitStartX * r0 + cx, unitStartY * r0 + cy);\n      ctx.arc(unitStartX * rCenter + cx, unitStartY * rCenter + cy, dr, -Math.PI + startAngle, startAngle, !clockwise);\n    } else {\n      ctx.moveTo(unitStartX * r + cx, unitStartY * r + cy);\n    }\n\n    ctx.arc(cx, cy, r, startAngle, endAngle, !clockwise);\n    ctx.arc(unitEndX * rCenter + cx, unitEndY * rCenter + cy, dr, endAngle - Math.PI * 2, endAngle - Math.PI, !clockwise);\n\n    if (r0 !== 0) {\n      ctx.arc(cx, cy, r0, endAngle, startAngle, clockwise);\n    } // ctx.closePath();\n\n  };\n\n  return SausagePath;\n}(Path);\n\nexport default SausagePath;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { calculateTextPosition } from 'zrender/lib/contain/text.js';\nimport { isArray, isNumber } from 'zrender/lib/core/util.js';\nexport function createSectorCalculateTextPosition(positionMapping, opts) {\n  opts = opts || {};\n  var isRoundCap = opts.isRoundCap;\n  return function (out, opts, boundingRect) {\n    var textPosition = opts.position;\n\n    if (!textPosition || textPosition instanceof Array) {\n      return calculateTextPosition(out, opts, boundingRect);\n    }\n\n    var mappedSectorPosition = positionMapping(textPosition);\n    var distance = opts.distance != null ? opts.distance : 5;\n    var sector = this.shape;\n    var cx = sector.cx;\n    var cy = sector.cy;\n    var r = sector.r;\n    var r0 = sector.r0;\n    var middleR = (r + r0) / 2;\n    var startAngle = sector.startAngle;\n    var endAngle = sector.endAngle;\n    var middleAngle = (startAngle + endAngle) / 2;\n    var extraDist = isRoundCap ? Math.abs(r - r0) / 2 : 0;\n    var mathCos = Math.cos;\n    var mathSin = Math.sin; // base position: top-left\n\n    var x = cx + r * mathCos(startAngle);\n    var y = cy + r * mathSin(startAngle);\n    var textAlign = 'left';\n    var textVerticalAlign = 'top';\n\n    switch (mappedSectorPosition) {\n      case 'startArc':\n        x = cx + (r0 - distance) * mathCos(middleAngle);\n        y = cy + (r0 - distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'top';\n        break;\n\n      case 'insideStartArc':\n        x = cx + (r0 + distance) * mathCos(middleAngle);\n        y = cy + (r0 + distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'bottom';\n        break;\n\n      case 'startAngle':\n        x = cx + middleR * mathCos(startAngle) + adjustAngleDistanceX(startAngle, distance + extraDist, false);\n        y = cy + middleR * mathSin(startAngle) + adjustAngleDistanceY(startAngle, distance + extraDist, false);\n        textAlign = 'right';\n        textVerticalAlign = 'middle';\n        break;\n\n      case 'insideStartAngle':\n        x = cx + middleR * mathCos(startAngle) + adjustAngleDistanceX(startAngle, -distance + extraDist, false);\n        y = cy + middleR * mathSin(startAngle) + adjustAngleDistanceY(startAngle, -distance + extraDist, false);\n        textAlign = 'left';\n        textVerticalAlign = 'middle';\n        break;\n\n      case 'middle':\n        x = cx + middleR * mathCos(middleAngle);\n        y = cy + middleR * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'middle';\n        break;\n\n      case 'endArc':\n        x = cx + (r + distance) * mathCos(middleAngle);\n        y = cy + (r + distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'bottom';\n        break;\n\n      case 'insideEndArc':\n        x = cx + (r - distance) * mathCos(middleAngle);\n        y = cy + (r - distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'top';\n        break;\n\n      case 'endAngle':\n        x = cx + middleR * mathCos(endAngle) + adjustAngleDistanceX(endAngle, distance + extraDist, true);\n        y = cy + middleR * mathSin(endAngle) + adjustAngleDistanceY(endAngle, distance + extraDist, true);\n        textAlign = 'left';\n        textVerticalAlign = 'middle';\n        break;\n\n      case 'insideEndAngle':\n        x = cx + middleR * mathCos(endAngle) + adjustAngleDistanceX(endAngle, -distance + extraDist, true);\n        y = cy + middleR * mathSin(endAngle) + adjustAngleDistanceY(endAngle, -distance + extraDist, true);\n        textAlign = 'right';\n        textVerticalAlign = 'middle';\n        break;\n\n      default:\n        return calculateTextPosition(out, opts, boundingRect);\n    }\n\n    out = out || {};\n    out.x = x;\n    out.y = y;\n    out.align = textAlign;\n    out.verticalAlign = textVerticalAlign;\n    return out;\n  };\n}\nexport function setSectorTextRotation(sector, textPosition, positionMapping, rotateType) {\n  if (isNumber(rotateType)) {\n    // user-set rotation\n    sector.setTextConfig({\n      rotation: rotateType\n    });\n    return;\n  } else if (isArray(textPosition)) {\n    // user-set position, use 0 as auto rotation\n    sector.setTextConfig({\n      rotation: 0\n    });\n    return;\n  }\n\n  var shape = sector.shape;\n  var startAngle = shape.clockwise ? shape.startAngle : shape.endAngle;\n  var endAngle = shape.clockwise ? shape.endAngle : shape.startAngle;\n  var middleAngle = (startAngle + endAngle) / 2;\n  var anchorAngle;\n  var mappedSectorPosition = positionMapping(textPosition);\n\n  switch (mappedSectorPosition) {\n    case 'startArc':\n    case 'insideStartArc':\n    case 'middle':\n    case 'insideEndArc':\n    case 'endArc':\n      anchorAngle = middleAngle;\n      break;\n\n    case 'startAngle':\n    case 'insideStartAngle':\n      anchorAngle = startAngle;\n      break;\n\n    case 'endAngle':\n    case 'insideEndAngle':\n      anchorAngle = endAngle;\n      break;\n\n    default:\n      sector.setTextConfig({\n        rotation: 0\n      });\n      return;\n  }\n\n  var rotate = Math.PI * 1.5 - anchorAngle;\n  /**\n   * TODO: labels with rotate > Math.PI / 2 should be rotate another\n   * half round flipped to increase readability. However, only middle\n   * position supports this for now, because in other positions, the\n   * anchor point is not at the center of the text, so the positions\n   * after rotating is not as expected.\n   */\n\n  if (mappedSectorPosition === 'middle' && rotate > Math.PI / 2 && rotate < Math.PI * 1.5) {\n    rotate -= Math.PI;\n  }\n\n  sector.setTextConfig({\n    rotation: rotate\n  });\n}\n\nfunction adjustAngleDistanceX(angle, distance, isEnd) {\n  return distance * Math.sin(angle) * (isEnd ? -1 : 1);\n}\n\nfunction adjustAngleDistanceY(angle, distance, isEnd) {\n  return distance * Math.cos(angle) * (isEnd ? 1 : -1);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Path from 'zrender/lib/graphic/Path.js';\nimport Group from 'zrender/lib/graphic/Group.js';\nimport { extend, each, map } from 'zrender/lib/core/util.js';\nimport { Rect, Sector, updateProps, initProps, removeElementWithFadeOut, traverseElements } from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport { setLabelStyle, getLabelStatesModels, setLabelValueAnimation, labelInner } from '../../label/labelStyle.js';\nimport { throttle } from '../../util/throttle.js';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\nimport Sausage from '../../util/shape/sausage.js';\nimport ChartView from '../../view/Chart.js';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem.js';\nimport { getDefaultLabel, getDefaultInterpolatedLabel } from '../helper/labelHelper.js';\nimport { warn } from '../../util/log.js';\nimport { createSectorCalculateTextPosition, setSectorTextRotation } from '../../label/sectorLabel.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nvar mathMax = Math.max;\nvar mathMin = Math.min;\n\nfunction getClipArea(coord, data) {\n  var coordSysClipArea = coord.getArea && coord.getArea();\n\n  if (isCoordinateSystemType(coord, 'cartesian2d')) {\n    var baseAxis = coord.getBaseAxis(); // When boundaryGap is false or using time axis. bar may exceed the grid.\n    // We should not clip this part.\n    // See test/bar2.html\n\n    if (baseAxis.type !== 'category' || !baseAxis.onBand) {\n      var expandWidth = data.getLayout('bandWidth');\n\n      if (baseAxis.isHorizontal()) {\n        coordSysClipArea.x -= expandWidth;\n        coordSysClipArea.width += expandWidth * 2;\n      } else {\n        coordSysClipArea.y -= expandWidth;\n        coordSysClipArea.height += expandWidth * 2;\n      }\n    }\n  }\n\n  return coordSysClipArea;\n}\n\nvar BarView =\n/** @class */\nfunction (_super) {\n  __extends(BarView, _super);\n\n  function BarView() {\n    var _this = _super.call(this) || this;\n\n    _this.type = BarView.type;\n    _this._isFirstFrame = true;\n    return _this;\n  }\n\n  BarView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    this._model = seriesModel;\n\n    this._removeOnRenderedListener(api);\n\n    this._updateDrawMode(seriesModel);\n\n    var coordinateSystemType = seriesModel.get('coordinateSystem');\n\n    if (coordinateSystemType === 'cartesian2d' || coordinateSystemType === 'polar') {\n      // Clear previously rendered progressive elements.\n      this._progressiveEls = null;\n      this._isLargeDraw ? this._renderLarge(seriesModel, ecModel, api) : this._renderNormal(seriesModel, ecModel, api, payload);\n    } else if (process.env.NODE_ENV !== 'production') {\n      warn('Only cartesian2d and polar supported for bar.');\n    }\n  };\n\n  BarView.prototype.incrementalPrepareRender = function (seriesModel) {\n    this._clear();\n\n    this._updateDrawMode(seriesModel); // incremental also need to clip, otherwise might be overlow.\n    // But must not set clip in each frame, otherwise all of the children will be marked redraw.\n\n\n    this._updateLargeClip(seriesModel);\n  };\n\n  BarView.prototype.incrementalRender = function (params, seriesModel) {\n    // Reset\n    this._progressiveEls = []; // Do not support progressive in normal mode.\n\n    this._incrementalRenderLarge(params, seriesModel);\n  };\n\n  BarView.prototype.eachRendered = function (cb) {\n    traverseElements(this._progressiveEls || this.group, cb);\n  };\n\n  BarView.prototype._updateDrawMode = function (seriesModel) {\n    var isLargeDraw = seriesModel.pipelineContext.large;\n\n    if (this._isLargeDraw == null || isLargeDraw !== this._isLargeDraw) {\n      this._isLargeDraw = isLargeDraw;\n\n      this._clear();\n    }\n  };\n\n  BarView.prototype._renderNormal = function (seriesModel, ecModel, api, payload) {\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var coord = seriesModel.coordinateSystem;\n    var baseAxis = coord.getBaseAxis();\n    var isHorizontalOrRadial;\n\n    if (coord.type === 'cartesian2d') {\n      isHorizontalOrRadial = baseAxis.isHorizontal();\n    } else if (coord.type === 'polar') {\n      isHorizontalOrRadial = baseAxis.dim === 'angle';\n    }\n\n    var animationModel = seriesModel.isAnimationEnabled() ? seriesModel : null;\n    var realtimeSortCfg = shouldRealtimeSort(seriesModel, coord);\n\n    if (realtimeSortCfg) {\n      this._enableRealtimeSort(realtimeSortCfg, data, api);\n    }\n\n    var needsClip = seriesModel.get('clip', true) || realtimeSortCfg;\n    var coordSysClipArea = getClipArea(coord, data); // If there is clipPath created in large mode. Remove it.\n\n    group.removeClipPath(); // We don't use clipPath in normal mode because we needs a perfect animation\n    // And don't want the label are clipped.\n\n    var roundCap = seriesModel.get('roundCap', true);\n    var drawBackground = seriesModel.get('showBackground', true);\n    var backgroundModel = seriesModel.getModel('backgroundStyle');\n    var barBorderRadius = backgroundModel.get('borderRadius') || 0;\n    var bgEls = [];\n    var oldBgEls = this._backgroundEls;\n    var isInitSort = payload && payload.isInitSort;\n    var isChangeOrder = payload && payload.type === 'changeAxisOrder';\n\n    function createBackground(dataIndex) {\n      var bgLayout = getLayout[coord.type](data, dataIndex);\n      var bgEl = createBackgroundEl(coord, isHorizontalOrRadial, bgLayout);\n      bgEl.useStyle(backgroundModel.getItemStyle()); // Only cartesian2d support borderRadius.\n\n      if (coord.type === 'cartesian2d') {\n        bgEl.setShape('r', barBorderRadius);\n      }\n\n      bgEls[dataIndex] = bgEl;\n      return bgEl;\n    }\n\n    ;\n    data.diff(oldData).add(function (dataIndex) {\n      var itemModel = data.getItemModel(dataIndex);\n      var layout = getLayout[coord.type](data, dataIndex, itemModel);\n\n      if (drawBackground) {\n        createBackground(dataIndex);\n      } // If dataZoom in filteMode: 'empty', the baseValue can be set as NaN in \"axisProxy\".\n\n\n      if (!data.hasValue(dataIndex) || !isValidLayout[coord.type](layout)) {\n        return;\n      }\n\n      var isClipped = false;\n\n      if (needsClip) {\n        // Clip will modify the layout params.\n        // And return a boolean to determine if the shape are fully clipped.\n        isClipped = clip[coord.type](coordSysClipArea, layout);\n      }\n\n      var el = elementCreator[coord.type](seriesModel, data, dataIndex, layout, isHorizontalOrRadial, animationModel, baseAxis.model, false, roundCap);\n\n      if (realtimeSortCfg) {\n        /**\n         * Force label animation because even if the element is\n         * ignored because it's clipped, it may not be clipped after\n         * changing order. Then, if not using forceLabelAnimation,\n         * the label animation was never started, in which case,\n         * the label will be the final value and doesn't have label\n         * animation.\n         */\n        el.forceLabelAnimation = true;\n      }\n\n      updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n\n      if (isInitSort) {\n        el.attr({\n          shape: layout\n        });\n      } else if (realtimeSortCfg) {\n        updateRealtimeAnimation(realtimeSortCfg, animationModel, el, layout, dataIndex, isHorizontalOrRadial, false, false);\n      } else {\n        initProps(el, {\n          shape: layout\n        }, seriesModel, dataIndex);\n      }\n\n      data.setItemGraphicEl(dataIndex, el);\n      group.add(el);\n      el.ignore = isClipped;\n    }).update(function (newIndex, oldIndex) {\n      var itemModel = data.getItemModel(newIndex);\n      var layout = getLayout[coord.type](data, newIndex, itemModel);\n\n      if (drawBackground) {\n        var bgEl = void 0;\n\n        if (oldBgEls.length === 0) {\n          bgEl = createBackground(oldIndex);\n        } else {\n          bgEl = oldBgEls[oldIndex];\n          bgEl.useStyle(backgroundModel.getItemStyle()); // Only cartesian2d support borderRadius.\n\n          if (coord.type === 'cartesian2d') {\n            bgEl.setShape('r', barBorderRadius);\n          }\n\n          bgEls[newIndex] = bgEl;\n        }\n\n        var bgLayout = getLayout[coord.type](data, newIndex);\n        var shape = createBackgroundShape(isHorizontalOrRadial, bgLayout, coord);\n        updateProps(bgEl, {\n          shape: shape\n        }, animationModel, newIndex);\n      }\n\n      var el = oldData.getItemGraphicEl(oldIndex);\n\n      if (!data.hasValue(newIndex) || !isValidLayout[coord.type](layout)) {\n        group.remove(el);\n        return;\n      }\n\n      var isClipped = false;\n\n      if (needsClip) {\n        isClipped = clip[coord.type](coordSysClipArea, layout);\n\n        if (isClipped) {\n          group.remove(el);\n        }\n      }\n\n      if (!el) {\n        el = elementCreator[coord.type](seriesModel, data, newIndex, layout, isHorizontalOrRadial, animationModel, baseAxis.model, !!el, roundCap);\n      } else {\n        saveOldStyle(el);\n      }\n\n      if (realtimeSortCfg) {\n        el.forceLabelAnimation = true;\n      }\n\n      if (isChangeOrder) {\n        var textEl = el.getTextContent();\n\n        if (textEl) {\n          var labelInnerStore = labelInner(textEl);\n\n          if (labelInnerStore.prevValue != null) {\n            /**\n             * Set preValue to be value so that no new label\n             * should be started, otherwise, it will take a full\n             * `animationDurationUpdate` time to finish the\n             * animation, which is not expected.\n             */\n            labelInnerStore.prevValue = labelInnerStore.value;\n          }\n        }\n      } // Not change anything if only order changed.\n      // Especially not change label.\n      else {\n          updateStyle(el, data, newIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n        }\n\n      if (isInitSort) {\n        el.attr({\n          shape: layout\n        });\n      } else if (realtimeSortCfg) {\n        updateRealtimeAnimation(realtimeSortCfg, animationModel, el, layout, newIndex, isHorizontalOrRadial, true, isChangeOrder);\n      } else {\n        updateProps(el, {\n          shape: layout\n        }, seriesModel, newIndex, null);\n      }\n\n      data.setItemGraphicEl(newIndex, el);\n      el.ignore = isClipped;\n      group.add(el);\n    }).remove(function (dataIndex) {\n      var el = oldData.getItemGraphicEl(dataIndex);\n      el && removeElementWithFadeOut(el, seriesModel, dataIndex);\n    }).execute();\n    var bgGroup = this._backgroundGroup || (this._backgroundGroup = new Group());\n    bgGroup.removeAll();\n\n    for (var i = 0; i < bgEls.length; ++i) {\n      bgGroup.add(bgEls[i]);\n    }\n\n    group.add(bgGroup);\n    this._backgroundEls = bgEls;\n    this._data = data;\n  };\n\n  BarView.prototype._renderLarge = function (seriesModel, ecModel, api) {\n    this._clear();\n\n    createLarge(seriesModel, this.group);\n\n    this._updateLargeClip(seriesModel);\n  };\n\n  BarView.prototype._incrementalRenderLarge = function (params, seriesModel) {\n    this._removeBackground();\n\n    createLarge(seriesModel, this.group, this._progressiveEls, true);\n  };\n\n  BarView.prototype._updateLargeClip = function (seriesModel) {\n    // Use clipPath in large mode.\n    var clipPath = seriesModel.get('clip', true) && createClipPath(seriesModel.coordinateSystem, false, seriesModel);\n    var group = this.group;\n\n    if (clipPath) {\n      group.setClipPath(clipPath);\n    } else {\n      group.removeClipPath();\n    }\n  };\n\n  BarView.prototype._enableRealtimeSort = function (realtimeSortCfg, data, api) {\n    var _this = this; // If no data in the first frame, wait for data to initSort\n\n\n    if (!data.count()) {\n      return;\n    }\n\n    var baseAxis = realtimeSortCfg.baseAxis;\n\n    if (this._isFirstFrame) {\n      this._dispatchInitSort(data, realtimeSortCfg, api);\n\n      this._isFirstFrame = false;\n    } else {\n      var orderMapping_1 = function (idx) {\n        var el = data.getItemGraphicEl(idx);\n        var shape = el && el.shape;\n        return shape && // The result should be consistent with the initial sort by data value.\n        // Do not support the case that both positive and negative exist.\n        Math.abs(baseAxis.isHorizontal() ? shape.height : shape.width) // If data is NaN, shape.xxx may be NaN, so use || 0 here in case\n        || 0;\n      };\n\n      this._onRendered = function () {\n        _this._updateSortWithinSameData(data, orderMapping_1, baseAxis, api);\n      };\n\n      api.getZr().on('rendered', this._onRendered);\n    }\n  };\n\n  BarView.prototype._dataSort = function (data, baseAxis, orderMapping) {\n    var info = [];\n    data.each(data.mapDimension(baseAxis.dim), function (ordinalNumber, dataIdx) {\n      var mappedValue = orderMapping(dataIdx);\n      mappedValue = mappedValue == null ? NaN : mappedValue;\n      info.push({\n        dataIndex: dataIdx,\n        mappedValue: mappedValue,\n        ordinalNumber: ordinalNumber\n      });\n    });\n    info.sort(function (a, b) {\n      // If NaN, it will be treated as min val.\n      return b.mappedValue - a.mappedValue;\n    });\n    return {\n      ordinalNumbers: map(info, function (item) {\n        return item.ordinalNumber;\n      })\n    };\n  };\n\n  BarView.prototype._isOrderChangedWithinSameData = function (data, orderMapping, baseAxis) {\n    var scale = baseAxis.scale;\n    var ordinalDataDim = data.mapDimension(baseAxis.dim);\n    var lastValue = Number.MAX_VALUE;\n\n    for (var tickNum = 0, len = scale.getOrdinalMeta().categories.length; tickNum < len; ++tickNum) {\n      var rawIdx = data.rawIndexOf(ordinalDataDim, scale.getRawOrdinalNumber(tickNum));\n      var value = rawIdx < 0 // If some tick have no bar, the tick will be treated as min.\n      ? Number.MIN_VALUE // PENDING: if dataZoom on baseAxis exits, is it a performance issue?\n      : orderMapping(data.indexOfRawIndex(rawIdx));\n\n      if (value > lastValue) {\n        return true;\n      }\n\n      lastValue = value;\n    }\n\n    return false;\n  };\n  /*\n   * Consider the case when A and B changed order, whose representing\n   * bars are both out of sight, we don't wish to trigger reorder action\n   * as long as the order in the view doesn't change.\n   */\n\n\n  BarView.prototype._isOrderDifferentInView = function (orderInfo, baseAxis) {\n    var scale = baseAxis.scale;\n    var extent = scale.getExtent();\n    var tickNum = Math.max(0, extent[0]);\n    var tickMax = Math.min(extent[1], scale.getOrdinalMeta().categories.length - 1);\n\n    for (; tickNum <= tickMax; ++tickNum) {\n      if (orderInfo.ordinalNumbers[tickNum] !== scale.getRawOrdinalNumber(tickNum)) {\n        return true;\n      }\n    }\n  };\n\n  BarView.prototype._updateSortWithinSameData = function (data, orderMapping, baseAxis, api) {\n    if (!this._isOrderChangedWithinSameData(data, orderMapping, baseAxis)) {\n      return;\n    }\n\n    var sortInfo = this._dataSort(data, baseAxis, orderMapping);\n\n    if (this._isOrderDifferentInView(sortInfo, baseAxis)) {\n      this._removeOnRenderedListener(api);\n\n      api.dispatchAction({\n        type: 'changeAxisOrder',\n        componentType: baseAxis.dim + 'Axis',\n        axisId: baseAxis.index,\n        sortInfo: sortInfo\n      });\n    }\n  };\n\n  BarView.prototype._dispatchInitSort = function (data, realtimeSortCfg, api) {\n    var baseAxis = realtimeSortCfg.baseAxis;\n\n    var sortResult = this._dataSort(data, baseAxis, function (dataIdx) {\n      return data.get(data.mapDimension(realtimeSortCfg.otherAxis.dim), dataIdx);\n    });\n\n    api.dispatchAction({\n      type: 'changeAxisOrder',\n      componentType: baseAxis.dim + 'Axis',\n      isInitSort: true,\n      axisId: baseAxis.index,\n      sortInfo: sortResult\n    });\n  };\n\n  BarView.prototype.remove = function (ecModel, api) {\n    this._clear(this._model);\n\n    this._removeOnRenderedListener(api);\n  };\n\n  BarView.prototype.dispose = function (ecModel, api) {\n    this._removeOnRenderedListener(api);\n  };\n\n  BarView.prototype._removeOnRenderedListener = function (api) {\n    if (this._onRendered) {\n      api.getZr().off('rendered', this._onRendered);\n      this._onRendered = null;\n    }\n  };\n\n  BarView.prototype._clear = function (model) {\n    var group = this.group;\n    var data = this._data;\n\n    if (model && model.isAnimationEnabled() && data && !this._isLargeDraw) {\n      this._removeBackground();\n\n      this._backgroundEls = [];\n      data.eachItemGraphicEl(function (el) {\n        removeElementWithFadeOut(el, model, getECData(el).dataIndex);\n      });\n    } else {\n      group.removeAll();\n    }\n\n    this._data = null;\n    this._isFirstFrame = true;\n  };\n\n  BarView.prototype._removeBackground = function () {\n    this.group.remove(this._backgroundGroup);\n    this._backgroundGroup = null;\n  };\n\n  BarView.type = 'bar';\n  return BarView;\n}(ChartView);\n\nvar clip = {\n  cartesian2d: function (coordSysBoundingRect, layout) {\n    var signWidth = layout.width < 0 ? -1 : 1;\n    var signHeight = layout.height < 0 ? -1 : 1; // Needs positive width and height\n\n    if (signWidth < 0) {\n      layout.x += layout.width;\n      layout.width = -layout.width;\n    }\n\n    if (signHeight < 0) {\n      layout.y += layout.height;\n      layout.height = -layout.height;\n    }\n\n    var coordSysX2 = coordSysBoundingRect.x + coordSysBoundingRect.width;\n    var coordSysY2 = coordSysBoundingRect.y + coordSysBoundingRect.height;\n    var x = mathMax(layout.x, coordSysBoundingRect.x);\n    var x2 = mathMin(layout.x + layout.width, coordSysX2);\n    var y = mathMax(layout.y, coordSysBoundingRect.y);\n    var y2 = mathMin(layout.y + layout.height, coordSysY2);\n    var xClipped = x2 < x;\n    var yClipped = y2 < y; // When xClipped or yClipped, the element will be marked as `ignore`.\n    // But we should also place the element at the edge of the coord sys bounding rect.\n    // Beause if data changed and the bar show again, its transition animaiton\n    // will begin at this place.\n\n    layout.x = xClipped && x > coordSysX2 ? x2 : x;\n    layout.y = yClipped && y > coordSysY2 ? y2 : y;\n    layout.width = xClipped ? 0 : x2 - x;\n    layout.height = yClipped ? 0 : y2 - y; // Reverse back\n\n    if (signWidth < 0) {\n      layout.x += layout.width;\n      layout.width = -layout.width;\n    }\n\n    if (signHeight < 0) {\n      layout.y += layout.height;\n      layout.height = -layout.height;\n    }\n\n    return xClipped || yClipped;\n  },\n  polar: function (coordSysClipArea, layout) {\n    var signR = layout.r0 <= layout.r ? 1 : -1; // Make sure r is larger than r0\n\n    if (signR < 0) {\n      var tmp = layout.r;\n      layout.r = layout.r0;\n      layout.r0 = tmp;\n    }\n\n    var r = mathMin(layout.r, coordSysClipArea.r);\n    var r0 = mathMax(layout.r0, coordSysClipArea.r0);\n    layout.r = r;\n    layout.r0 = r0;\n    var clipped = r - r0 < 0; // Reverse back\n\n    if (signR < 0) {\n      var tmp = layout.r;\n      layout.r = layout.r0;\n      layout.r0 = tmp;\n    }\n\n    return clipped;\n  }\n};\nvar elementCreator = {\n  cartesian2d: function (seriesModel, data, newIndex, layout, isHorizontal, animationModel, axisModel, isUpdate, roundCap) {\n    var rect = new Rect({\n      shape: extend({}, layout),\n      z2: 1\n    });\n    rect.__dataIndex = newIndex;\n    rect.name = 'item';\n\n    if (animationModel) {\n      var rectShape = rect.shape;\n      var animateProperty = isHorizontal ? 'height' : 'width';\n      rectShape[animateProperty] = 0;\n    }\n\n    return rect;\n  },\n  polar: function (seriesModel, data, newIndex, layout, isRadial, animationModel, axisModel, isUpdate, roundCap) {\n    var ShapeClass = !isRadial && roundCap ? Sausage : Sector;\n    var sector = new ShapeClass({\n      shape: layout,\n      z2: 1\n    });\n    sector.name = 'item';\n    var positionMap = createPolarPositionMapping(isRadial);\n    sector.calculateTextPosition = createSectorCalculateTextPosition(positionMap, {\n      isRoundCap: ShapeClass === Sausage\n    }); // Animation\n\n    if (animationModel) {\n      var sectorShape = sector.shape;\n      var animateProperty = isRadial ? 'r' : 'endAngle';\n      var animateTarget = {};\n      sectorShape[animateProperty] = isRadial ? 0 : layout.startAngle;\n      animateTarget[animateProperty] = layout[animateProperty];\n      (isUpdate ? updateProps : initProps)(sector, {\n        shape: animateTarget // __value: typeof dataValue === 'string' ? parseInt(dataValue, 10) : dataValue\n\n      }, animationModel);\n    }\n\n    return sector;\n  }\n};\n\nfunction shouldRealtimeSort(seriesModel, coordSys) {\n  var realtimeSortOption = seriesModel.get('realtimeSort', true);\n  var baseAxis = coordSys.getBaseAxis();\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (realtimeSortOption) {\n      if (baseAxis.type !== 'category') {\n        warn('`realtimeSort` will not work because this bar series is not based on a category axis.');\n      }\n\n      if (coordSys.type !== 'cartesian2d') {\n        warn('`realtimeSort` will not work because this bar series is not on cartesian2d.');\n      }\n    }\n  }\n\n  if (realtimeSortOption && baseAxis.type === 'category' && coordSys.type === 'cartesian2d') {\n    return {\n      baseAxis: baseAxis,\n      otherAxis: coordSys.getOtherAxis(baseAxis)\n    };\n  }\n}\n\nfunction updateRealtimeAnimation(realtimeSortCfg, seriesAnimationModel, el, layout, newIndex, isHorizontal, isUpdate, isChangeOrder) {\n  var seriesTarget;\n  var axisTarget;\n\n  if (isHorizontal) {\n    axisTarget = {\n      x: layout.x,\n      width: layout.width\n    };\n    seriesTarget = {\n      y: layout.y,\n      height: layout.height\n    };\n  } else {\n    axisTarget = {\n      y: layout.y,\n      height: layout.height\n    };\n    seriesTarget = {\n      x: layout.x,\n      width: layout.width\n    };\n  }\n\n  if (!isChangeOrder) {\n    // Keep the original growth animation if only axis order changed.\n    // Not start a new animation.\n    (isUpdate ? updateProps : initProps)(el, {\n      shape: seriesTarget\n    }, seriesAnimationModel, newIndex, null);\n  }\n\n  var axisAnimationModel = seriesAnimationModel ? realtimeSortCfg.baseAxis.model : null;\n  (isUpdate ? updateProps : initProps)(el, {\n    shape: axisTarget\n  }, axisAnimationModel, newIndex);\n}\n\nfunction checkPropertiesNotValid(obj, props) {\n  for (var i = 0; i < props.length; i++) {\n    if (!isFinite(obj[props[i]])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nvar rectPropties = ['x', 'y', 'width', 'height'];\nvar polarPropties = ['cx', 'cy', 'r', 'startAngle', 'endAngle'];\nvar isValidLayout = {\n  cartesian2d: function (layout) {\n    return !checkPropertiesNotValid(layout, rectPropties);\n  },\n  polar: function (layout) {\n    return !checkPropertiesNotValid(layout, polarPropties);\n  }\n};\nvar getLayout = {\n  // itemModel is only used to get borderWidth, which is not needed\n  // when calculating bar background layout.\n  cartesian2d: function (data, dataIndex, itemModel) {\n    var layout = data.getItemLayout(dataIndex);\n    var fixedLineWidth = itemModel ? getLineWidth(itemModel, layout) : 0; // fix layout with lineWidth\n\n    var signX = layout.width > 0 ? 1 : -1;\n    var signY = layout.height > 0 ? 1 : -1;\n    return {\n      x: layout.x + signX * fixedLineWidth / 2,\n      y: layout.y + signY * fixedLineWidth / 2,\n      width: layout.width - signX * fixedLineWidth,\n      height: layout.height - signY * fixedLineWidth\n    };\n  },\n  polar: function (data, dataIndex, itemModel) {\n    var layout = data.getItemLayout(dataIndex);\n    return {\n      cx: layout.cx,\n      cy: layout.cy,\n      r0: layout.r0,\n      r: layout.r,\n      startAngle: layout.startAngle,\n      endAngle: layout.endAngle,\n      clockwise: layout.clockwise\n    };\n  }\n};\n\nfunction isZeroOnPolar(layout) {\n  return layout.startAngle != null && layout.endAngle != null && layout.startAngle === layout.endAngle;\n}\n\nfunction createPolarPositionMapping(isRadial) {\n  return function (isRadial) {\n    var arcOrAngle = isRadial ? 'Arc' : 'Angle';\n    return function (position) {\n      switch (position) {\n        case 'start':\n        case 'insideStart':\n        case 'end':\n        case 'insideEnd':\n          return position + arcOrAngle;\n\n        default:\n          return position;\n      }\n    };\n  }(isRadial);\n}\n\nfunction updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, isPolar) {\n  var style = data.getItemVisual(dataIndex, 'style');\n\n  if (!isPolar) {\n    el.setShape('r', itemModel.get(['itemStyle', 'borderRadius']) || 0);\n  }\n\n  el.useStyle(style);\n  var cursorStyle = itemModel.getShallow('cursor');\n  cursorStyle && el.attr('cursor', cursorStyle);\n  var labelPositionOutside = isPolar ? isHorizontalOrRadial ? layout.r >= layout.r0 ? 'endArc' : 'startArc' : layout.endAngle >= layout.startAngle ? 'endAngle' : 'startAngle' : isHorizontalOrRadial ? layout.height >= 0 ? 'bottom' : 'top' : layout.width >= 0 ? 'right' : 'left';\n  var labelStatesModels = getLabelStatesModels(itemModel);\n  setLabelStyle(el, labelStatesModels, {\n    labelFetcher: seriesModel,\n    labelDataIndex: dataIndex,\n    defaultText: getDefaultLabel(seriesModel.getData(), dataIndex),\n    inheritColor: style.fill,\n    defaultOpacity: style.opacity,\n    defaultOutsidePosition: labelPositionOutside\n  });\n  var label = el.getTextContent();\n\n  if (isPolar && label) {\n    var position = itemModel.get(['label', 'position']);\n    el.textConfig.inside = position === 'middle' ? true : null;\n    setSectorTextRotation(el, position === 'outside' ? labelPositionOutside : position, createPolarPositionMapping(isHorizontalOrRadial), itemModel.get(['label', 'rotate']));\n  }\n\n  setLabelValueAnimation(label, labelStatesModels, seriesModel.getRawValue(dataIndex), function (value) {\n    return getDefaultInterpolatedLabel(data, value);\n  });\n  var emphasisModel = itemModel.getModel(['emphasis']);\n  toggleHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n  setStatesStylesFromModel(el, itemModel);\n\n  if (isZeroOnPolar(layout)) {\n    el.style.fill = 'none';\n    el.style.stroke = 'none';\n    each(el.states, function (state) {\n      if (state.style) {\n        state.style.fill = state.style.stroke = 'none';\n      }\n    });\n  }\n} // In case width or height are too small.\n\n\nfunction getLineWidth(itemModel, rawLayout) {\n  // Has no border.\n  var borderColor = itemModel.get(['itemStyle', 'borderColor']);\n\n  if (!borderColor || borderColor === 'none') {\n    return 0;\n  }\n\n  var lineWidth = itemModel.get(['itemStyle', 'borderWidth']) || 0; // width or height may be NaN for empty data\n\n  var width = isNaN(rawLayout.width) ? Number.MAX_VALUE : Math.abs(rawLayout.width);\n  var height = isNaN(rawLayout.height) ? Number.MAX_VALUE : Math.abs(rawLayout.height);\n  return Math.min(lineWidth, width, height);\n}\n\nvar LagePathShape =\n/** @class */\nfunction () {\n  function LagePathShape() {}\n\n  return LagePathShape;\n}();\n\nvar LargePath =\n/** @class */\nfunction (_super) {\n  __extends(LargePath, _super);\n\n  function LargePath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'largeBar';\n    return _this;\n  }\n\n  LargePath.prototype.getDefaultShape = function () {\n    return new LagePathShape();\n  };\n\n  LargePath.prototype.buildPath = function (ctx, shape) {\n    // Drawing lines is more efficient than drawing\n    // a whole line or drawing rects.\n    var points = shape.points;\n    var baseDimIdx = this.baseDimIdx;\n    var valueDimIdx = 1 - this.baseDimIdx;\n    var startPoint = [];\n    var size = [];\n    var barWidth = this.barWidth;\n\n    for (var i = 0; i < points.length; i += 3) {\n      size[baseDimIdx] = barWidth;\n      size[valueDimIdx] = points[i + 2];\n      startPoint[baseDimIdx] = points[i + baseDimIdx];\n      startPoint[valueDimIdx] = points[i + valueDimIdx];\n      ctx.rect(startPoint[0], startPoint[1], size[0], size[1]);\n    }\n  };\n\n  return LargePath;\n}(Path);\n\nfunction createLarge(seriesModel, group, progressiveEls, incremental) {\n  // TODO support polar\n  var data = seriesModel.getData();\n  var baseDimIdx = data.getLayout('valueAxisHorizontal') ? 1 : 0;\n  var largeDataIndices = data.getLayout('largeDataIndices');\n  var barWidth = data.getLayout('size');\n  var backgroundModel = seriesModel.getModel('backgroundStyle');\n  var bgPoints = data.getLayout('largeBackgroundPoints');\n\n  if (bgPoints) {\n    var bgEl = new LargePath({\n      shape: {\n        points: bgPoints\n      },\n      incremental: !!incremental,\n      silent: true,\n      z2: 0\n    });\n    bgEl.baseDimIdx = baseDimIdx;\n    bgEl.largeDataIndices = largeDataIndices;\n    bgEl.barWidth = barWidth;\n    bgEl.useStyle(backgroundModel.getItemStyle());\n    group.add(bgEl);\n    progressiveEls && progressiveEls.push(bgEl);\n  }\n\n  var el = new LargePath({\n    shape: {\n      points: data.getLayout('largePoints')\n    },\n    incremental: !!incremental,\n    ignoreCoarsePointer: true,\n    z2: 1\n  });\n  el.baseDimIdx = baseDimIdx;\n  el.largeDataIndices = largeDataIndices;\n  el.barWidth = barWidth;\n  group.add(el);\n  el.useStyle(data.getVisual('style')); // Enable tooltip and user mouse/touch event handlers.\n\n  getECData(el).seriesIndex = seriesModel.seriesIndex;\n\n  if (!seriesModel.get('silent')) {\n    el.on('mousedown', largePathUpdateDataIndex);\n    el.on('mousemove', largePathUpdateDataIndex);\n  }\n\n  progressiveEls && progressiveEls.push(el);\n} // Use throttle to avoid frequently traverse to find dataIndex.\n\n\nvar largePathUpdateDataIndex = throttle(function (event) {\n  var largePath = this;\n  var dataIndex = largePathFindDataIndex(largePath, event.offsetX, event.offsetY);\n  getECData(largePath).dataIndex = dataIndex >= 0 ? dataIndex : null;\n}, 30, false);\n\nfunction largePathFindDataIndex(largePath, x, y) {\n  var baseDimIdx = largePath.baseDimIdx;\n  var valueDimIdx = 1 - baseDimIdx;\n  var points = largePath.shape.points;\n  var largeDataIndices = largePath.largeDataIndices;\n  var startPoint = [];\n  var size = [];\n  var barWidth = largePath.barWidth;\n\n  for (var i = 0, len = points.length / 3; i < len; i++) {\n    var ii = i * 3;\n    size[baseDimIdx] = barWidth;\n    size[valueDimIdx] = points[ii + 2];\n    startPoint[baseDimIdx] = points[ii + baseDimIdx];\n    startPoint[valueDimIdx] = points[ii + valueDimIdx];\n\n    if (size[valueDimIdx] < 0) {\n      startPoint[valueDimIdx] += size[valueDimIdx];\n      size[valueDimIdx] = -size[valueDimIdx];\n    }\n\n    if (x >= startPoint[0] && x <= startPoint[0] + size[0] && y >= startPoint[1] && y <= startPoint[1] + size[1]) {\n      return largeDataIndices[i];\n    }\n  }\n\n  return -1;\n}\n\nfunction createBackgroundShape(isHorizontalOrRadial, layout, coord) {\n  if (isCoordinateSystemType(coord, 'cartesian2d')) {\n    var rectShape = layout;\n    var coordLayout = coord.getArea();\n    return {\n      x: isHorizontalOrRadial ? rectShape.x : coordLayout.x,\n      y: isHorizontalOrRadial ? coordLayout.y : rectShape.y,\n      width: isHorizontalOrRadial ? rectShape.width : coordLayout.width,\n      height: isHorizontalOrRadial ? coordLayout.height : rectShape.height\n    };\n  } else {\n    var coordLayout = coord.getArea();\n    var sectorShape = layout;\n    return {\n      cx: coordLayout.cx,\n      cy: coordLayout.cy,\n      r0: isHorizontalOrRadial ? coordLayout.r0 : sectorShape.r0,\n      r: isHorizontalOrRadial ? coordLayout.r : sectorShape.r,\n      startAngle: isHorizontalOrRadial ? sectorShape.startAngle : 0,\n      endAngle: isHorizontalOrRadial ? sectorShape.endAngle : Math.PI * 2\n    };\n  }\n}\n\nfunction createBackgroundEl(coord, isHorizontalOrRadial, layout) {\n  var ElementClz = coord.type === 'polar' ? Sector : Rect;\n  return new ElementClz({\n    shape: createBackgroundShape(isHorizontalOrRadial, layout, coord),\n    silent: true,\n    z2: 0\n  });\n}\n\nexport default BarView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { layout, createProgressiveLayout } from '../../layout/barGrid.js';\nimport dataSample from '../../processor/dataSample.js';\nimport BarSeries from './BarSeries.js';\nimport BarView from './BarView.js';\nexport function install(registers) {\n  registers.registerChartView(BarView);\n  registers.registerSeriesModel(BarSeries);\n  registers.registerLayout(registers.PRIORITY.VISUAL.LAYOUT, zrUtil.curry(layout, 'bar')); // Do layout after other overall layout, which can preapre some informations.\n\n  registers.registerLayout(registers.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT, createProgressiveLayout('bar')); // Down sample after filter\n\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, dataSample('bar'));\n  /**\n   * @payload\n   * @property {string} [componentType=series]\n   * @property {number} [dx]\n   * @property {number} [dy]\n   * @property {number} [zoom]\n   * @property {number} [originX]\n   * @property {number} [originY]\n   */\n\n  registers.registerAction({\n    type: 'changeAxisOrder',\n    event: 'changeAxisOrder',\n    update: 'update'\n  }, function (payload, ecModel) {\n    var componentType = payload.componentType || 'series';\n    ecModel.eachComponent({\n      mainType: componentType,\n      query: payload\n    }, function (componentModel) {\n      if (payload.sortInfo) {\n        componentModel.axis.setCategorySortInfo(payload.sortInfo);\n      }\n    });\n  });\n}"],"sourceRoot":""}