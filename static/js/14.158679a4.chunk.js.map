{"version":3,"sources":["../node_modules/lodash/reverse.js","../node_modules/@material-ui/core/esm/ButtonGroup/ButtonGroup.js","constants/date.js","components/MyStatement/index.jsx","pages/InvestNew/Deposit/style.js","pages/InvestNew/Deposit/index.jsx","pages/InvestNew/Withdraw/style.js","pages/InvestNew/Withdraw/index.jsx","pages/InvestNew/style.js","pages/InvestNew/index.jsx"],"names":["nativeReverse","Array","prototype","reverse","module","exports","array","call","Button","styles","ButtonGroup","React","props","ref","children","classes","className","_props$color","color","_props$component","component","Component","_props$disabled","disabled","_props$disableElevati","disableElevation","_props$disableFocusRi","disableFocusRipple","_props$disableRipple","disableRipple","_props$fullWidth","fullWidth","_props$orientation","orientation","_props$size","size","_props$variant","variant","other","_objectWithoutProperties","buttonClassName","clsx","grouped","concat","capitalize","_extends","role","root","contained","vertical","map","child","withStyles","theme","display","borderRadius","shape","boxShadow","shadows","width","flexDirection","minWidth","groupedHorizontal","borderTopLeftRadius","borderBottomLeftRadius","borderTopRightRadius","borderBottomRightRadius","groupedVertical","groupedText","groupedTextHorizontal","borderRight","palette","type","groupedTextVertical","borderBottom","groupedTextPrimary","borderColor","fade","primary","main","groupedTextSecondary","secondary","groupedOutlined","groupedOutlinedHorizontal","marginLeft","borderRightColor","groupedOutlinedVertical","marginTop","borderBottomColor","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","grey","action","groupedContainedVertical","groupedContainedPrimary","dark","groupedContainedSecondary","name","SEGMENT_TYPES","useStyles","makeStyles","getMarker","MyStatement","address","chain","isUSDi","useState","data","setData","loading","setLoading","segmentType","setSegmentType","optionForLineChart","setOptionForLineChart","optionForBarChart","setOptionForBarChart","usePersonalData","dataSource","chartLoading","titleRender","title","isWeek","split","index","isMonth","moment","format","isDay","m","d","useEffect","isEmpty","getSegmentProfit","then","resp","profits","i","segmentTime","value","profit","finally","setTimeout","tvls","reverseArray","continuousIndex","findIndex","item","length","Math","abs","balance","startPercent","option1","getLineEchartOpt","token","dataZoom","start","end","xAxis","axisTick","alignWithLabel","console","log","option","show","textStyle","fontSize","text","left","top","tooltip","trigger","axisPointer","formatter","params","param","message","marker","seriesName","toFixed","TOKEN_DISPLAY_DECIMALS","ETHI_PROFITS_DISPLAY_DECIMALS","segmentBegin","segmentEnd","grid","right","bottom","containLabel","axisLine","onZero","splitLine","splitArea","yAxis","lineStyle","series","day7Apy","day30Apy","latestProfit","tokenType","cardProps","tip","Tooltip","placement","style","content","numeral","ETHI_BN_DECIMALS","ETHI_DISPLAY_DECIMALS","footer","unit","apy","isAPY","GridContainer","GridItem","xs","sm","md","lg","key","Card","lineChart","loadingOption","height","minHeight","barChart","classnames","groupButtonCheck","onClick","componentsStyle","container","modal","alignItems","justifyContent","modalBody","textAlign","depositContainer","border","padding","estimateContainer","estimateText","margin","estimateBalanceTitle","estimateBalanceNum","float","footerContainer","tokenInputWrapper","marginBottom","inputLabelWrapper","input","maxWidth","depositComfirmArea","tokenInfo","tokenLogo","marginRight","tokenName","flexText","ModalTokenLogo","labelToolTipIcon","depositModal","backgroundColor","outline","paddingTop","subTitle","BigNumber","ethers","TOKEN","steps","Deposit","usdtBalance","usdtDecimals","usdcBalance","usdcDecimals","daiBalance","daiDecimals","usdiDecimals","userProvider","VAULT_ABI","VAULT_ADDRESS","vaultBufferBalance","vaultBufferDecimals","isBalanceLoading","minimumInvestmentAmount","dispatch","useDispatch","usdtValue","setUsdtValue","usdcValue","setUsdcValue","daiValue","setDaiValue","isLoading","setIsLoading","isEstimate","setIsEstimate","isOpenEstimateModal","setIsOpenEstimateModal","from","estimateVaultBuffValue","setEstimateVaultBuffValue","loadingTimer","useRef","nextRebaseTime","getLastPossibleRebaseTime","tokenBasicState","decimals","formConfig","USDT_ADDRESS","image","setValue","isValid","isValidValue","USDC_ADDRESS","DAI_ADDRESS","replace","isNaN","Number","nextValue","BN","nextFromValue","multipliedBy","pow","toString","lte","indexOf","lt","getTokenAndAmonut","isValidUsdtValue","isValidUsdcValue","isValidDaiValue","nextTokens","nextAmounts","nextUsdtValue","push","deposit","clearTimeout","current","warmDialog","open","signer","getSigner","contract","IERC20_ABI","contractWithUser","connect","allowance","allowanceAmount","gt","sub","increaseAllowance","tx","wait","catch","e","code","Promise","reject","approve","vaultContract","nVaultWithUser","isSuccess","extendObj","isNumber","MULTIPLE_OF_GAS","estimateGas","mint","gas","gasLimit","ceil","maxGasLimit","MAX_GAS_LIMIT","error","errorMsg","errorTextOutput","isEs","isAd","isRp","isDistributing","isLessThanMinValue","BN_18","estimateMint","useCallback","debounce","isFalse","v","tokens","amounts","result","cancel","isLogin","alt","src","CustomTextField","onChange","event","target","handleInputChange","placeholder","maxEndAdornment","onMaxClick","formatBalance","showAll","handleMaxClick","isUndefined","some","every","Modal","aria-labelledby","aria-describedby","Paper","elevation","alternativeLabel","activeStep","connector","Step","StepIconComponent","BocStepIcon","Typography","gutterBottom","reduce","rs","fontWeight","mul","div","CircularProgress","switchBar","img","switchBase","switchChecked","swapBody","withdrawContainer","outputContainer","selectorlWrapper","receiveTokenItem","settingBtn","lineHeight","settingTitle","letterSpacing","settingItem","settingItemLabel","position","mutedLabel","maxLossFormCtrl","exchanged","paddingLeft","slippageItem","slippageInput","widthdrawLoadingPaper","setting","cursor","popover","background","popoverTitle","estimateItem","Withdraw","toBalance","EXCHANGE_AGGREGATOR_ABI","exchangeManager","EXCHANGE_ADAPTER_ABI","reloadBalance","receiveToken","setReceiveToken","toValue","setToValue","allowMaxLoss","setAllowMaxLoss","slipper","setSlipper","estimateWithdrawArray","setEstimateWithdrawArray","isWithdrawLoading","setIsWithdrawLoading","currentStep","setCurrentStep","withdrawError","setWithdrawError","burnTokens","setBurnTokens","isShowZipModal","setIsShowZipModal","pegTokenPrice","setPegTokenPrice","redeemFeeBpsPercent","useRedeemFeeBps","toNumber","shouldExchange","estimateWithdraw","usdValue","allowMaxLossValue","parseInt","parseFloat","vaultContractWithSigner","callStatic","burn","compact","all","tokenContract","amount","get","tokenAddress","nextEstimateWithdrawArray","isMaxLoss","isLossMuch","isExchangeFail","undefined","handleBurn","a","b","c","el","fromContract","fromDecimal","exchangeAmounts","nextBurnTokens","withdraw","withdrawTimeStart","Date","now","withdrawValidFinish","preWithdrawGetCoins","getSwapInfoFinish","estimateGasFinish","withdrawFinish","withdrawTransationFinish","isValidToValue","isValidAllowLoss","isValidSlipper","events","args","szjyPercents","szjy","totalTime","ytqPercents","ytq","hqdhljPercents","hqdhlj","egPercents","eg","qkPercents","qk","swcPercents","swc","table","valid","preWithdraw","getSwapPath","transaction","imgError","evn","srcElement","nextToValue","nextUsdiBalance","selectOptions","label","isValidToValueFlag","isValidAllowLossFlag","timer","setInterval","getPegTokenPrice","clearInterval","popupId","popupState","viewBox","fill","xmlns","bindTrigger","stroke","strokeWidth","strokeLinecap","strokeLinejoin","Popover","paper","bindPopover","anchorOrigin","horizontal","transformOrigin","Box","p","SimpleSelect","options","addToken","onError","verticalAlign","slippage","onSlippageChange","handleClose","zIndex","center","breakpoints","down","wrapper","wrapperMobile","symbol","gradientText","centerItem","balanceCard","check","balanceCardValue","balanceCardLabel","addTokenIcon","scanToken","hidden","brand","subtitle","mainRaised","link","textDecoration","textCenter","radioUnchecked","radioChecked","radioRoot","radio","investCard","overflow","tableCell","stepContainer","stepItem","tabsRoot","tabsIndicator","tabTextColor","tabRoot","detailWrapper","slider","spliter","transition","useVersionWapper","isLayoutSm","useMediaQuery","USDI_ADDRESS","VAULT_BUFFER_ADDRESS","VAULT_BUFFER_ABI","abi_version","setUsdtBalance","setUsdtDecimals","setUsdcBalance","setUsdcDecimals","setDaiBalance","setDaiDecimals","setUsdiDecimals","setToBalance","beforeTotalValue","setBeforeTotalValue","totalValue","setTotalValue","setVaultBufferBalance","setVaultBufferDecimals","setIsBalanceLoading","useSelector","state","investReducer","currentTab","setCurrent","tab","loadCoinsBalance","setCurrentTab","lastRebaseTime","useVault","loadBalance","usdtContract","usdcContract","daiContract","usdiContract","loadTotalAssets","afterTotalValue","noop","vaultBufferContract","balanceOf","usdiBalance","handleMint","eventArgs","block","last","getTransaction","eq","on","off","listener","totalAssetsIncludeVaultBuffer","spacing","List","ListItem","button","classNames","INVEST_TAB","account","ListItemIcon","ListItemText","balanceCardItem","CHAIN_ID"],"mappings":"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","file":"static/js/14.158679a4.chunk.js","sourcesContent":["/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeReverse = arrayProto.reverse;\n\n/**\n * Reverses `array` so that the first element becomes the last, the second\n * element becomes the second to last, and so on.\n *\n * **Note:** This method mutates `array` and is based on\n * [`Array#reverse`](https://mdn.io/Array/reverse).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to modify.\n * @returns {Array} Returns `array`.\n * @example\n *\n * var array = [1, 2, 3];\n *\n * _.reverse(array);\n * // => [3, 2, 1]\n *\n * console.log(array);\n * // => [3, 2, 1]\n */\nfunction reverse(array) {\n  return array == null ? array : nativeReverse.call(array);\n}\n\nmodule.exports = reverse;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport { isFragment } from 'react-is';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport capitalize from '../utils/capitalize';\nimport { fade } from '../styles/colorManipulator';\nimport withStyles from '../styles/withStyles';\nimport Button from '../Button'; // Force a side effect so we don't have any override priority issue.\n// eslint-disable-next-line no-unused-expressions\n\nButton.styles;\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      display: 'inline-flex',\n      borderRadius: theme.shape.borderRadius\n    },\n\n    /* Styles applied to the root element if `variant=\"contained\"`. */\n    contained: {\n      boxShadow: theme.shadows[2]\n    },\n\n    /* Styles applied to the root element if `disableElevation={true}`. */\n    disableElevation: {\n      boxShadow: 'none'\n    },\n\n    /* Pseudo-class applied to child elements if `disabled={true}`. */\n    disabled: {},\n\n    /* Styles applied to the root element if `fullWidth={true}`. */\n    fullWidth: {\n      width: '100%'\n    },\n\n    /* Styles applied to the root element if `orientation=\"vertical\"`. */\n    vertical: {\n      flexDirection: 'column'\n    },\n\n    /* Styles applied to the children. */\n    grouped: {\n      minWidth: 40\n    },\n\n    /* Styles applied to the children if `orientation=\"horizontal\"`. */\n    groupedHorizontal: {\n      '&:not(:first-child)': {\n        borderTopLeftRadius: 0,\n        borderBottomLeftRadius: 0\n      },\n      '&:not(:last-child)': {\n        borderTopRightRadius: 0,\n        borderBottomRightRadius: 0\n      }\n    },\n\n    /* Styles applied to the children if `orientation=\"vertical\"`. */\n    groupedVertical: {\n      '&:not(:first-child)': {\n        borderTopRightRadius: 0,\n        borderTopLeftRadius: 0\n      },\n      '&:not(:last-child)': {\n        borderBottomRightRadius: 0,\n        borderBottomLeftRadius: 0\n      }\n    },\n\n    /* Styles applied to the children if `variant=\"text\"`. */\n    groupedText: {},\n\n    /* Styles applied to the children if `variant=\"text\"` and `orientation=\"horizontal\"`. */\n    groupedTextHorizontal: {\n      '&:not(:last-child)': {\n        borderRight: \"1px solid \".concat(theme.palette.type === 'light' ? 'rgba(0, 0, 0, 0.23)' : 'rgba(255, 255, 255, 0.23)')\n      }\n    },\n\n    /* Styles applied to the children if `variant=\"text\"` and `orientation=\"vertical\"`. */\n    groupedTextVertical: {\n      '&:not(:last-child)': {\n        borderBottom: \"1px solid \".concat(theme.palette.type === 'light' ? 'rgba(0, 0, 0, 0.23)' : 'rgba(255, 255, 255, 0.23)')\n      }\n    },\n\n    /* Styles applied to the children if `variant=\"text\"` and `color=\"primary\"`. */\n    groupedTextPrimary: {\n      '&:not(:last-child)': {\n        borderColor: fade(theme.palette.primary.main, 0.5)\n      }\n    },\n\n    /* Styles applied to the children if `variant=\"text\"` and `color=\"secondary\"`. */\n    groupedTextSecondary: {\n      '&:not(:last-child)': {\n        borderColor: fade(theme.palette.secondary.main, 0.5)\n      }\n    },\n\n    /* Styles applied to the children if `variant=\"outlined\"`. */\n    groupedOutlined: {},\n\n    /* Styles applied to the children if `variant=\"outlined\"` and `orientation=\"horizontal\"`. */\n    groupedOutlinedHorizontal: {\n      '&:not(:first-child)': {\n        marginLeft: -1\n      },\n      '&:not(:last-child)': {\n        borderRightColor: 'transparent'\n      }\n    },\n\n    /* Styles applied to the children if `variant=\"outlined\"` and `orientation=\"vertical\"`. */\n    groupedOutlinedVertical: {\n      '&:not(:first-child)': {\n        marginTop: -1\n      },\n      '&:not(:last-child)': {\n        borderBottomColor: 'transparent'\n      }\n    },\n\n    /* Styles applied to the children if `variant=\"outlined\"` and `color=\"primary\"`. */\n    groupedOutlinedPrimary: {\n      '&:hover': {\n        borderColor: theme.palette.primary.main\n      }\n    },\n\n    /* Styles applied to the children if `variant=\"outlined\"` and `color=\"secondary\"`. */\n    groupedOutlinedSecondary: {\n      '&:hover': {\n        borderColor: theme.palette.secondary.main\n      }\n    },\n\n    /* Styles applied to the children if `variant=\"contained\"`. */\n    groupedContained: {\n      boxShadow: 'none'\n    },\n\n    /* Styles applied to the children if `variant=\"contained\"` and `orientation=\"horizontal\"`. */\n    groupedContainedHorizontal: {\n      '&:not(:last-child)': {\n        borderRight: \"1px solid \".concat(theme.palette.grey[400]),\n        '&$disabled': {\n          borderRight: \"1px solid \".concat(theme.palette.action.disabled)\n        }\n      }\n    },\n\n    /* Styles applied to the children if `variant=\"contained\"` and `orientation=\"vertical\"`. */\n    groupedContainedVertical: {\n      '&:not(:last-child)': {\n        borderBottom: \"1px solid \".concat(theme.palette.grey[400]),\n        '&$disabled': {\n          borderBottom: \"1px solid \".concat(theme.palette.action.disabled)\n        }\n      }\n    },\n\n    /* Styles applied to the children if `variant=\"contained\"` and `color=\"primary\"`. */\n    groupedContainedPrimary: {\n      '&:not(:last-child)': {\n        borderColor: theme.palette.primary.dark\n      }\n    },\n\n    /* Styles applied to the children if `variant=\"contained\"` and `color=\"secondary\"`. */\n    groupedContainedSecondary: {\n      '&:not(:last-child)': {\n        borderColor: theme.palette.secondary.dark\n      }\n    }\n  };\n};\nvar ButtonGroup = /*#__PURE__*/React.forwardRef(function ButtonGroup(props, ref) {\n  var children = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'default' : _props$color,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'div' : _props$component,\n      _props$disabled = props.disabled,\n      disabled = _props$disabled === void 0 ? false : _props$disabled,\n      _props$disableElevati = props.disableElevation,\n      disableElevation = _props$disableElevati === void 0 ? false : _props$disableElevati,\n      _props$disableFocusRi = props.disableFocusRipple,\n      disableFocusRipple = _props$disableFocusRi === void 0 ? false : _props$disableFocusRi,\n      _props$disableRipple = props.disableRipple,\n      disableRipple = _props$disableRipple === void 0 ? false : _props$disableRipple,\n      _props$fullWidth = props.fullWidth,\n      fullWidth = _props$fullWidth === void 0 ? false : _props$fullWidth,\n      _props$orientation = props.orientation,\n      orientation = _props$orientation === void 0 ? 'horizontal' : _props$orientation,\n      _props$size = props.size,\n      size = _props$size === void 0 ? 'medium' : _props$size,\n      _props$variant = props.variant,\n      variant = _props$variant === void 0 ? 'outlined' : _props$variant,\n      other = _objectWithoutProperties(props, [\"children\", \"classes\", \"className\", \"color\", \"component\", \"disabled\", \"disableElevation\", \"disableFocusRipple\", \"disableRipple\", \"fullWidth\", \"orientation\", \"size\", \"variant\"]);\n\n  var buttonClassName = clsx(classes.grouped, classes[\"grouped\".concat(capitalize(orientation))], classes[\"grouped\".concat(capitalize(variant))], classes[\"grouped\".concat(capitalize(variant)).concat(capitalize(orientation))], classes[\"grouped\".concat(capitalize(variant)).concat(color !== 'default' ? capitalize(color) : '')], disabled && classes.disabled);\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    role: \"group\",\n    className: clsx(classes.root, className, fullWidth && classes.fullWidth, disableElevation && classes.disableElevation, variant === 'contained' && classes.contained, orientation === 'vertical' && classes.vertical),\n    ref: ref\n  }, other), React.Children.map(children, function (child) {\n    if (! /*#__PURE__*/React.isValidElement(child)) {\n      return null;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (isFragment(child)) {\n        console.error([\"Material-UI: The ButtonGroup component doesn't accept a Fragment as a child.\", 'Consider providing an array instead.'].join('\\n'));\n      }\n    }\n\n    return /*#__PURE__*/React.cloneElement(child, {\n      className: clsx(buttonClassName, child.props.className),\n      color: child.props.color || color,\n      disabled: child.props.disabled || disabled,\n      disableElevation: child.props.disableElevation || disableElevation,\n      disableFocusRipple: disableFocusRipple,\n      disableRipple: disableRipple,\n      fullWidth: fullWidth,\n      size: child.props.size || size,\n      variant: child.props.variant || variant\n    });\n  }));\n});\nprocess.env.NODE_ENV !== \"production\" ? ButtonGroup.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * The content of the button group.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * The color of the component. It supports those theme colors that make sense for this component.\n   */\n  color: PropTypes.oneOf(['default', 'inherit', 'primary', 'secondary']),\n\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: PropTypes\n  /* @typescript-to-proptypes-ignore */\n  .elementType,\n\n  /**\n   * If `true`, the buttons will be disabled.\n   */\n  disabled: PropTypes.bool,\n\n  /**\n   * If `true`, no elevation is used.\n   */\n  disableElevation: PropTypes.bool,\n\n  /**\n   * If `true`, the button keyboard focus ripple will be disabled.\n   */\n  disableFocusRipple: PropTypes.bool,\n\n  /**\n   * If `true`, the button ripple effect will be disabled.\n   */\n  disableRipple: PropTypes.bool,\n\n  /**\n   * If `true`, the buttons will take up the full width of its container.\n   */\n  fullWidth: PropTypes.bool,\n\n  /**\n   * The group orientation (layout flow direction).\n   */\n  orientation: PropTypes.oneOf(['horizontal', 'vertical']),\n\n  /**\n   * The size of the button.\n   * `small` is equivalent to the dense button styling.\n   */\n  size: PropTypes.oneOf(['large', 'medium', 'small']),\n\n  /**\n   * The variant to use.\n   */\n  variant: PropTypes.oneOf(['contained', 'outlined', 'text'])\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiButtonGroup'\n})(ButtonGroup);","export const DAY = 'DAY'\n\nexport const WEEK = 'WEEK'\n\nexport const MONTH = 'MONTH'\n\nexport const SEGMENT_TYPES = [DAY, WEEK, MONTH]\n","import React, { useState, useEffect } from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport classnames from 'classnames'\n\n// === Components === //\nimport GridContainer from '@/components/Grid/GridContainer'\nimport GridItem from '@/components/Grid/GridItem'\nimport Card from '@/components/Card'\nimport { LineEchart, BarEchart } from '@/components/Echarts'\nimport InfoIcon from '@material-ui/icons/InfoOutlined'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport Button from '@material-ui/core/Button'\nimport ButtonGroup from '@material-ui/core/ButtonGroup'\n\n// === Services === //\nimport getLineEchartOpt from '@/components/Echarts/options/line/getLineEchartOpt'\nimport { getSegmentProfit } from '@/services/api-service'\n\n// === Hooks === //\nimport usePersonalData from '@/hooks/usePersonalData'\n\n// === Utils === //\nimport moment from 'moment'\nimport numeral from 'numeral'\nimport map from 'lodash/map'\nimport reverse from 'lodash/reverse'\nimport isEmpty from 'lodash/isEmpty'\nimport findIndex from 'lodash/findIndex'\nimport { toFixed } from '@/helpers/number-format'\n\n// === Constants === //\nimport { SEGMENT_TYPES, DAY, WEEK, MONTH } from '@/constants/date'\nimport { ETHI_BN_DECIMALS, ETHI_DISPLAY_DECIMALS, ETHI_PROFITS_DISPLAY_DECIMALS } from '@/constants/ethi'\nimport { TOKEN_DISPLAY_DECIMALS } from '@/constants/vault'\n\n// === Styles === //\nimport styles from './style'\n\nconst useStyles = makeStyles(styles)\n\nconst getMarker = color => {\n  return `<span style=\"display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:${color};\"></span>`\n}\n\nconst MyStatement = props => {\n  const { address, type, chain } = props\n\n  const isUSDi = type === 'USDi'\n  const classes = useStyles()\n\n  const [data, setData] = useState([])\n  const [loading, setLoading] = useState(false)\n  const [segmentType, setSegmentType] = useState(DAY)\n  const [optionForLineChart, setOptionForLineChart] = useState({})\n  const [optionForBarChart, setOptionForBarChart] = useState({})\n  const { dataSource, loading: chartLoading } = usePersonalData(chain, type, address, type)\n\n  const titleRender = (title = '') => {\n    const isWeek = segmentType === WEEK\n    if (isWeek) {\n      const [, index] = title.split('-')\n      return `No.${index}`\n    }\n    const isMonth = segmentType === MONTH\n    if (isMonth) {\n      return `${moment(title).format('MMM')}.`\n    }\n\n    const isDay = segmentType === DAY\n    if (isDay) {\n      const [, m, d] = title.split('-')\n      return `${m}-${d}`\n    }\n    return title\n  }\n\n  useEffect(() => {\n    if (isEmpty(segmentType)) return\n    setLoading(true)\n    getSegmentProfit(address, chain, type, segmentType)\n      .then(resp => {\n        setData(\n          map(reverse(resp.profits), i => {\n            return {\n              ...i,\n              segmentTime: titleRender(i.segmentTime),\n              value: 1 * i.profit\n            }\n          })\n        )\n      })\n      .finally(() =>\n        setTimeout(() => {\n          setLoading(false)\n        }, 500)\n      )\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [chain, address, type, segmentType])\n\n  useEffect(() => {\n    const { tvls = [] } = dataSource\n    // https://github.com/PiggyFinance/dashboard/issues/166\n    const reverseArray = reverse([...tvls])\n    const continuousIndex = findIndex(reverseArray, (item, index) => {\n      if (index <= 2) return false\n      if (index === reverseArray.length) return true\n      return Math.abs(item.balance - reverseArray[index - 1].balance) > item.balance * 0.005\n    })\n    const startPercent = continuousIndex === -1 ? 0 : 100.5 - (100 * continuousIndex) / tvls.length\n    const option1 = getLineEchartOpt(tvls, 'balance', dataSource.token, {\n      format: 'MM-DD',\n      dataZoom: [\n        {\n          start: startPercent,\n          end: 100\n        }\n      ],\n      xAxis: {\n        axisTick: {\n          alignWithLabel: true\n        }\n      }\n    })\n    console.log('option1=', option1)\n    setOptionForLineChart(option1)\n  }, [dataSource, address])\n\n  useEffect(() => {\n    const option = {\n      title: {\n        show: true,\n        textStyle: {\n          color: 'rgb(157 157 157)',\n          fontSize: 25\n        },\n        text: isEmpty(data) ? 'No Data' : '',\n        left: 'center',\n        top: 'center'\n      },\n      textStyle: {\n        color: '#fff'\n      },\n      color: ['#A68EFE', '#5470c6'],\n      tooltip: {\n        trigger: 'axis',\n        axisPointer: {\n          type: 'shadow'\n        },\n        formatter: function (params) {\n          const param = params[0]\n          let message = ''\n          message += `${param.name}`\n          message += `<br/>${param.marker}${param.seriesName}: ${toFixed(\n            `${param.value}`,\n            1,\n            isUSDi ? TOKEN_DISPLAY_DECIMALS : ETHI_PROFITS_DISPLAY_DECIMALS\n          )}`\n          if (segmentType === WEEK) {\n            message += `<br/>${getMarker('#fff')}Begin: ${param.data.segmentBegin}`\n            message += `<br/>${getMarker('#fff')}End: ${param.data.segmentEnd}`\n          }\n          return message\n        }\n      },\n      grid: {\n        left: '3%',\n        right: '4%',\n        bottom: '3%',\n        top: '3%',\n        containLabel: true\n      },\n      xAxis: {\n        data: map(data, 'segmentTime'),\n        axisLine: { onZero: true },\n        splitLine: { show: false },\n        splitArea: { show: false },\n        axisTick: {\n          alignWithLabel: true\n        }\n      },\n      yAxis: {\n        splitLine: {\n          lineStyle: {\n            color: '#454459'\n          }\n        }\n      },\n      series: [\n        {\n          name: 'Profits',\n          type: 'bar',\n          data: data\n        }\n      ]\n    }\n    setOptionForBarChart(option)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [data, address])\n\n  const { day7Apy, day30Apy, profit, latestProfit = { profit: '0', tokenType: '' } } = dataSource\n  const cardProps = [\n    {\n      title: 'Profits',\n      tip: (\n        <Tooltip\n          classes={{\n            tooltip: classes.tooltip\n          }}\n          placement=\"right\"\n          title={'Total profits from BoC that are withdrawable and cumulative.'}\n        >\n          <InfoIcon style={{ fontSize: '1.375rem', color: 'rgba(255,255,255,0.45)' }} />\n        </Tooltip>\n      ),\n      content: numeral(toFixed(profit, ETHI_BN_DECIMALS, isUSDi ? TOKEN_DISPLAY_DECIMALS : ETHI_DISPLAY_DECIMALS)).format(\n        isUSDi ? '0,0.[00]' : '0,0.[0000]'\n      ),\n      footer: (\n        <span>\n          {`+${numeral(latestProfit?.profit).format(isUSDi ? '0,0.[00]' : '0,0.[000000]')} ${latestProfit?.tokenType}`}&nbsp;&nbsp;\n          <Tooltip\n            classes={{\n              tooltip: classes.tooltip\n            }}\n            placement=\"right\"\n            title={'Profits obtained each time after rebase.'}\n          >\n            <InfoIcon style={{ fontSize: '0.875rem', color: 'rgba(255,255,255,0.45)' }} />\n          </Tooltip>\n        </span>\n      ),\n      unit: latestProfit?.tokenType\n    },\n    {\n      title: 'APY (last 7 days)',\n      tip: (\n        <Tooltip\n          classes={{\n            tooltip: classes.tooltip\n          }}\n          placement=\"right\"\n          title={'Yield over the past week.'}\n        >\n          <InfoIcon style={{ fontSize: '1.375rem', color: 'rgba(255,255,255,0.45)' }} />\n        </Tooltip>\n      ),\n      content: numeral(day7Apy?.apy).format('0,0.00'),\n      isAPY: true,\n      unit: '%'\n    },\n    {\n      title: 'APY (last 30 days)',\n      tip: (\n        <Tooltip\n          classes={{\n            tooltip: classes.tooltip\n          }}\n          placement=\"right\"\n          title={'Yield over the past month.'}\n        >\n          <InfoIcon style={{ fontSize: '1.375rem', color: 'rgba(255,255,255,0.45)' }} />\n        </Tooltip>\n      ),\n      content: numeral(day30Apy?.apy).format('0,0.00'),\n      isAPY: true,\n      unit: '%'\n    }\n  ]\n\n  return (\n    <GridContainer>\n      <GridItem xs={12} sm={12} md={12} lg={12}>\n        <GridContainer>\n          {map(cardProps, (i, index) => {\n            return (\n              <GridItem key={index} xs={12} sm={12} md={4} lg={4}>\n                <Card {...i} />\n              </GridItem>\n            )\n          })}\n        </GridContainer>\n        <GridContainer className={classes.lineChart}>\n          <GridItem xs={12} sm={12} md={12} lg={12}>\n            <Card\n              loading={chartLoading}\n              title={\n                <span>\n                  {isUSDi ? 'USDi' : 'ETHi'} variation curve\n                  <Tooltip title={`Curve of daily change in the total ${isUSDi ? 'USDi' : 'ETHi'} held by the user.`}>\n                    <InfoIcon style={{ marginLeft: 8, fontSize: '1rem' }} />\n                  </Tooltip>\n                </span>\n              }\n              loadingOption={{\n                width: '100%',\n                height: '2rem'\n              }}\n            >\n              <LineEchart option={optionForLineChart} style={{ minHeight: '20rem' }} />\n            </Card>\n          </GridItem>\n        </GridContainer>\n        <GridContainer className={classes.barChart}>\n          <GridItem xs={12} sm={12} md={12} lg={12}>\n            <Card\n              loading={loading}\n              title=\"Profits\"\n              tip={\n                <ButtonGroup\n                  classes={{\n                    groupedOutlinedPrimary: classes.groupedOutlinedPrimary\n                  }}\n                  value={segmentType}\n                  size=\"small\"\n                  color=\"primary\"\n                >\n                  {map(SEGMENT_TYPES, (value, key) => (\n                    <Button\n                      className={classnames({ [classes.groupButtonCheck]: value === segmentType })}\n                      onClick={() => setSegmentType(value)}\n                      key={key}\n                    >\n                      {value}\n                    </Button>\n                  ))}\n                </ButtonGroup>\n              }\n              loadingOption={{\n                width: '100%',\n                height: '2rem'\n              }}\n            >\n              <BarEchart option={optionForBarChart} style={{ minHeight: '20rem', width: '100%' }} />\n            </Card>\n          </GridItem>\n        </GridContainer>\n      </GridItem>\n    </GridContainer>\n  )\n}\n\nexport default MyStatement\n","import { container } from '@/assets/jss/material-kit-react.js'\n\nconst componentsStyle = () => ({\n  container,\n  modal: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  modalBody: {\n    textAlign: 'center'\n  },\n  depositContainer: {\n    border: '1px solid #A68EFD',\n    borderTopLeftRadius: '1rem',\n    borderTopRightRadius: '1rem',\n    padding: '2.6875rem 2.25rem'\n  },\n  estimateContainer: {\n    border: '1px solid #A68EFD',\n    marginTop: '0.5rem',\n    borderBottomLeftRadius: '1rem',\n    borderBottomRightRadius: '1rem',\n    padding: '2.0625rem 2.6875rem'\n  },\n  estimateText: {\n    color: '#A0A0A0',\n    margin: 0,\n    display: 'flex'\n  },\n  estimateBalanceTitle: {\n    fontSize: '1.625rem'\n  },\n  estimateBalanceNum: {\n    float: 'right',\n    fontSize: '1rem'\n  },\n  footerContainer: {\n    marginTop: '2.5rem'\n  },\n  tokenInputWrapper: {\n    marginBottom: '16px'\n  },\n  inputLabelWrapper: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center'\n  },\n  input: {\n    maxWidth: '12.5rem'\n  },\n  depositComfirmArea: {\n    display: 'flex',\n    justifyContent: 'space-between'\n  },\n  tokenInfo: {\n    display: 'flex',\n    alignItems: 'center'\n  },\n  tokenLogo: {\n    width: 30,\n    borderRadius: '50%',\n    marginRight: 8\n  },\n  tokenName: {\n    fontSize: '16px',\n    color: '#A0A0A0'\n  },\n  flexText: {\n    display: 'inline-flex',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  ModalTokenLogo: {\n    width: 25,\n    borderRadius: '50%',\n    margin: '0 8px'\n  },\n  labelToolTipIcon: {\n    fontSize: 16\n  },\n  depositModal: {\n    padding: '1rem',\n    maxWidth: '500px',\n    color: 'rgba(255, 255, 255, 0.87)',\n    border: '1px solid #A68EFE',\n    backgroundColor: '#000',\n    borderRadius: '1rem',\n    '&:active': {\n      outline: 'none'\n    }\n  },\n  root: {\n    padding: '1.5rem 0'\n  },\n  item: {\n    paddingTop: '3rem'\n  },\n  subTitle: {\n    color: '#A68EFE'\n  }\n})\n\nexport default componentsStyle\n","import React, { useState, useEffect, useRef, useCallback } from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\n\n// === Utils === //\nimport * as ethers from 'ethers'\nimport BN from 'bignumber.js'\nimport { useDispatch } from 'react-redux'\nimport isUndefined from 'lodash/isUndefined'\nimport map from 'lodash/map'\nimport some from 'lodash/some'\nimport every from 'lodash/every'\nimport reduce from 'lodash/reduce'\nimport debounce from 'lodash/debounce'\nimport isEmpty from 'lodash/isEmpty'\nimport isNumber from 'lodash/isNumber'\nimport moment from 'moment'\nimport { getLastPossibleRebaseTime } from '@/helpers/time-util'\nimport { isAd, isEs, isRp, isDistributing, errorTextOutput, isLessThanMinValue } from '@/helpers/error-handler'\n\n// === Components === //\nimport Step from '@material-ui/core/Step'\nimport BocStepper from '@/components/Stepper/Stepper'\nimport BocStepLabel from '@/components/Stepper/StepLabel'\nimport BocStepIcon from '@/components/Stepper/StepIcon'\nimport BocStepConnector from '@/components/Stepper/StepConnector'\nimport Typography from '@material-ui/core/Typography'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport Modal from '@material-ui/core/Modal'\nimport Paper from '@material-ui/core/Paper'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport InfoIcon from '@material-ui/icons/Info'\n\nimport GridContainer from '@/components/Grid/GridContainer'\nimport GridItem from '@/components/Grid/GridItem'\nimport CustomTextField from '@/components/CustomTextField'\nimport Button from '@/components/CustomButtons/Button'\nimport { warmDialog } from '@/reducers/meta-reducer'\nimport { toFixed, formatBalance } from '@/helpers/number-format'\nimport Loading from '@/components/LoadingComponent'\n\n// === Constants === //\nimport { USDT_ADDRESS, USDC_ADDRESS, DAI_ADDRESS, IERC20_ABI, MULTIPLE_OF_GAS, MAX_GAS_LIMIT } from '@/constants'\nimport { BN_18 } from '@/constants/big-number'\n\n// === Styles === //\nimport styles from './style'\n\nconst { BigNumber } = ethers\nconst useStyles = makeStyles(styles)\nconst TOKEN = {\n  USDT: 'USDT',\n  USDC: 'USDC',\n  DAI: 'DAI'\n}\n\nconst steps = ['Step1: Deposit', 'Get USDi Ticket', 'Step2: Allocation Action', 'Get USDi']\n\nexport default function Deposit({\n  address,\n  usdtBalance,\n  usdtDecimals,\n  usdcBalance,\n  usdcDecimals,\n  daiBalance,\n  daiDecimals,\n  usdiDecimals,\n  userProvider,\n  VAULT_ABI,\n  VAULT_ADDRESS,\n  vaultBufferBalance,\n  vaultBufferDecimals,\n  isBalanceLoading,\n  minimumInvestmentAmount\n}) {\n  const classes = useStyles()\n  const dispatch = useDispatch()\n  const [usdtValue, setUsdtValue] = useState('')\n  const [usdcValue, setUsdcValue] = useState('')\n  const [daiValue, setDaiValue] = useState('')\n  const [isLoading, setIsLoading] = useState(false)\n  const [isEstimate, setIsEstimate] = useState(false)\n  const [isOpenEstimateModal, setIsOpenEstimateModal] = useState(false)\n  const [estimateVaultBuffValue, setEstimateVaultBuffValue] = useState(BigNumber.from(0))\n  const loadingTimer = useRef()\n\n  const nextRebaseTime = getLastPossibleRebaseTime()\n\n  const tokenBasicState = {\n    [TOKEN.USDT]: {\n      value: usdtValue,\n      balance: usdtBalance,\n      decimals: usdtDecimals\n    },\n    [TOKEN.USDC]: {\n      value: usdcValue,\n      balance: usdcBalance,\n      decimals: usdcDecimals\n    },\n    [TOKEN.DAI]: {\n      value: daiValue,\n      balance: daiBalance,\n      decimals: daiDecimals\n    }\n  }\n\n  const formConfig = [\n    {\n      name: TOKEN.USDT,\n      address: USDT_ADDRESS,\n      image: './images/0x55d398326f99059fF775485246999027B3197955.png',\n      setValue: setUsdtValue,\n      isValid: isValidValue(TOKEN.USDT),\n      ...tokenBasicState[TOKEN.USDT]\n    },\n    {\n      name: TOKEN.USDC,\n      address: USDC_ADDRESS,\n      image: './images/0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d.png',\n      setValue: setUsdcValue,\n      isValid: isValidValue(TOKEN.USDC),\n      ...tokenBasicState[TOKEN.USDC]\n    },\n    {\n      name: TOKEN.DAI,\n      address: DAI_ADDRESS,\n      image: './images/0x1AF3F329e8BE154074D8769D1FFa4eE058B1DBc3.png',\n      setValue: setDaiValue,\n      isValid: isValidValue(TOKEN.DAI),\n      ...tokenBasicState[TOKEN.DAI]\n    }\n  ]\n\n  /**\n   * check if value is valid\n   * @returns\n   */\n  function isValidValue(token) {\n    const { value, balance, decimals } = tokenBasicState[token]\n    if (value === '' || value === '-' || value === '0' || isEmpty(value.replace(/ /g, ''))) return\n    // not a number\n    if (isNaN(Number(value))) return false\n    const nextValue = BN(value)\n    const nextFromValue = nextValue.multipliedBy(BigNumber.from(10).pow(decimals).toString())\n    // should be positive\n    if (nextFromValue.lte(0)) return false\n    // should be integer\n    const nextFromValueString = nextValue.multipliedBy(BigNumber.from(10).pow(decimals).toString())\n    if (nextFromValueString.toFixed().indexOf('.') !== -1) return false\n    // balance less than value\n    if (balance.lt(BigNumber.from(nextFromValue.toFixed()))) return false\n    return true\n  }\n\n  const handleInputChange = (event, item) => {\n    try {\n      setIsEstimate(true)\n      item.setValue(event.target.value)\n    } catch (error) {\n      item.setValue('')\n    }\n  }\n\n  const handleMaxClick = item => {\n    item.setValue(formatBalance(item.balance, item.decimals, { showAll: true }))\n  }\n\n  const getTokenAndAmonut = () => {\n    const isValidUsdtValue = isValidValue(TOKEN.USDT)\n    const isValidUsdcValue = isValidValue(TOKEN.USDC)\n    const isValidDaiValue = isValidValue(TOKEN.DAI)\n    const nextTokens = []\n    const nextAmounts = []\n    if (isValidUsdtValue) {\n      const nextUsdtValue = BigNumber.from(BN(usdtValue).multipliedBy(BigNumber.from(10).pow(usdtDecimals).toString()).toFixed())\n      nextAmounts.push(nextUsdtValue)\n      nextTokens.push(USDT_ADDRESS)\n    }\n    if (isValidUsdcValue) {\n      const nextUsdtValue = BigNumber.from(BN(usdcValue).multipliedBy(BigNumber.from(10).pow(usdcDecimals).toString()).toFixed())\n      nextAmounts.push(nextUsdtValue)\n      nextTokens.push(USDC_ADDRESS)\n    }\n    if (isValidDaiValue) {\n      const nextUsdtValue = BigNumber.from(BN(daiValue).multipliedBy(BigNumber.from(10).pow(daiDecimals).toString()).toFixed())\n      nextAmounts.push(nextUsdtValue)\n      nextTokens.push(DAI_ADDRESS)\n    }\n    return [nextTokens, nextAmounts]\n  }\n\n  const deposit = async () => {\n    clearTimeout(loadingTimer.current)\n    // step1: valid three tokens\n    const isValidUsdtValue = isValidValue(TOKEN.USDT)\n    const isValidUsdcValue = isValidValue(TOKEN.USDC)\n    const isValidDaiValue = isValidValue(TOKEN.DAI)\n    if (!isValidUsdtValue && !isValidUsdcValue && !isValidDaiValue) {\n      return dispatch(\n        warmDialog({\n          open: true,\n          type: 'warning',\n          message: 'Please enter the correct value'\n        })\n      )\n    }\n    // step2: convert precision, approve three tokens\n    setIsLoading(true)\n    const [nextTokens, nextAmounts] = getTokenAndAmonut()\n    console.log('nextTokens=', nextTokens, nextAmounts)\n    const signer = userProvider.getSigner()\n    for (const key in nextTokens) {\n      const contract = new ethers.Contract(nextTokens[key], IERC20_ABI, userProvider)\n      const contractWithUser = contract.connect(signer)\n      // get allow amount\n      const allowanceAmount = await contractWithUser.allowance(address, VAULT_ADDRESS)\n      // If deposit amount greater than allow amount, reset amount\n      if (nextAmounts[key].gt(allowanceAmount)) {\n        // If allowance equal 0, approve nextAmount, otherwise approve 0 and approve nextAmount\n        if (allowanceAmount.gt(0)) {\n          console.log('add allowance:', nextAmounts[key].sub(allowanceAmount).toString())\n          await contractWithUser\n            .increaseAllowance(VAULT_ADDRESS, nextAmounts[key].sub(allowanceAmount))\n            .then(tx => tx.wait())\n            .catch(e => {\n              // cancel by user\n              if (e.code === 4001) {\n                setIsLoading(false)\n                return Promise.reject(e)\n              }\n              // If increase failed, approve 0 and approve nextAmounts\n              return contractWithUser\n                .approve(VAULT_ADDRESS, 0)\n                .then(tx => tx.wait())\n                .then(() => contractWithUser.approve(VAULT_ADDRESS, nextAmounts[key]).then(tx => tx.wait()))\n            })\n        } else {\n          console.log('current allowance:', allowanceAmount.toString(), 'next allowance:', nextAmounts[key].toString())\n          await contractWithUser\n            .approve(VAULT_ADDRESS, nextAmounts[key])\n            .then(tx => tx.wait())\n            .catch(e => {\n              // cancel by user\n              if (e.code === 4001) {\n                setIsLoading(false)\n                return Promise.reject(e)\n              }\n            })\n        }\n      }\n    }\n    // step3: deposit\n    const vaultContract = new ethers.Contract(VAULT_ADDRESS, VAULT_ABI, userProvider)\n    const nVaultWithUser = vaultContract.connect(signer)\n    let isSuccess = false\n    const extendObj = {}\n    // if gasLimit times not 1, need estimateGas\n    if (isNumber(MULTIPLE_OF_GAS) && MULTIPLE_OF_GAS !== 1) {\n      const gas = await nVaultWithUser.estimateGas.mint(nextTokens, nextAmounts, 0)\n      const gasLimit = Math.ceil(gas * MULTIPLE_OF_GAS)\n      // gasLimit not exceed maximum\n      const maxGasLimit = gasLimit < MAX_GAS_LIMIT ? gasLimit : MAX_GAS_LIMIT\n      extendObj.gasLimit = maxGasLimit\n    }\n    await nVaultWithUser\n      .mint(nextTokens, nextAmounts, 0, extendObj)\n      .then(tx => tx.wait())\n      .then(() => {\n        isSuccess = true\n      })\n      .catch(error => {\n        const errorMsg = errorTextOutput(error)\n        let tip = ''\n        if (isEs(errorMsg)) {\n          tip = 'Vault has been shut down, please try again later!'\n        } else if (isAd(errorMsg)) {\n          tip = 'Vault is in adjustment status, please try again later!'\n        } else if (isRp(errorMsg)) {\n          tip = 'Vault is in rebase status, please try again later!'\n        } else if (isDistributing(errorMsg)) {\n          tip = 'Vault is in distributing, please try again later!'\n        } else if (isLessThanMinValue(errorMsg)) {\n          tip = `Deposit Amount must be greater than ${toFixed(minimumInvestmentAmount, BN_18, 2)}USD!`\n        }\n        if (tip) {\n          dispatch(\n            warmDialog({\n              open: true,\n              type: 'error',\n              message: tip\n            })\n          )\n        }\n        setIsLoading(false)\n      })\n\n    if (isSuccess) {\n      setUsdtValue('')\n      setUsdcValue('')\n      setDaiValue('')\n    }\n\n    loadingTimer.current = setTimeout(() => {\n      setIsLoading(false)\n      setIsOpenEstimateModal(false)\n      if (isSuccess) {\n        dispatch(\n          warmDialog({\n            open: true,\n            type: 'success',\n            message: 'Success!'\n          })\n        )\n      }\n    }, 2000)\n  }\n\n  /**\n   *\n   */\n  const openEstimateModal = () => {\n    setIsOpenEstimateModal(true)\n  }\n\n  const estimateMint = useCallback(\n    debounce(async () => {\n      const isValidUsdtValue = isValidValue(TOKEN.USDT)\n      const isValidUsdcValue = isValidValue(TOKEN.USDC)\n      const isValidDaiValue = isValidValue(TOKEN.DAI)\n      const isFalse = v => v === false\n      const [tokens, amounts] = getTokenAndAmonut()\n      if (isFalse(isValidUsdtValue) || isFalse(isValidUsdcValue) || isFalse(isValidDaiValue) || tokens.length === 0) {\n        setEstimateVaultBuffValue(BigNumber.from(0))\n        setIsEstimate(false)\n        return\n      }\n      const vaultContract = new ethers.Contract(VAULT_ADDRESS, VAULT_ABI, userProvider)\n      const result = await vaultContract.estimateMint(tokens, amounts).catch(error => {\n        const errorMsg = errorTextOutput(error)\n        let tip = ''\n        if (isEs(errorMsg)) {\n          tip = 'Vault has been shut down, please try again later!'\n        } else if (isAd(errorMsg)) {\n          tip = 'Vault is in adjustment status, please try again later!'\n        } else if (isRp(errorMsg)) {\n          tip = 'Vault is in rebase status, please try again later!'\n        } else if (isDistributing(errorMsg)) {\n          tip = 'Vault is in distributing, please try again later!'\n        } else if (isLessThanMinValue(errorMsg)) {\n          tip = `Deposit Amount must be greater than ${toFixed(minimumInvestmentAmount, BN_18, 2)}USD!`\n        }\n        if (tip) {\n          dispatch(\n            warmDialog({\n              open: true,\n              type: 'error',\n              message: tip\n            })\n          )\n        }\n        return BigNumber.from(0)\n      })\n      setEstimateVaultBuffValue(result)\n      setIsEstimate(false)\n    }, 1500)\n  )\n\n  useEffect(() => {\n    estimateMint()\n    return () => estimateMint.cancel()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [usdcValue, usdtValue, daiValue])\n\n  const isLogin = !isEmpty(userProvider)\n\n  return (\n    <>\n      <GridContainer classes={{ root: classes.depositContainer }}>\n        <p className={classes.estimateText}>From</p>\n        {map(formConfig, item => (\n          <GridItem key={item.name} xs={12} sm={12} md={12} lg={12} className={classes.tokenInputWrapper}>\n            <GridContainer>\n              <GridItem xs={12} sm={12} md={12} lg={12}>\n                <div className={classes.inputLabelWrapper}>\n                  <div className={classes.tokenInfo}>\n                    <img className={classes.tokenLogo} alt=\"\" src={item.image} />\n                    <span className={classes.tokenName}>{item.name}</span>\n                  </div>\n                  <CustomTextField\n                    classes={{ root: classes.input }}\n                    value={item.value}\n                    onChange={event => handleInputChange(event, item)}\n                    placeholder=\"deposit amount\"\n                    maxEndAdornment\n                    onMaxClick={() => handleMaxClick(item)}\n                    error={!isUndefined(item.isValid) && !item.isValid}\n                  />\n                </div>\n              </GridItem>\n              <GridItem xs={12} sm={12} md={12} lg={12}>\n                <p\n                  className={classes.estimateText}\n                  title={formatBalance(item.balance, item.decimals, {\n                    showAll: true\n                  })}\n                >\n                  Balance:&nbsp;&nbsp;\n                  <Loading loading={isBalanceLoading}>{formatBalance(item.balance, item.decimals)}</Loading>\n                </p>\n              </GridItem>\n            </GridContainer>\n          </GridItem>\n        ))}\n      </GridContainer>\n      <GridContainer classes={{ root: classes.estimateContainer }}>\n        <GridItem xs={12} sm={12} md={12} lg={12}>\n          <p className={classes.estimateText}>To</p>\n          <p className={classes.estimateBalanceTitle}>\n            USDi Ticket:\n            <span className={classes.estimateBalanceNum}>\n              <Loading loading={isEstimate}>{toFixed(estimateVaultBuffValue, BigNumber.from(10).pow(usdiDecimals))}</Loading>\n            </span>\n          </p>\n          <p className={classes.estimateText}>\n            Balance:&nbsp;&nbsp;\n            <span>\n              <Loading loading={isBalanceLoading}>{formatBalance(vaultBufferBalance, vaultBufferDecimals)}</Loading>\n            </span>\n          </p>\n        </GridItem>\n      </GridContainer>\n      <GridContainer>\n        <GridItem xs={12} sm={12} md={12} lg={12}>\n          <div className={classes.footerContainer}>\n            <Button\n              disabled={\n                !isLogin ||\n                (isLogin &&\n                  (some(formConfig, item => isValidValue(item.name) === false) || every(formConfig, item => isValidValue(item.name) !== true)))\n              }\n              color=\"colorfull\"\n              onClick={openEstimateModal}\n              style={{ width: '100%' }}\n            >\n              Deposit\n            </Button>\n          </div>\n        </GridItem>\n      </GridContainer>\n      <Modal className={classes.modal} open={isOpenEstimateModal} aria-labelledby=\"simple-modal-title\" aria-describedby=\"simple-modal-description\">\n        <Paper elevation={3} className={classes.depositModal}>\n          <BocStepper\n            classes={{\n              root: classes.root\n            }}\n            alternativeLabel\n            activeStep={1}\n            connector={<BocStepConnector />}\n          >\n            {map(steps, (i, index) => {\n              return (\n                <Step key={index}>\n                  <BocStepLabel StepIconComponent={BocStepIcon}>{i}</BocStepLabel>\n                </Step>\n              )\n            })}\n          </BocStepper>\n          <GridContainer>\n            <GridItem xs={12} sm={12} md={12} lg={12} className={classes.item}>\n              <Typography variant=\"subtitle1\" gutterBottom className={classes.subTitle}>\n                Deposit Amounts:&nbsp;\n                {reduce(\n                  map(formConfig, item => {\n                    const { name, value, image, isValid, address } = item\n                    if (!isValid) {\n                      return\n                    }\n                    return (\n                      <span key={address} className={classes.flexText}>\n                        <span style={{ color: 'chocolate', marginRight: 5 }}>{value}</span> {name}&nbsp;\n                        <img className={classes.ModalTokenLogo} alt=\"\" src={image} />\n                      </span>\n                    )\n                  }),\n                  (rs, i, index) => {\n                    if (isEmpty(i)) {\n                      return rs\n                    }\n                    if (!isEmpty(rs)) {\n                      rs.push(<span key={index}> + </span>)\n                    }\n                    rs.push(i)\n                    return rs\n                  },\n                  []\n                )}\n              </Typography>\n            </GridItem>\n            <GridItem xs={12} sm={12} md={12} lg={12} className={classes.item}>\n              <Typography variant=\"subtitle1\" gutterBottom className={classes.subTitle}>\n                Estimate User Get:&nbsp;\n                <span style={{ color: 'darkturquoise' }}>\n                  &nbsp; + {toFixed(estimateVaultBuffValue, BigNumber.from(10).pow(usdiDecimals))}\n                  &nbsp;\n                </span>\n                &nbsp; USDi Tickets\n              </Typography>\n            </GridItem>\n            <GridItem xs={12} sm={12} md={12} lg={12} className={classes.item}>\n              <Typography variant=\"subtitle1\" gutterBottom className={classes.subTitle}>\n                Exchange&nbsp;\n                <Tooltip\n                  classes={{\n                    tooltip: classes.tooltip\n                  }}\n                  placement=\"top\"\n                  title=\"Estimated amount of USDi that can be exchanged\"\n                >\n                  <InfoIcon classes={{ root: classes.labelToolTipIcon }} />\n                </Tooltip>\n                :&nbsp;From&nbsp;\n                <span style={{ color: 'chocolate' }}>{toFixed(estimateVaultBuffValue, BigNumber.from(10).pow(usdiDecimals))}</span>\n                &nbsp; USDi Tickets <span style={{ fontWeight: 'bold', color: 'dimgrey' }}>To</span>\n                &nbsp;\n                <span style={{ color: 'darkturquoise' }}>\n                  <Loading loading={isEstimate}>\n                    {toFixed(estimateVaultBuffValue.mul(9987).div(10000), BigNumber.from(10).pow(usdiDecimals), 2)}\n                  </Loading>\n                </span>\n                &nbsp; USDi\n              </Typography>\n            </GridItem>\n            <GridItem xs={12} sm={12} md={12} lg={12} className={classes.item}>\n              <Typography variant=\"subtitle1\" gutterBottom className={classes.subTitle}>\n                Exchange Time&nbsp;\n                <Tooltip\n                  classes={{\n                    tooltip: classes.tooltip\n                  }}\n                  placement=\"top\"\n                  title=\"The latest planned execution date may not be executed due to cost and other factors\"\n                >\n                  <InfoIcon classes={{ root: classes.labelToolTipIcon }} />\n                </Tooltip>\n                :&nbsp;\n                <span style={{ color: 'chocolate' }}>{moment(nextRebaseTime).format('YYYY-MM-DD HH:mm:ss')}</span>\n              </Typography>\n            </GridItem>\n            <GridItem xs={12} sm={12} md={12} lg={12} className={classes.item} style={{ textAlign: 'center' }}>\n              <Button color=\"colorfull\" onClick={deposit} style={{ width: '50%' }}>\n                Continue\n              </Button>\n              <Button style={{ marginLeft: 20 }} color=\"danger\" onClick={() => setIsOpenEstimateModal(false)}>\n                Cancel\n              </Button>\n            </GridItem>\n          </GridContainer>\n        </Paper>\n      </Modal>\n      <Modal className={classes.modal} open={isLoading} aria-labelledby=\"simple-modal-title\" aria-describedby=\"simple-modal-description\">\n        <Paper elevation={3} className={classes.depositModal}>\n          <div className={classes.modalBody}>\n            <CircularProgress color=\"inherit\" />\n            <p>On Deposit...</p>\n          </div>\n        </Paper>\n      </Modal>\n    </>\n  )\n}\n","import { container } from '@/assets/jss/material-kit-react.js'\n\nconst componentsStyle = () => ({\n  container,\n  switchBar: {\n    backgroundColor: '#91d5ff !important'\n  },\n  img: {\n    width: '25px'\n  },\n  switchBase: {\n    color: '#ddd'\n  },\n  switchChecked: {\n    color: '#40a9ff'\n  },\n  modal: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  modalBody: {\n    textAlign: 'center'\n  },\n  swapBody: {\n    width: '42rem',\n    outline: 0\n  },\n  withdrawContainer: {\n    padding: '2.6875rem 2.25rem',\n    border: '1px solid #A68EFD',\n    borderTopLeftRadius: '1rem',\n    borderTopRightRadius: '1rem'\n  },\n  outputContainer: {\n    padding: '2.6875rem 2.25rem',\n    border: '1px solid #A68EFD',\n    marginTop: '0.5rem',\n    borderBottomLeftRadius: '1rem',\n    borderBottomRightRadius: '1rem'\n  },\n  estimateText: {\n    height: '1.25rem',\n    color: '#A0A0A0',\n    margin: 0,\n    display: 'flex',\n    marginTop: '0.5rem',\n    alignItems: 'center'\n  },\n  input: {\n    maxWidth: '12.5rem'\n  },\n  footerContainer: {\n    marginTop: '2.5rem'\n  },\n  inputLabelWrapper: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center'\n  },\n  selectorlWrapper: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: '1rem 0'\n  },\n  depositComfirmArea: {\n    display: 'flex',\n    justifyContent: 'space-between'\n  },\n  tokenInfo: {\n    display: 'flex',\n    alignItems: 'center'\n  },\n  receiveTokenItem: {\n    marginBottom: 0\n  },\n  settingBtn: {\n    color: '#39d0d8',\n    textAlign: 'right',\n    lineHeight: '36px',\n    padding: '10px 0',\n    marginRight: '16px'\n  },\n  settingTitle: {\n    color: '#fff',\n    fontSize: 16,\n    letterSpacing: '0.01071em',\n    lineHeight: 1.5,\n    textAlign: 'center',\n    width: '100%'\n  },\n  settingItem: {\n    height: 38,\n    lineHeight: '38px',\n    marginBottom: 16,\n    '&:first-child': {\n      marginTop: 24\n    }\n  },\n  settingItemLabel: {\n    position: 'relative',\n    minWidth: 100,\n    marginRight: 16,\n    textAlign: 'right'\n  },\n  mutedLabel: {\n    position: 'relative',\n    display: 'inline-block'\n  },\n  maxLossFormCtrl: {\n    width: '160px'\n  },\n  exchanged: {\n    position: 'relative',\n    paddingLeft: 16\n  },\n  tooltip: {\n    fontSize: '14px'\n  },\n  slippageItem: {\n    display: 'flex',\n    alignItems: 'center'\n  },\n  slippageInput: {\n    width: 96,\n    marginLeft: 16\n  },\n  widthdrawLoadingPaper: {\n    padding: '1rem',\n    maxWidth: '500px',\n    color: 'rgba(255, 255, 255, 0.87)',\n    border: '1px solid #A68EFE',\n    backgroundColor: '#000',\n    borderRadius: '1rem',\n    width: '100%'\n  },\n  root: {\n    padding: '1.5rem 0'\n  },\n  setting: {\n    position: 'absolute',\n    right: '1rem',\n    top: '1rem',\n    cursor: 'pointer'\n  },\n  popover: {\n    width: '15rem',\n    background: '#292B2E',\n    border: ' 1px solid #666666',\n    borderRadius: '1.25rem',\n    padding: '1rem'\n  },\n  popoverTitle: {\n    color: '#A0A0A0',\n    margin: 0,\n    padding: '0.5rem 0'\n  },\n  estimateItem: {\n    textAlign: 'center',\n    minHeight: '100px',\n    color: '#A0A0A0',\n    paddingTop: '35px'\n  },\n  tokenName: {\n    fontSize: '1.625rem'\n  }\n})\n\nexport default componentsStyle\n","import React, { useState, useEffect, useCallback } from 'react'\nimport * as ethers from 'ethers'\nimport BN from 'bignumber.js'\nimport { useDispatch } from 'react-redux'\nimport { makeStyles } from '@material-ui/core/styles'\n\n// === Components === //\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport Modal from '@material-ui/core/Modal'\nimport Paper from '@material-ui/core/Paper'\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline'\nimport AddIcon from '@material-ui/icons/Add'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport InfoIcon from '@material-ui/icons/Info'\nimport Step from '@material-ui/core/Step'\nimport WarningIcon from '@material-ui/icons/Warning'\nimport Box from '@material-ui/core/Box'\nimport SimpleSelect from '@/components/SimpleSelect'\nimport CustomTextField from '@/components/CustomTextField'\nimport BocStepper from '@/components/Stepper/Stepper'\nimport BocStepLabel from '@/components/Stepper/StepLabel'\nimport BocStepIcon from '@/components/Stepper/StepIcon'\nimport BocStepConnector from '@/components/Stepper/StepConnector'\nimport GridContainer from '@/components/Grid/GridContainer'\nimport GridItem from '@/components/Grid/GridItem'\nimport Button from '@/components/CustomButtons/Button'\nimport Popover from '@material-ui/core/Popover'\nimport Loading from '@/components/LoadingComponent'\nimport PopupState, { bindTrigger, bindPopover } from 'material-ui-popup-state'\nimport ApproveArray from '@/components/ApproveArray/ApproveArrayV2'\n\n// === Constants === //\nimport { warmDialog } from '@/reducers/meta-reducer'\nimport { toFixed, formatBalance } from '@/helpers/number-format'\nimport { addToken } from '@/helpers/wallet'\nimport { USDT_ADDRESS, USDC_ADDRESS, DAI_ADDRESS, IERC20_ABI, MULTIPLE_OF_GAS, MAX_GAS_LIMIT } from '@/constants'\nimport { BN_18 } from '@/constants/big-number'\n\n// === Hooks === //\nimport useRedeemFeeBps from '@/hooks/useRedeemFeeBps'\n\n// === Utils === //\nimport isUndefined from 'lodash/isUndefined'\nimport map from 'lodash/map'\nimport get from 'lodash/get'\nimport debounce from 'lodash/debounce'\nimport compact from 'lodash/compact'\nimport isEmpty from 'lodash/isEmpty'\nimport isNumber from 'lodash/isNumber'\nimport { isAd, isEs, isRp, isMaxLoss, isLossMuch, isExchangeFail, errorTextOutput } from '@/helpers/error-handler'\n\n// === Styles === //\nimport styles from './style'\n\nconst { BigNumber } = ethers\nconst useStyles = makeStyles(styles)\n\nconst steps = [{ title: 'Shares Validation' }, { title: 'Gas Estimates' }, { title: 'Withdraw' }]\n\nconst RECEIVE_MIX_VALUE = 'Mix'\n\nexport default function Withdraw({\n  address,\n  toBalance,\n  usdiDecimals,\n  userProvider,\n  VAULT_ADDRESS,\n  VAULT_ABI,\n  EXCHANGE_AGGREGATOR_ABI,\n  exchangeManager,\n  EXCHANGE_ADAPTER_ABI,\n  isBalanceLoading,\n  reloadBalance\n}) {\n  const classes = useStyles()\n  const dispatch = useDispatch()\n  const [receiveToken, setReceiveToken] = useState(RECEIVE_MIX_VALUE)\n  const [toValue, setToValue] = useState('')\n  const [allowMaxLoss, setAllowMaxLoss] = useState('0.3')\n  const [slipper, setSlipper] = useState('0.3')\n  const [estimateWithdrawArray, setEstimateWithdrawArray] = useState([])\n  const [isEstimate, setIsEstimate] = useState(false)\n  const [isWithdrawLoading, setIsWithdrawLoading] = useState(false)\n  const [currentStep, setCurrentStep] = useState(0)\n  const [withdrawError, setWithdrawError] = useState({})\n\n  const [burnTokens, setBurnTokens] = useState([\n    // {\n    //   address: USDT_ADDRESS,\n    //   amount: '100000000'\n    // },\n    // {\n    //   address: USDC_ADDRESS,\n    //   amount: '10000000'\n    // },\n    // {\n    //   address: DAI_ADDRESS,\n    //   amount: '10000000000000000000'\n    // }\n  ])\n  const [isShowZipModal, setIsShowZipModal] = useState(false)\n  const [pegTokenPrice, setPegTokenPrice] = useState(BN_18)\n\n  const { value: redeemFeeBps } = useRedeemFeeBps({\n    userProvider,\n    VAULT_ADDRESS,\n    VAULT_ABI\n  })\n\n  const redeemFeeBpsPercent = redeemFeeBps.toNumber() / 100\n\n  const shouldExchange = receiveToken !== RECEIVE_MIX_VALUE\n  const token = shouldExchange ? receiveToken : USDT_ADDRESS\n\n  const estimateWithdraw = useCallback(\n    debounce(async () => {\n      setIsEstimate(true)\n      const vaultContract = new ethers.Contract(VAULT_ADDRESS, VAULT_ABI, userProvider)\n      const nextValue = BigNumber.from(BN(toValue).multipliedBy(BigNumber.from(10).pow(usdiDecimals).toString()).toFixed())\n      const usdValue = nextValue.mul(pegTokenPrice).div(BN_18.toFixed())\n      const allowMaxLossValue = BigNumber.from(10000 - parseInt(100 * (parseFloat(allowMaxLoss) + redeemFeeBpsPercent)))\n        .mul(usdValue)\n        .div(BigNumber.from(1e4))\n      const signer = userProvider.getSigner()\n      const vaultContractWithSigner = vaultContract.connect(signer)\n\n      try {\n        let [tokens, amounts] = await vaultContractWithSigner.callStatic.burn(nextValue, allowMaxLossValue)\n        console.log(\n          'tokens, amounts=',\n          tokens,\n          map(amounts, i => i.toString())\n        )\n\n        let nextEstimateWithdrawArray = compact(\n          await Promise.all(\n            map(tokens, async (token, index) => {\n              const tokenContract = new ethers.Contract(token, IERC20_ABI, userProvider)\n              const amount = get(amounts, index, BigNumber.from(0))\n              if (amount.gt(0)) {\n                return {\n                  tokenAddress: token,\n                  decimals: await tokenContract.decimals(),\n                  amounts: amount\n                }\n              }\n            })\n          )\n        )\n\n        setEstimateWithdrawArray(nextEstimateWithdrawArray)\n      } catch (error) {\n        console.log('estimate withdraw error', error)\n        const errorMsg = errorTextOutput(error)\n        let tip = ''\n        if (isEs(errorMsg)) {\n          tip = 'Vault has been shut down, please try again later!'\n        } else if (isAd(errorMsg)) {\n          tip = 'Vault is in adjustment status, please try again later!'\n        } else if (isRp(errorMsg)) {\n          tip = 'Vault is in rebase status, please try again later!'\n        } else if (isMaxLoss(errorMsg)) {\n          tip = 'Failed to withdraw, please increase the Max Loss!'\n        } else if (isLossMuch(errorMsg)) {\n          tip = 'Failed to exchange, please increase the exchange slippage or choose mixed token!'\n        } else if (isExchangeFail(errorMsg)) {\n          tip = 'Failed to exchange, Please try again later or choose mixed token!'\n        } else {\n          tip = errorMsg\n        }\n        dispatch(\n          warmDialog({\n            open: true,\n            type: 'error',\n            message: tip\n          })\n        )\n        setEstimateWithdrawArray(undefined)\n      } finally {\n        setTimeout(() => {\n          setIsEstimate(false)\n        }, 500)\n      }\n    }, 1500)\n  )\n\n  const handleBurn = (a, b, c, d, tokens, amounts) => {\n    console.log('handleBurn')\n    console.log('tokens', tokens)\n    console.log(\n      'amounts',\n      amounts.map(el => el.toString())\n    )\n    return Promise.all(\n      map(tokens, async (token, i) => {\n        const fromContract = new ethers.Contract(token, IERC20_ABI, userProvider)\n        const fromDecimal = await fromContract.decimals()\n        const exchangeAmounts = amounts[i]\n        if (BigNumber.from(10).pow(fromDecimal).gt(exchangeAmounts)) {\n          return\n        }\n        return {\n          address: token,\n          amount: toFixed(amounts[i], 1)\n        }\n      })\n    ).then(array => {\n      const nextBurnTokens = compact(array)\n      if (!isEmpty(nextBurnTokens)) {\n        setBurnTokens(nextBurnTokens)\n        setIsShowZipModal(true)\n      }\n    })\n  }\n\n  const withdraw = async () => {\n    let withdrawTimeStart = Date.now(),\n      withdrawValidFinish = 0,\n      preWithdrawGetCoins = 0,\n      getSwapInfoFinish = 0,\n      estimateGasFinish = 0,\n      withdrawFinish = 0,\n      withdrawTransationFinish = 0\n    setIsWithdrawLoading(true)\n    console.log('----------start withdraw----------')\n    if (!isValidToValue()) {\n      return setWithdrawError({\n        type: 'warning',\n        message: 'Please enter the correct value.'\n      })\n    }\n\n    if (!isValidAllowLoss()) {\n      return setWithdrawError({\n        type: 'warning',\n        message: 'Enter the correct Max Loss value.'\n      })\n    }\n\n    if (shouldExchange && !isValidSlipper()) {\n      return setWithdrawError({\n        type: 'warning',\n        message: 'Please enter the correct slippage value.'\n      })\n    }\n    withdrawValidFinish = Date.now()\n    setCurrentStep(1)\n    const vaultContract = new ethers.Contract(VAULT_ADDRESS, VAULT_ABI, userProvider)\n    const signer = userProvider.getSigner()\n    const nextValue = BigNumber.from(BN(toValue).multipliedBy(BigNumber.from(10).pow(usdiDecimals).toString()).toFixed())\n    const usdValue = nextValue.mul(pegTokenPrice).div(BN_18.toFixed())\n    const allowMaxLossValue = BigNumber.from(10000 - parseInt(100 * (parseFloat(allowMaxLoss) + redeemFeeBpsPercent)))\n      .mul(usdValue)\n      .div(BigNumber.from(1e4))\n    try {\n      const vaultContractWithSigner = vaultContract.connect(signer)\n      getSwapInfoFinish = Date.now()\n      setCurrentStep(2)\n      let tx\n      // if gasLimit times not 1, need estimateGas\n      if (isNumber(MULTIPLE_OF_GAS) && MULTIPLE_OF_GAS !== 1) {\n        const gas = await vaultContractWithSigner.estimateGas.burn(nextValue, allowMaxLossValue)\n        setCurrentStep(3)\n        estimateGasFinish = Date.now()\n        const gasLimit = Math.ceil(gas * MULTIPLE_OF_GAS)\n        // gasLimit not exceed maximum\n        const maxGasLimit = gasLimit < MAX_GAS_LIMIT ? gasLimit : MAX_GAS_LIMIT\n        tx = await vaultContractWithSigner.burn(nextValue, allowMaxLossValue, {\n          gasLimit: maxGasLimit\n        })\n      } else {\n        tx = await vaultContractWithSigner.burn(nextValue, allowMaxLossValue)\n      }\n      withdrawFinish = Date.now()\n\n      const { events } = await tx.wait()\n      let args = []\n      for (let i = events.length - 1; i >= 0; i--) {\n        if (events[i].event === 'Burn') {\n          args = events[i].args\n          break\n        }\n      }\n      handleBurn(...args)\n\n      withdrawTransationFinish = Date.now()\n      setCurrentStep(4)\n      setToValue('')\n      dispatch(\n        warmDialog({\n          open: true,\n          type: 'success',\n          message: 'Success!'\n        })\n      )\n    } catch (error) {\n      console.log('withdraw original error :', error)\n      const errorMsg = errorTextOutput(error)\n      let tip = ''\n      if (isEs(errorMsg)) {\n        tip = 'Vault has been shut down, please try again later!'\n      } else if (isAd(errorMsg)) {\n        tip = 'Vault is in adjustment status, please try again later!'\n      } else if (isRp(errorMsg)) {\n        tip = 'Vault is in rebase status, please try again later!'\n      } else if (isMaxLoss(errorMsg)) {\n        tip = 'Failed to withdraw, please increase the Max Loss!'\n      } else if (isLossMuch(errorMsg)) {\n        tip = 'Failed to exchange, please increase the exchange slippage or choose mixed token!'\n      } else if (isExchangeFail(errorMsg)) {\n        tip = 'Failed to exchange, Please try again later or choose mixed token!'\n      } else {\n        tip = errorMsg\n      }\n      dispatch(\n        warmDialog({\n          open: true,\n          type: 'error',\n          message: tip\n        })\n      )\n    }\n    setTimeout(() => {\n      setIsWithdrawLoading(false)\n      setWithdrawError({})\n      setCurrentStep(0)\n    }, 2000)\n    // log withdraw total time\n    const totalTime = withdrawTransationFinish - withdrawTimeStart\n    const szjy = withdrawValidFinish - withdrawTimeStart\n    const szjyPercents = ((100 * szjy) / totalTime).toFixed(2)\n    const ytq = preWithdrawGetCoins === 0 ? 0 : preWithdrawGetCoins - withdrawValidFinish\n    const ytqPercents = ((100 * ytq) / totalTime).toFixed(2)\n    const hqdhlj = preWithdrawGetCoins === 0 ? getSwapInfoFinish - withdrawValidFinish : getSwapInfoFinish - preWithdrawGetCoins\n    const hqdhljPercents = ((100 * hqdhlj) / totalTime).toFixed(2)\n    const eg = estimateGasFinish === 0 ? 0 : estimateGasFinish - getSwapInfoFinish\n    const egPercents = ((100 * eg) / totalTime).toFixed(2)\n    const qk = estimateGasFinish === 0 ? withdrawFinish - getSwapInfoFinish : withdrawFinish - estimateGasFinish\n    const qkPercents = ((100 * qk) / totalTime).toFixed(2)\n    const swc = withdrawTransationFinish - withdrawFinish\n    const swcPercents = ((100 * swc) / totalTime).toFixed(2)\n    console.table({\n      valid: `${szjy}(${szjyPercents}%)`,\n      preWithdraw: `${ytq}(${ytqPercents}%)`,\n      getSwapPath: `${hqdhlj}(${hqdhljPercents}%)`,\n      estimateGas: `${eg}(${egPercents}%)`,\n      withdraw: `${qk}(${qkPercents}%)`,\n      transaction: `${swc}(${swcPercents}%)`\n    })\n  }\n\n  function imgError(e) {\n    const evn = e\n    const img = evn.srcElement ? evn.srcElement : evn.target\n    img.src = '/default.png'\n  }\n\n  const handleReceiveTokenChange = value => {\n    setReceiveToken(value)\n  }\n\n  /**\n   * check if toValue is valid\n   * @returns\n   */\n  const isValidToValue = () => {\n    if (toValue === '' || toValue === '-' || isEmpty(toValue.replace(/ /g, ''))) return\n    // should be a number\n    if (isNaN(Number(toValue))) return false\n    const nextValue = BN(toValue)\n    const nextToValue = nextValue.multipliedBy(BigNumber.from(10).pow(usdiDecimals).toString())\n    // should be positive\n    if (nextToValue.lte(0)) return false\n    // should be integer\n    const nextToValueString = nextValue.multipliedBy(BigNumber.from(10).pow(usdiDecimals).toString())\n    if (nextToValueString.toFixed().indexOf('.') !== -1) return false\n    // balance less than value\n    if (toBalance.lt(BigNumber.from(nextToValue.toFixed()))) return false\n    return true\n  }\n\n  /**\n   * check if allow loss is valid\n   * @returns\n   */\n  const isValidAllowLoss = () => {\n    if (allowMaxLoss === '' || isEmpty(allowMaxLoss.replace(/ /g, ''))) return\n    if (isNaN(allowMaxLoss)) return false\n    if (allowMaxLoss < 0 || allowMaxLoss > 50) return false\n    return true\n  }\n\n  const isValidSlipper = () => {\n    if (slipper === '' || isEmpty(slipper.replace(/ /g, ''))) return\n    if (isNaN(slipper)) return false\n    if (slipper < 0 || slipper > 45) return false\n    return true\n  }\n\n  useEffect(() => {\n    // need open advanced setting\n    // allowLoss, slipper, toValue need valid\n    if (isValidAllowLoss() && isValidSlipper() && isValidToValue()) {\n      estimateWithdraw()\n    }\n    if (isEmpty(toValue)) {\n      setEstimateWithdrawArray([])\n      setIsEstimate(false)\n    }\n    return () => {\n      setEstimateWithdrawArray([])\n      return estimateWithdraw.cancel()\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [toValue, allowMaxLoss, slipper, shouldExchange, token])\n\n  const handleAmountChange = event => {\n    try {\n      setToValue(event.target.value)\n    } catch (error) {\n      setToValue('')\n    }\n  }\n\n  const handleMaxClick = async () => {\n    const [nextUsdiBalance] = await reloadBalance()\n    setToValue(formatBalance(nextUsdiBalance, usdiDecimals, { showAll: true }))\n  }\n\n  const renderEstimate = () => {\n    if (isEstimate) {\n      return (\n        <GridItem xs={12} sm={12} md={12} lg={12}>\n          <div className={classes.estimateItem}>\n            <CircularProgress fontSize=\"large\" />\n            <p>loading...</p>\n          </div>\n        </GridItem>\n      )\n    }\n    if (isUndefined(estimateWithdrawArray)) {\n      return (\n        <GridItem xs={12} sm={12} md={12} lg={12}>\n          <div className={classes.estimateItem}>\n            <ErrorOutlineIcon fontSize=\"large\" />\n            <p>Amount estimate failed, please try again!</p>\n          </div>\n        </GridItem>\n      )\n    }\n    if (isEmpty(estimateWithdrawArray) || isEmpty(toValue)) {\n      return (\n        <GridItem xs={12} sm={12} md={12} lg={12}>\n          <div className={classes.estimateItem}>\n            <p style={{ fontSize: 26, textAlign: 'right' }}>0.00</p>\n          </div>\n        </GridItem>\n      )\n    }\n    return map(estimateWithdrawArray, item => {\n      return (\n        <GridItem key={item.tokenAddress} xs={12} sm={12} md={6} lg={6}>\n          <Button\n            title=\"Add token address to wallet\"\n            color=\"transparent\"\n            target=\"_blank\"\n            style={{ fontSize: '1rem', color: '#A0A0A0' }}\n            onClick={() => addToken(item.tokenAddress)}\n          >\n            <AddIcon fontSize=\"small\" style={{ position: 'absolute', top: 25, left: 45 }} />\n            <img className={classes.img} style={{ borderRadius: '50%' }} alt=\"\" src={`./images/${item.tokenAddress}.png`} onError={imgError} />\n            &nbsp;&nbsp;~&nbsp;\n            {toFixed(item.amounts, BigNumber.from(10).pow(item.decimals), 6)}\n          </Button>\n        </GridItem>\n      )\n    })\n  }\n\n  const selectOptions = [\n    {\n      label: 'USDT',\n      value: USDT_ADDRESS || 'USDT',\n      img: './images/0x55d398326f99059fF775485246999027B3197955.png'\n    },\n    {\n      label: 'USDC',\n      value: USDC_ADDRESS || 'USDC',\n      img: './images/0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d.png'\n    },\n    {\n      label: 'DAI',\n      value: DAI_ADDRESS || 'DAI',\n      img: './images/0x1AF3F329e8BE154074D8769D1FFa4eE058B1DBc3.png'\n    },\n    {\n      label: 'Mix',\n      value: RECEIVE_MIX_VALUE || 'Mix',\n      img: [\n        './images/0x55d398326f99059fF775485246999027B3197955.png',\n        './images/0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d.png',\n        './images/0x1AF3F329e8BE154074D8769D1FFa4eE058B1DBc3.png'\n      ]\n    }\n  ]\n\n  const isValidToValueFlag = isValidToValue()\n  const isValidAllowLossFlag = isValidAllowLoss()\n\n  const isLogin = !isEmpty(userProvider)\n\n  const getPegTokenPrice = () => {\n    const vaultContract = new ethers.Contract(VAULT_ADDRESS, VAULT_ABI, userProvider)\n    vaultContract.getPegTokenPrice().then(result => {\n      setTimeout(() => {\n        setPegTokenPrice(result)\n      }, 500)\n    })\n    return getPegTokenPrice\n  }\n\n  useEffect(() => {\n    if (isEmpty(address) || isEmpty(VAULT_ADDRESS) || isEmpty(VAULT_ABI)) return\n    const timer = setInterval(getPegTokenPrice(), 10000)\n    return () => clearInterval(timer)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [address, VAULT_ADDRESS, VAULT_ABI])\n\n  return (\n    <>\n      <div className={classes.setting}>\n        <PopupState variant=\"popover\" popupId=\"setting-popover\">\n          {popupState => (\n            <div>\n              <svg width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...bindTrigger(popupState)}>\n                <path\n                  d=\"M15 20.625C18.1066 20.625 20.625 18.1066 20.625 15C20.625 11.8934 18.1066 9.375 15 9.375C11.8934 9.375 9.375 11.8934 9.375 15C9.375 18.1066 11.8934 20.625 15 20.625Z\"\n                  stroke=\"#A0A0A0\"\n                  strokeWidth=\"1.75\"\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                />\n                <path\n                  d=\"M21.5273 7.62891C21.8242 7.90234 22.1055 8.18359 22.3711 8.47266L25.5703 8.92969C26.0916 9.83497 26.4934 10.804 26.7656 11.8125L24.8203 14.4023C24.8203 14.4023 24.8555 15.1992 24.8203 15.5977L26.7656 18.1875C26.4946 19.1965 26.0928 20.1656 25.5703 21.0703L22.3711 21.5273C22.3711 21.5273 21.8203 22.1016 21.5273 22.3711L21.0703 25.5703C20.165 26.0916 19.196 26.4934 18.1875 26.7656L15.5977 24.8203C15.2 24.8555 14.8 24.8555 14.4023 24.8203L11.8125 26.7656C10.8035 26.4946 9.83438 26.0928 8.92969 25.5703L8.47266 22.3711C8.18359 22.0977 7.90234 21.8164 7.62891 21.5273L4.42969 21.0703C3.90842 20.165 3.50663 19.196 3.23438 18.1875L5.17969 15.5977C5.17969 15.5977 5.14453 14.8008 5.17969 14.4023L3.23438 11.8125C3.50537 10.8035 3.90722 9.83438 4.42969 8.92969L7.62891 8.47266C7.90234 8.18359 8.18359 7.90234 8.47266 7.62891L8.92969 4.42969C9.83497 3.90842 10.804 3.50663 11.8125 3.23438L14.4023 5.17969C14.8 5.14452 15.2 5.14452 15.5977 5.17969L18.1875 3.23438C19.1965 3.50537 20.1656 3.90722 21.0703 4.42969L21.5273 7.62891Z\"\n                  stroke=\"#A0A0A0\"\n                  strokeWidth=\"1.75\"\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                />\n              </svg>\n              <Popover\n                classes={{ paper: classes.popover }}\n                {...bindPopover(popupState)}\n                anchorOrigin={{\n                  vertical: 'bottom',\n                  horizontal: 'center'\n                }}\n                transformOrigin={{\n                  vertical: 'top',\n                  horizontal: 'center'\n                }}\n              >\n                <Box p={2}>\n                  <GridContainer>\n                    <GridItem xs={12} sm={12} md={12} lg={12}>\n                      <p className={classes.popoverTitle}>Max Loss</p>\n                      <CustomTextField\n                        classes={{ root: classes.input }}\n                        value={allowMaxLoss}\n                        placeholder=\"Allow loss percent\"\n                        maxEndAdornment\n                        onMaxClick={() => setAllowMaxLoss('50')}\n                        onChange={event => {\n                          const value = event.target.value\n                          setAllowMaxLoss(value)\n                        }}\n                        error={!isUndefined(isValidAllowLossFlag) && !isValidAllowLossFlag}\n                      />\n                    </GridItem>\n                  </GridContainer>\n                </Box>\n              </Popover>\n            </div>\n          )}\n        </PopupState>\n      </div>\n      <GridContainer className={classes.withdrawContainer}>\n        <GridItem xs={12} sm={12} md={12} lg={12}>\n          <p className={classes.estimateText}>From</p>\n        </GridItem>\n        <GridItem xs={12} sm={12} md={12} lg={12}>\n          <div className={classes.inputLabelWrapper}>\n            <div className={classes.tokenInfo}>\n              <span className={classes.tokenName}>USDi</span>\n            </div>\n            <CustomTextField\n              classes={{ root: classes.input }}\n              value={toValue}\n              placeholder=\"withdraw amount\"\n              maxEndAdornment\n              onMaxClick={() => handleMaxClick()}\n              onChange={handleAmountChange}\n              error={!isUndefined(isValidToValueFlag) && !isValidToValueFlag && toValue !== '0'}\n            />\n          </div>\n        </GridItem>\n        <GridItem xs={12} sm={12} md={12} lg={12}>\n          <p className={classes.estimateText} title={formatBalance(toBalance, usdiDecimals, { showAll: true })}>\n            Balance:&nbsp;\n            <Loading loading={isBalanceLoading}>{formatBalance(toBalance, usdiDecimals)}</Loading>\n          </p>\n        </GridItem>\n        {address && (\n          <GridItem xs={12} sm={12} md={12} lg={12}>\n            <p className={classes.estimateText} title={toFixed(pegTokenPrice, BN_18)}>\n              <span>1 USDi ≈ {toFixed(pegTokenPrice, BN_18, 6)} USD</span>\n            </p>\n          </GridItem>\n        )}\n      </GridContainer>\n      <GridContainer className={classes.outputContainer}>\n        <GridItem xs={12} sm={12} md={12} lg={12}>\n          <p className={classes.estimateText}>To</p>\n        </GridItem>\n        <GridItem xs={12} sm={12} md={12} lg={12}>\n          <div className={classes.selectorlWrapper}>\n            <SimpleSelect disabled value={receiveToken} onChange={handleReceiveTokenChange} options={selectOptions} />\n            <p className={classes.estimateText}>\n              {receiveToken === 'Mix' && (\n                <Tooltip\n                  classes={{\n                    tooltip: classes.tooltip\n                  }}\n                  placement=\"top\"\n                  title={'Mix mode will return a variety of coins, such as USDT/USDC/TUSD/BUSD, etc.'}\n                >\n                  <InfoIcon />\n                </Tooltip>\n              )}\n            </p>\n          </div>\n        </GridItem>\n        <GridItem xs={12} sm={12} md={12} lg={12}>\n          <GridContainer>{renderEstimate()}</GridContainer>\n        </GridItem>\n      </GridContainer>\n      <GridContainer>\n        <GridItem xs={12} sm={12} md={12} lg={12}>\n          <div className={classes.footerContainer}>\n            <Button\n              disabled={!isLogin || (isLogin && (isUndefined(isValidToValueFlag) || !isValidToValueFlag))}\n              color=\"colorfull\"\n              onClick={withdraw}\n              style={{ width: '100%' }}\n            >\n              Withdraw\n              <Tooltip\n                classes={{\n                  tooltip: classes.tooltip\n                }}\n                placement=\"top\"\n                title={`${redeemFeeBpsPercent}% withdrawal fee of the principal.`}\n              >\n                <InfoIcon style={{ marginLeft: '0.5rem' }} />\n              </Tooltip>\n            </Button>\n          </div>\n        </GridItem>\n      </GridContainer>\n      <Modal className={classes.modal} open={isWithdrawLoading} aria-labelledby=\"simple-modal-title\" aria-describedby=\"simple-modal-description\">\n        <Paper elevation={3} className={classes.widthdrawLoadingPaper}>\n          <div className={classes.modalBody}>\n            {isEmpty(withdrawError) && <CircularProgress color=\"inherit\" />}\n            {isEmpty(withdrawError) ? <p>In Withdrawing...</p> : <p>Withdraw Error !</p>}\n            <BocStepper\n              classes={{\n                root: classes.root\n              }}\n              alternativeLabel\n              activeStep={currentStep}\n              connector={<BocStepConnector />}\n            >\n              {map(steps, (i, index) => {\n                return (\n                  <Step key={index}>\n                    <BocStepLabel StepIconComponent={BocStepIcon}>{i.title}</BocStepLabel>\n                  </Step>\n                )\n              })}\n            </BocStepper>\n            {!isEmpty(withdrawError) && (\n              <p\n                style={{\n                  color: withdrawError.type === 'error' ? 'red' : 'yellow'\n                }}\n              >\n                <WarningIcon style={{ verticalAlign: 'bottom' }}></WarningIcon>\n                &nbsp;&nbsp;&nbsp;{withdrawError.message}\n              </p>\n            )}\n            <Button\n              color=\"danger\"\n              onClick={() => {\n                setIsWithdrawLoading(false)\n                setWithdrawError({})\n                setCurrentStep(0)\n              }}\n            >\n              Cancel\n            </Button>\n          </div>\n        </Paper>\n      </Modal>\n      <Modal\n        className={classes.modal}\n        open={isShowZipModal && !!address}\n        aria-labelledby=\"simple-modal-title\"\n        aria-describedby=\"simple-modal-description\"\n      >\n        <div className={classes.swapBody}>\n          {!isEmpty(address) && !isEmpty(exchangeManager) && (\n            <ApproveArray\n              address={address}\n              tokens={burnTokens}\n              userProvider={userProvider}\n              exchangeManager={exchangeManager}\n              EXCHANGE_ADAPTER_ABI={EXCHANGE_ADAPTER_ABI}\n              EXCHANGE_AGGREGATOR_ABI={EXCHANGE_AGGREGATOR_ABI}\n              slippage={slipper}\n              onSlippageChange={setSlipper}\n              handleClose={() => setIsShowZipModal(false)}\n            />\n          )}\n        </div>\n      </Modal>\n    </>\n  )\n}\n","import { container } from '@/assets/jss/material-kit-react.js'\nimport { gradientText } from '@/assets/jss/common.js'\n\nconst componentsStyle = theme => ({\n  container: {\n    zIndex: '12',\n    color: '#FFFFFF',\n    marginTop: 65,\n    marginBottom: 100,\n    ...container\n  },\n  center: {\n    justifyContent: 'center',\n    padding: '50px 72px 50px',\n    backgroundColor: '#0c0735cc',\n    [theme.breakpoints.down('md')]: {\n      padding: '50px 16px 50px'\n    },\n    margin: 0\n  },\n  wrapper: {\n    padding: '5rem 3rem',\n    borderRadius: '1.25rem',\n    background: 'linear-gradient(111.68deg, rgba(87, 97, 125, 0.2) 7.59%, rgba(255, 255, 255, 0.078) 102.04%)'\n  },\n  wrapperMobile: {\n    padding: '3rem 2rem',\n    borderRadius: '1.25rem',\n    background: 'linear-gradient(111.68deg, rgba(87, 97, 125, 0.2) 7.59%, rgba(255, 255, 255, 0.078) 102.04%)'\n  },\n  deposit: {\n    padding: '1rem',\n    border: '1px solid #F4ACF3',\n    borderTopLeftRadius: '1.25rem',\n    borderTopRightRadius: '1.25rem'\n  },\n  symbol: {\n    color: '#A68EFD',\n    marginLeft: '1rem',\n    ...gradientText\n  },\n  balance: {\n    marginTop: '0.5rem',\n    marginBottom: '2rem',\n    padding: '1rem',\n    border: '1px solid #F4ACF3',\n    borderBottomLeftRadius: '1.25rem',\n    borderBottomRightRadius: '1.25rem'\n  },\n  footer: {},\n  item: {\n    color: '#fff',\n    marginBottom: 20,\n    '& .MuiListItemIcon-root': {\n      minWidth: '38px'\n    }\n  },\n  centerItem: {\n    width: '630px'\n  },\n  balanceCard: {\n    position: 'relative',\n    display: 'flex',\n    margin: '0 1rem 1rem 0',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    textAlign: 'left',\n    padding: '2.8125rem 2.4375rem',\n    background: '#323338',\n    color: '#fff',\n    borderRadius: '1.25rem'\n  },\n  check: {\n    color: '#A68EFE'\n  },\n  balanceCardValue: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    height: 30,\n    lineHeight: '30px',\n    fontSize: 26,\n    fontWeight: 'bold',\n    color: '#fff',\n    marginBottom: 8\n  },\n  balanceCardLabel: {\n    color: '#b2add1',\n    fontSize: 14\n  },\n  tokenInfo: {\n    display: 'flex',\n    position: 'absolute',\n    right: 12,\n    top: 9\n  },\n  addTokenIcon: {\n    cursor: 'pointer',\n    marginLeft: '1rem',\n    display: 'flex'\n  },\n  scanToken: {\n    width: 24,\n    height: 'auto',\n    cursor: 'pointer',\n    borderRadius: '50%',\n    backgroundColor: '#fff'\n  },\n  hidden: {\n    display: 'none'\n  },\n  brand: {\n    color: '#FFFFFF',\n    textAlign: 'left'\n  },\n  title: {\n    fontSize: '4.2rem',\n    fontWeight: '600',\n    display: 'inline-block',\n    position: 'relative'\n  },\n  subtitle: {\n    fontSize: '1.313rem',\n    width: 'auto',\n    margin: '10px 0 0'\n  },\n  main: {\n    position: 'relative',\n    backgroundColor: 'transparent'\n  },\n  mainRaised: {\n    margin: '0 auto',\n    marginTop: 65\n  },\n  link: {\n    textDecoration: 'none'\n  },\n  textCenter: {\n    textAlign: 'center'\n  },\n  switchBar: {\n    backgroundColor: '#91d5ff !important'\n  },\n  img: {\n    width: '25px'\n  },\n  radioUnchecked: {\n    width: '0px',\n    height: '0px',\n    padding: '7px',\n    border: '1px solid #fff',\n    borderRadius: '50%'\n  },\n  radioChecked: {\n    width: '16px',\n    height: '16px',\n    border: '1px solid #fff',\n    borderRadius: '50%'\n  },\n  radioRoot: {\n    padding: '12px',\n    '&:hover': {\n      backgroundColor: 'unset'\n    }\n  },\n  radio: {\n    color: '#fff !important'\n  },\n  investCard: {\n    padding: '20px 24px',\n    borderRadius: 6,\n    backgroundColor: 'rgba(39, 31, 114, 0.8)',\n    overflow: 'visible'\n  },\n  table: {\n    backgroundColor: '#150752',\n    border: '1px solid rgb(222, 217, 213)'\n  },\n  tableCell: {\n    color: '#fff',\n    fontSize: '12px',\n    letterSpacing: '0.01071em'\n  },\n  switchBase: {\n    color: '#ddd'\n  },\n  switchChecked: {\n    color: '#40a9ff'\n  },\n  modal: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  modalBody: {\n    textAlign: 'center'\n  },\n  stepContainer: {\n    padding: 20\n  },\n  stepItem: {\n    color: '#fff'\n  },\n  tabsRoot: {\n    padding: '0 20px'\n  },\n  tabsIndicator: {\n    backgroundColor: 'transparent',\n    display: 'flex',\n    justifyContent: 'center',\n    '& > span': {\n      maxWidth: 120,\n      width: '100%',\n      backgroundColor: '#fff'\n    }\n  },\n  tabTextColor: {\n    color: '#fff'\n  },\n  tabRoot: {\n    width: '50%',\n    fontSize: '16px',\n    maxWidth: 'none'\n  },\n  detailWrapper: {\n    margin: '42px 0 0 0'\n  },\n  slider: {\n    position: 'absolute',\n    top: '50px',\n    left: 'calc(50% - 33rem)',\n    backgroundColor: '#271f72',\n    color: 'azure'\n  },\n  text: {\n    color: 'azure'\n  },\n  spliter: {\n    display: 'flex',\n    justifyContent: 'center',\n    bottom: 0,\n    height: 2,\n    position: 'absolute',\n    transition: 'all 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n    width: '54%',\n    backgroundColor: '#fff'\n  }\n})\n\nexport default componentsStyle\n","import React, { useState, useEffect } from 'react'\nimport classNames from 'classnames'\nimport { makeStyles } from '@material-ui/core/styles'\nimport useMediaQuery from '@material-ui/core/useMediaQuery'\n\n// === Components === //\nimport Card from '@material-ui/core/Card'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport InfoIcon from '@material-ui/icons/Info'\nimport AccountBalanceWalletIcon from '@material-ui/icons/AccountBalanceWallet'\nimport SaveAltIcon from '@material-ui/icons/SaveAlt'\nimport UndoIcon from '@material-ui/icons/Undo'\nimport Loading from '@/components/LoadingComponent'\nimport GridItem from '@/components/Grid/GridItem'\nimport GridContainer from '@/components/Grid/GridContainer'\nimport Deposit from './Deposit'\nimport Withdraw from './Withdraw'\nimport MyStatement from '@/components/MyStatement'\n\n// === Reducers === //\nimport { useDispatch, useSelector } from 'react-redux'\nimport { warmDialog } from '@/reducers/meta-reducer'\nimport { setCurrentTab } from '@/reducers/invest-reducer'\n\n// === constants === //\nimport { USDT_ADDRESS, USDC_ADDRESS, DAI_ADDRESS, CHAIN_ID, IERC20_ABI } from '@/constants'\nimport { INVEST_TAB } from '@/constants/invest'\n\n// === Utils === //\nimport { formatBalance } from '@/helpers/number-format'\nimport moment from 'moment'\nimport isEmpty from 'lodash/isEmpty'\nimport last from 'lodash/last'\nimport noop from 'lodash/noop'\nimport * as ethers from 'ethers'\nimport useVersionWapper from '@/hooks/useVersionWapper'\nimport { addToken } from '@/helpers/wallet'\nimport { getLastPossibleRebaseTime } from '@/helpers/time-util'\nimport useVault from '@/hooks/useVault'\n\n// === Styles === //\nimport styles from './style'\n\nconst useStyles = makeStyles(styles)\nconst { BigNumber } = ethers\n\nfunction Invest(props) {\n  const classes = useStyles()\n  const dispatch = useDispatch()\n  const isLayoutSm = useMediaQuery('(max-width: 960px)')\n\n  const {\n    address,\n    userProvider,\n    VAULT_ADDRESS,\n    VAULT_ABI,\n    USDI_ADDRESS,\n    EXCHANGE_AGGREGATOR_ABI,\n    EXCHANGE_ADAPTER_ABI,\n    VAULT_BUFFER_ADDRESS,\n    VAULT_BUFFER_ABI,\n    abi_version\n  } = props\n  const [usdtBalance, setUsdtBalance] = useState(BigNumber.from(0))\n  const [usdtDecimals, setUsdtDecimals] = useState(0)\n  const [usdcBalance, setUsdcBalance] = useState(BigNumber.from(0))\n  const [usdcDecimals, setUsdcDecimals] = useState(0)\n  const [daiBalance, setDaiBalance] = useState(BigNumber.from(0))\n  const [daiDecimals, setDaiDecimals] = useState(0)\n  const [usdiDecimals, setUsdiDecimals] = useState(0)\n\n  const [toBalance, setToBalance] = useState(BigNumber.from(0))\n  const [beforeTotalValue, setBeforeTotalValue] = useState(BigNumber.from(0))\n  const [totalValue, setTotalValue] = useState(BigNumber.from(0))\n\n  const [vaultBufferBalance, setVaultBufferBalance] = useState(BigNumber.from(0))\n  const [vaultBufferDecimals, setVaultBufferDecimals] = useState(0)\n\n  const [isBalanceLoading, setIsBalanceLoading] = useState(false)\n\n  const current = useSelector(state => state.investReducer.currentTab)\n  const setCurrent = tab => {\n    loadCoinsBalance()\n    dispatch(setCurrentTab(tab))\n  }\n\n  const lastRebaseTime = getLastPossibleRebaseTime()\n\n  const { minimumInvestmentAmount, exchangeManager } = useVault(VAULT_ADDRESS, VAULT_ABI, userProvider)\n  // load user balance\n  const loadBalance = () => {\n    if (isEmpty(address) || isEmpty(USDI_ADDRESS) || isEmpty(VAULT_BUFFER_ADDRESS)) return\n    const usdtContract = new ethers.Contract(USDT_ADDRESS, IERC20_ABI, userProvider)\n    const usdcContract = new ethers.Contract(USDC_ADDRESS, IERC20_ABI, userProvider)\n    const daiContract = new ethers.Contract(DAI_ADDRESS, IERC20_ABI, userProvider)\n    const usdiContract = new ethers.Contract(USDI_ADDRESS, IERC20_ABI, userProvider)\n\n    const vaultBufferContract = new ethers.Contract(VAULT_BUFFER_ADDRESS, VAULT_BUFFER_ABI, userProvider)\n    vaultBufferContract\n      .decimals()\n      .then(setVaultBufferDecimals)\n      .catch(() => setVaultBufferDecimals(1))\n\n    Promise.all([\n      loadCoinsBalance(),\n      loadTotalAssets()\n        .then(afterTotalValue => {\n          setTotalValue(afterTotalValue)\n        })\n        .catch(noop),\n      usdtContract.decimals().then(setUsdtDecimals),\n      usdcContract.decimals().then(setUsdcDecimals),\n      daiContract.decimals().then(setDaiDecimals),\n      usdiContract\n        .decimals()\n        .then(setUsdiDecimals)\n        .catch(() => setUsdiDecimals(1))\n    ]).catch(() => {\n      dispatch(\n        warmDialog({\n          open: true,\n          type: 'warning',\n          message: \"Please confirm wallet's network!\"\n        })\n      )\n    })\n  }\n\n  /**\n   * only load balance\n   * @returns\n   */\n  const loadCoinsBalance = () => {\n    if (isEmpty(address) || isEmpty(VAULT_BUFFER_ADDRESS) || isEmpty(USDI_ADDRESS)) return\n    setIsBalanceLoading(true)\n    const usdtContract = new ethers.Contract(USDT_ADDRESS, IERC20_ABI, userProvider)\n    const usdcContract = new ethers.Contract(USDC_ADDRESS, IERC20_ABI, userProvider)\n    const daiContract = new ethers.Contract(DAI_ADDRESS, IERC20_ABI, userProvider)\n    const usdiContract = new ethers.Contract(USDI_ADDRESS, IERC20_ABI, userProvider)\n    const vaultBufferContract = new ethers.Contract(VAULT_BUFFER_ADDRESS, VAULT_BUFFER_ABI, userProvider)\n    return Promise.all([\n      usdiContract.balanceOf(address).catch(() => BigNumber.from(0)),\n      usdtContract.balanceOf(address),\n      usdcContract.balanceOf(address),\n      daiContract.balanceOf(address),\n      vaultBufferContract.balanceOf(address).catch(() => BigNumber.from(0))\n    ])\n      .then(([usdiBalance, usdtBalance, usdcBalance, daiBalance, vaultBufferBalance]) => {\n        setToBalance(usdiBalance)\n        setUsdtBalance(usdtBalance)\n        setUsdcBalance(usdcBalance)\n        setDaiBalance(daiBalance)\n        setVaultBufferBalance(vaultBufferBalance)\n        return [usdiBalance, usdtBalance, usdcBalance, daiBalance, vaultBufferBalance]\n      })\n      .finally(() => {\n        setTimeout(() => {\n          setIsBalanceLoading(false)\n        }, 1000)\n      })\n  }\n\n  useEffect(() => {\n    if (isEmpty(VAULT_ADDRESS)) return\n    const loadTotalAssetsFn = () =>\n      loadTotalAssets()\n        .then(afterTotalValue => {\n          if (!afterTotalValue.eq(beforeTotalValue)) {\n            setBeforeTotalValue(totalValue)\n            setTotalValue(afterTotalValue)\n          }\n        })\n        .catch(noop)\n    const timer = setInterval(loadTotalAssetsFn, 3000)\n    return () => clearInterval(timer)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [totalValue.toString()])\n\n  function handleMint(...eventArgs) {\n    // console.log('Mint=', eventArgs)\n    const block = last(eventArgs)\n    block &&\n      block\n        .getTransaction()\n        .then(tx => tx.wait())\n        .then(loadBalance)\n  }\n  function handleBurn(...eventArgs) {\n    // console.log('Burn=', eventArgs)\n    const block = last(eventArgs)\n    block &&\n      block\n        .getTransaction()\n        .then(tx => tx.wait())\n        .then(loadBalance)\n  }\n\n  useEffect(() => {\n    const listener = () => {\n      if (isEmpty(VAULT_ABI) || isEmpty(userProvider)) return\n      loadBalance()\n      if (isEmpty(VAULT_ADDRESS)) return\n      const vaultContract = new ethers.Contract(VAULT_ADDRESS, VAULT_ABI, userProvider)\n      if (!isEmpty(address)) {\n        vaultContract.on('Mint', handleMint)\n        vaultContract.on('Burn', handleBurn)\n        return () => {\n          vaultContract.off('Mint', handleMint)\n          vaultContract.off('Burn', handleBurn)\n        }\n      }\n    }\n    return listener()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [address, VAULT_ADDRESS, VAULT_ABI, userProvider])\n\n  const loadTotalAssets = () => {\n    const vaultContract = new ethers.Contract(VAULT_ADDRESS, VAULT_ABI, userProvider)\n    return vaultContract.totalAssetsIncludeVaultBuffer()\n  }\n\n  const handleAddUSDi = () => {\n    addToken(USDI_ADDRESS, 'USDi', usdiDecimals)\n  }\n\n  return (\n    <div className={classes.container}>\n      <GridContainer spacing={0} style={{ paddingTop: '100px' }}>\n        <GridItem xs={2} sm={2} md={3} style={{ padding: '0 2rem' }}>\n          <List>\n            <ListItem key=\"My Account\" button className={classNames(classes.item)} onClick={() => setCurrent(INVEST_TAB.account)}>\n              <ListItemIcon>\n                <AccountBalanceWalletIcon style={{ color: current === 0 ? '#A68EFE' : '#fff' }} />\n              </ListItemIcon>\n              {!isLayoutSm && <ListItemText primary={'My Account'} className={classNames(current === 0 ? classes.check : classes.text)} />}\n            </ListItem>\n            <ListItem\n              key=\"Deposit\"\n              button\n              className={classNames(classes.item, current === INVEST_TAB.deposit && classes.check)}\n              onClick={() => setCurrent(INVEST_TAB.deposit)}\n            >\n              <ListItemIcon>\n                <SaveAltIcon style={{ color: current === INVEST_TAB.deposit ? '#A68EFE' : '#fff' }} />\n              </ListItemIcon>\n              {!isLayoutSm && (\n                <ListItemText primary={'Deposit'} className={classNames(current === INVEST_TAB.deposit ? classes.check : classes.text)} />\n              )}\n            </ListItem>\n            <ListItem\n              key=\"Withdraw\"\n              button\n              className={classNames(classes.item, current === INVEST_TAB.withdraw && classes.check)}\n              onClick={() => setCurrent(INVEST_TAB.withdraw)}\n            >\n              <ListItemIcon>\n                <UndoIcon style={{ color: current === INVEST_TAB.withdraw ? '#A68EFE' : '#fff' }} />\n              </ListItemIcon>\n              {!isLayoutSm && (\n                <ListItemText primary={'Withdraw'} className={classNames(current === INVEST_TAB.withdraw ? classes.check : classes.text)} />\n              )}\n            </ListItem>\n          </List>\n        </GridItem>\n        {current === INVEST_TAB.account && (\n          <GridItem xs={9} sm={9} md={9}>\n            <div className={isLayoutSm ? classes.wrapperMobile : classes.wrapper} style={{ background: 'none', paddingTop: '1rem', paddingLeft: 0 }}>\n              <Card className={classes.balanceCard}>\n                <div className={classes.balanceCardItem}>\n                  <div className={classes.balanceCardValue}>\n                    <span\n                      title={formatBalance(toBalance, usdiDecimals, {\n                        showAll: true\n                      })}\n                    >\n                      <Loading loading={isBalanceLoading}>{formatBalance(toBalance, usdiDecimals)}</Loading>\n                    </span>\n                    <span className={classes.symbol}>USDi</span>\n                    {userProvider && (\n                      <span title=\"Add token address to wallet\">\n                        <AddCircleOutlineIcon className={classes.addTokenIcon} onClick={handleAddUSDi} fontSize=\"small\" />\n                      </span>\n                    )}\n                  </div>\n                  <div className={classes.balanceCardValue} style={{ fontSize: '1rem' }}>\n                    <span title={formatBalance(vaultBufferBalance, vaultBufferDecimals, { showAll: true })}>\n                      <Loading loading={isBalanceLoading}>{formatBalance(vaultBufferBalance, vaultBufferDecimals)}</Loading>\n                    </span>\n                    <span className={classes.symbol}>USDi Ticket&nbsp;&nbsp;</span>\n                    <Tooltip\n                      classes={{\n                        tooltip: classes.tooltip\n                      }}\n                      placement=\"right\"\n                      title={\n                        <span>\n                          USDi Ticket functions as parallel USDi that will be converted into USDi after fund allocations have been successful. Last\n                          execution time was&nbsp;\n                          <span style={{ fontWeight: 'bold' }}>{moment(lastRebaseTime).format('yyyy-MM-DD HH:mm')}</span>\n                        </span>\n                      }\n                    >\n                      <InfoIcon style={{ fontSize: '1rem' }} />\n                    </Tooltip>\n                  </div>\n                  <div className={classes.balanceCardLabel}>AVAILABLE BALANCE</div>\n                </div>\n              </Card>\n              {!isEmpty(address) && <MyStatement address={address} chain={`${CHAIN_ID}`} VAULT_ADDRESS={VAULT_ADDRESS} type={'USDi'} />}\n            </div>\n          </GridItem>\n        )}\n        {current === INVEST_TAB.deposit && (\n          <GridItem xs={9} sm={9} md={6}>\n            <div className={isLayoutSm ? classes.wrapperMobile : classes.wrapper}>\n              <Deposit\n                address={address}\n                usdtBalance={usdtBalance}\n                usdtDecimals={usdtDecimals}\n                usdcBalance={usdcBalance}\n                usdcDecimals={usdcDecimals}\n                daiBalance={daiBalance}\n                daiDecimals={daiDecimals}\n                usdiDecimals={usdiDecimals}\n                userProvider={userProvider}\n                VAULT_ABI={VAULT_ABI}\n                IERC20_ABI={IERC20_ABI}\n                VAULT_ADDRESS={VAULT_ADDRESS}\n                abi_version={abi_version}\n                toBalance={toBalance}\n                vaultBufferBalance={vaultBufferBalance}\n                vaultBufferDecimals={vaultBufferDecimals}\n                isBalanceLoading={isBalanceLoading}\n                reloadBalance={loadCoinsBalance}\n                minimumInvestmentAmount={minimumInvestmentAmount}\n              />\n            </div>\n          </GridItem>\n        )}\n        {current === INVEST_TAB.withdraw && (\n          <GridItem xs={9} sm={9} md={6}>\n            <div className={isLayoutSm ? classes.wrapperMobile : classes.wrapper}>\n              <Withdraw\n                address={address}\n                exchangeManager={exchangeManager}\n                toBalance={toBalance}\n                usdiDecimals={usdiDecimals}\n                userProvider={userProvider}\n                VAULT_ADDRESS={VAULT_ADDRESS}\n                VAULT_ABI={VAULT_ABI}\n                IERC20_ABI={IERC20_ABI}\n                EXCHANGE_AGGREGATOR_ABI={EXCHANGE_AGGREGATOR_ABI}\n                EXCHANGE_ADAPTER_ABI={EXCHANGE_ADAPTER_ABI}\n                isBalanceLoading={isBalanceLoading}\n                reloadBalance={loadCoinsBalance}\n              />\n            </div>\n          </GridItem>\n        )}\n      </GridContainer>\n    </div>\n  )\n}\n\nexport default useVersionWapper(Invest, 'mutilCoins')\n"],"sourceRoot":""}