/*! For license information please see 12.cf43ac2a.chunk.js.LICENSE.txt */
(this["webpackJsonpboc-web"]=this["webpackJsonpboc-web"]||[]).push([[12],{1010:function(e,t){},1014:function(e,t){},1018:function(e,t){var n=Array.prototype.reverse;e.exports=function(e){return null==e?e:n.call(e)}},1041:function(e,t,n){"use strict";var a=n(18),r=n(80),o=n(21),i=n(62),c=n(0),l=n.n(c),s=n(441),u=n(44),d=n.n(u),p=n(291),m=n(115),f=n(969),g=n(970),h=n(973),b=n.n(h),v=n(839),y=n(840),x=n(4),E=n(7),w=(n(297),n(13)),O=n(27),j=n(42),S=n(20);y.a.styles;var A=c.forwardRef((function(e,t){var n=e.children,a=e.classes,r=e.className,o=e.color,i=void 0===o?"default":o,l=e.component,s=void 0===l?"div":l,u=e.disabled,d=void 0!==u&&u,p=e.disableElevation,m=void 0!==p&&p,f=e.disableFocusRipple,g=void 0!==f&&f,h=e.disableRipple,b=void 0!==h&&h,v=e.fullWidth,y=void 0!==v&&v,j=e.orientation,S=void 0===j?"horizontal":j,A=e.size,k=void 0===A?"medium":A,C=e.variant,L=void 0===C?"outlined":C,T=Object(E.a)(e,["children","classes","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"]),N=Object(w.a)(a.grouped,a["grouped".concat(Object(O.a)(S))],a["grouped".concat(Object(O.a)(L))],a["grouped".concat(Object(O.a)(L)).concat(Object(O.a)(S))],a["grouped".concat(Object(O.a)(L)).concat("default"!==i?Object(O.a)(i):"")],d&&a.disabled);return c.createElement(s,Object(x.a)({role:"group",className:Object(w.a)(a.root,r,y&&a.fullWidth,m&&a.disableElevation,"contained"===L&&a.contained,"vertical"===S&&a.vertical),ref:t},T),c.Children.map(n,(function(e){return c.isValidElement(e)?c.cloneElement(e,{className:Object(w.a)(N,e.props.className),color:e.props.color||i,disabled:e.props.disabled||d,disableElevation:e.props.disableElevation||m,disableFocusRipple:g,disableRipple:b,fullWidth:y,size:e.props.size||k,variant:e.props.variant||L}):null})))})),k=Object(S.a)((function(e){return{root:{display:"inline-flex",borderRadius:e.shape.borderRadius},contained:{boxShadow:e.shadows[2]},disableElevation:{boxShadow:"none"},disabled:{},fullWidth:{width:"100%"},vertical:{flexDirection:"column"},grouped:{minWidth:40},groupedHorizontal:{"&:not(:first-child)":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0}},groupedVertical:{"&:not(:first-child)":{borderTopRightRadius:0,borderTopLeftRadius:0},"&:not(:last-child)":{borderBottomRightRadius:0,borderBottomLeftRadius:0}},groupedText:{},groupedTextHorizontal:{"&:not(:last-child)":{borderRight:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")}},groupedTextVertical:{"&:not(:last-child)":{borderBottom:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")}},groupedTextPrimary:{"&:not(:last-child)":{borderColor:Object(j.c)(e.palette.primary.main,.5)}},groupedTextSecondary:{"&:not(:last-child)":{borderColor:Object(j.c)(e.palette.secondary.main,.5)}},groupedOutlined:{},groupedOutlinedHorizontal:{"&:not(:first-child)":{marginLeft:-1},"&:not(:last-child)":{borderRightColor:"transparent"}},groupedOutlinedVertical:{"&:not(:first-child)":{marginTop:-1},"&:not(:last-child)":{borderBottomColor:"transparent"}},groupedOutlinedPrimary:{"&:hover":{borderColor:e.palette.primary.main}},groupedOutlinedSecondary:{"&:hover":{borderColor:e.palette.secondary.main}},groupedContained:{boxShadow:"none"},groupedContainedHorizontal:{"&:not(:last-child)":{borderRight:"1px solid ".concat(e.palette.grey[400]),"&$disabled":{borderRight:"1px solid ".concat(e.palette.action.disabled)}}},groupedContainedVertical:{"&:not(:last-child)":{borderBottom:"1px solid ".concat(e.palette.grey[400]),"&$disabled":{borderBottom:"1px solid ".concat(e.palette.action.disabled)}}},groupedContainedPrimary:{"&:not(:last-child)":{borderColor:e.palette.primary.dark}},groupedContainedSecondary:{"&:not(:last-child)":{borderColor:e.palette.secondary.dark}}}}),{name:"MuiButtonGroup"})(A),C=n(989),L=n(915),T=n(990),N=n(901),I=n.n(N),B=n(971),F=n.n(B),D=n(78),R=n.n(D),_=n(1018),P=n.n(_),V=n(107),G=n.n(V),M=n(448),W=n.n(M),U=n(865),z=["DAY","WEEK","MONTH"],H=n(951),Y=n(952),X=n(972),q=Object(s.a)(X.a),Z=function(e){return'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'.concat(e,';"></span>')};t.a=function(e){var t=e.address,n=e.type,s=e.chain,u="USDi"===n,h=q(),x=Object(c.useState)([]),E=Object(i.a)(x,2),w=E[0],O=E[1],j=Object(c.useState)(!1),S=Object(i.a)(j,2),A=S[0],N=S[1],B=Object(c.useState)("DAY"),D=Object(i.a)(B,2),_=D[0],V=D[1],M=Object(c.useState)({}),X=Object(i.a)(M,2),K=X[0],J=X[1],$=Object(c.useState)({}),Q=Object(i.a)($,2),ee=Q[0],te=Q[1],ne=Object(T.a)(s,n,t,n),ae=ne.dataSource,re=ne.loading,oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="WEEK"===_;if(t){var n=e.split("-"),a=Object(i.a)(n,2),r=a[1];return"No.".concat(r)}var o="MONTH"===_;if(o)return"".concat(I()(e).format("MMM"),".");var c="DAY"===_;if(c){var l=e.split("-"),s=Object(i.a)(l,3),u=s[1],d=s[2];return"".concat(u,"-").concat(d)}return e};Object(c.useEffect)((function(){G()(_)||(N(!0),Object(L.i)(t,s,n,_).then((function(e){O(R()(P()(e.profits),(function(e){return Object(o.a)(Object(o.a)({},e),{},{segmentTime:oe(e.segmentTime),value:1*e.profit})})))})).finally((function(){return setTimeout((function(){N(!1)}),500)})))}),[s,t,n,_]),Object(c.useEffect)((function(){var e=ae.tvls,t=void 0===e?[]:e,n=P()(Object(r.a)(t)),a=W()(n,(function(e,t){return!(t<=2)&&(t===n.length||Math.abs(e.balance-n[t-1].balance)>.005*e.balance)})),o=-1===a?0:100.5-100*a/t.length,i=Object(C.a)(t,"balance",ae.token,{format:"MM-DD",dataZoom:[{start:o,end:100}],xAxis:{axisTick:{alignWithLabel:!0}}});console.log("option1=",i),J(i)}),[ae,t]),Object(c.useEffect)((function(){var e={title:{show:!0,textStyle:{color:"rgb(157 157 157)",fontSize:25},text:G()(w)?"No Data":"",left:"center",top:"center"},textStyle:{color:"#fff"},color:["#A68EFE","#5470c6"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(e){var t=e[0],n="";return n+="".concat(t.name),n+="<br/>".concat(t.marker).concat(t.seriesName,": ").concat(Object(U.b)("".concat(t.value),1,u?Y.a:H.c)),"WEEK"===_&&(n+="<br/>".concat(Z("#fff"),"Begin: ").concat(t.data.segmentBegin),n+="<br/>".concat(Z("#fff"),"End: ").concat(t.data.segmentEnd)),n}},grid:{left:"3%",right:"4%",bottom:"3%",top:"3%",containLabel:!0},xAxis:{data:R()(w,"segmentTime"),axisLine:{onZero:!0},splitLine:{show:!1},splitArea:{show:!1},axisTick:{alignWithLabel:!0}},yAxis:{splitLine:{lineStyle:{color:"#454459"}}},series:[{name:"Profits",type:"bar",data:w}]};te(e)}),[w,t]);var ie=ae.day7Apy,ce=ae.day30Apy,le=ae.profit,se=ae.latestProfit,ue=void 0===se?{profit:"0",tokenType:""}:se,de=[{title:"Profits",tip:l.a.createElement(v.a,{classes:{tooltip:h.tooltip},placement:"right",title:"Total profits from BoC that are withdrawable and cumulative."},l.a.createElement(b.a,{style:{fontSize:"1.375rem",color:"rgba(255,255,255,0.45)"}})),content:F()(Object(U.b)(le,H.a,u?Y.a:H.b)).format(u?"0,0.[00]":"0,0.[0000]"),footer:l.a.createElement("span",null,"+".concat(F()(null===ue||void 0===ue?void 0:ue.profit).format(u?"0,0.[00]":"0,0.[000000]")," ").concat(null===ue||void 0===ue?void 0:ue.tokenType),"\xa0\xa0",l.a.createElement(v.a,{classes:{tooltip:h.tooltip},placement:"right",title:"Profits obtained each time after rebase."},l.a.createElement(b.a,{style:{fontSize:"0.875rem",color:"rgba(255,255,255,0.45)"}}))),unit:null===ue||void 0===ue?void 0:ue.tokenType},{title:"APY (last 7 days)",tip:l.a.createElement(v.a,{classes:{tooltip:h.tooltip},placement:"right",title:"Yield over the past week."},l.a.createElement(b.a,{style:{fontSize:"1.375rem",color:"rgba(255,255,255,0.45)"}})),content:F()(null===ie||void 0===ie?void 0:ie.apy).format("0,0.00"),isAPY:!0,unit:"%"},{title:"APY (last 30 days)",tip:l.a.createElement(v.a,{classes:{tooltip:h.tooltip},placement:"right",title:"Yield over the past month."},l.a.createElement(b.a,{style:{fontSize:"1.375rem",color:"rgba(255,255,255,0.45)"}})),content:F()(null===ce||void 0===ce?void 0:ce.apy).format("0,0.00"),isAPY:!0,unit:"%"}];return l.a.createElement(p.a,null,l.a.createElement(m.a,{xs:12,sm:12,md:12,lg:12},l.a.createElement(p.a,null,R()(de,(function(e,t){return l.a.createElement(m.a,{key:t,xs:12,sm:12,md:4,lg:4},l.a.createElement(f.a,e))}))),l.a.createElement(p.a,{className:h.lineChart},l.a.createElement(m.a,{xs:12,sm:12,md:12,lg:12},l.a.createElement(f.a,{loading:re,title:l.a.createElement("span",null,u?"USDi":"ETHi"," variation curve",l.a.createElement(v.a,{title:"Curve of daily change in the total ".concat(u?"USDi":"ETHi"," held by the user.")},l.a.createElement(b.a,{style:{marginLeft:8,fontSize:"1rem"}}))),loadingOption:{width:"100%",height:"2rem"}},l.a.createElement(g.b,{option:K,style:{minHeight:"20rem"}})))),l.a.createElement(p.a,{className:h.barChart},l.a.createElement(m.a,{xs:12,sm:12,md:12,lg:12},l.a.createElement(f.a,{loading:A,title:"Profits",tip:l.a.createElement(k,{classes:{groupedOutlinedPrimary:h.groupedOutlinedPrimary},value:_,size:"small",color:"primary"},R()(z,(function(e,t){return l.a.createElement(y.a,{className:d()(Object(a.a)({},h.groupButtonCheck,e===_)),onClick:function(){return V(e)},key:t},e)}))),loadingOption:{width:"100%",height:"2rem"}},l.a.createElement(g.a,{option:ee,style:{minHeight:"20rem",width:"100%"}}))))))}},1318:function(e,t,n){"use strict";n.r(t);var a=n(62),r=n(0),o=n.n(r),i=n(44),c=n.n(i),l=n(441),s=n(843),u=n(1305),d=n(810),p=n(811),m=n(1308),f=n(1309),g=n(938),h=n.n(g),b=n(839),v=n(903),y=n.n(v),x=n(974),E=n.n(x),w=n(975),O=n.n(w),j=n(976),S=n.n(j),A=n(872),k=n(115),C=n(291),L=n(10),T=n(21),N=n(18),I=n(17),B=n(172),F=n(871),D=n.n(F),R=n(79),_=n(236),P=n.n(_),V=n(78),G=n.n(V),M=n(916),W=n.n(M),U=n(917),z=n.n(U),H=n(894),Y=n.n(H),X=n(877),q=n.n(X),Z=n(107),K=n.n(Z),J=n(870),$=n.n(J),Q=n(901),ee=n.n(Q),te=n(929),ne=n(878),ae=n(1304),re=n(918),oe=n(919),ie=n(920),ce=n(921),le=n(1302),se=n(852),ue=n(855),de=n(809),pe=n(884),me=n(81),fe=n(89),ge=n(865),he=n(32),be=n(879),ve=n(19),ye=function(){return{container:ve.b,modal:{display:"flex",alignItems:"center",justifyContent:"center"},modalBody:{textAlign:"center"},depositContainer:{border:"1px solid #A68EFD",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem",padding:"2.6875rem 2.25rem"},estimateContainer:{border:"1px solid #A68EFD",marginTop:"0.5rem",borderBottomLeftRadius:"1rem",borderBottomRightRadius:"1rem",padding:"2.0625rem 2.6875rem"},estimateText:{color:"#A0A0A0",margin:0,display:"flex"},estimateBalanceTitle:{fontSize:"1.625rem"},estimateBalanceNum:{float:"right",fontSize:"1rem"},footerContainer:{marginTop:"2.5rem"},tokenInputWrapper:{marginBottom:"16px"},inputLabelWrapper:{display:"flex",justifyContent:"space-between",alignItems:"center"},input:{maxWidth:"12.5rem"},depositComfirmArea:{display:"flex",justifyContent:"space-between"},tokenInfo:{display:"flex",alignItems:"center"},tokenLogo:{width:30,borderRadius:"50%",marginRight:8},tokenName:{fontSize:"16px",color:"#A0A0A0"},flexText:{display:"inline-flex",justifyContent:"center",alignItems:"center"},ModalTokenLogo:{width:25,borderRadius:"50%",margin:"0 8px"},labelToolTipIcon:{fontSize:16},depositModal:{padding:"1rem",maxWidth:"500px",color:"rgba(255, 255, 255, 0.87)",border:"1px solid #A68EFE",backgroundColor:"#000",borderRadius:"1rem","&:active":{outline:"none"}},root:{padding:"1.5rem 0"},item:{paddingTop:"3rem"},subTitle:{color:"#A68EFE"}}};function xe(){xe=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",i=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(A){c=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var r=t&&t.prototype instanceof d?t:d,o=Object.create(r.prototype),i=new O(a||[]);return o._invoke=function(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return S()}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=x(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var l=s(e,t,n);if("normal"===l.type){if(a=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=l;var u={};function d(){}function p(){}function m(){}var f={};c(f,r,(function(){return this}));var g=Object.getPrototypeOf,h=g&&g(g(j([])));h&&h!==t&&n.call(h,r)&&(f=h);var b=m.prototype=d.prototype=Object.create(f);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var a;this._invoke=function(r,o){function i(){return new t((function(a,i){!function a(r,o,i,c){var l=s(e[r],e,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,i,c)}),(function(e){a("throw",e,i,c)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return a("throw",e,i,c)}))}c(l.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}}function x(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var a=s(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,u;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=m,c(b,"constructor",m),c(m,"constructor",p),p.displayName=c(m,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,i,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},v(y.prototype),c(y.prototype,o,(function(){return this})),e.AsyncIterator=y,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new y(l(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(b),c(b,i,"Generator"),c(b,r,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=j,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;w(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:j(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}var Ee=I.a,we=Object(l.a)(ye),Oe="USDT",je="USDC",Se="DAI",Ae=["Step1: Deposit","Get USDi Ticket","Step2: Allocation Action","Get USDi"];function ke(e){var t,n=e.address,i=e.usdtBalance,c=e.usdtDecimals,l=e.usdcBalance,s=e.usdcDecimals,u=e.daiBalance,d=e.daiDecimals,p=e.usdiDecimals,m=e.userProvider,f=e.VAULT_ABI,g=e.VAULT_ADDRESS,h=e.vaultBufferBalance,v=e.vaultBufferDecimals,x=e.isBalanceLoading,E=e.minimumInvestmentAmount,w=we(),O=Object(R.b)(),j=Object(r.useState)(""),S=Object(a.a)(j,2),I=S[0],F=S[1],_=Object(r.useState)(""),V=Object(a.a)(_,2),M=V[0],U=V[1],H=Object(r.useState)(""),X=Object(a.a)(H,2),Z=X[0],J=X[1],Q=Object(r.useState)(!1),ve=Object(a.a)(Q,2),ye=ve[0],ke=ve[1],Ce=Object(r.useState)(!1),Le=Object(a.a)(Ce,2),Te=Le[0],Ne=Le[1],Ie=Object(r.useState)(!1),Be=Object(a.a)(Ie,2),Fe=Be[0],De=Be[1],Re=Object(r.useState)(Ee.from(0)),_e=Object(a.a)(Re,2),Pe=_e[0],Ve=_e[1],Ge=Object(r.useRef)(),Me=Object(te.a)(),We=(t={},Object(N.a)(t,Oe,{value:I,balance:i,decimals:c}),Object(N.a)(t,je,{value:M,balance:l,decimals:s}),Object(N.a)(t,Se,{value:Z,balance:u,decimals:d}),t),Ue=[Object(T.a)({name:Oe,address:he.w,image:"./images/0x55d398326f99059fF775485246999027B3197955.png",setValue:F,isValid:ze(Oe)},We[Oe]),Object(T.a)({name:je,address:he.v,image:"./images/0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d.png",setValue:U,isValid:ze(je)},We[je]),Object(T.a)({name:Se,address:he.d,image:"./images/0x1AF3F329e8BE154074D8769D1FFa4eE058B1DBc3.png",setValue:J,isValid:ze(Se)},We[Se])];function ze(e){var t=We[e],n=t.value,a=t.balance,r=t.decimals;if(""!==n&&"-"!==n&&"0"!==n&&!K()(n.replace(/ /g,""))){if(isNaN(Number(n)))return!1;var o=D()(n),i=o.multipliedBy(Ee.from(10).pow(r).toString());return!i.lte(0)&&(-1===o.multipliedBy(Ee.from(10).pow(r).toString()).toFixed().indexOf(".")&&!a.lt(Ee.from(i.toFixed())))}}var He=function(){var e=ze(Oe),t=ze(je),n=ze(Se),a=[],r=[];if(e){var o=Ee.from(D()(I).multipliedBy(Ee.from(10).pow(c).toString()).toFixed());r.push(o),a.push(he.w)}if(t){var i=Ee.from(D()(M).multipliedBy(Ee.from(10).pow(s).toString()).toFixed());r.push(i),a.push(he.v)}if(n){var l=Ee.from(D()(Z).multipliedBy(Ee.from(10).pow(d).toString()).toFixed());r.push(l),a.push(he.d)}return[a,r]},Ye=function(){var e=Object(L.a)(xe().mark((function e(){var t,r,o,i,c,l,s,u,d,p,h,b,v,y,x,w,j;return xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(clearTimeout(Ge.current),t=ze(Oe),r=ze(je),o=ze(Se),t||r||o){e.next=6;break}return e.abrupt("return",O(Object(fe.b)({open:!0,type:"warning",message:"Please enter the correct value"})));case 6:ke(!0),i=He(),c=Object(a.a)(i,2),l=c[0],s=c[1],console.log("nextTokens=",l,s),u=m.getSigner(),d=xe().mark((function e(t){var a,r,o;return xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new B.b(l[t],he.i,m),r=a.connect(u),e.next=4,r.allowance(n,g);case 4:if(o=e.sent,!s[t].gt(o)){e.next=15;break}if(!o.gt(0)){e.next=12;break}return console.log("add allowance:",s[t].sub(o).toString()),e.next=10,r.increaseAllowance(g,s[t].sub(o)).then((function(e){return e.wait()})).catch((function(e){return 4001===e.code?(ke(!1),Promise.reject(e)):r.approve(g,0).then((function(e){return e.wait()})).then((function(){return r.approve(g,s[t]).then((function(e){return e.wait()}))}))}));case 10:e.next=15;break;case 12:return console.log("current allowance:",o.toString(),"next allowance:",s[t].toString()),e.next=15,r.approve(g,s[t]).then((function(e){return e.wait()})).catch((function(e){if(4001===e.code)return ke(!1),Promise.reject(e)}));case 15:case"end":return e.stop()}}),e)})),e.t0=xe().keys(l);case 12:if((e.t1=e.t0()).done){e.next=17;break}return p=e.t1.value,e.delegateYield(d(p),"t2",15);case 15:e.next=12;break;case 17:if(h=new B.b(g,f,m),b=h.connect(u),v=!1,y={},!$()(he.o)||1===he.o){e.next=28;break}return e.next=24,b.estimateGas.mint(l,s,0);case 24:x=e.sent,w=Math.ceil(x*he.o),j=w<he.m?w:he.m,y.gasLimit=j;case 28:return e.next=30,b.mint(l,s,0,y).then((function(e){return e.wait()})).then((function(){v=!0})).catch((function(e){var t=Object(ne.a)(e),n="";Object(ne.d)(t)?n="Vault has been shut down, please try again later!":Object(ne.b)(t)?n="Vault is in adjustment status, please try again later!":Object(ne.i)(t)?n="Vault is in rebase status, please try again later!":Object(ne.c)(t)?n="Vault is in distributing, please try again later!":Object(ne.f)(t)&&(n="Deposit Amount must be greater than ".concat(Object(ge.b)(E,be.a,2),"USD!")),n&&O(Object(fe.b)({open:!0,type:"error",message:n})),ke(!1)}));case 30:v&&(F(""),U(""),J("")),Ge.current=setTimeout((function(){ke(!1),De(!1),v&&O(Object(fe.b)({open:!0,type:"success",message:"Success!"}))}),2e3);case 32:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Xe=Object(r.useCallback)(q()(Object(L.a)(xe().mark((function e(){var t,n,r,o,i,c,l,s,u,d;return xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=ze(Oe),n=ze(je),r=ze(Se),o=function(e){return!1===e},i=He(),c=Object(a.a)(i,2),l=c[0],s=c[1],!(o(t)||o(n)||o(r)||0===l.length)){e.next=9;break}return Ve(Ee.from(0)),Ne(!1),e.abrupt("return");case 9:return u=new B.b(g,f,m),e.next=12,u.estimateMint(l,s).catch((function(e){var t=Object(ne.a)(e),n="";return Object(ne.d)(t)?n="Vault has been shut down, please try again later!":Object(ne.b)(t)?n="Vault is in adjustment status, please try again later!":Object(ne.i)(t)?n="Vault is in rebase status, please try again later!":Object(ne.c)(t)?n="Vault is in distributing, please try again later!":Object(ne.f)(t)&&(n="Deposit Amount must be greater than ".concat(Object(ge.b)(E,be.a,2),"USD!")),n&&O(Object(fe.b)({open:!0,type:"error",message:n})),Ee.from(0)}));case 12:d=e.sent,Ve(d),Ne(!1);case 15:case"end":return e.stop()}}),e)}))),1500));Object(r.useEffect)((function(){return Xe(),function(){return Xe.cancel()}}),[M,I,Z]);var qe=!K()(m);return o.a.createElement(o.a.Fragment,null,o.a.createElement(C.a,{classes:{root:w.depositContainer}},o.a.createElement("p",{className:w.estimateText},"From"),G()(Ue,(function(e){return o.a.createElement(k.a,{key:e.name,xs:12,sm:12,md:12,lg:12,className:w.tokenInputWrapper},o.a.createElement(C.a,null,o.a.createElement(k.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("div",{className:w.inputLabelWrapper},o.a.createElement("div",{className:w.tokenInfo},o.a.createElement("img",{className:w.tokenLogo,alt:"",src:e.image}),o.a.createElement("span",{className:w.tokenName},e.name)),o.a.createElement(pe.a,{classes:{root:w.input},value:e.value,onChange:function(t){return function(e,t){try{Ne(!0),t.setValue(e.target.value)}catch(n){t.setValue("")}}(t,e)},placeholder:"deposit amount",maxEndAdornment:!0,onMaxClick:function(){return function(e){e.setValue(Object(ge.a)(e.balance,e.decimals,{showAll:!0}))}(e)},error:!P()(e.isValid)&&!e.isValid}))),o.a.createElement(k.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("p",{className:w.estimateText,title:Object(ge.a)(e.balance,e.decimals,{showAll:!0})},"Balance:\xa0\xa0",o.a.createElement(A.a,{loading:x},Object(ge.a)(e.balance,e.decimals))))))}))),o.a.createElement(C.a,{classes:{root:w.estimateContainer}},o.a.createElement(k.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("p",{className:w.estimateText},"To"),o.a.createElement("p",{className:w.estimateBalanceTitle},"USDi Ticket:",o.a.createElement("span",{className:w.estimateBalanceNum},o.a.createElement(A.a,{loading:Te},Object(ge.b)(Pe,Ee.from(10).pow(p))))),o.a.createElement("p",{className:w.estimateText},"Balance:\xa0\xa0",o.a.createElement("span",null,o.a.createElement(A.a,{loading:x},Object(ge.a)(h,v)))))),o.a.createElement(C.a,null,o.a.createElement(k.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("div",{className:w.footerContainer},o.a.createElement(me.a,{disabled:!qe||qe&&(W()(Ue,(function(e){return!1===ze(e.name)}))||z()(Ue,(function(e){return!0!==ze(e.name)}))),color:"colorfull",onClick:function(){De(!0)},style:{width:"100%"}},"Deposit")))),o.a.createElement(ue.a,{className:w.modal,open:Fe,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},o.a.createElement(de.a,{elevation:3,className:w.depositModal},o.a.createElement(re.a,{classes:{root:w.root},alternativeLabel:!0,activeStep:1,connector:o.a.createElement(ce.a,null)},G()(Ae,(function(e,t){return o.a.createElement(ae.a,{key:t},o.a.createElement(oe.a,{StepIconComponent:ie.a},e))}))),o.a.createElement(C.a,null,o.a.createElement(k.a,{xs:12,sm:12,md:12,lg:12,className:w.item},o.a.createElement(le.a,{variant:"subtitle1",gutterBottom:!0,className:w.subTitle},"Deposit Amounts:\xa0",Y()(G()(Ue,(function(e){var t=e.name,n=e.value,a=e.image,r=e.isValid,i=e.address;if(r)return o.a.createElement("span",{key:i,className:w.flexText},o.a.createElement("span",{style:{color:"chocolate",marginRight:5}},n)," ",t,"\xa0",o.a.createElement("img",{className:w.ModalTokenLogo,alt:"",src:a}))})),(function(e,t,n){return K()(t)||(K()(e)||e.push(o.a.createElement("span",{key:n}," + ")),e.push(t)),e}),[]))),o.a.createElement(k.a,{xs:12,sm:12,md:12,lg:12,className:w.item},o.a.createElement(le.a,{variant:"subtitle1",gutterBottom:!0,className:w.subTitle},"Estimate User Get:\xa0",o.a.createElement("span",{style:{color:"darkturquoise"}},"\xa0 + ",Object(ge.b)(Pe,Ee.from(10).pow(p)),"\xa0"),"\xa0 USDi Tickets")),o.a.createElement(k.a,{xs:12,sm:12,md:12,lg:12,className:w.item},o.a.createElement(le.a,{variant:"subtitle1",gutterBottom:!0,className:w.subTitle},"Exchange\xa0",o.a.createElement(b.a,{classes:{tooltip:w.tooltip},placement:"top",title:"Estimated amount of USDi that can be exchanged"},o.a.createElement(y.a,{classes:{root:w.labelToolTipIcon}})),":\xa0From\xa0",o.a.createElement("span",{style:{color:"chocolate"}},Object(ge.b)(Pe,Ee.from(10).pow(p))),"\xa0 USDi Tickets ",o.a.createElement("span",{style:{fontWeight:"bold",color:"dimgrey"}},"To"),"\xa0",o.a.createElement("span",{style:{color:"darkturquoise"}},o.a.createElement(A.a,{loading:Te},Object(ge.b)(Pe.mul(9987).div(1e4),Ee.from(10).pow(p),2))),"\xa0 USDi")),o.a.createElement(k.a,{xs:12,sm:12,md:12,lg:12,className:w.item},o.a.createElement(le.a,{variant:"subtitle1",gutterBottom:!0,className:w.subTitle},"Exchange Time\xa0",o.a.createElement(b.a,{classes:{tooltip:w.tooltip},placement:"top",title:"The latest planned execution date may not be executed due to cost and other factors"},o.a.createElement(y.a,{classes:{root:w.labelToolTipIcon}})),":\xa0",o.a.createElement("span",{style:{color:"chocolate"}},ee()(Me).format("YYYY-MM-DD HH:mm:ss")))),o.a.createElement(k.a,{xs:12,sm:12,md:12,lg:12,className:w.item,style:{textAlign:"center"}},o.a.createElement(me.a,{color:"colorfull",onClick:Ye,style:{width:"50%"}},"Continue"),o.a.createElement(me.a,{style:{marginLeft:20},color:"danger",onClick:function(){return De(!1)}},"Cancel"))))),o.a.createElement(ue.a,{className:w.modal,open:ye,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},o.a.createElement(de.a,{elevation:3,className:w.depositModal},o.a.createElement("div",{className:w.modalBody},o.a.createElement(se.a,{color:"inherit"}),o.a.createElement("p",null,"On Deposit...")))))}var Ce=n(80),Le=n(967),Te=n.n(Le),Ne=n(896),Ie=n.n(Ne),Be=n(968),Fe=n.n(Be),De=n(1329),Re=n(946),_e=n(1303),Pe=n(1017),Ve=n.n(Pe),Ge=n(960),Me=n(292),We=n(950),Ue=n(153),ze=n.n(Ue),He=n(895),Ye=n.n(He),Xe=function(){return{container:ve.b,switchBar:{backgroundColor:"#91d5ff !important"},img:{width:"25px"},switchBase:{color:"#ddd"},switchChecked:{color:"#40a9ff"},modal:{display:"flex",alignItems:"center",justifyContent:"center"},modalBody:{textAlign:"center"},swapBody:{width:"42rem",outline:0},withdrawContainer:{padding:"2.6875rem 2.25rem",border:"1px solid #A68EFD",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem"},outputContainer:{padding:"2.6875rem 2.25rem",border:"1px solid #A68EFD",marginTop:"0.5rem",borderBottomLeftRadius:"1rem",borderBottomRightRadius:"1rem"},estimateText:{height:"1.25rem",color:"#A0A0A0",margin:0,display:"flex",marginTop:"0.5rem",alignItems:"center"},input:{maxWidth:"12.5rem"},footerContainer:{marginTop:"2.5rem"},inputLabelWrapper:{display:"flex",justifyContent:"space-between",alignItems:"center"},selectorlWrapper:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem 0"},depositComfirmArea:{display:"flex",justifyContent:"space-between"},tokenInfo:{display:"flex",alignItems:"center"},receiveTokenItem:{marginBottom:0},settingBtn:{color:"#39d0d8",textAlign:"right",lineHeight:"36px",padding:"10px 0",marginRight:"16px"},settingTitle:{color:"#fff",fontSize:16,letterSpacing:"0.01071em",lineHeight:1.5,textAlign:"center",width:"100%"},settingItem:{height:38,lineHeight:"38px",marginBottom:16,"&:first-child":{marginTop:24}},settingItemLabel:{position:"relative",minWidth:100,marginRight:16,textAlign:"right"},mutedLabel:{position:"relative",display:"inline-block"},maxLossFormCtrl:{width:"160px"},exchanged:{position:"relative",paddingLeft:16},tooltip:{fontSize:"14px"},slippageItem:{display:"flex",alignItems:"center"},slippageInput:{width:96,marginLeft:16},widthdrawLoadingPaper:{padding:"1rem",maxWidth:"500px",color:"rgba(255, 255, 255, 0.87)",border:"1px solid #A68EFE",backgroundColor:"#000",borderRadius:"1rem",width:"100%"},root:{padding:"1.5rem 0"},setting:{position:"absolute",right:"1rem",top:"1rem",cursor:"pointer"},popover:{width:"15rem",background:"#292B2E",border:" 1px solid #666666",borderRadius:"1.25rem",padding:"1rem"},popoverTitle:{color:"#A0A0A0",margin:0,padding:"0.5rem 0"},estimateItem:{textAlign:"center",minHeight:"100px",color:"#A0A0A0",paddingTop:"35px"},tokenName:{fontSize:"1.625rem"}}};function qe(){qe=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",i=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(A){c=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var r=t&&t.prototype instanceof d?t:d,o=Object.create(r.prototype),i=new O(a||[]);return o._invoke=function(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return S()}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=x(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var l=s(e,t,n);if("normal"===l.type){if(a=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=l;var u={};function d(){}function p(){}function m(){}var f={};c(f,r,(function(){return this}));var g=Object.getPrototypeOf,h=g&&g(g(j([])));h&&h!==t&&n.call(h,r)&&(f=h);var b=m.prototype=d.prototype=Object.create(f);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var a;this._invoke=function(r,o){function i(){return new t((function(a,i){!function a(r,o,i,c){var l=s(e[r],e,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,i,c)}),(function(e){a("throw",e,i,c)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return a("throw",e,i,c)}))}c(l.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}}function x(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var a=s(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,u;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=m,c(b,"constructor",m),c(m,"constructor",p),p.displayName=c(m,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,i,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},v(y.prototype),c(y.prototype,o,(function(){return this})),e.AsyncIterator=y,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new y(l(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(b),c(b,i,"Generator"),c(b,r,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=j,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;w(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:j(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}var Ze=I.a,Ke=Object(l.a)(Xe),Je=[{title:"Shares Validation"},{title:"Gas Estimates"},{title:"Withdraw"}];function $e(e){var t=e.address,n=e.toBalance,i=e.usdiDecimals,c=e.userProvider,l=e.VAULT_ADDRESS,s=e.VAULT_ABI,u=e.EXCHANGE_AGGREGATOR_ABI,d=e.exchangeManager,p=e.EXCHANGE_ADAPTER_ABI,m=e.isBalanceLoading,f=e.reloadBalance,g=Ke(),h=Object(R.b)(),v=Object(r.useState)("Mix"),x=Object(a.a)(v,2),E=x[0],w=x[1],O=Object(r.useState)(""),j=Object(a.a)(O,2),S=j[0],T=j[1],N=Object(r.useState)("0.3"),I=Object(a.a)(N,2),F=I[0],_=I[1],V=Object(r.useState)("0.3"),M=Object(a.a)(V,2),W=M[0],U=M[1],z=Object(r.useState)([]),H=Object(a.a)(z,2),Y=H[0],X=H[1],Z=Object(r.useState)(!1),J=Object(a.a)(Z,2),Q=J[0],ee=J[1],te=Object(r.useState)(!1),le=Object(a.a)(te,2),ve=le[0],ye=le[1],xe=Object(r.useState)(0),Ee=Object(a.a)(xe,2),we=Ee[0],Oe=Ee[1],je=Object(r.useState)({}),Se=Object(a.a)(je,2),Ae=Se[0],ke=Se[1],Le=Object(r.useState)([]),Ne=Object(a.a)(Le,2),Be=Ne[0],Ue=Ne[1],He=Object(r.useState)(!1),Xe=Object(a.a)(He,2),$e=Xe[0],Qe=Xe[1],et=Object(r.useState)(be.a),tt=Object(a.a)(et,2),nt=tt[0],at=tt[1],rt=Object(We.a)({userProvider:c,VAULT_ADDRESS:l,VAULT_ABI:s}).value.toNumber()/100,ot="Mix"!==E,it=ot?E:he.w,ct=Object(r.useCallback)(q()(Object(L.a)(qe().mark((function e(){var t,n,r,o,u,d,p,m,f,g,b,v,y;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ee(!0),t=new B.b(l,s,c),n=Ze.from(D()(S).multipliedBy(Ze.from(10).pow(i).toString()).toFixed()),r=n.mul(nt).div(be.a.toFixed()),o=Ze.from(1e4-parseInt(100*(parseFloat(F)+rt))).mul(r).div(Ze.from(1e4)),u=c.getSigner(),d=t.connect(u),e.prev=7,e.next=10,d.callStatic.burn(n,o);case 10:return p=e.sent,m=Object(a.a)(p,2),f=m[0],g=m[1],console.log("tokens, amounts=",f,G()(g,(function(e){return e.toString()}))),e.t0=Ye.a,e.next=18,Promise.all(G()(f,function(){var e=Object(L.a)(qe().mark((function e(t,n){var a,r;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=new B.b(t,he.i,c),!(r=ze()(g,n,Ze.from(0))).gt(0)){e.next=9;break}return e.t0=t,e.next=6,a.decimals();case 6:return e.t1=e.sent,e.t2=r,e.abrupt("return",{tokenAddress:e.t0,decimals:e.t1,amounts:e.t2});case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 18:e.t1=e.sent,b=(0,e.t0)(e.t1),X(b),e.next=31;break;case 23:e.prev=23,e.t2=e.catch(7),console.log("estimate withdraw error",e.t2),v=Object(ne.a)(e.t2),y="",y=Object(ne.d)(v)?"Vault has been shut down, please try again later!":Object(ne.b)(v)?"Vault is in adjustment status, please try again later!":Object(ne.i)(v)?"Vault is in rebase status, please try again later!":Object(ne.h)(v)?"Failed to withdraw, please increase the Max Loss!":Object(ne.g)(v)?"Failed to exchange, please increase the exchange slippage or choose mixed token!":Object(ne.e)(v)?"Failed to exchange, Please try again later or choose mixed token!":v,h(Object(fe.b)({open:!0,type:"error",message:y})),X(void 0);case 31:return e.prev=31,setTimeout((function(){ee(!1)}),500),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[7,23,31,34]])}))),1500)),lt=function(e,t,n,a,r,o){return console.log("handleBurn"),console.log("tokens",r),console.log("amounts",o.map((function(e){return e.toString()}))),Promise.all(G()(r,function(){var e=Object(L.a)(qe().mark((function e(t,n){var a,r,i;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new B.b(t,he.i,c),e.next=3,a.decimals();case 3:if(r=e.sent,i=o[n],!Ze.from(10).pow(r).gt(i)){e.next=7;break}return e.abrupt("return");case 7:return e.abrupt("return",{address:t,amount:Object(ge.b)(o[n],1)});case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())).then((function(e){var t=Ye()(e);K()(t)||(Ue(t),Qe(!0))}))},st=function(){var e=Object(L.a)(qe().mark((function e(){var t,n,a,r,o,u,d,p,m,f,g,b,v,y,x,E,w,O,j,A,k,C,L,N,I,R,_,P,V,G,M,W,U,z,H,Y;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Date.now(),n=0,a=0,r=0,o=0,u=0,d=0,ye(!0),console.log("----------start withdraw----------"),dt()){e.next=5;break}return e.abrupt("return",ke({type:"warning",message:"Please enter the correct value."}));case 5:if(pt()){e.next=7;break}return e.abrupt("return",ke({type:"warning",message:"Enter the correct Max Loss value."}));case 7:if(!ot||mt()){e.next=9;break}return e.abrupt("return",ke({type:"warning",message:"Please enter the correct slippage value."}));case 9:if(n=Date.now(),Oe(1),p=new B.b(l,s,c),m=c.getSigner(),f=Ze.from(D()(S).multipliedBy(Ze.from(10).pow(i).toString()).toFixed()),g=f.mul(nt).div(be.a.toFixed()),b=Ze.from(1e4-parseInt(100*(parseFloat(F)+rt))).mul(g).div(Ze.from(1e4)),e.prev=16,v=p.connect(m),r=Date.now(),Oe(2),!$()(he.o)||1===he.o){e.next=33;break}return e.next=23,v.estimateGas.burn(f,b);case 23:return x=e.sent,Oe(3),o=Date.now(),E=Math.ceil(x*he.o),w=E<he.m?E:he.m,e.next=30,v.burn(f,b,{gasLimit:w});case 30:y=e.sent,e.next=36;break;case 33:return e.next=35,v.burn(f,b);case 35:y=e.sent;case 36:return u=Date.now(),e.next=39,y.wait();case 39:O=e.sent,j=O.events,A=[],k=j.length-1;case 43:if(!(k>=0)){e.next=50;break}if("Burn"!==j[k].event){e.next=47;break}return A=j[k].args,e.abrupt("break",50);case 47:k--,e.next=43;break;case 50:lt.apply(void 0,Object(Ce.a)(A)),d=Date.now(),Oe(4),T(""),h(Object(fe.b)({open:!0,type:"success",message:"Success!"})),e.next=64;break;case 57:e.prev=57,e.t0=e.catch(16),console.log("withdraw original error :",e.t0),C=Object(ne.a)(e.t0),L="",L=Object(ne.d)(C)?"Vault has been shut down, please try again later!":Object(ne.b)(C)?"Vault is in adjustment status, please try again later!":Object(ne.i)(C)?"Vault is in rebase status, please try again later!":Object(ne.h)(C)?"Failed to withdraw, please increase the Max Loss!":Object(ne.g)(C)?"Failed to exchange, please increase the exchange slippage or choose mixed token!":Object(ne.e)(C)?"Failed to exchange, Please try again later or choose mixed token!":C,h(Object(fe.b)({open:!0,type:"error",message:L}));case 64:setTimeout((function(){ye(!1),ke({}),Oe(0)}),2e3),R=(100*(I=n-t)/(N=d-t)).toFixed(2),P=(100*(_=0===a?0:a-n)/N).toFixed(2),G=(100*(V=0===a?r-n:r-a)/N).toFixed(2),W=(100*(M=0===o?0:o-r)/N).toFixed(2),z=(100*(U=0===o?u-r:u-o)/N).toFixed(2),Y=(100*(H=d-u)/N).toFixed(2),console.table({valid:"".concat(I,"(").concat(R,"%)"),preWithdraw:"".concat(_,"(").concat(P,"%)"),getSwapPath:"".concat(V,"(").concat(G,"%)"),estimateGas:"".concat(M,"(").concat(W,"%)"),withdraw:"".concat(U,"(").concat(z,"%)"),transaction:"".concat(H,"(").concat(Y,"%)")});case 79:case"end":return e.stop()}}),e,null,[[16,57]])})));return function(){return e.apply(this,arguments)}}();function ut(e){var t=e;(t.srcElement?t.srcElement:t.target).src="/default.png"}var dt=function(){if(""!==S&&"-"!==S&&!K()(S.replace(/ /g,""))){if(isNaN(Number(S)))return!1;var e=D()(S),t=e.multipliedBy(Ze.from(10).pow(i).toString());return!t.lte(0)&&(-1===e.multipliedBy(Ze.from(10).pow(i).toString()).toFixed().indexOf(".")&&!n.lt(Ze.from(t.toFixed())))}},pt=function(){if(""!==F&&!K()(F.replace(/ /g,"")))return!isNaN(F)&&!(F<0||F>50)},mt=function(){if(""!==W&&!K()(W.replace(/ /g,"")))return!isNaN(W)&&!(W<0||W>45)};Object(r.useEffect)((function(){return pt()&&mt()&&dt()&&ct(),K()(S)&&(X([]),ee(!1)),function(){return X([]),ct.cancel()}}),[S,F,W,ot,it]);var ft=function(){var e=Object(L.a)(qe().mark((function e(){var t,n,r;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:t=e.sent,n=Object(a.a)(t,1),r=n[0],T(Object(ge.a)(r,i,{showAll:!0}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),gt=[{label:"USDT",value:he.w||"USDT",img:"./images/0x55d398326f99059fF775485246999027B3197955.png"},{label:"USDC",value:he.v||"USDC",img:"./images/0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d.png"},{label:"DAI",value:he.d||"DAI",img:"./images/0x1AF3F329e8BE154074D8769D1FFa4eE058B1DBc3.png"},{label:"Mix",value:"Mix",img:["./images/0x55d398326f99059fF775485246999027B3197955.png","./images/0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d.png","./images/0x1AF3F329e8BE154074D8769D1FFa4eE058B1DBc3.png"]}],ht=dt(),bt=pt(),vt=!K()(c);return Object(r.useEffect)((function(){if(!(K()(t)||K()(l)||K()(s))){var e=setInterval(function e(){return new B.b(l,s,c).getPegTokenPrice().then((function(e){setTimeout((function(){at(e)}),500)})),e}(),1e4);return function(){return clearInterval(e)}}}),[t,l,s]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:g.setting},o.a.createElement(Ve.a,{variant:"popover",popupId:"setting-popover"},(function(e){return o.a.createElement("div",null,o.a.createElement("svg",Object.assign({width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(Pe.bindTrigger)(e)),o.a.createElement("path",{d:"M15 20.625C18.1066 20.625 20.625 18.1066 20.625 15C20.625 11.8934 18.1066 9.375 15 9.375C11.8934 9.375 9.375 11.8934 9.375 15C9.375 18.1066 11.8934 20.625 15 20.625Z",stroke:"#A0A0A0",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round"}),o.a.createElement("path",{d:"M21.5273 7.62891C21.8242 7.90234 22.1055 8.18359 22.3711 8.47266L25.5703 8.92969C26.0916 9.83497 26.4934 10.804 26.7656 11.8125L24.8203 14.4023C24.8203 14.4023 24.8555 15.1992 24.8203 15.5977L26.7656 18.1875C26.4946 19.1965 26.0928 20.1656 25.5703 21.0703L22.3711 21.5273C22.3711 21.5273 21.8203 22.1016 21.5273 22.3711L21.0703 25.5703C20.165 26.0916 19.196 26.4934 18.1875 26.7656L15.5977 24.8203C15.2 24.8555 14.8 24.8555 14.4023 24.8203L11.8125 26.7656C10.8035 26.4946 9.83438 26.0928 8.92969 25.5703L8.47266 22.3711C8.18359 22.0977 7.90234 21.8164 7.62891 21.5273L4.42969 21.0703C3.90842 20.165 3.50663 19.196 3.23438 18.1875L5.17969 15.5977C5.17969 15.5977 5.14453 14.8008 5.17969 14.4023L3.23438 11.8125C3.50537 10.8035 3.90722 9.83438 4.42969 8.92969L7.62891 8.47266C7.90234 8.18359 8.18359 7.90234 8.47266 7.62891L8.92969 4.42969C9.83497 3.90842 10.804 3.50663 11.8125 3.23438L14.4023 5.17969C14.8 5.14452 15.2 5.14452 15.5977 5.17969L18.1875 3.23438C19.1965 3.50537 20.1656 3.90722 21.0703 4.42969L21.5273 7.62891Z",stroke:"#A0A0A0",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round"})),o.a.createElement(_e.a,Object.assign({classes:{paper:g.popover}},Object(Pe.bindPopover)(e),{anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}}),o.a.createElement(De.a,{p:2},o.a.createElement(C.a,null,o.a.createElement(k.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("p",{className:g.popoverTitle},"Max Loss"),o.a.createElement(pe.a,{classes:{root:g.input},value:F,placeholder:"Allow loss percent",maxEndAdornment:!0,onMaxClick:function(){return _("50")},onChange:function(e){var t=e.target.value;_(t)},error:!P()(bt)&&!bt}))))))}))),o.a.createElement(C.a,{className:g.withdrawContainer},o.a.createElement(k.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("p",{className:g.estimateText},"From")),o.a.createElement(k.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("div",{className:g.inputLabelWrapper},o.a.createElement("div",{className:g.tokenInfo},o.a.createElement("span",{className:g.tokenName},"USDi")),o.a.createElement(pe.a,{classes:{root:g.input},value:S,placeholder:"withdraw amount",maxEndAdornment:!0,onMaxClick:function(){return ft()},onChange:function(e){try{T(e.target.value)}catch(t){T("")}},error:!P()(ht)&&!ht&&"0"!==S}))),o.a.createElement(k.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("p",{className:g.estimateText,title:Object(ge.a)(n,i,{showAll:!0})},"Balance:\xa0",o.a.createElement(A.a,{loading:m},Object(ge.a)(n,i)))),t&&o.a.createElement(k.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("p",{className:g.estimateText,title:Object(ge.b)(nt,be.a)},o.a.createElement("span",null,"1 USDi \u2248 ",Object(ge.b)(nt,be.a,6)," USD")))),o.a.createElement(C.a,{className:g.outputContainer},o.a.createElement(k.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("p",{className:g.estimateText},"To")),o.a.createElement(k.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("div",{className:g.selectorlWrapper},o.a.createElement(Re.a,{disabled:!0,value:E,onChange:function(e){w(e)},options:gt}),o.a.createElement("p",{className:g.estimateText},"Mix"===E&&o.a.createElement(b.a,{classes:{tooltip:g.tooltip},placement:"top",title:"Mix mode will return a variety of coins, such as USDT/USDC/TUSD/BUSD, etc."},o.a.createElement(y.a,null))))),o.a.createElement(k.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement(C.a,null,Q?o.a.createElement(k.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("div",{className:g.estimateItem},o.a.createElement(se.a,{fontSize:"large"}),o.a.createElement("p",null,"loading..."))):P()(Y)?o.a.createElement(k.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("div",{className:g.estimateItem},o.a.createElement(Te.a,{fontSize:"large"}),o.a.createElement("p",null,"Amount estimate failed, please try again!"))):K()(Y)||K()(S)?o.a.createElement(k.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("div",{className:g.estimateItem},o.a.createElement("p",{style:{fontSize:26,textAlign:"right"}},"0.00"))):G()(Y,(function(e){return o.a.createElement(k.a,{key:e.tokenAddress,xs:12,sm:12,md:6,lg:6},o.a.createElement(me.a,{title:"Add token address to wallet",color:"transparent",target:"_blank",style:{fontSize:"1rem",color:"#A0A0A0"},onClick:function(){return Object(Me.a)(e.tokenAddress)}},o.a.createElement(Ie.a,{fontSize:"small",style:{position:"absolute",top:25,left:45}}),o.a.createElement("img",{className:g.img,style:{borderRadius:"50%"},alt:"",src:"./images/".concat(e.tokenAddress,".png"),onError:ut}),"\xa0\xa0~\xa0",Object(ge.b)(e.amounts,Ze.from(10).pow(e.decimals),6)))}))))),o.a.createElement(C.a,null,o.a.createElement(k.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("div",{className:g.footerContainer},o.a.createElement(me.a,{disabled:!vt||vt&&(P()(ht)||!ht),color:"colorfull",onClick:st,style:{width:"100%"}},"Withdraw",o.a.createElement(b.a,{classes:{tooltip:g.tooltip},placement:"top",title:"".concat(rt,"% withdrawal fee of the principal.")},o.a.createElement(y.a,{style:{marginLeft:"0.5rem"}})))))),o.a.createElement(ue.a,{className:g.modal,open:ve,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},o.a.createElement(de.a,{elevation:3,className:g.widthdrawLoadingPaper},o.a.createElement("div",{className:g.modalBody},K()(Ae)&&o.a.createElement(se.a,{color:"inherit"}),K()(Ae)?o.a.createElement("p",null,"In Withdrawing..."):o.a.createElement("p",null,"Withdraw Error !"),o.a.createElement(re.a,{classes:{root:g.root},alternativeLabel:!0,activeStep:we,connector:o.a.createElement(ce.a,null)},G()(Je,(function(e,t){return o.a.createElement(ae.a,{key:t},o.a.createElement(oe.a,{StepIconComponent:ie.a},e.title))}))),!K()(Ae)&&o.a.createElement("p",{style:{color:"error"===Ae.type?"red":"yellow"}},o.a.createElement(Fe.a,{style:{verticalAlign:"bottom"}}),"\xa0\xa0\xa0",Ae.message),o.a.createElement(me.a,{color:"danger",onClick:function(){ye(!1),ke({}),Oe(0)}},"Cancel")))),o.a.createElement(ue.a,{className:g.modal,open:$e&&!!t,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},o.a.createElement("div",{className:g.swapBody},!K()(t)&&!K()(d)&&o.a.createElement(Ge.a,{address:t,tokens:Be,userProvider:c,exchangeManager:d,EXCHANGE_ADAPTER_ABI:p,EXCHANGE_AGGREGATOR_ABI:u,slippage:W,onSlippageChange:U,handleClose:function(){return Qe(!1)}}))))}var Qe=n(1041),et=n(184),tt=n(299),nt=n(1019),at=n.n(nt),rt=n(154),ot=n.n(rt),it=n(988),ct=n(953),lt=n(914),st=function(e){var t;return{container:Object(T.a)({zIndex:"12",color:"#FFFFFF",marginTop:"1rem",marginBottom:100},ve.b),center:(t={justifyContent:"center",padding:"50px 72px 50px",backgroundColor:"#0c0735cc"},Object(N.a)(t,e.breakpoints.down("md"),{padding:"50px 16px 50px"}),Object(N.a)(t,"margin",0),t),wrapper:{padding:"5rem 3rem",borderRadius:"1.25rem",background:"linear-gradient(111.68deg, rgba(87, 97, 125, 0.2) 7.59%, rgba(255, 255, 255, 0.078) 102.04%)"},wrapperMobile:{padding:"3rem 2rem",borderRadius:"1.25rem",background:"linear-gradient(111.68deg, rgba(87, 97, 125, 0.2) 7.59%, rgba(255, 255, 255, 0.078) 102.04%)"},deposit:{padding:"1rem",border:"1px solid #F4ACF3",borderTopLeftRadius:"1.25rem",borderTopRightRadius:"1.25rem"},symbol:Object(T.a)({color:"#A68EFD",marginLeft:"1rem"},lt.a),balance:{marginTop:"0.5rem",marginBottom:"2rem",padding:"1rem",border:"1px solid #F4ACF3",borderBottomLeftRadius:"1.25rem",borderBottomRightRadius:"1.25rem"},footer:{},item:{color:"#fff",marginBottom:20,"& .MuiListItemIcon-root":{minWidth:"38px"}},centerItem:{width:"630px"},balanceCard:{position:"relative",display:"flex",margin:"0 1rem 1rem 0",alignItems:"center",justifyContent:"flex-start",textAlign:"left",padding:"2.8125rem 2.4375rem",background:"#323338",color:"#fff",borderRadius:"1.25rem"},check:{color:"#A68EFE"},balanceCardValue:{display:"flex",alignItems:"center",justifyContent:"flex-start",height:30,lineHeight:"30px",fontSize:26,fontWeight:"bold",color:"#fff",marginBottom:8},balanceCardLabel:{color:"#b2add1",fontSize:14},tokenInfo:{display:"flex",position:"absolute",right:12,top:9},addTokenIcon:{cursor:"pointer",marginLeft:"1rem",display:"flex"},scanToken:{width:24,height:"auto",cursor:"pointer",borderRadius:"50%",backgroundColor:"#fff"},hidden:{display:"none"},brand:{color:"#FFFFFF",textAlign:"left"},title:{fontSize:"4.2rem",fontWeight:"600",display:"inline-block",position:"relative"},subtitle:{fontSize:"1.313rem",width:"auto",margin:"10px 0 0"},main:{position:"relative",backgroundColor:"transparent"},mainRaised:{margin:"0 auto",marginTop:65},link:{textDecoration:"none"},textCenter:{textAlign:"center"},switchBar:{backgroundColor:"#91d5ff !important"},img:{width:"25px"},radioUnchecked:{width:"0px",height:"0px",padding:"7px",border:"1px solid #fff",borderRadius:"50%"},radioChecked:{width:"16px",height:"16px",border:"1px solid #fff",borderRadius:"50%"},radioRoot:{padding:"12px","&:hover":{backgroundColor:"unset"}},radio:{color:"#fff !important"},investCard:{padding:"20px 24px",borderRadius:6,backgroundColor:"rgba(39, 31, 114, 0.8)",overflow:"visible"},table:{backgroundColor:"#150752",border:"1px solid rgb(222, 217, 213)"},tableCell:{color:"#fff",fontSize:"12px",letterSpacing:"0.01071em"},switchBase:{color:"#ddd"},switchChecked:{color:"#40a9ff"},modal:{display:"flex",alignItems:"center",justifyContent:"center"},modalBody:{textAlign:"center"},stepContainer:{padding:20},stepItem:{color:"#fff"},tabsRoot:{padding:"0 20px"},tabsIndicator:{backgroundColor:"transparent",display:"flex",justifyContent:"center","& > span":{maxWidth:120,width:"100%",backgroundColor:"#fff"}},tabTextColor:{color:"#fff"},tabRoot:{width:"50%",fontSize:"16px",maxWidth:"none"},detailWrapper:{margin:"42px 0 0 0"},slider:{position:"absolute",top:"50px",left:"calc(50% - 33rem)",backgroundColor:"#271f72",color:"azure"},text:{color:"azure"},spliter:{display:"flex",justifyContent:"center",bottom:0,height:2,position:"absolute",transition:"all 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",width:"54%",backgroundColor:"#fff"}}},ut=Object(l.a)(st),dt=I.a;t.default=Object(it.a)((function(e){var t=ut(),n=Object(R.b)(),i=Object(s.a)("(max-width: 960px)"),l=e.address,g=e.userProvider,v=e.VAULT_ADDRESS,x=e.VAULT_ABI,w=e.USDI_ADDRESS,j=e.EXCHANGE_AGGREGATOR_ABI,L=e.EXCHANGE_ADAPTER_ABI,T=e.VAULT_BUFFER_ADDRESS,N=e.VAULT_BUFFER_ABI,I=e.abi_version,F=Object(r.useState)(dt.from(0)),D=Object(a.a)(F,2),_=D[0],P=D[1],V=Object(r.useState)(0),G=Object(a.a)(V,2),M=G[0],W=G[1],U=Object(r.useState)(dt.from(0)),z=Object(a.a)(U,2),H=z[0],Y=z[1],X=Object(r.useState)(0),q=Object(a.a)(X,2),Z=q[0],J=q[1],$=Object(r.useState)(dt.from(0)),Q=Object(a.a)($,2),ne=Q[0],ae=Q[1],re=Object(r.useState)(0),oe=Object(a.a)(re,2),ie=oe[0],ce=oe[1],le=Object(r.useState)(0),se=Object(a.a)(le,2),ue=se[0],de=se[1],pe=Object(r.useState)(dt.from(0)),me=Object(a.a)(pe,2),be=me[0],ve=me[1],ye=Object(r.useState)(dt.from(0)),xe=Object(a.a)(ye,2),Ee=xe[0],we=xe[1],Oe=Object(r.useState)(dt.from(0)),je=Object(a.a)(Oe,2),Se=je[0],Ae=je[1],Ce=Object(r.useState)(dt.from(0)),Le=Object(a.a)(Ce,2),Te=Le[0],Ne=Le[1],Ie=Object(r.useState)(0),Be=Object(a.a)(Ie,2),Fe=Be[0],De=Be[1],Re=Object(r.useState)(!1),_e=Object(a.a)(Re,2),Pe=_e[0],Ve=_e[1],Ge=Object(R.c)((function(e){return e.investReducer.currentTab})),We=function(e){qe(),n(Object(et.b)(e))},Ue=Object(te.a)(),ze=Object(ct.a)(v,x,g),He=ze.minimumInvestmentAmount,Ye=ze.exchangeManager,Xe=function(){if(!(K()(l)||K()(w)||K()(T))){var e=new B.b(he.w,he.i,g),t=new B.b(he.v,he.i,g),a=new B.b(he.d,he.i,g),r=new B.b(w,he.i,g);new B.b(T,N,g).decimals().then(De).catch((function(){return De(1)})),Promise.all([qe(),Je().then((function(e){Ae(e)})).catch(ot.a),e.decimals().then(W),t.decimals().then(J),a.decimals().then(ce),r.decimals().then(de).catch((function(){return de(1)}))]).catch((function(){n(Object(fe.b)({open:!0,type:"warning",message:"Please confirm wallet's network!"}))}))}},qe=function(){if(!(K()(l)||K()(T)||K()(w))){Ve(!0);var e=new B.b(he.w,he.i,g),t=new B.b(he.v,he.i,g),n=new B.b(he.d,he.i,g),r=new B.b(w,he.i,g),o=new B.b(T,N,g);return Promise.all([r.balanceOf(l).catch((function(){return dt.from(0)})),e.balanceOf(l),t.balanceOf(l),n.balanceOf(l),o.balanceOf(l).catch((function(){return dt.from(0)}))]).then((function(e){var t=Object(a.a)(e,5),n=t[0],r=t[1],o=t[2],i=t[3],c=t[4];return ve(n),P(r),Y(o),ae(i),Ne(c),[n,r,o,i,c]})).finally((function(){setTimeout((function(){Ve(!1)}),1e3)}))}};function Ze(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=at()(t);a&&a.getTransaction().then((function(e){return e.wait()})).then(Xe)}function Ke(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=at()(t);a&&a.getTransaction().then((function(e){return e.wait()})).then(Xe)}Object(r.useEffect)((function(){if(!K()(v)){var e=setInterval((function(){return Je().then((function(e){e.eq(Ee)||(we(Se),Ae(e))})).catch(ot.a)}),3e3);return function(){return clearInterval(e)}}}),[Se.toString()]),Object(r.useEffect)((function(){return function(){if(!K()(x)&&!K()(g)&&(Xe(),!K()(v))){var e=new B.b(v,x,g);return K()(l)?void 0:(e.on("Mint",Ze),e.on("Burn",Ke),function(){e.off("Mint",Ze),e.off("Burn",Ke)})}}()}),[l,v,x,g]);var Je=function(){return new B.b(v,x,g).totalAssetsIncludeVaultBuffer()};return o.a.createElement("div",{className:t.container},o.a.createElement(C.a,{spacing:0},o.a.createElement(k.a,{xs:2,sm:2,md:3,style:{padding:"0 2rem"}},o.a.createElement(d.a,null,o.a.createElement(p.a,{key:"My Account",button:!0,className:c()(t.item),onClick:function(){return We(tt.a.account)}},o.a.createElement(m.a,null,o.a.createElement(E.a,{style:{color:0===Ge?"#A68EFE":"#fff"}})),!i&&o.a.createElement(f.a,{primary:"My Account",className:c()(0===Ge?t.check:t.text)})),o.a.createElement(p.a,{key:"Deposit",button:!0,className:c()(t.item,Ge===tt.a.deposit&&t.check),onClick:function(){return We(tt.a.deposit)}},o.a.createElement(m.a,null,o.a.createElement(O.a,{style:{color:Ge===tt.a.deposit?"#A68EFE":"#fff"}})),!i&&o.a.createElement(f.a,{primary:"Deposit",className:c()(Ge===tt.a.deposit?t.check:t.text)})),o.a.createElement(p.a,{key:"Withdraw",button:!0,className:c()(t.item,Ge===tt.a.withdraw&&t.check),onClick:function(){return We(tt.a.withdraw)}},o.a.createElement(m.a,null,o.a.createElement(S.a,{style:{color:Ge===tt.a.withdraw?"#A68EFE":"#fff"}})),!i&&o.a.createElement(f.a,{primary:"Withdraw",className:c()(Ge===tt.a.withdraw?t.check:t.text)})))),Ge===tt.a.account&&o.a.createElement(k.a,{xs:9,sm:9,md:9},o.a.createElement("div",{className:i?t.wrapperMobile:t.wrapper,style:{background:"none",paddingTop:"1rem",paddingLeft:0}},o.a.createElement(u.a,{className:t.balanceCard},o.a.createElement("div",{className:t.balanceCardItem},o.a.createElement("div",{className:t.balanceCardValue},o.a.createElement("span",{title:Object(ge.a)(be,ue,{showAll:!0})},o.a.createElement(A.a,{loading:Pe},Object(ge.a)(be,ue))),o.a.createElement("span",{className:t.symbol},"USDi"),g&&o.a.createElement("span",{title:"Add token address to wallet"},o.a.createElement(h.a,{className:t.addTokenIcon,onClick:function(){Object(Me.a)(w,"USDi",ue)},fontSize:"small"}))),o.a.createElement("div",{className:t.balanceCardValue,style:{fontSize:"1rem"}},o.a.createElement("span",{title:Object(ge.a)(Te,Fe,{showAll:!0})},o.a.createElement(A.a,{loading:Pe},Object(ge.a)(Te,Fe))),o.a.createElement("span",{className:t.symbol},"USDi Ticket\xa0\xa0"),o.a.createElement(b.a,{classes:{tooltip:t.tooltip},placement:"right",title:o.a.createElement("span",null,"USDi Ticket functions as parallel USDi that will be converted into USDi after fund allocations have been successful. Last execution time was\xa0",o.a.createElement("span",{style:{fontWeight:"bold"}},ee()(Ue).format("yyyy-MM-DD HH:mm")))},o.a.createElement(y.a,{style:{fontSize:"1rem"}}))),o.a.createElement("div",{className:t.balanceCardLabel},"AVAILABLE BALANCE"))),!K()(l)&&o.a.createElement(Qe.a,{address:l,chain:"".concat(he.b),VAULT_ADDRESS:v,type:"USDi"}))),Ge===tt.a.deposit&&o.a.createElement(k.a,{xs:9,sm:9,md:6},o.a.createElement("div",{className:i?t.wrapperMobile:t.wrapper},o.a.createElement(ke,{address:l,usdtBalance:_,usdtDecimals:M,usdcBalance:H,usdcDecimals:Z,daiBalance:ne,daiDecimals:ie,usdiDecimals:ue,userProvider:g,VAULT_ABI:x,IERC20_ABI:he.i,VAULT_ADDRESS:v,abi_version:I,toBalance:be,vaultBufferBalance:Te,vaultBufferDecimals:Fe,isBalanceLoading:Pe,reloadBalance:qe,minimumInvestmentAmount:He}))),Ge===tt.a.withdraw&&o.a.createElement(k.a,{xs:9,sm:9,md:6},o.a.createElement("div",{className:i?t.wrapperMobile:t.wrapper},o.a.createElement($e,{address:l,exchangeManager:Ye,toBalance:be,usdiDecimals:ue,userProvider:g,VAULT_ADDRESS:v,VAULT_ABI:x,IERC20_ABI:he.i,EXCHANGE_AGGREGATOR_ABI:j,EXCHANGE_ADAPTER_ABI:L,isBalanceLoading:Pe,reloadBalance:qe})))))}),"mutilCoins")},929:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(1009),r=n.n(a),o=n(902),i=n.n(o),c={tz:"Asia/Shanghai"},l=function(){return i()([r.a.parseExpression("0 0 7 * * 0,2,3,4,5,6",c).next().getTime(),r.a.parseExpression("0 0 7 * * 1",c).next().getTime()])}},946:function(e,t,n){"use strict";var a=n(18),r=n(62),o=n(0),i=n.n(o),c=n(44),l=n.n(c),s=n(78),u=n.n(s),d=n(296),p=n.n(d),m=n(88),f=n.n(m),g=n(441),h=n(848),b=n(304),v=n.n(b),y={selectWrapper:{height:"51px",position:"relative",lineHeight:"51px"},selectTrigger:{display:"flex",justifyContent:"space-between",alignItems:"center",height:"100%",cursor:"pointer",border:"1px solid #666666",borderRadius:"20px",paddingLeft:16,paddingRight:24},disabled:{backgroundColor:"#313036"},triggerLabelWrapper:{display:"flex",alignItems:"center"},triggerLabel:{color:"#A0A0A0",fontWeight:"bold"},caret:{color:"#A68EFE",transition:"all 150ms ease-in"},expandLess:{transform:"rotate(180deg)"},selectPop:{display:"none",position:"absolute",left:"50%",top:"100%",minWidth:"206px",marginTop:"12px",padding:"8px 0",zIndex:100,background:"#292b2e",borderRadius:"12px",transformOrigin:"top",transform:"translate(-50%, 0)",boxShadow:"0 0 0px 1px rgba(161, 161, 161, 0.2)"},selectPopVisible:{display:"block"},selectItem:{display:"flex",alignItems:"center",padding:"0 24px",cursor:"pointer","&:hover":{background:"#323438"}},optImg:{width:"auto",height:"30px",marginRight:"8px",borderRadius:"50%"},optMultiImgWrapper:{height:"30px",whiteSpace:"nowrap"},optMultiImg:{width:"auto",height:"30px",borderRadius:"50%",marginLeft:"-12px","&:first-child":{marginLeft:0},"&:last-child":{marginRight:"8px"}},optLabel:{color:"#A0A0A0"}},x=Object(g.a)(y);t.a=function(e){var t=e.value,n=e.onChange,c=void 0===n?function(){}:n,s=e.options,d=void 0===s?[]:s,m=e.disabled,g=e.className,b=Object(o.useState)(!1),y=Object(r.a)(b,2),E=y[0],w=y[1],O=x(),j=p()(d,(function(e){return e.value===t}))||{};return i.a.createElement(h.a,{onClickAway:function(){w(!1)}},i.a.createElement("div",{className:l()(O.selectWrapper,g)},i.a.createElement("div",{className:l()(O.selectTrigger,Object(a.a)({},O.disabled,m)),onClick:function(){m||w(!E)}},i.a.createElement("div",{className:O.triggerLabelWrapper},j.img&&(f()(j.img)?i.a.createElement("div",{className:O.optMultiImgWrapper},u()(j.img,(function(e){return i.a.createElement("img",{key:e,className:O.optMultiImg,src:e,alt:"logo"})}))):i.a.createElement("img",{className:O.optImg,src:j.img,alt:"logo"})),i.a.createElement("span",{className:O.triggerLabel},j.label)),!m&&i.a.createElement(v.a,{className:l()(O.caret,Object(a.a)({},O.expandLess,E))})),i.a.createElement("ul",{className:l()(O.selectPop,Object(a.a)({},O.selectPopVisible,E))},u()(d,(function(e){return i.a.createElement("li",{key:e.value,className:l()(O.selectItem,Object(a.a)({},O.selectActiveItem,t===e.value)),onClick:function(){return function(e){w(!1),c(e)}(e.value)}},e.img&&(f()(e.img)?i.a.createElement("div",{className:O.optMultiImgWrapper},u()(e.img,(function(e){return i.a.createElement("img",{key:e,className:O.optMultiImg,src:e,alt:"logo"})}))):i.a.createElement("img",{className:O.optImg,src:e.img,alt:"logo"})),i.a.createElement("span",{className:O.optLabel},e.label))})))))}},950:function(e,t,n){"use strict";var a=n(62),r=n(0),o=n(172),i=n(17),c=n(107),l=n.n(c),s=o.b,u=i.a;t.a=function(e){var t=e.userProvider,n=e.VAULT_ADDRESS,o=e.VAULT_ABI,i=Object(r.useState)(u.from(0)),c=Object(a.a)(i,2),d=c[0],p=c[1],m=Object(r.useState)(),f=Object(a.a)(m,2),g=f[0],h=f[1],b=Object(r.useState)(!1),v=Object(a.a)(b,2),y=v[0],x=v[1],E=function(){x(!0),new s(n,o,t).redeemFeeBps().then(p).catch(h).finally((function(){return x(!1)}))};return Object(r.useEffect)((function(){if(l()(t)||l()(n))return x(!1),void h();E()}),[t,n]),{value:d,loading:y,error:g,reload:E}}},953:function(e,t,n){"use strict";var a=n(62),r=n(0),o=n(172),i=n(17),c=n(107),l=n.n(c),s=n(295),u=o.b;t.a=function(e,t,n){var c=Object(r.useState)(),d=Object(a.a)(c,2),p=d[0],m=d[1],f=Object(r.useState)(!1),g=Object(a.a)(f,2),h=g[0],b=g[1],v=Object(r.useState)(""),y=Object(a.a)(v,2),x=y[0],E=y[1],w=Object(r.useState)(i.a.from(0)),O=Object(a.a)(w,2),j=O[0],S=O[1],A=Object(r.useState)(i.a.from(0)),k=Object(a.a)(A,2),C=k[0],L=k[1],T=Object(r.useState)(i.a.from(0)),N=Object(a.a)(T,2),I=N[0],B=N[1],F=Object(r.useState)(i.a.from(0)),D=Object(a.a)(F,2),R=D[0],_=D[1],P=Object(r.useState)(i.a.from(0)),V=Object(a.a)(P,2),G=V[0],M=V[1],W=Object(s.a)(n),U=function(){return l()(e)?new Error("VAULT_ADDRESS is need!"):l()(t)?new Error("VAULT_ABI is need!"):l()(n)?new Error("userProvider is need!"):void 0},z=function(){var r=U();if(r)return m(r);b(!0);var c=new o.b(e,t,n),l=[c.totalAssets().catch((function(){return i.a.from(0)})),c.totalDebt().catch((function(){return i.a.from(0)})),c.rebaseThreshold().catch((function(){return i.a.from(0)})),c.minimumInvestmentAmount(),c.exchangeManager(),H()];return Promise.all(l).then((function(e){var t=Object(a.a)(e,5),n=t[0],r=t[1],o=t[2],i=t[3],c=t[4];return L(n),S(r),B(o),M(i),E(c),{totalAsset:n,decimals:r,rebaseThreshold:o}})).catch(m).finally((function(){return b(!1)}))},H=function(){var a=new u(e,t,n);b(!0),a.underlyingUnitsPerShare().catch(m).then(_).finally((function(){return b(!1)}))};return Object(r.useEffect)((function(){if(U())return b(!1),void m();z()}),[W,e,t,n]),{loading:h,error:p,totalAsset:C,decimals:j,exchangeManager:x,minimumInvestmentAmount:G,fetchUnderlyingUnitsPerShare:H,rebaseThreshold:I,queryBaseInfo:z,updateRebaseThreshold:function(a){var r=U();if(r)return m(r);b(!0);var i=new o.b(e,t,n),c=n.getSigner();i.connect(c).setRebaseThreshold(a).then((function(e){return e.wait()})).finally((function(){return b(!1)}))},updateMinimumInvestmentAmount:function(a){var r=U();if(r)return m(r);b(!0);var i=new o.b(e,t,n),c=n.getSigner();i.connect(c).setMinimumInvestmentAmount(a).then((function(e){return e.wait()})).finally((function(){return b(!1)}))},underlyingUnitsPerShare:R}}},960:function(e,t,n){"use strict";var a=n(301),r=n(10),o=n(62),i=n(0),c=n.n(i),l=n(441),s=n(44),u=n.n(s),d=n(291),p=n(115),m=n(946),f=n(81),g=n(884),h=n(872),b=n(1016),v=n.n(b),y=n(80),x=n(18),E=n(21),w=n(896),O=n.n(w),j=n(937),S=n.n(j),A=n(172),k=n(17),C=n(153),L=n.n(C),T=n(78),N=n.n(T),I=n(916),B=n.n(I),F=n(922),D=n.n(F),R=n(932),_=n.n(R),P=n(933),V=n.n(P),G=n(893),M=n.n(G),W=n(917),U=n.n(W),z=n(934),H=n.n(z),Y=n(894),X=n.n(Y),q=n(107),Z=n.n(q),K=n(877),J=n.n(K),$=n(895),Q=n.n($),ee=(n(448),n(935),n(870)),te=n.n(ee),ne=(n(902),n(292)),ae=n(865),re=n(936),oe=n(871),ie=n.n(oe),ce=n(89),le=n(966),se=n.n(le),ue=["paraswap","oneInchV4"],de=function(e){var t=[],n=L()(e,"0.0.0");if(Z()(n))return t;var a=n.name;return t.push(a),t},pe=function(e){return X()(e,(function(e,t){var n=L()(t,"swaps[0].swapExchanges[0].exchange","");return e.push(n),e}),[])},me=n(878),fe=n(32),ge=n(294),he=n(879),be=n(19),ve=function(){return{container:be.b,main:{padding:"2rem 3rem",color:"#A0A0A0",background:"linear-gradient(111.68deg, #2C2F36 7.59%, #333437 102.04%)",borderRadius:"2.5rem"},title:{paddingBottom:"1.5rem",fontSize:"1.5rem",lineHeight:"1.5rem",textAlign:"center"},tokenLogo:{width:30,borderRadius:"50%",marginRight:8},approveContainer:{maxHeight:"20rem",padding:"2rem 1.25rem",border:"1px solid #A68EFD",borderRadius:"0.5rem 0.5rem 0px 0px",backgroundColor:"#1F2023",overflowY:"auto"},approveItemWrapper:{paddingBottom:"0.5rem","&:last-child":{padding:0}},success:{border:"1px solid forestgreen"},swappingContainer:{margin:0,color:"#A68EFD",textAlign:"center",fontSize:"0.875rem",lineHeight:"0.875rem"},swapSuccessContainer:{margin:0,color:"#56CC8C",textAlign:"center",fontSize:"0.875rem",lineHeight:"0.875rem"},swapErrorContainer:{height:"2rem",border:"1px solid #F36767",borderRadius:"0.625rem",margin:0,color:"#F36767",textAlign:"center",fontSize:"0.875rem",lineHeight:"2rem",cursor:"pointer"},approveItem:{textAlign:"left",display:"flex"},approveButton:{margin:"12px 8px 8px"},balanceText:{textAlign:"left",fontSize:"0.875rem",lineHeight:"0.875rem"},errorText:{color:"#ff7875"},errorContainer:{border:"1px solid #ff7875",margin:"2px 0"},successContainer:{border:"1px solid forestgreen",margin:"2px 0"},isSwappingContainer:{border:"1px solid #A68EFE",margin:"2px 0"},reciveContainer:{background:"linear-gradient(223.3deg, #A68EFD 20.71%, #F4ACF3 103.56%)"},slippage:{padding:"0 1.25rem",border:"1px solid #A68EFD",borderRadius:"0px 0px 0.5rem 0.5rem",marginTop:"0.625rem",backgroundColor:"#1F2023"},slippageTitlte:{display:"flex",alignItems:"center"},estimateContainer:{padding:"2rem 1.25rem",border:"1px solid #A68EFD",marginTop:"0.625rem",backgroundColor:"#1F2023"},estimateTitle:{paddingBottom:"0.75rem"},estimateBalance:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-end"},tokenList:{padding:"0.5rem",overflow:"auto",border:"1px solid rgb(166, 142, 254)",borderRadius:"0.5rem"},arrow:{display:"flex",justifyContent:"center",alignItems:"center"},buttonGroup:{marginTop:"0.625rem"},okWrapper:{paddingLeft:"1rem"},okButton:{width:"100%"},cancelButton:{width:"100%"},addToken:{cursor:"pointer"},swapError:{display:"flex",alignItems:"center",marginBottom:"1rem",color:"#ff7875",textAlign:"left"},textOverflow:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},loading:{animation:"loading 1s linear infinite"},reloadIcon:{cursor:"pointer",verticalAlign:"text-bottom"}}};function ye(){ye=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",i=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(A){c=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var r=t&&t.prototype instanceof d?t:d,o=Object.create(r.prototype),i=new O(a||[]);return o._invoke=function(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return S()}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=x(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var l=s(e,t,n);if("normal"===l.type){if(a=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=l;var u={};function d(){}function p(){}function m(){}var f={};c(f,r,(function(){return this}));var g=Object.getPrototypeOf,h=g&&g(g(j([])));h&&h!==t&&n.call(h,r)&&(f=h);var b=m.prototype=d.prototype=Object.create(f);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var a;this._invoke=function(r,o){function i(){return new t((function(a,i){!function a(r,o,i,c){var l=s(e[r],e,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,i,c)}),(function(e){a("throw",e,i,c)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return a("throw",e,i,c)}))}c(l.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}}function x(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var a=s(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,u;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=m,c(b,"constructor",m),c(m,"constructor",p),p.displayName=c(m,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,i,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},v(y.prototype),c(y.prototype,o,(function(){return this})),e.AsyncIterator=y,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new y(l(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(b),c(b,i,"Generator"),c(b,r,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=j,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;w(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:j(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}var xe=0,Ee=A.b,we=k.a,Oe=Object(l.a)(ve),je=we.from("0"),Se=Object(i.forwardRef)((function(e,t){var n,a=Oe(),l=e.token,s=void 0===l?{}:l,d=e.userAddress,p=e.userProvider,m=e.slippage,f=e.receiveToken,b=e.exchangePlatformAdapters,v=e.exchangeManager,w=e.receiveTokenDecimals,j=e.EXCHANGE_AGGREGATOR_ABI,A=e.style,k=e.disabled,C=e.onChange,L=e.onStaticCallFinish,T=s.address,N=(s.amount,Object(i.useState)(!1)),I=Object(o.a)(N,2),B=I[0],F=I[1],D=Object(i.useState)(""),R=Object(o.a)(D,2),P=R[0],V=R[1],G=Object(i.useState)(je),W=Object(o.a)(G,2),U=W[0],z=W[1],Y=Object(i.useState)(0),X=Object(o.a)(Y,2),q=X[0],K=X[1],$=Object(i.useState)(je),Q=Object(o.a)($,2),ee=Q[0],oe=Q[1],ce=Object(i.useState)({}),le=Object(o.a)(ce,2),me=le[0],he=le[1],be=Object(i.useState)(void 0),ve=Object(o.a)(be,2),Se=ve[0],Ae=ve[1],ke=Object(i.useState)(!1),Ce=Object(o.a)(ke,2),Le=Ce[0],Te=Ce[1],Ne=Object(i.useState)(!1),Ie=Object(o.a)(Ne,2),Be=Ie[0],Fe=Ie[1],De=Object(i.useState)(!1),Re=Object(o.a)(De,2),_e=Re[0],Pe=Re[1],Ve=Object(i.useState)(0),Ge=Object(o.a)(Ve,2),Me=Ge[0],We=Ge[1],Ue=Object(i.useState)(!1),ze=Object(o.a)(Ue,2),He=ze[0],Ye=ze[1],Xe=s.address===f,qe=!Xe&&(Le||Be),Ze=Me>2;console.groupCollapsed("init state:".concat(T,":").concat(xe++)),console.log("isReload=",B),console.log("value=",P),console.log("balance=",U.toString()),console.log("decimals=",q.toString()),console.log("allowances=",ee.toString()),console.log("exclude=",me),console.log("swapInfo=",Se),console.log("isSwapInfoFetching=",Le),console.log("isStaticCalling=",Be),console.log("done=",_e),console.log("retryTimes=",Me),console.log("isApproving=",He),console.log("isReciveToken=",Xe),console.log("userAddress=",d),console.log("slippage=",m),console.log("token=",s),console.log("exchangePlatformAdapters=",b),console.log("exchangeManager=",v),console.log("receiveTokenDecimals=",w.toString()),console.groupEnd("init state:".concat(T,":").concat(xe++));var Ke=Object(i.useCallback)((function(){F(!1),he({}),Ae(void 0),Te(!1),Fe(!1),Pe(!1),We(0),Ye(!1),setTimeout((function(){C()}))}),[]),Je=Object(i.useCallback)((function(){if(s.address===ge.a||Xe)return!0;try{return new ie.a(P).multipliedBy(q.toString()).lte(ee)}catch(e){return!1}}),[s,P,ee,q,Xe]),$e=Object(i.useCallback)(J()((function(){console.groupCollapsed("staticCall call:".concat(T,":").concat(++xe)),console.log("swapInfo=",Se);var e=new Ee(v,j,p),t=p.getSigner(),n=e.connect(t),a=Se.bestSwapInfo,r=a.platform,i=a.method,c=a.encodeExchangeArgs,l=Se.info;Fe(!0),Te(!1),C(),n.callStatic.swap(r,i,c,l).then((function(){console.log("staticCall success"),console.groupEnd("staticCall call:".concat(T,":").concat(xe)),Pe(!0),L(!0)})).catch((function(e){console.log("staticCall error",e),console.groupEnd("staticCall call:".concat(T,":").concat(xe));var t=Se.bestSwapInfo,n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Z()(e)||te()(e)||se()(e))return[];var t=e.name,n=e.bestRoute;if(ue.includes(t)){var a;switch(t){case"oneInchV4":a=de;break;case"paraswap":a=pe}return a(n)}throw new Error("not support")}(t),a=Object(o.a)(n,1)[0],r=t.name,i=me[r]||[a],c=i.includes(a)?i:i.concat([a]),l=Object(E.a)(Object(E.a)({},me),{},Object(x.a)({},r,c));he(l),Ae(void 0),We(Me+1),Pe(!1),Te(Me+1<=2),L(!1)})).finally((function(){Fe(!1),C()}))}),500),[p,Se,C,me,Me,L]),Qe=function(){var e=Object(r.a)(ye().mark((function e(){var t,n,a,r,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Z()(s)&&!M()(P)&&"0"!==P){e.next=2;break}return e.abrupt("return");case 2:console.groupCollapsed("approve call:".concat(T,":").concat(++xe)),t=p.getSigner(),n=new Ee(T,fe.i,p),a=n.connect(t),e.prev=6,r=we.from(new ie.a(P).multipliedBy(q.toString()).toFixed()),e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(6),e.abrupt("return");case 13:return e.next=15,a.allowance(d,v);case 15:if(o=e.sent,!r.gt(o)){e.next=24;break}if(!o.gt(0)){e.next=23;break}if(T!==ge.d){e.next=20;break}return e.abrupt("return",a.approve(v,0).then((function(e){return e.wait()})).then((function(){return rt(),a.approve(v,r).then((function(e){return e.wait()}))})));case 20:return e.abrupt("return",a.increaseAllowance(v,r.sub(o)).then((function(e){return e.wait()})).catch((function(e){return 4001===e.code?Promise.reject(e):a.approve(v,0).then((function(e){return e.wait()})).then((function(){return rt(),a.approve(v,r).then((function(e){return e.wait()}))}))})));case 23:return e.abrupt("return",a.approve(v,r).then((function(e){return e.wait()})).catch((function(e){if(4001===e.code)return Promise.reject(e)})));case 24:console.groupEnd("approve call:".concat(T,":").concat(xe));case 25:case"end":return e.stop()}}),e,null,[[6,10]])})));return function(){return e.apply(this,arguments)}}(),et=!qe&&!Xe&&Ze,tt=function(){if(!P)return!1;if(!q)return!1;var e=new ie.a(P).multipliedBy(q.toString());return!Xe&&!Z()(P)&&(e.gt(U)||-1!==e.toFixed().indexOf("."))},nt=function(){return!Xe&&(Z()(P)||0===Number(P))},at=function(e){var t=Number(e);isNaN(t)||t<0||(V(e),Ae(void 0),Fe(!1),We(0),he({}),Pe(!1),setTimeout((function(){C()})))},rt=Object(i.useCallback)(Object(r.a)(ye().mark((function e(){var t,n,a,r,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.address,console.groupCollapsed("reload call:".concat(t,":").concat(++xe)),F(!0),n=new Ee(t,fe.i,p),e.next=6,n.allowance(d,v).catch((function(){return je}));case 6:return a=e.sent.toString(),e.next=9,n.balanceOf(d).catch((function(){return je}));case 9:return r=e.sent.toString(),e.t0=we.from(10),e.next=13,n.decimals().catch((function(){return je}));case 13:e.t1=e.sent,o=e.t0.pow.call(e.t0,e.t1),z(r),K(o),oe(a),F(!1),console.groupEnd("reload call:".concat(t,":").concat(xe));case 20:case"end":return e.stop()}}),e)}))),[s,d,v]),ot=Object(i.useCallback)(Object(r.a)(ye().mark((function e(){var t,n,a,r,o,i,c,l,u,g,h,v;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(M()(q)||nt()||"0"===P||Xe)){e.next=2;break}return e.abrupt("return");case 2:if(console.groupCollapsed("queryBestSwapInfo call:".concat(T,":").concat(++xe)),console.log("exclude=",me),console.log("value=",P),console.log("swapInfo=",Se),-1===(t=new ie.a(P).multipliedBy(q.toString()).toFixed()).indexOf(".")){e.next=9;break}return e.abrupt("return");case 9:if(n=we.from(t),a={},r={},s.address!==ge.a){e.next=16;break}a={decimals:18,address:s.address},e.next=24;break;case 16:return o=new Ee(s.address,fe.i,p),e.t0=parseInt,e.next=20,o.decimals();case 20:e.t1=e.sent.toString(),e.t2=(0,e.t0)(e.t1),e.t3=s.address,a={decimals:e.t2,address:e.t3};case 24:if(f!==ge.a){e.next=28;break}r={decimals:18,address:f},e.next=36;break;case 28:return i=new Ee(f,fe.i,p),e.t4=parseInt,e.next=32,i.decimals();case 32:e.t5=e.sent.toString(),e.t6=(0,e.t4)(e.t5),e.t7=f,r={decimals:e.t6,address:e.t7};case 36:return console.groupCollapsed("fetch best swap path: ".concat(a.address,"-").concat(r.address,":").concat(n,":").concat(++xe)),c=H()({},fe.h,(Z()(b.testAdapter),{})),Z()(me)||(console.log("exclude=",me),l=me.oneInchV4,u=void 0===l?[]:l,g=me.paraswap,h=void 0===g?[]:g,c=H()({},c,{oneInchV4:Object(E.a)(Object(E.a)({},c.oneInchV4),{},{excludeProtocols:_()(u.concat(c.oneInchV4.excludeProtocols))}),paraswap:Object(E.a)(Object(E.a)({},c.paraswap),{},{excludeDEXS:_()([].concat(Object(y.a)(h),[c.paraswap.excludeDEXS.split(",")])).join(",")})})),e.next=41,Object(re.getBestSwapInfo)(a,r,n,parseInt(100*parseFloat(m))||0,fe.q,b,c).catch((function(e){throw new Error(e)}));case 41:if(v=e.sent,console.groupEnd("fetch best swap path: ".concat(a.address,"-").concat(r.address,":").concat(n,":").concat(xe)),!Z()(v)){e.next=45;break}throw new Error("fetch error");case 45:return console.groupEnd("queryBestSwapInfo call:".concat(xe)),e.abrupt("return",{bestSwapInfo:v,info:{amount:n,srcToken:s.address,dstToken:f,receiver:d}});case 47:case"end":return e.stop()}}),e)}))),[s,P,q,b,me,f,Xe,m]),it=Object(i.useCallback)(J()(Object(r.a)(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!nt()){e.next=3;break}return C(),e.abrupt("return");case 3:return console.groupCollapsed("estimateWithValue call:".concat(T,":").concat(++xe)),Te(!0),C(),e.next=8,ot().then((function(e){console.log("estimateWithValue call success"),console.groupEnd("estimateWithValue call:".concat(T,":").concat(xe)),Ae(e),Je()||Te(!1)})).catch((function(){console.log("estimateWithValue call error"),console.groupEnd("estimateWithValue call:".concat(T,":").concat(xe)),Ze?Te(!1):(We(Me+1),Te(Me+1<=2))})).finally((function(){C()}));case 8:case"end":return e.stop()}}),e)}))),500),[v,s,q,Me,ot,C]);Object(i.useEffect)(Ke,[f,m]),Object(i.useEffect)((function(){V(Object(ae.b)(s.amount,q))}),[s,q.toString()]),Object(i.useEffect)((function(){rt()}),[rt]);var ct=!Le&&!Z()(Se)&&!Ze,lt=!qe&&!Xe&&(Je()&&_e||!Je()&&!Z()(Se))&&!Ze;return Object(i.useEffect)((function(){console.groupCollapsed("estimateWithValue useEffect call:".concat(T,":").concat(++xe));var e=!isNaN(m)&&!(m<.01||m>45);return console.log("isReload=",B),console.log("swapInfo=",Se),console.log("isValidSlippage()=",e),console.log("isGetSwapInfoSuccess=",ct),Xe||B||!e||Z()(b)||ct||Ze||tt()||nt()?(console.log("estimateWithValue useEffect return"),void console.groupEnd("estimateWithValue useEffect call:".concat(T,":").concat(xe))):(console.groupEnd("estimateWithValue useEffect call:".concat(T,":").concat(xe)),it(),function(){return it.cancel()})}),[B,P,Se,it,Me,Le]),Object(i.useEffect)((function(){console.groupCollapsed("staticCall useEffect call:".concat(T,":").concat(++xe));var e=Je();if(console.log("done=",_e),console.log("retryTimes=",Me),console.log("isApproveEnoughValue=",e),console.log("swapInfo=",Se),console.log("isStaticCalling=",Be),console.log("isOverMaxRetry=",Ze),console.log("isReciveToken=",Xe),Xe||_e||Z()(Se)||!e||Be||Ze||tt()||nt())return console.log("staticCall useEffect return"),void console.groupEnd("staticCall useEffect call:".concat(T,":").concat(xe));console.groupEnd("staticCall useEffect call:".concat(T,":").concat(xe)),$e()}),[_e,P,Me,Se,$e,Be,Je]),Object(i.useImperativeHandle)(t,(function(){return{approve:function(){return Qe().then(rt)},value:P,isApproving:He,isFetching:qe,swapInfo:Se,done:_e,isApproveEnough:Je,retryTimes:Me,isErrorValue:tt,isEmptyValue:nt}})),c.a.createElement("div",{key:T,className:u()(a.approveItemWrapper),style:A},c.a.createElement("div",{className:a.approveItem},c.a.createElement(g.a,{classes:{root:a.input},placeholder:"approve amount",maxEndAdornment:!0,InputProps:{startAdornment:c.a.createElement("div",{className:a.addToken,onClick:function(){return Object(ne.a)(T)}},T!==ge.a&&c.a.createElement(O.a,{fontSize:"small",style:{position:"absolute",top:28,left:35}}),c.a.createElement("img",{className:a.tokenLogo,src:"./images/".concat(T,".png")}))},disabled:k||Xe||qe,error:tt(),value:P,onChange:function(e){return at(e.target.value)},onMaxClick:function(){return at(Object(ae.b)(U,q))}})),!Xe&&c.a.createElement("p",{className:a.balanceText},"Balance:"," ",c.a.createElement(h.a,{loading:B,className:a.reloadIcon},c.a.createElement("span",{title:Object(ae.b)(U,q)},Object(ae.b)(U,q,6))),c.a.createElement("span",{style:{float:"right"}},"Allowance:"," ",c.a.createElement(h.a,{loading:B,className:a.reloadIcon},c.a.createElement("span",{title:Object(ae.b)(ee,q)},Object(ae.b)(ee,q,6))))),!Xe&&lt&&c.a.createElement("p",{className:a.swapSuccessContainer},"Swap into ".concat(Object(ae.b)(null===Se||void 0===Se||null===(n=Se.bestSwapInfo)||void 0===n?void 0:n.toTokenAmount,w))),!Xe&&et&&c.a.createElement("div",{className:a.swapErrorContainer,onClick:function(){console.groupCollapsed("reloadSwap call:".concat(T,":").concat(++xe)),Ae(void 0),Te(!0),We(0),L(void 0),console.groupEnd("reloadSwap call:".concat(T,":").concat(xe))}},c.a.createElement("span",null,"Swap path fetch error"),"\xa0\xa0",c.a.createElement(S.a,{className:a.reloadIcon,fontSize:"small"})),!Xe&&qe&&c.a.createElement("p",{className:a.swappingContainer},c.a.createElement(h.a,{className:a.reloadIcon,loading:!0})," \xa0\xa0",c.a.createElement("span",null,"Swap path fetching")))})),Ae=n(79),ke=n(296),Ce=n.n(ke),Le=function(){return{container:be.b,main:{padding:"2rem 3rem",color:"#A0A0A0",background:"linear-gradient(111.68deg, #2C2F36 7.59%, #333437 102.04%)",borderRadius:"2.5rem"},title:{paddingBottom:"1.5rem",fontSize:"1.5rem",lineHeight:"1.5rem",textAlign:"center"},tokenLogo:{width:30,borderRadius:"50%",marginRight:8},approveContainer:{maxHeight:"20rem",padding:"2rem 1.25rem",border:"1px solid #A68EFD",borderRadius:"0.5rem 0.5rem 0px 0px",backgroundColor:"#1F2023",overflowY:"auto"},approveItemWrapper:{paddingBottom:"0.5rem","&:last-child":{padding:0}},success:{border:"1px solid forestgreen"},swappingContainer:{margin:0,color:"#A68EFD",textAlign:"center",fontSize:"0.875rem",lineHeight:"0.875rem"},swapSuccessContainer:{margin:0,color:"#56CC8C",textAlign:"center",fontSize:"0.875rem",lineHeight:"0.875rem"},swapErrorContainer:{height:"2rem",border:"1px solid #F36767",borderRadius:"0.625rem",margin:0,color:"#F36767",textAlign:"center",fontSize:"0.875rem",lineHeight:"2rem",cursor:"pointer"},approveItem:{textAlign:"left",display:"flex"},approveButton:{margin:"12px 8px 8px"},balanceText:{textAlign:"left",fontSize:"0.875rem",lineHeight:"0.875rem"},errorText:{color:"#ff7875"},errorContainer:{border:"1px solid #ff7875",margin:"2px 0"},successContainer:{border:"1px solid forestgreen",margin:"2px 0"},isSwappingContainer:{border:"1px solid #A68EFE",margin:"2px 0"},reciveContainer:{background:"linear-gradient(223.3deg, #A68EFD 20.71%, #F4ACF3 103.56%)"},slippage:{padding:"0 1.25rem",border:"1px solid #A68EFD",borderRadius:"0px 0px 0.5rem 0.5rem",marginTop:"0.625rem",backgroundColor:"#1F2023"},slippageTitlte:{display:"flex",alignItems:"center"},estimateContainer:{padding:"2rem 1.25rem",border:"1px solid #A68EFD",marginTop:"0.625rem",backgroundColor:"#1F2023"},estimateTitle:{paddingBottom:"0.75rem"},estimateBalance:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-end"},tokenList:{padding:"0.5rem",overflow:"auto",border:"1px solid rgb(166, 142, 254)",borderRadius:"0.5rem"},arrow:{display:"flex",justifyContent:"center",alignItems:"center"},buttonGroup:{marginTop:"0.625rem"},okWrapper:{paddingLeft:"1rem"},okButton:{width:"100%"},cancelButton:{width:"100%"},addToken:{cursor:"pointer"},swapError:{display:"flex",alignItems:"center",marginBottom:"1rem",color:"#ff7875",textAlign:"left"},textOverflow:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},loading:{animation:"loading 1s linear infinite"},reloadIcon:{cursor:"pointer",verticalAlign:"text-bottom"}}};function Te(){Te=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",i=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(A){c=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var r=t&&t.prototype instanceof d?t:d,o=Object.create(r.prototype),i=new O(a||[]);return o._invoke=function(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return S()}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=x(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var l=s(e,t,n);if("normal"===l.type){if(a=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=l;var u={};function d(){}function p(){}function m(){}var f={};c(f,r,(function(){return this}));var g=Object.getPrototypeOf,h=g&&g(g(j([])));h&&h!==t&&n.call(h,r)&&(f=h);var b=m.prototype=d.prototype=Object.create(f);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var a;this._invoke=function(r,o){function i(){return new t((function(a,i){!function a(r,o,i,c){var l=s(e[r],e,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,i,c)}),(function(e){a("throw",e,i,c)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return a("throw",e,i,c)}))}c(l.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}}function x(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var a=s(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,u;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=m,c(b,"constructor",m),c(m,"constructor",p),p.displayName=c(m,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,i,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},v(y.prototype),c(y.prototype,o,(function(){return this})),e.AsyncIterator=y,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new y(l(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(b),c(b,i,"Generator"),c(b,r,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=j,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;w(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:j(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}var Ne=A.b,Ie=k.a,Be=Object(l.a)(Le),Fe=0;t.a=function(e){var t,n=Be(),l=Object(Ae.b)(),s=e.isEthi,u=e.userProvider,b=e.tokens,y=e.address,x=e.exchangeManager,E=e.EXCHANGE_AGGREGATOR_ABI,w=e.EXCHANGE_ADAPTER_ABI,O=e.handleClose,j=(e.onSlippageChange,N()(b,(function(){return Object(i.useRef)(null)}))),S=Object(i.useState)({}),k=Object(o.a)(S,2),C=k[0],T=k[1],I=Object(i.useState)(s?ge.a:fe.w),F=Object(o.a)(I,2),R=F[0],_=F[1],P=Object(i.useState)("0.3"),G=Object(o.a)(P,2),M=G[0],W=G[1],z=Object(i.useState)(!1),H=Object(o.a)(z,2),Y=H[0],q=H[1],K=Object(i.useState)(0),$=Object(o.a)(K,2),ee=($[0],$[1]),ne=Object(i.useState)(N()(b,(function(){}))),re=Object(o.a)(ne,2),oe=re[0],ie=re[1],le=N()(j,(function(e){return L()(e,"current.swapInfo",{})})),se=B()(j,(function(e){return L()(e,"current.isFetching")})),ue=function(e){var t;return(null===(t=b[e])||void 0===t?void 0:t.address)===R},de=function(){return!isNaN(M)&&!(M<.01||M>45)},pe=B()(j,(function(e){var t=L()(e,"current.isErrorValue");return"function"===typeof t&&t()})),be=X()(j,(function(e,t){var n,a,r;return(null===(n=t.current)||void 0===n||null===(a=n.swapInfo)||void 0===a||null===(r=a.bestSwapInfo)||void 0===r?void 0:r.toTokenAmount)?e.add(Ie.from(t.current.swapInfo.bestSwapInfo.toTokenAmount)):e}),Ie.from(0)),ve=1===D()(b)&&L()(V()(b),"address","")===R,ye=function(){var e=Object(r.a)(Te().mark((function e(t,n){var r,o,i,c,l,s,u;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getExchangeAdapters();case 2:r=e.sent,o=r._exchangeAdapters,i={},c=Object(a.a)(o),e.prev=6,c.s();case 8:if((l=c.n()).done){e.next=17;break}return s=l.value,u=new A.b(s,w,n),e.next=13,u.identifier();case 13:e.t0=e.sent,i[e.t0]=s;case 15:e.next=8;break;case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(6),c.e(e.t1);case 22:return e.prev=22,c.f(),e.finish(22);case 25:return e.abrupt("return",i);case 26:case"end":return e.stop()}}),e,null,[[6,19,22,25]])})));return function(t,n){return e.apply(this,arguments)}}(),xe=s?[{label:"ETH",value:ge.a,img:"./images/".concat(ge.a,".png"),decimal:he.a}]:[{label:"USDT",value:fe.w,img:"./images/".concat(fe.w,".png"),decimal:he.b},{label:"USDC",value:fe.v,img:"./images/".concat(fe.v,".png"),decimal:he.b},{label:"DAI",value:fe.d,img:"./images/".concat(fe.d,".png"),decimal:he.a}],Ee=xe.find((function(e){return e.value===R})).decimal,we=(null===(t=Ce()(b,(function(e){return e.address===R})))||void 0===t?void 0:t.amount)||"0",Oe=function(){var e=Object(r.a)(Te().mark((function e(){var t,n,a;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.groupCollapsed("approveAll call"),e.prev=1,t=0;case 3:if(!(t<b.length)){e.next=16;break}if(console.log("tokens[".concat(t,"] isReciveToken="),ue(t)),!ue(t)){e.next=7;break}return e.abrupt("continue",13);case 7:if(n=j[t].current.isApproveEnough(),console.log("refArray[".concat(t,"] isApproveEnough="),n),!n){e.next=11;break}return e.abrupt("continue",13);case 11:return e.next=13,j[t].current.approve();case 13:t++,e.next=3;break;case 16:e.next=25;break;case 18:return e.prev=18,e.t0=e.catch(1),q(!1),a=Object(me.a)(e.t0),l(Object(ce.b)({open:!0,type:"error",message:a})),console.groupEnd("approveAll call"),e.abrupt("return");case 25:if(!B()(j,(function(e){return!!e.current&&!e.current.isApproveEnough()}))){e.next=30;break}return q(!1),l(Object(ce.b)({open:!0,type:"error",message:"Allowance not enough"})),e.abrupt("return");case 30:console.groupEnd("approveAll call");case 31:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(){return e.apply(this,arguments)}}(),je=J()(Object(r.a)(Te().mark((function e(){var t,n,a,r,o,i,c,s,d,p;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.groupCollapsed("batchSwap call"),t=Q()(N()(le,(function(e){if(!(Z()(e)||e instanceof Error)){var t=e.bestSwapInfo;return{platform:t.platform,method:t.method,data:t.encodeExchangeArgs,swapDescription:e.info}}}))),console.log("nextSwapArray=",t),n=new Ne(x,E,u),a=u.getSigner(),r=n.connect(a),e.prev=6,!te()(fe.o)||1===fe.o){e.next=18;break}return e.next=10,r.estimateGas.batchSwap(t);case 10:return i=e.sent,c=Math.ceil(i*fe.o),s=c<fe.m?c:fe.m,e.next=15,r.batchSwap(t,{gasLimit:s});case 15:o=e.sent,e.next=21;break;case 18:return e.next=20,r.batchSwap(t);case 20:o=e.sent;case 21:return e.next=23,o.wait();case 23:l(Object(ce.b)({open:!0,type:"success",message:"Swap Success!"})),O(),e.next=34;break;case 27:e.prev=27,e.t0=e.catch(6),d=Object(me.a)(e.t0),p="Swap Failed",Object(me.g)(d)?p="Swap Failed, please increase the exchange slippage":4001===e.t0.code&&(p=d),l(Object(ce.b)({open:!0,type:"error",message:p})),q(!1);case 34:console.groupEnd("batchSwap call");case 35:case"end":return e.stop()}}),e,null,[[6,27]])}))),500),ke=Object(i.useCallback)((function(){ee(Math.random())}),[]),Le=Object(i.useCallback)((function(e,t){console.groupCollapsed("onStaticCallFinish call ".concat(e," ").concat(t));var n=N()(oe,(function(n,a){return!(!ue(a)&&!j[a].current.isEmptyValue())||(a===e?t:n)}));if(ie(n),console.log("nextArray",n),!Y)return console.log("isSwapping",Y),void console.groupEnd("onStaticCallFinish call ".concat(e," ").concat(t));var a=U()(n,(function(e){return void 0!==e}));if(!a)return console.log("allFinish",a),void console.groupEnd("onStaticCallFinish call ".concat(e," ").concat(t));var r=B()(n,(function(e){return!1===e}));if(r)return console.log("someError",r),q(!1),l(Object(ce.b)({open:!0,type:"error",message:"Swap Failed"})),void console.groupEnd("onStaticCallFinish call ".concat(e," ").concat(t));console.groupEnd("onStaticCallFinish call ".concat(e," ").concat(t)),je()}),[oe,Y]);return Object(i.useEffect)((function(){function e(){return(e=Object(r.a)(Te().mark((function e(){var t,n;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.groupCollapsed("getAdapters useEffect call:".concat(++Fe)),t=new Ne(x,E,u),e.next=4,ye(t,u);case 4:n=e.sent,console.log("exchangeAdapters",n),T(n),console.groupEnd("getAdapters useEffect call:".concat(Fe));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[x]),c.a.createElement("div",{className:n.main},c.a.createElement("div",{className:n.title},"Swap to single token"),c.a.createElement("div",{className:n.approveContainer},c.a.createElement("div",null,"Swap tokens:"),N()(b,(function(e,t){var n={};return("0"===e.amount||b.length>1&&ue(t))&&(n.display="none"),c.a.createElement(Se,{style:n,ref:j[t],key:"".concat(e.address,"-").concat(R),userAddress:y,userProvider:u,token:e,slippage:M,receiveToken:R,exchangeManager:x,exchangePlatformAdapters:C,receiveTokenDecimals:Ee,EXCHANGE_AGGREGATOR_ABI:E,disabled:Y,onChange:ke,onStaticCallFinish:function(e){Le(t,e)}})}))),c.a.createElement("div",{className:n.estimateContainer},c.a.createElement("div",{className:n.estimateTitle},"To receive estimated:"),c.a.createElement(d.a,null,c.a.createElement(p.a,{xs:4,sm:4,md:4},c.a.createElement(m.a,{options:xe,disabled:xe.length<=1||Y||se,value:R,onChange:function(e){return function(e){se||_(e)}(e)}})),c.a.createElement(p.a,{xs:8,sm:8,md:8,className:n.estimateBalance},c.a.createElement(h.a,{loading:se,className:n.reloadIcon},c.a.createElement("div",{className:n.textOverflow},Object(ae.b)(be,Ee,6)," from token swap"),"0"!==we&&c.a.createElement("div",null,"+".concat(Object(ae.b)(we,Ee,6))," from withdrawal"))))),c.a.createElement(d.a,{className:n.slippage},c.a.createElement(p.a,{xs:4,sm:4,md:4,className:n.slippageTitlte},"Slippage tolerance:"),c.a.createElement(p.a,{xs:8,sm:8,md:8},c.a.createElement(g.a,{value:M,placeholder:"Allow slippage percent",maxEndAdornment:!0,disabled:Y||se,onMaxClick:function(){return W("45")},onChange:function(e){return W(e.target.value)},error:!de()}))),c.a.createElement(d.a,{className:n.buttonGroup},c.a.createElement(p.a,{xs:4,sm:4,md:4},c.a.createElement(f.a,{color:"danger",onClick:O,className:n.cancelButton},"Cancel")),c.a.createElement(p.a,{xs:8,sm:8,md:8,className:n.okWrapper},c.a.createElement(f.a,{color:"colorfull",onClick:function(){console.groupCollapsed("clickSwap call"),q(!0),U()(j,(function(e,t){return!(!ue(t)&&!e.current.isEmptyValue())||L()(e,"current.done",!0)}))?je():Oe(),console.groupEnd("clickSwap call")},disabled:ve||se||Y||B()(j,(function(e){var t;return!!(null===(t=e.current)||void 0===t?void 0:t.retryTimes)&&e.current.retryTimes>2}))||!de()||be.lte(0)||pe,className:n.okButton,startIcon:Y?c.a.createElement(v.a,{className:n.loading}):null},"Swap"))))}}}]);
//# sourceMappingURL=12.cf43ac2a.chunk.js.map