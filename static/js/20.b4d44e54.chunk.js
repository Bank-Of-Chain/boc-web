(this["webpackJsonpboc-web"]=this["webpackJsonpboc-web"]||[]).push([[20],{1318:function(e,t,a){"use strict";a.d(t,"a",(function(){return q}));var i=a(1116),n=a(864),r=a(876),l=a(860),s=2*Math.PI,o=Math.PI/180;function c(e,t){return r.f(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function g(e,t){var a=c(e,t),i=e.get("center"),r=e.get("radius");l.isArray(r)||(r=[0,r]),l.isArray(i)||(i=[i,i]);var s,o,g=Object(n.q)(a.width,t.getWidth()),h=Object(n.q)(a.height,t.getHeight()),u=Math.min(g,h),d=Object(n.q)(r[0],u/2),p=Object(n.q)(r[1],u/2),b=e.coordinateSystem;if(b){var f=b.dataToPoint(i);s=f[0]||0,o=f[1]||0}else s=Object(n.q)(i[0],g)+a.x,o=Object(n.q)(i[1],h)+a.y;return{cx:s,cy:o,r0:d,r:p}}function h(e,t,a){t.eachSeriesByType(e,(function(e){var t=e.getData(),i=t.mapDimension("value"),r=c(e,a),l=g(e,a),h=l.cx,u=l.cy,d=l.r,p=l.r0,b=-e.get("startAngle")*o,f=e.get("minAngle")*o,y=0;t.each(i,(function(e){!isNaN(e)&&y++}));var m=t.getSum(i),v=Math.PI/(m||y)*2,x=e.get("clockwise"),A=e.get("roseType"),O=e.get("stillShowZeroSum"),S=t.getDataExtent(i);S[0]=0;var w=s,L=0,M=b,D=x?1:-1;if(t.setLayout({viewRect:r,r:d}),t.each(i,(function(e,a){var i;if(isNaN(e))t.setItemLayout(a,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:x,cx:h,cy:u,r0:p,r:A?NaN:d});else{(i="area"!==A?0===m&&O?v:e*v:s/y)<f?(i=f,w-=f):L+=e;var r=M+D*i;t.setItemLayout(a,{angle:i,startAngle:M,endAngle:r,clockwise:x,cx:h,cy:u,r0:p,r:A?Object(n.m)(e,S,[p,d]):d}),M=r}})),w<s&&y)if(w<=.001){var j=s/y;t.each(i,(function(e,a){if(!isNaN(e)){var i=t.getItemLayout(a);i.angle=j,i.startAngle=b+D*a*j,i.endAngle=b+D*(a+1)*j}}))}else v=w/L,M=b,t.each(i,(function(e,a){if(!isNaN(e)){var i=t.getItemLayout(a),n=i.angle===f?f:e*v;i.startAngle=M,i.endAngle=M+D*n,M+=D*n}}))}))}var u=a(861),d=a(942),p=a(881),b=a(1120),f=a(1047),y=a(888),m=a(926),v=a(955),x=a(1040),A=a(1036),O=Math.PI/180;function S(e,t,a,i,n,r,l,s,o,c){if(!(e.length<2)){for(var g=e.length,h=0;h<g;h++)if("outer"===e[h].position&&"labelLine"===e[h].labelAlignTo){var u=e[h].label.x-c;e[h].linePoints[1][0]+=u,e[h].label.x=c}Object(A.d)(e,o,o+l)&&function(e){for(var r={list:[],maxY:0},l={list:[],maxY:0},s=0;s<e.length;s++)if("none"===e[s].labelAlignTo){var o=e[s],c=o.label.y>a?l:r,g=Math.abs(o.label.y-a);if(g>=c.maxY){var h=o.label.x-t-o.len2*n,u=i+o.len,p=Math.abs(h)<u?Math.sqrt(g*g/(1-h*h/u/u)):u;c.rB=p,c.maxY=g}c.list.push(o)}d(r),d(l)}(e)}function d(e){for(var r=e.rB,l=r*r,s=0;s<e.list.length;s++){var o=e.list[s],c=Math.abs(o.label.y-a),g=i+o.len,h=g*g,u=Math.sqrt((1-Math.abs(c*c/l))*h),d=t+(u+o.len2)*n,p=d-o.label.x;w(o,o.targetTextWidth-p*n,!0),o.label.x=d}}}function w(e,t,a){if(void 0===a&&(a=!1),null==e.labelStyleWidth){var i=e.label,n=i.style,r=e.rect,l=n.backgroundColor,s=n.padding,o=s?s[1]+s[3]:0,c=n.overflow,g=r.width+(l?0:o);if(t<g||a){var h=r.height;if(c&&c.match("break")){i.setStyle("backgroundColor",null),i.setStyle("width",t-o);var u=i.getBoundingRect();i.setStyle("width",Math.ceil(u.width)),i.setStyle("backgroundColor",l)}else{var d=t-o,p=t<g?d:a?d>e.unconstrainedWidth?null:d:null;i.setStyle("width",p)}var b=i.getBoundingRect();r.width=b.width;var f=(i.style.margin||0)+2.1;r.height=b.height+f,r.y-=(r.height-h)/2}}}function L(e){return"center"===e.position}function M(e){var t,a,i=e.getData(),r=[],s=!1,o=(e.get("minShowLabelAngle")||0)*O,c=i.getLayout("viewRect"),g=i.getLayout("r"),h=c.width,u=c.x,d=c.y,p=c.height;function b(e){e.ignore=!0}i.each((function(e){var c=i.getItemGraphicEl(e),d=c.shape,p=c.getTextContent(),f=c.getTextGuideLine(),y=i.getItemModel(e),m=y.getModel("label"),x=m.get("position")||y.get(["emphasis","label","position"]),A=m.get("distanceToLabelLine"),O=m.get("alignTo"),S=Object(n.q)(m.get("edgeDistance"),h),w=m.get("bleedMargin"),L=y.getModel("labelLine"),M=L.get("length");M=Object(n.q)(M,h);var D=L.get("length2");if(D=Object(n.q)(D,h),Math.abs(d.endAngle-d.startAngle)<o)return Object(l.each)(p.states,b),Object(l.each)(f.states,b),void(p.ignore=f.ignore=!0);if(function(e){if(!e.ignore)return!0;for(var t in e.states)if(!1===e.states[t].ignore)return!0;return!1}(p)){var j,T,N,I,C=(d.startAngle+d.endAngle)/2,P=Math.cos(C),_=Math.sin(C);t=d.cx,a=d.cy;var E="inside"===x||"inner"===x;if("center"===x)j=d.cx,T=d.cy,I="center";else{var k=(E?(d.r+d.r0)/2*P:d.r*P)+t,W=(E?(d.r+d.r0)/2*_:d.r*_)+a;if(j=k+3*P,T=W+3*_,!E){var q=k+P*(M+g-d.r),R=W+_*(M+g-d.r),G=q+(P<0?-1:1)*D;j="edge"===O?P<0?u+S:u+h-S:G+(P<0?-A:A),T=R,N=[[k,W],[q,R],[G,R]]}I=E?"center":"edge"===O?P>0?"right":"left":P>0?"left":"right"}var V=Math.PI,B=0,U=m.get("rotate");if(Object(l.isNumber)(U))B=U*(V/180);else if("center"===x)B=0;else if("radial"===U||!0===U){B=P<0?-C+V:-C}else if("tangential"===U&&"outside"!==x&&"outer"!==x){var Y=Math.atan2(P,_);Y<0&&(Y=2*V+Y),_>0&&(Y=V+Y),B=Y-V}if(s=!!B,p.x=j,p.y=T,p.rotation=B,p.setStyle({verticalAlign:"middle"}),E){p.setStyle({align:I});var z=p.states.select;z&&(z.x+=p.x,z.y+=p.y)}else{var X=p.getBoundingRect().clone();X.applyTransform(p.getComputedTransform());var F=(p.style.margin||0)+2.1;X.y-=F/2,X.height+=F,r.push({label:p,labelLine:f,position:x,len:M,len2:D,minTurnAngle:L.get("minTurnAngle"),maxSurfaceAngle:L.get("maxSurfaceAngle"),surfaceNormal:new v.a(P,_),linePoints:N,textAlign:I,labelDistance:A,labelAlignTo:O,edgeDistance:S,bleedMargin:w,rect:X,unconstrainedWidth:X.width,labelStyleWidth:p.style.width})}c.setTextConfig({inside:E})}})),!s&&e.get("avoidLabelOverlap")&&function(e,t,a,i,n,r,l,s){for(var o=[],c=[],g=Number.MAX_VALUE,h=-Number.MAX_VALUE,u=0;u<e.length;u++){var d=e[u].label;L(e[u])||(d.x<t?(g=Math.min(g,d.x),o.push(e[u])):(h=Math.max(h,d.x),c.push(e[u])))}for(u=0;u<e.length;u++){if(!L(f=e[u])&&f.linePoints){if(null!=f.labelStyleWidth)continue;d=f.label;var p=f.linePoints,b=void 0;b="edge"===f.labelAlignTo?d.x<t?p[2][0]-f.labelDistance-l-f.edgeDistance:l+n-f.edgeDistance-p[2][0]-f.labelDistance:"labelLine"===f.labelAlignTo?d.x<t?g-l-f.bleedMargin:l+n-h-f.bleedMargin:d.x<t?d.x-l-f.bleedMargin:l+n-d.x-f.bleedMargin,f.targetTextWidth=b,w(f,b)}}for(S(c,t,a,i,1,0,r,0,s,h),S(o,t,a,i,-1,0,r,0,s,g),u=0;u<e.length;u++){var f;if(!L(f=e[u])&&f.linePoints){d=f.label,p=f.linePoints;var y="edge"===f.labelAlignTo,m=d.style.padding,v=m?m[1]+m[3]:0,x=d.style.backgroundColor?0:v,A=f.rect.width+x,O=p[1][0]-p[2][0];y?d.x<t?p[2][0]=l+f.edgeDistance+A+f.labelDistance:p[2][0]=l+n-f.edgeDistance-A-f.labelDistance:(d.x<t?p[2][0]=d.x+f.labelDistance:p[2][0]=d.x-f.labelDistance,p[1][0]=p[2][0]+O),p[1][1]=p[2][1]=d.y}}}(r,t,a,g,h,p,u,d);for(var f=0;f<r.length;f++){var y=r[f],m=y.label,A=y.labelLine,M=isNaN(m.x)||isNaN(m.y);if(m){m.setStyle({align:y.textAlign}),M&&(Object(l.each)(m.states,b),m.ignore=!0);var D=m.states.select;D&&(D.x+=m.x,D.y+=m.y)}if(A){var j=y.linePoints;M||!j?(Object(l.each)(A.states,b),A.ignore=!0):(Object(x.c)(j,y.minTurnAngle),Object(x.b)(j,y.surfaceNormal,y.maxSurfaceAngle),A.setShape({points:j}),m.__hostTarget.textGuideLineConfig={anchor:new v.a(j[0][0],j[0][1])})}}}var D=a(887),j=a(892);function T(e,t,a){var i=e.get("borderRadius");if(null==i)return a?{cornerRadius:0}:null;Object(l.isArray)(i)||(i=[i,i,i,i]);var n=Math.abs(t.r||0-t.r0||0);return{cornerRadius:Object(l.map)(i,(function(e){return Object(j.g)(e,n)}))}}var N=function(e){function t(t,a,i){var n=e.call(this)||this;n.z2=2;var r=new d.a;return n.setTextContent(r),n.updateData(t,a,i,!0),n}return Object(u.a)(t,e),t.prototype.updateData=function(e,t,a,i){var n=e.hostModel,r=e.getItemModel(t),s=r.getModel("emphasis"),o=e.getItemLayout(t),c=Object(l.extend)(T(r.getModel("itemStyle"),o,!0),o);if(isNaN(c.startAngle))this.setShape(c);else{if(i){this.setShape(c);var g=n.getShallow("animationType");n.ecModel.ssr?(p.c(this,{scaleX:0,scaleY:0},n,{dataIndex:t,isFrom:!0}),this.originX=c.cx,this.originY=c.cy):"scale"===g?(this.shape.r=o.r0,p.c(this,{shape:{r:o.r}},n,t)):null!=a?(this.setShape({startAngle:a,endAngle:a}),p.c(this,{shape:{startAngle:o.startAngle,endAngle:o.endAngle}},n,t)):(this.shape.endAngle=o.startAngle,p.h(this,{shape:{endAngle:o.endAngle}},n,t))}else Object(p.g)(this),p.h(this,{shape:c},n,t);this.useStyle(e.getItemVisual(t,"style")),Object(y.D)(this,r);var h=(o.startAngle+o.endAngle)/2,u=n.get("selectedOffset"),d=Math.cos(h)*u,b=Math.sin(h)*u,f=r.getShallow("cursor");f&&this.attr("cursor",f),this._updateLabel(n,e,t),this.ensureState("emphasis").shape=Object(l.extend)({r:o.r+(s.get("scale")&&s.get("scaleSize")||0)},T(s.getModel("itemStyle"),o)),Object(l.extend)(this.ensureState("select"),{x:d,y:b,shape:T(r.getModel(["select","itemStyle"]),o)}),Object(l.extend)(this.ensureState("blur"),{shape:T(r.getModel(["blur","itemStyle"]),o)});var m=this.getTextGuideLine(),v=this.getTextContent();m&&Object(l.extend)(m.ensureState("select"),{x:d,y:b}),Object(l.extend)(v.ensureState("select"),{x:d,y:b}),Object(y.E)(this,s.get("focus"),s.get("blurScope"),s.get("disabled"))}},t.prototype._updateLabel=function(e,t,a){var i=t.getItemModel(a),n=i.getModel("labelLine"),r=t.getItemVisual(a,"style"),s=r&&r.fill,o=r&&r.opacity;Object(D.f)(this,Object(D.d)(i),{labelFetcher:t.hostModel,labelDataIndex:a,inheritColor:s,defaultOpacity:o,defaultText:e.getFormattedLabel(a,"normal")||t.getName(a)});var c=this.getTextContent();this.setTextConfig({position:null,rotation:null}),c.attr({z2:10});var g=e.get(["label","position"]);if("outside"!==g&&"outer"!==g)this.removeTextGuideLine();else{var h=this.getTextGuideLine();h||(h=new b.a,this.setTextGuideLine(h)),Object(x.d)(this,Object(x.a)(i),{stroke:s,opacity:Object(l.retrieve3)(n.get(["lineStyle","opacity"]),o,1)})}},t}(f.a),I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return Object(u.a)(t,e),t.prototype.render=function(e,t,a,i){var n,r=e.getData(),l=this._data,s=this.group;if(!l&&r.count()>0){for(var o=r.getItemLayout(0),c=1;isNaN(o&&o.startAngle)&&c<r.count();++c)o=r.getItemLayout(c);o&&(n=o.startAngle)}if(this._emptyCircleSector&&s.remove(this._emptyCircleSector),0===r.count()&&e.get("showEmptyCircle")){var h=new f.a({shape:g(e,a)});h.useStyle(e.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=h,s.add(h)}r.diff(l).add((function(e){var t=new N(r,e,n);r.setItemGraphicEl(e,t),s.add(t)})).update((function(e,t){var a=l.getItemGraphicEl(t);a.updateData(r,e,n),a.off("click"),s.add(a),r.setItemGraphicEl(e,a)})).remove((function(t){var a=l.getItemGraphicEl(t);p.f(a,e,t)})).execute(),M(e),"expansion"!==e.get("animationTypeUpdate")&&(this._data=r)},t.prototype.dispose=function(){},t.prototype.containPoint=function(e,t){var a=t.getData().getItemLayout(0);if(a){var i=e[0]-a.cx,n=e[1]-a.cy,r=Math.sqrt(i*i+n*n);return r<=a.r&&r>=a.r0}},t.type="pie",t}(m.a),C=a(983),P=a(984);var _=a(862),E=a(943),k=function(){function e(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return e.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},e.prototype.containName=function(e){return this._getRawData().indexOfName(e)>=0},e.prototype.indexOfName=function(e){return this._getDataWithEncodedVisual().indexOfName(e)},e.prototype.getItemVisual=function(e,t){return this._getDataWithEncodedVisual().getItemVisual(e,t)},e}(),W=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(u.a)(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new k(l.bind(this.getData,this),l.bind(this.getRawData,this)),this._defaultLabelLine(t)},t.prototype.mergeOption=function(){e.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){var e=function(e,t,a){t=Object(l.isArray)(t)&&{coordDimensions:t}||Object(l.extend)({encodeDefine:e.getEncode()},t);var i=e.getSource(),n=Object(C.b)(i,t).dimensions,r=new P.a(n,e);return r.initData(i,a),r}(this,{coordDimensions:["value"],encodeDefaulter:l.curry(E.d,this)}),t=[];return e.each(e.mapDimension("value"),(function(e){t.push(e)})),this.seats=Object(n.e)(t,e.hostModel.get("percentPrecision")),e},t.prototype.getDataParams=function(t){var a=e.prototype.getDataParams.call(this,t);return a.percent=this.seats[t],a.$vars.push("percent"),a},t.prototype._defaultLabelLine=function(e){_.e(e,"labelLine",["show"]);var t=e.labelLine,a=e.emphasis.labelLine;t.show=t.show&&e.label.show,a.show=a.show&&e.emphasis.label.show},t.type="series.pie",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(a(913).b);function q(e){e.registerChartView(I),e.registerSeriesModel(W),Object(i.a)("pie",e.registerAction),e.registerLayout(Object(l.curry)(h,"pie")),e.registerProcessor({seriesType:"pie",reset:function(e,t){var a=t.findComponents({mainType:"legend"});if(a&&a.length){var i=e.getData();i.filterSelf((function(e){for(var t=i.getName(e),n=0;n<a.length;n++)if(!a[n].isSelected(t))return!1;return!0}))}}}),e.registerProcessor(function(e){return{seriesType:e,reset:function(e,t){var a=e.getData();a.filterSelf((function(e){var t=a.mapDimension("value"),i=a.get(t,e);return!(Object(l.isNumber)(i)&&!isNaN(i)&&i<0)}))}}}("pie"))}}}]);
//# sourceMappingURL=20.b4d44e54.chunk.js.map