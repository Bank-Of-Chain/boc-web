/*! For license information please see 20.893c4da5.chunk.js.LICENSE.txt */
(this["webpackJsonpboc-web"]=this["webpackJsonpboc-web"]||[]).push([[20],{1325:function(e,t,r){"use strict";r.r(t);var a=r(49),n=r(0),o=r.n(n),i=r(44),c=r.n(i),l=r(443),s=r(292),u=r(117),m=r(813),d=r(814),p=r(1311),f=r(1312),h=r(963),g=r.n(h),b=r(964),y=r.n(b),v=r(965),x=r.n(v),w=r(845),E=r(10),O=r(80),j=r(854),k=r(857),L=r(812),A=r(877),T=r(888),S=r(82),N=r(841),C=r(904),_=r.n(C),F=r(236),R=r.n(F),I=r(108),B=r.n(I),W=r(876),D=r.n(W),P=r(172),V=r(17),U=r(875),G=r.n(U),z=r(89),M=r(871),Y=r(27),H=function(){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},modalBody:{textAlign:"center"},depositContainer:{border:"1px solid #A68EFD",padding:"2.6875rem 2.25rem",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem"},estimateContainer:{border:"1px solid #A68EFD",marginTop:"0.5rem",borderBottomLeftRadius:"1rem",borderBottomRightRadius:"1rem",padding:"2.0625rem 2.6875rem"},estimateWrapper:{display:"flex",marginTop:"1rem",justifyContent:"space-between",fontSize:"1.625rem"},estimateText:{color:"#A0A0A0",margin:0},estimateBalanceNum:{color:"#A0A0A0"},balance:{display:"flex",color:"#A0A0A0",marginTop:"1rem"},footerContainer:{marginTop:"2.5rem"},tokenInputWrapper:{marginBottom:"16px"},inputLabelWrapper:{display:"flex",justifyContent:"space-between",alignItems:"center"},input:{maxWidth:"12.5rem"},tokenInfo:{display:"flex",alignItems:"center"},tokenName:{fontSize:"1.625rem"},tokenLogo:{width:30,borderRadius:"50%",marginRight:8},depositModal:{padding:"1rem",maxWidth:"500px",color:"rgba(255, 255, 255, 0.87)",border:"1px solid #A68EFE",backgroundColor:"#000",borderRadius:"1rem"},setting:{position:"absolute",right:"1rem",top:"1rem",cursor:"pointer"},min:{marginTop:"1rem",color:"#A0A0A0",fontSize:"0.875rem"}}};function K(){K=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},n=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",i=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(L){c=function(e,t,r){return e[t]=r}}function l(e,t,r,a){var n=t&&t.prototype instanceof m?t:m,o=Object.create(n.prototype),i=new O(a||[]);return o._invoke=function(e,t,r){var a="suspendedStart";return function(n,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===n)throw o;return k()}for(r.method=n,r.arg=o;;){var i=r.delegate;if(i){var c=x(i,r);if(c){if(c===u)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===a)throw a="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a="executing";var l=s(e,t,r);if("normal"===l.type){if(a=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(a="completed",r.method="throw",r.arg=l.arg)}}}(e,r,i),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(L){return{type:"throw",arg:L}}}e.wrap=l;var u={};function m(){}function d(){}function p(){}var f={};c(f,n,(function(){return this}));var h=Object.getPrototypeOf,g=h&&h(h(j([])));g&&g!==t&&r.call(g,n)&&(f=g);var b=p.prototype=m.prototype=Object.create(f);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function v(e,t){var a;this._invoke=function(n,o){function i(){return new t((function(a,i){!function a(n,o,i,c){var l=s(e[n],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==typeof m&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){a("next",e,i,c)}),(function(e){a("throw",e,i,c)})):t.resolve(m).then((function(e){u.value=e,i(u)}),(function(e){return a("throw",e,i,c)}))}c(l.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}}function x(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var a=s(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,u;var n=a.arg;return n?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function j(e){if(e){var t=e[n];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(r.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=p,c(b,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(v.prototype),c(v.prototype,o,(function(){return this})),e.AsyncIterator=v,e.async=function(t,r,a,n,o){void 0===o&&(o=Promise);var i=new v(l(t,r,a,n),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),c(b,i,"Generator"),c(b,n,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var a=t.pop();if(a in e)return r.value=a,r.done=!1,r}return r.done=!0,r}},e.values=j,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(r,a){return i.type="throw",i.arg=e,t.next=r,a&&(t.method="next",t.arg=void 0),!!a}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var a=r.completion;if("throw"===a.type){var n=a.arg;E(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var J=P.b,q=V.a,Q=Object(l.a)(H);function X(e){var t=e.address,r=e.estimatedTotalAssets,i=e.userProvider,c=e.VAULT_ABI,l=e.VAULT_ADDRESS,m=e.isBalanceLoading,d=e.minInvestment,p=e.wantTokenBalance,f=e.wantTokenDecimals,h=e.wantTokenSymbol,g=e.wantTokenForVault,b=e.manageFeeBps,y=e.onDepositSuccess,v=Q(),x=Object(O.b)(),w=Object(n.useState)(""),C=Object(a.a)(w,2),F=C[0],I=C[1],W=Object(n.useState)(!1),P=Object(a.a)(W,2),V=P[0],U=P[1];var H=function(){var e=Object(E.a)(K().mark((function e(){var a,n,o,s,u,m,p,h,b,v,w,O;return K().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=q.from(G()(F).times(G()(10).pow(f)).toFixed()),n=a.add(r),!n.lt(d)){e.next=6;break}return x(Object(z.b)({open:!0,type:"warning",message:"Less than minimum investment"})),e.abrupt("return");case 6:return U(!0),e.prev=7,o=i.getSigner(),s=new J(g,Y.j,i),u=s.connect(o),e.next=13,u.allowance(t,l);case 13:if(m=e.sent,!a.gt(m)){e.next=22;break}if(!m.gt(0)){e.next=20;break}return e.next=18,u.increaseAllowance(l,a.sub(m)).then((function(e){return e.wait()})).catch(function(){var e=Object(E.a)(K().mark((function e(t){return K().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.table(t),4001!==t.code&&"ACTION_REJECTED"!==t.code){e.next=3;break}return e.abrupt("return",Promise.reject(t));case 3:return e.next=5,u.approve(l,0);case 5:return e.next=7,u.approve(l,a).then((function(e){return e.wait()}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 18:e.next=22;break;case 20:return e.next=22,u.approve(l,a);case 22:if(p=new J(l,c,i),h=p.connect(o),b={},!D()(Y.p)||1===Y.p){e.next=32;break}return e.next=28,h.estimateGas.lend(a);case 28:v=e.sent,w=Math.ceil(v*Y.p),O=w<Y.n?w:Y.n,b.gasLimit=O;case 32:return e.next=34,h.lend(a,b).then((function(e){return e.wait()}));case 34:I(""),U(!1),x(Object(z.b)({open:!0,type:"success",message:"Success"})),y(),e.next=45;break;case 40:e.prev=40,e.t0=e.catch(7),console.log("error",e.t0),U(!1),x(Object(z.b)({open:!0,type:"error",message:"Deposit failed"}));case 45:case"end":return e.stop()}}),e,null,[[7,40]])})));return function(){return e.apply(this,arguments)}}(),X=!B()(i),Z=function(){var e=p,t=f;if(""!==F&&"-"!==F&&"0"!==F&&!B()(F.replace(/ /g,""))){if(isNaN(Number(F)))return!1;var r=G()(F),a=r.multipliedBy(q.from(10).pow(t).toString());return!a.lte(0)&&(-1===r.multipliedBy(q.from(10).pow(t).toString()).toFixed().indexOf(".")&&!e.lt(q.from(a.toFixed())))}}(),$=b?b.toString()/1e4:0;return o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,{classes:{root:v.depositContainer}},o.a.createElement("p",{className:v.estimateText},"From"),o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12,className:v.tokenInputWrapper},o.a.createElement(s.a,null,o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("div",{className:v.inputLabelWrapper},o.a.createElement("div",{className:v.tokenInfo},o.a.createElement("img",{className:v.tokenLogo,alt:"",src:"./images/".concat(g,".png")}),o.a.createElement("span",{className:v.tokenName},h)),o.a.createElement(T.a,{classes:{root:v.input},value:F,onChange:function(e){I(e.target.value)},placeholder:"deposit amount",maxEndAdornment:!0,onMaxClick:function(){var e=p;I(Object(M.a)(e.gt(0)?e:0,f,{showAll:!0}))},error:!R()(Z)&&!Z}))),o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("p",{className:v.estimateText,title:Object(M.a)(p,f,{showAll:!0})},"Balance:\xa0\xa0",o.a.createElement(A.a,{loading:m},Object(M.a)(p,f))))))),o.a.createElement(s.a,{className:v.estimateContainer},o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("p",{className:v.estimateText},"To")),o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("div",{className:v.estimateWrapper},o.a.createElement("span",null,h," VAULT"),o.a.createElement("span",{className:v.estimateBalanceNum},Number(F)*(1-$)))),o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("p",{className:v.balance,title:Object(M.a)(r,f,{showAll:!0})},"Balance:\xa0\xa0",o.a.createElement(A.a,{loading:m},Object(M.a)(r,f))),o.a.createElement("div",{className:v.min},"Minimum Investment: ",Object(M.a)(d,f)))),o.a.createElement(s.a,null,o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("div",{className:v.footerContainer},o.a.createElement(S.a,{disabled:!X||X&&!Z,color:"colorfull",onClick:H,style:{width:"100%"}},"Deposit",o.a.createElement(N.a,{classes:{tooltip:v.tooltip},placement:"top",title:"".concat(100*$,"% manage fee of the principal.")},o.a.createElement(_.a,{style:{marginLeft:"0.5rem"}})))))),o.a.createElement(k.a,{className:v.modal,open:V,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},o.a.createElement(L.a,{elevation:3,className:v.depositModal},o.a.createElement("div",{className:v.modalBody},o.a.createElement(j.a,{color:"inherit"}),o.a.createElement("div",{style:{marginTop:"1rem"}},"On Deposit...")))))}var Z=r(1306),$=r(960),ee=r.n($),te=r(922),re=r(923),ae=r(924),ne=r(925),oe=r(79),ie=r.n(oe),ce=r(892),le=function(){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},modalBody:{textAlign:"center"},withdrawContainer:{padding:"2.6875rem 2.25rem",border:"1px solid #A68EFD",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem"},outputContainer:{padding:"2.6875rem 2.25rem",border:"1px solid #A68EFD",marginTop:"0.5rem",borderBottomLeftRadius:"1rem",borderBottomRightRadius:"1rem"},estimateText:{height:"1.25rem",color:"#A0A0A0",margin:0,display:"flex",marginTop:"0.5rem",alignItems:"center"},input:{maxWidth:"12.5rem"},footerContainer:{marginTop:"2.5rem"},inputLabelWrapper:{display:"flex",justifyContent:"space-between",alignItems:"center"},tokenInfo:{display:"flex",alignItems:"center"},tokenName:{fontSize:"1.625rem"},widthdrawLoadingPaper:{padding:"1rem",maxWidth:"500px",color:"rgba(255, 255, 255, 0.87)",border:"1px solid #A68EFE",backgroundColor:"#000",borderRadius:"1rem",width:"100%"},estimateWrapper:{display:"flex",marginTop:"1rem",justifyContent:"space-between",fontSize:"1.625rem"},estimateBalanceNum:{color:"#A0A0A0"},setting:{position:"absolute",right:"1rem",top:"1rem",cursor:"pointer"},root:{padding:"1.5rem 0"}}};function se(){se=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},n=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",i=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(L){c=function(e,t,r){return e[t]=r}}function l(e,t,r,a){var n=t&&t.prototype instanceof m?t:m,o=Object.create(n.prototype),i=new O(a||[]);return o._invoke=function(e,t,r){var a="suspendedStart";return function(n,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===n)throw o;return k()}for(r.method=n,r.arg=o;;){var i=r.delegate;if(i){var c=x(i,r);if(c){if(c===u)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===a)throw a="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a="executing";var l=s(e,t,r);if("normal"===l.type){if(a=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(a="completed",r.method="throw",r.arg=l.arg)}}}(e,r,i),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(L){return{type:"throw",arg:L}}}e.wrap=l;var u={};function m(){}function d(){}function p(){}var f={};c(f,n,(function(){return this}));var h=Object.getPrototypeOf,g=h&&h(h(j([])));g&&g!==t&&r.call(g,n)&&(f=g);var b=p.prototype=m.prototype=Object.create(f);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function v(e,t){var a;this._invoke=function(n,o){function i(){return new t((function(a,i){!function a(n,o,i,c){var l=s(e[n],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==typeof m&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){a("next",e,i,c)}),(function(e){a("throw",e,i,c)})):t.resolve(m).then((function(e){u.value=e,i(u)}),(function(e){return a("throw",e,i,c)}))}c(l.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}}function x(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var a=s(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,u;var n=a.arg;return n?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function j(e){if(e){var t=e[n];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(r.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=p,c(b,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(v.prototype),c(v.prototype,o,(function(){return this})),e.AsyncIterator=v,e.async=function(t,r,a,n,o){void 0===o&&(o=Promise);var i=new v(l(t,r,a,n),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),c(b,i,"Generator"),c(b,n,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var a=t.pop();if(a in e)return r.value=a,r.done=!1,r}return r.done=!0,r}},e.values=j,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(r,a){return i.type="throw",i.arg=e,t.next=r,a&&(t.method="next",t.arg=void 0),!!a}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var a=r.completion;if("throw"===a.type){var n=a.arg;E(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var ue=P.b,me=V.a,de=Object(l.a)(le),pe=[{title:"Shares Validation"},{title:"Gas Estimates"},{title:"Withdraw"}];function fe(e){var t=e.userProvider,r=e.VAULT_ADDRESS,i=e.VAULT_ABI,c=e.isBalanceLoading,l=e.estimatedTotalAssets,m=e.wantTokenDecimals,d=e.wantTokenSymbol,p=e.onWithdrawSuccess,f=de(),h=Object(O.b)(),g=Object(n.useState)(""),b=Object(a.a)(g,2),y=b[0],v=b[1],x=Object(n.useState)(!1),w=Object(a.a)(x,2),N=w[0],C=w[1],_=Object(n.useState)(0),F=Object(a.a)(_,2),I=F[0],W=F[1],P=Object(n.useState)({}),V=Object(a.a)(P,2),U=V[0],H=V[1],K=function(){var e=Object(E.a)(se().mark((function e(){var a,n,o,c,s,u,f,g,b,x,w,E,O,j,k;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C(!0),console.log("----------start withdraw----------"),J()){e.next=4;break}return e.abrupt("return",H({type:"warning",message:"Please enter the correct value."}));case 4:if(W(1),a=new ue(r,i,t),n=t.getSigner(),e.prev=7,o=a.connect(n),W(2),s=me.from(G()(y).times(G()(10).pow(m)).toFixed()),!D()(Y.p)||1===Y.p){e.next=23;break}return e.next=14,o.estimateGas.redeem(s,l);case 14:return u=e.sent,W(3),f=Math.ceil(u*Y.p),g=f<Y.n?f:Y.n,e.next=20,o.redeem(s,l,{gasLimit:g});case 20:c=e.sent,e.next=26;break;case 23:return e.next=25,o.redeem(s,l);case 25:c=e.sent;case 26:return e.next=28,c.wait();case 28:b=e.sent,x=b.events,w=[],E=x.length-1;case 32:if(!(E>=0)){e.next=39;break}if("Redeem"!==x[E].event){e.next=36;break}return w=x[E].args,e.abrupt("break",39);case 36:E--,e.next=32;break;case 39:console.log("args",w),O=w._redeemAmount,console.log("_redeemAmount",O.toString()),W(4),v(""),h(Object(z.b)({open:!0,type:"success",message:"Withdraw ".concat(Object(M.a)(O,m)," ").concat(d)})),p(),e.next=55;break;case 48:e.prev=48,e.t0=e.catch(7),console.log("withdraw original error :",e.t0),j=Object(ce.a)(e.t0),k="",k=Object(ce.d)(j)?"Vault has been shut down, please try again later!":Object(ce.b)(j)?"Vault is in adjustment status, please try again later!":Object(ce.i)(j)?"Vault is in rebase status, please try again later!":Object(ce.h)(j)?"Failed to withdraw, please increase the Max Loss!":Object(ce.g)(j)?"Failed to exchange, please increase the exchange slippage!":Object(ce.e)(j)?"Failed to exchange, Please try again later!":"Withdraw failed",h(Object(z.b)({open:!0,type:"error",message:k}));case 55:setTimeout((function(){C(!1),H({}),W(0)}),2e3);case 56:case"end":return e.stop()}}),e,null,[[7,48]])})));return function(){return e.apply(this,arguments)}}(),J=function(){if(""!==y&&"-"!==y&&!B()(y.replace(/ /g,""))){if(isNaN(Number(y)))return!1;var e=G()(y),t=e.multipliedBy(me.from(10).pow(m).toString());return!t.lte(0)&&(-1===e.multipliedBy(me.from(10).pow(m).toString()).toFixed().indexOf(".")&&!l.lt(me.from(t.toFixed())))}},q=J(),Q=!B()(t);return o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,{className:f.withdrawContainer},o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("p",{className:f.estimateText},"From")),o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("div",{className:f.inputLabelWrapper},o.a.createElement("div",{className:f.tokenInfo},o.a.createElement("span",{className:f.tokenName},d," VAULT")),o.a.createElement(T.a,{classes:{root:f.input},value:y,placeholder:"withdraw amount",maxEndAdornment:!0,onMaxClick:function(){v(Object(M.a)(l,m,{showAll:!0}))},onChange:function(e){try{v(e.target.value)}catch(t){v("")}},error:!R()(q)&&!q&&"0"!==y}))),o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("p",{className:f.estimateText,title:Object(M.a)(l,m,{showAll:!0})},"Balance:\xa0",o.a.createElement(A.a,{loading:c},Object(M.a)(l,m))))),o.a.createElement(s.a,{className:f.outputContainer},o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("p",{className:f.estimateText},"To")),o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("div",{className:f.estimateWrapper},o.a.createElement("span",null,d),o.a.createElement("span",{className:f.estimateBalanceNum},y)))),o.a.createElement(s.a,null,o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("div",{className:f.footerContainer},o.a.createElement(S.a,{disabled:!Q||Q&&(R()(q)||!q),color:"colorfull",onClick:K,style:{width:"100%",padding:"12px 16px"}},"Withdraw")))),o.a.createElement(k.a,{className:f.modal,open:N,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},o.a.createElement(L.a,{elevation:3,className:f.widthdrawLoadingPaper},o.a.createElement("div",{className:f.modalBody},B()(U)&&o.a.createElement(j.a,{color:"inherit"}),B()(U)?o.a.createElement("p",null,"In Withdrawing..."):o.a.createElement("p",null,"Withdraw Error !"),o.a.createElement(te.a,{classes:{root:f.root},alternativeLabel:!0,activeStep:I,connector:o.a.createElement(ne.a,null)},ie()(pe,(function(e,t){return o.a.createElement(Z.a,{key:t},o.a.createElement(re.a,{StepIconComponent:ae.a},e.title))}))),!B()(U)&&o.a.createElement("p",{style:{color:"error"===U.type?"red":"yellow"}},o.a.createElement(ee.a,{style:{verticalAlign:"bottom"}}),"\xa0\xa0\xa0",U.message),o.a.createElement(S.a,{color:"danger",onClick:function(){C(!1),H({}),W(0)}},"Cancel")))))}var he=r(1147),ge=r(1146),be=r(184),ye=r(294),ve=r(300),xe=r(975),we=r(1010),Ee=r(18),Oe=r(21),je=r(19),ke=r(912),Le=function(e){var t;return{container:Object(Oe.a)({zIndex:"12",color:"#FFFFFF",marginTop:"1rem",marginBottom:100},je.b),center:(t={justifyContent:"center",padding:"50px 72px 50px",backgroundColor:"#0c0735cc"},Object(Ee.a)(t,e.breakpoints.down("md"),{padding:"50px 16px 50px"}),Object(Ee.a)(t,"margin",0),t),wrapper:{padding:"5rem 3rem",borderRadius:"1.25rem",background:"linear-gradient(111.68deg, rgba(87, 97, 125, 0.2) 7.59%, rgba(255, 255, 255, 0.078) 102.04%)"},wrapperMobile:{padding:"3rem 2rem",borderRadius:"1.25rem",background:"linear-gradient(111.68deg, rgba(87, 97, 125, 0.2) 7.59%, rgba(255, 255, 255, 0.078) 102.04%)"},deposit:{padding:"1rem",border:"1px solid #F4ACF3",borderTopLeftRadius:"1.25rem",borderTopRightRadius:"1.25rem"},balance:{marginTop:"0.5rem",marginBottom:"2rem",padding:"1rem",border:"1px solid #F4ACF3",borderBottomLeftRadius:"1.25rem",borderBottomRightRadius:"1.25rem"},symbol:Object(Oe.a)({color:"#A68EFD",marginLeft:"1rem"},ke.a),footer:{},item:{color:"#fff",marginBottom:20,"& .MuiListItemIcon-root":{minWidth:"38px"}},centerItem:{width:"630px"},balanceCard:{position:"relative",display:"flex",alignItems:"center",justifyContent:"flex-start",margin:"0 0 1rem 0",textAlign:"left",padding:"2.8125rem 2.4375rem",background:"#323338",color:"#fff",borderRadius:"1.25rem"},check:{color:"#A68EFE"},balanceCardValue:{display:"flex",alignItems:"center",justifyContent:"flex-start",height:30,lineHeight:"30px",fontSize:26,fontWeight:"bold",color:"#fff",marginBottom:8},balanceCardLabel:{color:"#b2add1",fontSize:14},tokenInfo:{display:"flex",position:"absolute",right:12,top:9},addTokenIcon:{cursor:"pointer",marginLeft:"1rem",display:"flex"},scanToken:{width:24,height:"auto",cursor:"pointer",borderRadius:"50%",backgroundColor:"#fff"},hidden:{display:"none"},brand:{color:"#FFFFFF",textAlign:"left"},title:{fontSize:"4.2rem",fontWeight:"600",display:"inline-block",position:"relative"},subtitle:{fontSize:"1.313rem",width:"auto",margin:"10px 0 0"},main:{position:"relative",backgroundColor:"transparent"},mainRaised:{margin:"0 auto",marginTop:65},link:{textDecoration:"none"},textCenter:{textAlign:"center"},switchBar:{backgroundColor:"#91d5ff !important"},img:{width:"25px"},radioUnchecked:{width:"0px",height:"0px",padding:"7px",border:"1px solid #fff",borderRadius:"50%"},radioChecked:{width:"16px",height:"16px",border:"1px solid #fff",borderRadius:"50%"},radioRoot:{padding:"12px","&:hover":{backgroundColor:"unset"}},radio:{color:"#fff !important"},investCard:{padding:"20px 24px",borderRadius:6,backgroundColor:"rgba(39, 31, 114, 0.8)",overflow:"visible"},table:{backgroundColor:"#150752",border:"1px solid rgb(222, 217, 213)"},tableCell:{color:"#fff",fontSize:"12px",letterSpacing:"0.01071em"},switchBase:{color:"#ddd"},switchChecked:{color:"#40a9ff"},modal:{display:"flex",alignItems:"center",justifyContent:"center","& .MuiPaper-root":{minWidth:430,minHeight:120,padding:"32px 24px",fontSize:16,border:0,color:"#fff",boxShadow:"0px 15px 15px rgba(0, 0, 0, 0.05)",borderRadius:"20px",background:"#292B2E",outline:0,width:"550px"}},modalBody:{textAlign:"center"},stepContainer:{padding:20},stepItem:{color:"#fff"},tabsRoot:{padding:"0 20px"},tabsIndicator:{backgroundColor:"transparent",display:"flex",justifyContent:"center","& > span":{maxWidth:120,width:"100%",backgroundColor:"#fff"}},tabTextColor:{color:"#fff"},tabRoot:{width:"50%",fontSize:"16px",maxWidth:"none"},detailWrapper:{margin:"42px 0 0 0"},slider:{position:"absolute",top:"50px",left:"calc(50% - 33rem)",backgroundColor:"#271f72",color:"azure"},text:{color:"azure"},spliter:{display:"flex",justifyContent:"center",bottom:0,height:2,position:"absolute",transition:"all 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",width:"54%",backgroundColor:"#fff"}}},Ae=Object(l.a)(Le),Te=V.a,Se=[ye.c];t.default=Object(xe.a)((function(e){var t=Ae(),r=Object(O.b)(),i=Object(w.a)("(max-width: 960px)"),l=e.address,h=e.userProvider,b=e.VAULT_FACTORY_ADDRESS,v=e.VAULT_FACTORY_ABI,E=e.UNISWAPV3_RISK_ON_VAULT,j=e.UNISWAPV3_RISK_ON_HELPER,k=Object(n.useState)(!1),L=Object(a.a)(k,2),A=L[0],T=L[1],S=Object(n.useState)(),N=Object(a.a)(S,2),C=N[0],_=N[1],F=Object(n.useState)(),R=Object(a.a)(F,2),I=R[0],W=R[1],D=Object(n.useState)(Te.from(0)),V=Object(a.a)(D,2),U=V[0],G=V[1],z=Object(n.useState)(0),M=Object(a.a)(z,2),H=M[0],K=M[1],J=Object(n.useState)(""),q=Object(a.a)(J,2),Q=q[0],Z=q[1],$=Object(n.useState)(!0),ee=Object(a.a)($,2),te=ee[0],re=ee[1],ae=Object(O.c)((function(e){return e.investReducer.currentTab})),ne=function(e){me(),r(Object(be.b)(e))},oe=Object(we.a)(b,v,C,E,j,h),ie=oe.baseInfo,ce=oe.queryBaseInfo,le=ie.estimatedTotalAssets,se=ie.manageFeeBps,ue=ie.minInvestment,me=Object(n.useCallback)((function(){if(!B()(I)&&!B()(C)){T(!0);var e=new P.b(I,Y.j,h);return Promise.all([e.balanceOf(l),e.decimals(),e.symbol()]).then((function(e){var t=Object(a.a)(e,3),r=t[0],n=t[1],o=t[2];G(r),K(n),Z(o)})).finally((function(){setTimeout((function(){T(!1)}),500)})),me}}),[I,C,l,h]);return Object(n.useEffect)((function(){me(),setInterval(me,3e4)}),[me]),o.a.createElement("div",{className:t.container},te&&o.a.createElement(ge.a,{tokens:Se,address:l,userProvider:h,VAULT_FACTORY_ADDRESS:b,VAULT_FACTORY_ABI:v,vaultChangeHandle:function(e,t){re(!1),_(e),W(t)}}),!te&&o.a.createElement(s.a,{spacing:0},o.a.createElement(u.a,{xs:2,sm:2,md:3,style:{paddingLeft:"2rem"}},o.a.createElement(m.a,null,o.a.createElement(d.a,{key:"My Account",button:!0,className:c()(t.item),onClick:function(){return ne(ve.a.account)}},o.a.createElement(p.a,null,o.a.createElement(g.a,{style:{color:ae===ve.a.account?"#A68EFE":"#fff"}})),!i&&o.a.createElement(f.a,{primary:"My Account",className:c()(ae===ve.a.account?t.check:t.text)})),o.a.createElement(d.a,{key:"Deposit",button:!0,className:c()(t.item,ae===ve.a.deposit&&t.check),onClick:function(){return ne(ve.a.deposit)}},o.a.createElement(p.a,null,o.a.createElement(y.a,{style:{color:ae===ve.a.deposit?"#A68EFE":"#fff"}})),!i&&o.a.createElement(f.a,{primary:"Deposit",className:c()(ae===ve.a.deposit?t.check:t.text)})),o.a.createElement(d.a,{key:"Withdraw",button:!0,className:c()(t.item),onClick:function(){return ne(ve.a.withdraw)}},o.a.createElement(p.a,null,o.a.createElement(x.a,{style:{color:ae===ve.a.withdraw?"#A68EFE":"#fff"}})),!i&&o.a.createElement(f.a,{primary:"Withdraw",className:c()(ae===ve.a.withdraw?t.check:t.text)})))),ae===ve.a.deposit&&o.a.createElement(u.a,{xs:9,sm:9,md:6},o.a.createElement("div",{className:i?t.wrapperMobile:t.wrapper},o.a.createElement(X,{address:l,estimatedTotalAssets:le,wantTokenBalance:U,wantTokenDecimals:H,userProvider:h,wantTokenSymbol:Q,wantTokenForVault:I,VAULT_ADDRESS:C,VAULT_ABI:E,isBalanceLoading:A,minInvestment:ue,manageFeeBps:se,onDepositSuccess:function(){ce(),me()}}))),ae===ve.a.withdraw&&o.a.createElement(u.a,{xs:9,sm:9,md:6},o.a.createElement("div",{className:i?t.wrapperMobile:t.wrapper},o.a.createElement(fe,{address:l,userProvider:h,estimatedTotalAssets:le,wantTokenDecimals:H,wantTokenSymbol:Q,VAULT_ADDRESS:C,VAULT_ABI:E,isBalanceLoading:A,reloadBalance:me,onWithdrawSuccess:function(){ce(),me()}}))),ae===ve.a.account&&o.a.createElement(u.a,{xs:9,sm:9,md:9},o.a.createElement("div",{className:i?t.wrapperMobile:t.wrapper,style:{background:"none",paddingTop:"1rem",paddingLeft:0}},!B()(l)&&!B()(C)&&o.a.createElement(he.a,{type:"USDr",userProvider:h,VAULT_FACTORY_ABI:v,personalVaultAddress:C,wantTokenSymbol:Q,VAULT_FACTORY_ADDRESS:b,UNISWAPV3_RISK_ON_VAULT:E,UNISWAPV3_RISK_ON_HELPER:j})))))}),"usdr")}}]);
//# sourceMappingURL=20.893c4da5.chunk.js.map