{"version":3,"sources":["helpers/swap-util.js","components/TokenItem/style.js","components/TokenItem/index.jsx","components/ApproveArray/style.js","components/ApproveArray/ApproveArrayV2.jsx","constants/abi.js","hooks/useAbiResolver.js","hooks/useVersionWapper.js","components/Echarts/options/line/lineSimple.js","components/Echarts/options/optionHelper.js","components/Echarts/options/line/getLineEchartOpt.js","constants/apy-duration.js","constants/usdi.js","hooks/usePersonalData.js","components/SimpleSelect/style.js","components/SimpleSelect/index.jsx","abis sync /^/.//.*$","helpers/number-format.js","components/LoadingComponent/index.jsx","components/CustomTextField/style.js","components/CustomTextField/index.jsx","helpers/error-handler.js","constants/big-number.js","components/Stepper/Stepper.jsx","components/Stepper/StepLabel.jsx","components/Stepper/StepIcon.jsx","components/Stepper/StepConnector.jsx","assets/jss/common.js","helpers/time-util.js","constants/cron.js","services/api-service.js","constants/ethi.js","constants/vault.js","hooks/useRedeemFeeBps.js","components/Card/index.jsx","components/Echarts/index.js","components/MyStatement/style.js","hooks/useVault.js"],"names":["SUPPORTS","getProtocolsFromBestRouterFor1inchV4","bestRoute","nextProtocols","resp","get","isEmpty","name","push","getProtocolsFromBestRouterForParaswap","reduce","result","element","componentsStyle","container","main","padding","color","background","borderRadius","title","paddingBottom","fontSize","lineHeight","textAlign","tokenLogo","width","marginRight","approveContainer","maxHeight","border","backgroundColor","overflowY","approveItemWrapper","success","swappingContainer","margin","swapSuccessContainer","swapErrorContainer","height","cursor","approveItem","display","approveButton","balanceText","errorText","errorContainer","successContainer","isSwappingContainer","reciveContainer","slippage","marginTop","slippageTitlte","alignItems","estimateContainer","estimateTitle","estimateBalance","flexDirection","justifyContent","tokenList","overflow","arrow","buttonGroup","okWrapper","paddingLeft","okButton","cancelButton","addToken","swapError","marginBottom","textOverflow","whiteSpace","loading","animation","reloadIcon","verticalAlign","sycIndex","Contract","ethers","BigNumber","useStyles","makeStyles","styles","BN_0","from","forwardRef","props","ref","classes","token","userAddress","userProvider","receiveToken","exchangePlatformAdapters","exchangeManager","receiveTokenDecimals","EXCHANGE_AGGREGATOR_ABI","style","disabled","onChange","onStaticCallFinish","address","amount","useState","isReload","setIsReload","value","setValue","balance","setBalance","decimals","setDecimals","allowances","setAllowances","exclude","setExclude","undefined","swapInfo","setSwapInfo","isSwapInfoFetching","setIsSwapInfoFetching","isStaticCalling","setIsStaticCalling","done","setDone","retryTimes","setRetryTimes","isApproving","setIsApproving","isReciveToken","isFetching","isOverMaxRetry","console","groupCollapsed","log","toString","groupEnd","resetState","useCallback","setTimeout","isApproveEnough","ETH_ADDRESS","BN","multipliedBy","lte","error","staticCall","debounce","constract","signer","getSigner","constractWithSigner","connect","bestSwapInfo","platform","method","encodeExchangeArgs","info","callStatic","swap","then","catch","isNumber","isString","includes","func","Error","getProtocolsFromBestRouter","arrayItem","oldPlatform","newPlatform","concat","nextExclude","finally","approve","isNil","contract","IERC20_ABI","contractWithUser","nextValue","toFixed","allowance","allowanceAmount","gt","WETH_ADDRESS","tx","wait","reload","increaseAllowance","sub","e","code","Promise","reject","isSwapError","isErrorValue","nextFromValueString","indexOf","isEmptyValue","Number","handleInputChange","num","isNaN","nextAllowance","balanceOf","nextBalance","nextDecimals","pow","queryBestSwapInfo","swapAmount","fromToken","toToken","fromTokenConstract","parseInt","toTokenConstract","nextExchangeExtraParams","assign","EXCHANGE_EXTRA_PARAMS","testAdapter","oneInchV4","paraswap","excludeProtocols","uniq","excludeDEXS","split","join","getBestSwapInfo","parseFloat","ORACLE_ADDITIONAL_SLIPPAGE","srcToken","dstToken","receiver","estimateWithValue","nextSwapInfo","useEffect","isGetSwapInfoSuccess","isSwapSuccess","isValidSlippageValue","cancel","isApproveEnoughValue","useImperativeHandle","key","className","classNames","CustomTextField","root","input","placeholder","maxEndAdornment","InputProps","startAdornment","onClick","position","top","left","src","event","target","onMaxClick","float","toTokenAmount","ApproveArrayV2","dispatch","useDispatch","isEthi","tokens","EXCHANGE_ADAPTER_ABI","handleClose","refArray","onSlippageChange","map","useRef","setExchangePlatformAdapters","USDT_ADDRESS","setReceiveToken","setSlippage","isSwapping","setIsSwapping","setCount","callStateArray","setCallStateArray","swapInfoArray","item","someFetching","some","index","isValidSlippage","someErrorValue","receiveAmount","rs","current","add","noNeedSwap","size","first","getExchangePlatformAdapters","exchangeAggregator","getExchangeAdapters","adapters","_exchangeAdapters","exchangeAdapters","identifier","selectOptions","label","img","decimal","BN_18","BN_6","USDC_ADDRESS","DAI_ADDRESS","find","el","receiveTokenAmount","approveAll","i","length","enough","message","errorTextOutput","warmDialog","open","type","batchSwap","nextSwapArray","compact","data","swapDescription","contractWithSigner","MULTIPLE_OF_GAS","estimateGas","gas","gasLimit","Math","ceil","maxGasLimit","MAX_GAS_LIMIT","errorMsg","isLossMuch","onChildStateChange","random","bool","nextArray","allFinish","every","someError","exchangeManagerContract","getAdapters","GridContainer","GridItem","xs","sm","md","SimpleSelect","options","v","onReceiveChange","Button","startIcon","ABI_SEQUENCE","abiLoader","version","file","require","array","findIndex","useAbiResolver","abiPrefix","VAULT_BUFFER_ABI","VAULT_ABI","PRICE_ORCALE_ABI","useVersionWapper","WrappedComponent","id","VAULTS","abi","abi_version","nextProps","obj","showDataZoom","seriesData","dataZoom","option","textStyle","grid","right","bottom","containLabel","tooltip","trigger","borderWidth","xAxis","xAxisData","yAxis","series","seriesName","lineStyle","colorStops","offset","smooth","step","hasdata","graphic","silent","invisible","fill","fontWeight","text","getNoDataGraphic","getLineEchartOpt","dataValueKey","format","needMinMax","yAxisMin","min","yAxisMax","max","tootlTipSuffix","tootlTipFormat","xAxisLabels","forEach","o","moment","date","lineSimple","axisLabel","formatter","splitLine","connectNulls","showSymbol","filter","cap","isUndefined","APY_DURATION","USDI_BN_DECIMALS","usePersonalData","chain","vault","tokenType","setData","setLoading","account","resolve","params","chainId","subtract","utc","all","getAccountApyByAddress","duration","getPersonTvlArray","getMonthProfits","getProfits","getLatestProfit","profit","day7Apy","day30Apy","tvls","monthProfits","latestProfit","balanceOfToken","displayDecimals","VAULT_TYPE","USDi","TOKEN_DISPLAY_DECIMALS","ETHi","ETHI_DISPLAY_DECIMALS","monthProfitsData","month","utcOffset","reverse","content","dataMerge","toLowerCase","dataSource","selectWrapper","selectTrigger","paddingRight","triggerLabelWrapper","triggerLabel","caret","transition","expandLess","transform","selectPop","minWidth","zIndex","transformOrigin","boxShadow","selectPopVisible","selectItem","optImg","optMultiImgWrapper","optMultiImg","marginLeft","optLabel","Select","popVisible","setPopVisible","selectedOpt","opt","ClickAwayListener","onClickAway","isArray","alt","selectActiveItem","handlePopSelect","webpackContext","req","webpackContextResolve","__webpack_require__","keys","Object","module","exports","precision","isNull","precisionBN","isZero","results","div","isInteger","args","formatBalance","showAll","decimalsValue","fixedValue","dotIndex","padEnd","isLessThenDisplay","eq","lt","displayBalance","Loading","children","viewBox","preserveAspectRatio","cx","cy","r","attributeName","repeatCount","dur","calcMode","keyTimes","values","keySplines","begin","borderColor","dangerColor","endAdornment","endAdornmentActive","variant","isMax","restProps","styleClasses","rootClass","restClass","TextField","originalError","isAd","endsWith","isEs","isRp","isMaxLoss","isExchangeFail","isDistributing","isLessThanMinValue","BocStepper","withStyles","Stepper","BocStepLabel","active","completed","StepLabel","useQontoStepIconStyles","circle","BocStepIcon","clsx","BocStepConnector","alternativeLabel","line","borderTopWidth","StepConnector","gradientText","backgroundImage","tz","getLastPossibleRebaseTime","parser","parseExpression","next","getTime","ETH","NET_WORKS","getDefiRate","axios","BOC_SERVER","getAPY","ENV_NETWORK_TYPE","validChainId","limit","apy","getSegmentProfit","segmentType","ETHI_BN_DECIMALS","ETHI_PROFITS_DISPLAY_DECIMALS","useRedeemFeeBps","VAULT_ADDRESS","setError","redeemFeeBps","action","flex","alignSelf","bullet","pos","unit","textFillColor","footer","paddingTop","header","CardComponent","tip","loadingOption","fontFamily","component","loaddingCom","minHeight","LineEchart","loadable","fallback","BarEchart","lineChart","barChart","groupedOutlinedPrimary","groupButtonCheck","useVault","setExchangeManager","totalAsset","setTotalAsset","rebaseThreshold","setRebaseThreshold","underlyingUnitsPerShare","setUnderlyingUnitsPerShare","minimumInvestmentAmount","setMinimumInvestmentAmount","useUserAddress","valid","queryBaseInfo","vaultContract","requestArray","totalAssets","totalDebt","fetchUnderlyingUnitsPerShare","updateRebaseThreshold","updateMinimumInvestmentAmount"],"mappings":"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","file":"static/js/2.9a16aa4f.chunk.js","sourcesContent":["// === Utils === //\nimport get from 'lodash/get'\nimport isEmpty from 'lodash/isEmpty'\nimport isNumber from 'lodash/isNumber'\nimport isString from 'lodash/isString'\nimport reduce from 'lodash/reduce'\n\nexport const ONEINCH_V4 = 'oneInchV4'\nexport const PARASWAP = 'paraswap'\n\nexport const SUPPORTS = [PARASWAP, ONEINCH_V4]\nexport const getProtocolsFromBestRouter = (bestSwapInfo = {}) => {\n  if (isEmpty(bestSwapInfo) || isNumber(bestSwapInfo) || isString(bestSwapInfo)) return []\n  const { name, bestRoute } = bestSwapInfo\n  if (SUPPORTS.includes(name)) {\n    let func\n    switch (name) {\n      case ONEINCH_V4:\n        func = getProtocolsFromBestRouterFor1inchV4\n        break\n      case PARASWAP:\n        func = getProtocolsFromBestRouterForParaswap\n        break\n      default:\n    }\n    return func(bestRoute)\n  }\n  throw new Error('not support')\n}\n\nexport const getProtocolsFromBestRouterFor1inchV4 = bestRoute => {\n  const nextProtocols = []\n  const resp = get(bestRoute, '0.0.0')\n  if (isEmpty(resp)) return nextProtocols\n  const { name } = resp\n  nextProtocols.push(name)\n  return nextProtocols\n}\n\nexport const getProtocolsFromBestRouterForParaswap = bestRoute => {\n  const nextProtocols = reduce(\n    bestRoute,\n    (result, element) => {\n      const name = get(element, 'swaps[0].swapExchanges[0].exchange', '')\n      result.push(name)\n      return result\n    },\n    []\n  )\n  return nextProtocols\n}\n","import { container } from '@/assets/jss/material-kit-react.js'\n\nconst componentsStyle = () => ({\n  container,\n  main: {\n    padding: '2rem 3rem',\n    color: '#A0A0A0',\n    background: 'linear-gradient(111.68deg, #2C2F36 7.59%, #333437 102.04%)',\n    borderRadius: '2.5rem'\n  },\n  title: {\n    paddingBottom: '1.5rem',\n    fontSize: '1.5rem',\n    lineHeight: '1.5rem',\n    textAlign: 'center'\n  },\n  tokenLogo: {\n    width: 30,\n    borderRadius: '50%',\n    marginRight: 8\n  },\n  approveContainer: {\n    maxHeight: '20rem',\n    padding: '2rem 1.25rem',\n    border: '1px solid #A68EFD',\n    borderRadius: '0.5rem 0.5rem 0px 0px',\n    backgroundColor: '#1F2023',\n    overflowY: 'auto'\n  },\n  approveItemWrapper: {\n    paddingBottom: '0.5rem',\n    '&:last-child': {\n      padding: 0\n    }\n  },\n  success: {\n    border: '1px solid forestgreen'\n  },\n  swappingContainer: {\n    margin: 0,\n    color: '#A68EFD',\n    textAlign: 'center',\n    fontSize: '0.875rem',\n    lineHeight: '0.875rem'\n  },\n  swapSuccessContainer: {\n    margin: 0,\n    color: '#56CC8C',\n    textAlign: 'center',\n    fontSize: '0.875rem',\n    lineHeight: '0.875rem'\n  },\n  swapErrorContainer: {\n    height: '2rem',\n    border: '1px solid #F36767',\n    borderRadius: '0.625rem',\n    margin: 0,\n    color: '#F36767',\n    textAlign: 'center',\n    fontSize: '0.875rem',\n    lineHeight: '2rem',\n    cursor: 'pointer'\n  },\n  approveItem: {\n    textAlign: 'left',\n    display: 'flex'\n  },\n  approveButton: {\n    margin: '12px 8px 8px'\n  },\n  balanceText: {\n    textAlign: 'left',\n    fontSize: '0.875rem',\n    lineHeight: '0.875rem'\n  },\n  errorText: {\n    color: '#ff7875'\n  },\n  errorContainer: {\n    border: '1px solid #ff7875',\n    margin: '2px 0'\n  },\n  successContainer: {\n    border: '1px solid forestgreen',\n    margin: '2px 0'\n  },\n  isSwappingContainer: {\n    border: '1px solid #A68EFE',\n    margin: '2px 0'\n  },\n  reciveContainer: {\n    background: 'linear-gradient(223.3deg, #A68EFD 20.71%, #F4ACF3 103.56%)'\n  },\n  slippage: {\n    padding: '0 1.25rem',\n    border: '1px solid #A68EFD',\n    borderRadius: '0px 0px 0.5rem 0.5rem',\n    marginTop: '0.625rem',\n    backgroundColor: '#1F2023'\n  },\n  slippageTitlte: {\n    display: 'flex',\n    alignItems: 'center'\n  },\n  estimateContainer: {\n    padding: '2rem 1.25rem',\n    border: '1px solid #A68EFD',\n    marginTop: '0.625rem',\n    backgroundColor: '#1F2023'\n  },\n  estimateTitle: {\n    paddingBottom: '0.75rem'\n  },\n  estimateBalance: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'flex-end'\n  },\n  tokenList: {\n    padding: '0.5rem',\n    overflow: 'auto',\n    border: '1px solid rgb(166, 142, 254)',\n    borderRadius: '0.5rem'\n  },\n  arrow: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  buttonGroup: {\n    marginTop: '0.625rem'\n  },\n  okWrapper: {\n    paddingLeft: '1rem'\n  },\n  okButton: {\n    width: '100%'\n  },\n  cancelButton: {\n    width: '100%'\n  },\n  addToken: {\n    cursor: 'pointer'\n  },\n  swapError: {\n    display: 'flex',\n    alignItems: 'center',\n    marginBottom: '1rem',\n    color: '#ff7875',\n    textAlign: 'left'\n  },\n  textOverflow: {\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap'\n  },\n  loading: {\n    animation: 'loading 1s linear infinite'\n  },\n  reloadIcon: {\n    cursor: 'pointer',\n    verticalAlign: 'text-bottom'\n  }\n})\n\nexport default componentsStyle\n","/* eslint-disable */\nimport React, { useCallback, useState, useEffect, forwardRef, useImperativeHandle } from 'react'\nimport classNames from 'classnames'\nimport { makeStyles } from '@material-ui/core/styles'\n\n// === Components === //\nimport CustomTextField from '@/components/CustomTextField'\nimport Loading from '@/components/LoadingComponent'\nimport AddIcon from '@material-ui/icons/Add'\nimport RefreshIcon from '@material-ui/icons/Refresh'\n\n// === Utils === //\nimport * as ethers from 'ethers'\nimport get from 'lodash/get'\nimport map from 'lodash/map'\nimport some from 'lodash/some'\nimport size from 'lodash/size'\nimport uniq from 'lodash/uniq'\nimport first from 'lodash/first'\nimport isNil from 'lodash/isNil'\nimport every from 'lodash/every'\nimport assign from 'lodash/assign'\nimport reduce from 'lodash/reduce'\nimport isEmpty from 'lodash/isEmpty'\nimport debounce from 'lodash/debounce'\nimport compact from 'lodash/compact'\nimport findIndex from 'lodash/findIndex'\nimport isEqual from 'lodash/isEqual'\nimport isNumber from 'lodash/isNumber'\nimport min from 'lodash/min'\nimport { addToken } from '@/helpers/wallet'\nimport { toFixed } from '@/helpers/number-format'\nimport { getBestSwapInfo } from 'piggy-finance-utils'\nimport BN from 'bignumber.js'\nimport { warmDialog } from '@/reducers/meta-reducer'\nimport { getProtocolsFromBestRouter } from '@/helpers/swap-util'\nimport { errorTextOutput, isLossMuch } from '@/helpers/error-handler'\n\n// === Constants === //\nimport {\n  IERC20_ABI,\n  EXCHANGE_EXTRA_PARAMS,\n  ORACLE_ADDITIONAL_SLIPPAGE,\n  USDT_ADDRESS,\n  USDC_ADDRESS,\n  DAI_ADDRESS,\n  MULTIPLE_OF_GAS,\n  MAX_GAS_LIMIT\n} from '@/constants'\nimport { ETH_ADDRESS, WETH_ADDRESS } from '@/constants/tokens'\nimport { BN_6, BN_18 } from '@/constants/big-number'\n\n// === Styles === //\nimport styles from './style'\nlet sycIndex = 0\n\nconst { Contract, BigNumber } = ethers\nconst useStyles = makeStyles(styles)\nconst MAX_RETRY_TIME = 2\nconst BN_0 = BigNumber.from('0')\n\nconst TokenItem = (props, ref) => {\n  const classes = useStyles()\n  const {\n    token = {},\n    userAddress,\n    userProvider,\n    slippage,\n    receiveToken,\n    exchangePlatformAdapters,\n    exchangeManager,\n    receiveTokenDecimals,\n    EXCHANGE_AGGREGATOR_ABI,\n    style,\n    disabled,\n    onChange,\n    onStaticCallFinish\n  } = props\n  const { address, amount } = token\n\n  const [isReload, setIsReload] = useState(false)\n  const [value, setValue] = useState('')\n  const [balance, setBalance] = useState(BN_0)\n  const [decimals, setDecimals] = useState(0)\n  const [allowances, setAllowances] = useState(BN_0)\n  const [exclude, setExclude] = useState({})\n  const [swapInfo, setSwapInfo] = useState(undefined)\n  const [isSwapInfoFetching, setIsSwapInfoFetching] = useState(false)\n  const [isStaticCalling, setIsStaticCalling] = useState(false)\n  const [done, setDone] = useState(false)\n  const [retryTimes, setRetryTimes] = useState(0)\n  const [isApproving, setIsApproving] = useState(false)\n\n  const isReciveToken = token.address === receiveToken\n  const isFetching = !isReciveToken && (isSwapInfoFetching || isStaticCalling)\n  const isOverMaxRetry = retryTimes > MAX_RETRY_TIME\n\n  console.groupCollapsed(`init state:${address}:${sycIndex++}`)\n  console.log('isReload=', isReload)\n  console.log('value=', value)\n  console.log('balance=', balance.toString())\n  console.log('decimals=', decimals.toString())\n  console.log('allowances=', allowances.toString())\n  console.log('exclude=', exclude)\n  console.log('swapInfo=', swapInfo)\n  console.log('isSwapInfoFetching=', isSwapInfoFetching)\n  console.log('isStaticCalling=', isStaticCalling)\n  console.log('done=', done)\n  console.log('retryTimes=', retryTimes)\n  console.log('isApproving=', isApproving)\n  console.log('isReciveToken=', isReciveToken)\n  console.log('userAddress=', userAddress)\n  console.log('slippage=', slippage)\n  console.log('token=', token)\n  console.log('exchangePlatformAdapters=', exchangePlatformAdapters)\n  console.log('exchangeManager=', exchangeManager)\n  console.log('receiveTokenDecimals=', receiveTokenDecimals.toString())\n  console.groupEnd(`init state:${address}:${sycIndex++}`)\n\n  const resetState = useCallback(() => {\n    setIsReload(false)\n    setExclude({})\n    setSwapInfo(undefined)\n    setIsSwapInfoFetching(false)\n    setIsStaticCalling(false)\n    setDone(false)\n    setRetryTimes(0)\n    setIsApproving(false)\n    setTimeout(() => {\n      onChange()\n    })\n  }, [])\n\n  const isApproveEnough = useCallback(() => {\n    if (token.address === ETH_ADDRESS || isReciveToken) return true\n    try {\n      const nextValue = new BN(value).multipliedBy(decimals.toString())\n      const result = nextValue.lte(allowances)\n      return result\n    } catch (error) {\n      return false\n    }\n  }, [token, value, allowances, decimals, isReciveToken])\n\n  const staticCall = useCallback(\n    debounce(() => {\n      console.groupCollapsed(`staticCall call:${address}:${++sycIndex}`)\n      console.log('swapInfo=', swapInfo)\n      const constract = new Contract(exchangeManager, EXCHANGE_AGGREGATOR_ABI, userProvider)\n      const signer = userProvider.getSigner()\n      const constractWithSigner = constract.connect(signer)\n\n      const {\n        bestSwapInfo: { platform, method, encodeExchangeArgs },\n        info\n      } = swapInfo\n\n      setIsStaticCalling(true)\n      setIsSwapInfoFetching(false)\n      onChange()\n      constractWithSigner.callStatic\n        .swap(platform, method, encodeExchangeArgs, info)\n        .then(() => {\n          console.log('staticCall success')\n          console.groupEnd(`staticCall call:${address}:${sycIndex}`)\n          setDone(true)\n          onStaticCallFinish(true)\n        })\n        .catch(error => {\n          console.log('staticCall error', error)\n          console.groupEnd(`staticCall call:${address}:${sycIndex}`)\n          const { bestSwapInfo } = swapInfo\n          const [arrayItem] = getProtocolsFromBestRouter(bestSwapInfo)\n          const { name } = bestSwapInfo\n          const oldPlatform = exclude[name] || [arrayItem]\n          const newPlatform = oldPlatform.includes(arrayItem) ? oldPlatform : oldPlatform.concat([arrayItem])\n          const nextExclude = {\n            ...exclude,\n            [name]: newPlatform\n          }\n          setExclude(nextExclude)\n          setSwapInfo(undefined)\n          setRetryTimes(retryTimes + 1)\n          setDone(false)\n          setIsSwapInfoFetching(retryTimes + 1 <= MAX_RETRY_TIME)\n          onStaticCallFinish(false)\n        })\n        .finally(() => {\n          setIsStaticCalling(false)\n          onChange()\n        })\n    }, 500),\n    [userProvider, swapInfo, onChange, exclude, retryTimes, onStaticCallFinish]\n  )\n\n  const approve = async () => {\n    // ETH no need approve\n    if (isEmpty(token) || isNil(value) || value === '0') return\n    console.groupCollapsed(`approve call:${address}:${++sycIndex}`)\n    const signer = userProvider.getSigner()\n    const contract = new Contract(address, IERC20_ABI, userProvider)\n    const contractWithUser = contract.connect(signer)\n    let nextValue\n    try {\n      nextValue = BigNumber.from(new BN(value).multipliedBy(decimals.toString()).toFixed())\n    } catch (e) {\n      return\n    }\n    const allowanceAmount = await contractWithUser.allowance(userAddress, exchangeManager)\n    // If deposit amount greater than allow amount, reset amount\n    if (nextValue.gt(allowanceAmount)) {\n      // If allowance equal 0, approve nextAmount, otherwise increaseAllowance\n      if (allowanceAmount.gt(0)) {\n        if (address === WETH_ADDRESS) {\n          // WETH don't support increaseAllowance\n          return contractWithUser\n            .approve(exchangeManager, 0)\n            .then(tx => tx.wait())\n            .then(() => {\n              reload()\n              return contractWithUser.approve(exchangeManager, nextValue).then(tx => tx.wait())\n            })\n        }\n        return contractWithUser\n          .increaseAllowance(exchangeManager, nextValue.sub(allowanceAmount))\n          .then(tx => tx.wait())\n          .catch(e => {\n            // cancel by user\n            if (e.code === 4001) {\n              return Promise.reject(e)\n            }\n            // If increase failed, approve 0 and approve nextAmounts\n            return contractWithUser\n              .approve(exchangeManager, 0)\n              .then(tx => tx.wait())\n              .then(() => {\n                reload()\n                return contractWithUser.approve(exchangeManager, nextValue).then(tx => tx.wait())\n              })\n          })\n      } else {\n        return contractWithUser\n          .approve(exchangeManager, nextValue)\n          .then(tx => tx.wait())\n          .catch(e => {\n            // cancel by user\n            if (e.code === 4001) {\n              return Promise.reject(e)\n            }\n          })\n      }\n    }\n    console.groupEnd(`approve call:${address}:${sycIndex}`)\n  }\n\n  // item fetch swap path failed\n  const isSwapError = !isFetching && !isReciveToken && isOverMaxRetry\n\n  // Check if value is gt balance, or lt 1 decimal\n  const isErrorValue = () => {\n    if (!value) {\n      return false\n    }\n    if (!decimals) {\n      return false\n    }\n    const nextFromValueString = new BN(value).multipliedBy(decimals.toString())\n    return !isReciveToken && !isEmpty(value) && (nextFromValueString.gt(balance) || nextFromValueString.toFixed().indexOf('.') !== -1)\n  }\n\n  // Check if value is empty\n  const isEmptyValue = () => {\n    return !isReciveToken && (isEmpty(value) || Number(value) === 0)\n  }\n\n  // check the slippage is valid or not\n  const isValidSlippage = () => {\n    if (isNaN(slippage)) return false\n    if (slippage < 0.01 || slippage > 45) return false\n    return true\n  }\n\n  const handleInputChange = value => {\n    const num = Number(value)\n    if (isNaN(num) || num < 0) {\n      return\n    }\n    setValue(value)\n    setSwapInfo(undefined)\n    setIsStaticCalling(false)\n    setRetryTimes(0)\n    setExclude({})\n    setDone(false)\n    setTimeout(() => {\n      onChange()\n    })\n  }\n\n  const reload = useCallback(async () => {\n    const { address } = token\n    console.groupCollapsed(`reload call:${address}:${++sycIndex}`)\n    setIsReload(true)\n\n    const contract = new Contract(address, IERC20_ABI, userProvider)\n    const nextAllowance = (await contract.allowance(userAddress, exchangeManager).catch(() => BN_0)).toString()\n    const nextBalance = (await contract.balanceOf(userAddress).catch(() => BN_0)).toString()\n    const nextDecimals = BigNumber.from(10).pow(await contract.decimals().catch(() => BN_0))\n\n    setBalance(nextBalance)\n    setDecimals(nextDecimals)\n    setAllowances(nextAllowance)\n    setIsReload(false)\n    console.groupEnd(`reload call:${address}:${sycIndex}`)\n  }, [token, userAddress, exchangeManager])\n\n  const reloadSwap = () => {\n    console.groupCollapsed(`reloadSwap call:${address}:${++sycIndex}`)\n    setSwapInfo(undefined)\n    setIsSwapInfoFetching(true)\n    setRetryTimes(0)\n    onStaticCallFinish(undefined)\n    console.groupEnd(`reloadSwap call:${address}:${sycIndex}`)\n  }\n\n  const queryBestSwapInfo = useCallback(async () => {\n    if (isNil(decimals) || isEmptyValue() || value === '0' || isReciveToken) {\n      return\n    }\n    console.groupCollapsed(`queryBestSwapInfo call:${address}:${++sycIndex}`)\n    console.log('exclude=', exclude)\n    console.log('value=', value)\n    console.log('swapInfo=', swapInfo)\n    const nextFromValueString = new BN(value).multipliedBy(decimals.toString()).toFixed()\n    if (nextFromValueString.indexOf('.') !== -1) return\n    const swapAmount = BigNumber.from(nextFromValueString)\n    let fromToken = {}\n    let toToken = {}\n    if (token.address === ETH_ADDRESS) {\n      fromToken = {\n        decimals: 18,\n        address: token.address\n      }\n    } else {\n      const fromTokenConstract = new Contract(token.address, IERC20_ABI, userProvider)\n      fromToken = {\n        decimals: parseInt((await fromTokenConstract.decimals()).toString()),\n        address: token.address\n      }\n    }\n    if (receiveToken === ETH_ADDRESS) {\n      toToken = {\n        decimals: 18,\n        address: receiveToken\n      }\n    } else {\n      const toTokenConstract = new Contract(receiveToken, IERC20_ABI, userProvider)\n      toToken = {\n        decimals: parseInt((await toTokenConstract.decimals()).toString()),\n        address: receiveToken\n      }\n    }\n    console.groupCollapsed(`fetch best swap path: ${fromToken.address}-${toToken.address}:${swapAmount}:${++sycIndex}`)\n    let nextExchangeExtraParams = assign({}, EXCHANGE_EXTRA_PARAMS, isEmpty(exchangePlatformAdapters.testAdapter) ? {} : {})\n\n    if (!isEmpty(exclude)) {\n      console.log(`exclude=`, exclude)\n      const { oneInchV4 = [], paraswap = [] } = exclude\n      nextExchangeExtraParams = assign({}, nextExchangeExtraParams, {\n        oneInchV4: {\n          ...nextExchangeExtraParams.oneInchV4,\n          excludeProtocols: uniq(oneInchV4.concat(nextExchangeExtraParams.oneInchV4.excludeProtocols))\n        },\n        paraswap: {\n          ...nextExchangeExtraParams.paraswap,\n          excludeDEXS: uniq([...paraswap, nextExchangeExtraParams.paraswap.excludeDEXS.split(',')]).join(',')\n        }\n      })\n    }\n    const bestSwapInfo = await getBestSwapInfo(\n      fromToken,\n      toToken,\n      swapAmount,\n      parseInt(100 * parseFloat(slippage)) || 0,\n      ORACLE_ADDITIONAL_SLIPPAGE,\n      exchangePlatformAdapters,\n      nextExchangeExtraParams\n    ).catch(error => {\n      throw new Error(error)\n    })\n    console.groupEnd(`fetch best swap path: ${fromToken.address}-${toToken.address}:${swapAmount}:${sycIndex}`)\n    if (isEmpty(bestSwapInfo)) {\n      throw new Error('fetch error')\n    }\n    console.groupEnd(`queryBestSwapInfo call:${sycIndex}`)\n    return {\n      bestSwapInfo,\n      info: {\n        amount: swapAmount,\n        srcToken: token.address,\n        dstToken: receiveToken,\n        receiver: userAddress\n      }\n    }\n  }, [token, value, decimals, exchangePlatformAdapters, exclude, receiveToken, isReciveToken, slippage])\n\n  const estimateWithValue = useCallback(\n    debounce(async () => {\n      if (isEmptyValue()) {\n        onChange()\n        return\n      }\n      console.groupCollapsed(`estimateWithValue call:${address}:${++sycIndex}`)\n      setIsSwapInfoFetching(true)\n      onChange()\n      await queryBestSwapInfo()\n        .then(nextSwapInfo => {\n          console.log('estimateWithValue call success')\n          console.groupEnd(`estimateWithValue call:${address}:${sycIndex}`)\n          setSwapInfo(nextSwapInfo)\n          if (!isApproveEnough()) {\n            setIsSwapInfoFetching(false)\n          }\n        })\n        .catch(() => {\n          console.log('estimateWithValue call error')\n          console.groupEnd(`estimateWithValue call:${address}:${sycIndex}`)\n          if (isOverMaxRetry) {\n            setIsSwapInfoFetching(false)\n          } else {\n            setRetryTimes(retryTimes + 1)\n            setIsSwapInfoFetching(retryTimes + 1 <= MAX_RETRY_TIME)\n          }\n        })\n        .finally(() => {\n          onChange()\n        })\n    }, 500),\n    [exchangeManager, token, decimals, retryTimes, queryBestSwapInfo, onChange]\n  )\n\n  useEffect(resetState, [receiveToken, slippage])\n\n  useEffect(() => {\n    setValue(toFixed(token.amount, decimals))\n  }, [token, decimals.toString()])\n\n  useEffect(() => {\n    reload()\n    // TODO: 待开启\n    // const timer = setInterval(reload, 3000)\n    // return () => clearInterval(timer)\n  }, [reload])\n\n  const isGetSwapInfoSuccess = !isSwapInfoFetching && !isEmpty(swapInfo) && !isOverMaxRetry\n\n  // staticcall success or getswapinfo success\n  const isSwapSuccess =\n    !isFetching && !isReciveToken && ((isApproveEnough() && done) || (!isApproveEnough() && !isEmpty(swapInfo))) && !isOverMaxRetry\n\n  useEffect(() => {\n    console.groupCollapsed(`estimateWithValue useEffect call:${address}:${++sycIndex}`)\n    const isValidSlippageValue = isValidSlippage()\n    console.log('isReload=', isReload)\n    console.log('swapInfo=', swapInfo)\n    console.log('isValidSlippage()=', isValidSlippageValue)\n    console.log('isGetSwapInfoSuccess=', isGetSwapInfoSuccess)\n    if (\n      isReciveToken ||\n      isReload ||\n      !isValidSlippageValue ||\n      isEmpty(exchangePlatformAdapters) ||\n      isGetSwapInfoSuccess ||\n      isOverMaxRetry ||\n      isErrorValue() ||\n      isEmptyValue()\n    ) {\n      console.log('estimateWithValue useEffect return')\n      console.groupEnd(`estimateWithValue useEffect call:${address}:${sycIndex}`)\n      return\n    }\n    console.groupEnd(`estimateWithValue useEffect call:${address}:${sycIndex}`)\n    estimateWithValue()\n    return () => estimateWithValue.cancel()\n  }, [isReload, value, swapInfo, estimateWithValue, retryTimes, isSwapInfoFetching])\n\n  useEffect(() => {\n    console.groupCollapsed(`staticCall useEffect call:${address}:${++sycIndex}`)\n    const isApproveEnoughValue = isApproveEnough()\n    console.log('done=', done)\n    console.log('retryTimes=', retryTimes)\n    console.log('isApproveEnoughValue=', isApproveEnoughValue)\n    console.log('swapInfo=', swapInfo)\n    console.log('isStaticCalling=', isStaticCalling)\n    console.log('isOverMaxRetry=', isOverMaxRetry)\n    console.log('isReciveToken=', isReciveToken)\n    if (\n      isReciveToken ||\n      done ||\n      isEmpty(swapInfo) ||\n      !isApproveEnoughValue ||\n      isStaticCalling ||\n      isOverMaxRetry ||\n      isErrorValue() ||\n      isEmptyValue()\n    ) {\n      console.log('staticCall useEffect return')\n      console.groupEnd(`staticCall useEffect call:${address}:${sycIndex}`)\n      return\n    }\n    console.groupEnd(`staticCall useEffect call:${address}:${sycIndex}`)\n    staticCall()\n  }, [done, value, retryTimes, swapInfo, staticCall, isStaticCalling, isApproveEnough])\n\n  useImperativeHandle(ref, () => {\n    return {\n      approve: () => approve().then(reload),\n      value,\n      isApproving,\n      isFetching,\n      swapInfo,\n      done,\n      isApproveEnough,\n      retryTimes,\n      isErrorValue,\n      isEmptyValue\n    }\n  })\n\n  return (\n    <div key={address} className={classNames(classes.approveItemWrapper)} style={style}>\n      <div className={classes.approveItem}>\n        <CustomTextField\n          classes={{ root: classes.input }}\n          placeholder=\"approve amount\"\n          maxEndAdornment\n          InputProps={{\n            startAdornment: (\n              <div className={classes.addToken} onClick={() => addToken(address)}>\n                {address !== ETH_ADDRESS && <AddIcon fontSize=\"small\" style={{ position: 'absolute', top: 28, left: 35 }} />}\n                <img className={classes.tokenLogo} src={`./images/${address}.png`} />\n              </div>\n            )\n          }}\n          disabled={disabled || isReciveToken || isFetching}\n          error={isErrorValue()}\n          value={value}\n          onChange={event => handleInputChange(event.target.value)}\n          onMaxClick={() => handleInputChange(toFixed(balance, decimals))}\n        />\n      </div>\n      {!isReciveToken && (\n        <p className={classes.balanceText}>\n          Balance:{' '}\n          <Loading loading={isReload} className={classes.reloadIcon}>\n            <span title={toFixed(balance, decimals)}>{toFixed(balance, decimals, 6)}</span>\n          </Loading>\n          <span style={{ float: 'right' }}>\n            Allowance:{' '}\n            <Loading loading={isReload} className={classes.reloadIcon}>\n              <span title={toFixed(allowances, decimals)}>{toFixed(allowances, decimals, 6)}</span>\n            </Loading>\n          </span>\n        </p>\n      )}\n      {!isReciveToken && isSwapSuccess && (\n        // <p className={classes.swapSuccessContainer}>\n        //   {`Swap into ${toFixed(swapInfo?.bestSwapInfo?.toTokenAmount, receiveTokenDecimals)} (done: ${done})`}\n        // </p>\n        <p className={classes.swapSuccessContainer}>{`Swap into ${toFixed(swapInfo?.bestSwapInfo?.toTokenAmount, receiveTokenDecimals)}`}</p>\n      )}\n      {!isReciveToken && isSwapError && (\n        <div className={classes.swapErrorContainer} onClick={reloadSwap}>\n          <span>Swap path fetch error</span>&nbsp;&nbsp;\n          <RefreshIcon className={classes.reloadIcon} fontSize=\"small\" />\n        </div>\n      )}\n      {!isReciveToken && isFetching && (\n        <p className={classes.swappingContainer}>\n          <Loading className={classes.reloadIcon} loading /> &nbsp;&nbsp;\n          {/* <span>{`Swap path fetching (retryTimes: ${retryTimes}, fetching: ${isSwapInfoFetching}, calling: ${isStaticCalling})`}</span> */}\n          <span>Swap path fetching</span>\n        </p>\n      )}\n    </div>\n  )\n}\n\nexport default forwardRef(TokenItem)\n","import { container } from '@/assets/jss/material-kit-react.js'\n\nconst componentsStyle = () => ({\n  container,\n  main: {\n    padding: '2rem 3rem',\n    color: '#A0A0A0',\n    background: 'linear-gradient(111.68deg, #2C2F36 7.59%, #333437 102.04%)',\n    borderRadius: '2.5rem'\n  },\n  title: {\n    paddingBottom: '1.5rem',\n    fontSize: '1.5rem',\n    lineHeight: '1.5rem',\n    textAlign: 'center'\n  },\n  tokenLogo: {\n    width: 30,\n    borderRadius: '50%',\n    marginRight: 8\n  },\n  approveContainer: {\n    maxHeight: '20rem',\n    padding: '2rem 1.25rem',\n    border: '1px solid #A68EFD',\n    borderRadius: '0.5rem 0.5rem 0px 0px',\n    backgroundColor: '#1F2023',\n    overflowY: 'auto'\n  },\n  approveItemWrapper: {\n    paddingBottom: '0.5rem',\n    '&:last-child': {\n      padding: 0\n    }\n  },\n  success: {\n    border: '1px solid forestgreen'\n  },\n  swappingContainer: {\n    margin: 0,\n    color: '#A68EFD',\n    textAlign: 'center',\n    fontSize: '0.875rem',\n    lineHeight: '0.875rem'\n  },\n  swapSuccessContainer: {\n    margin: 0,\n    color: '#56CC8C',\n    textAlign: 'center',\n    fontSize: '0.875rem',\n    lineHeight: '0.875rem'\n  },\n  swapErrorContainer: {\n    height: '2rem',\n    border: '1px solid #F36767',\n    borderRadius: '0.625rem',\n    margin: 0,\n    color: '#F36767',\n    textAlign: 'center',\n    fontSize: '0.875rem',\n    lineHeight: '2rem',\n    cursor: 'pointer'\n  },\n  approveItem: {\n    textAlign: 'left',\n    display: 'flex'\n  },\n  approveButton: {\n    margin: '12px 8px 8px'\n  },\n  balanceText: {\n    textAlign: 'left',\n    fontSize: '0.875rem',\n    lineHeight: '0.875rem'\n  },\n  errorText: {\n    color: '#ff7875'\n  },\n  errorContainer: {\n    border: '1px solid #ff7875',\n    margin: '2px 0'\n  },\n  successContainer: {\n    border: '1px solid forestgreen',\n    margin: '2px 0'\n  },\n  isSwappingContainer: {\n    border: '1px solid #A68EFE',\n    margin: '2px 0'\n  },\n  reciveContainer: {\n    background: 'linear-gradient(223.3deg, #A68EFD 20.71%, #F4ACF3 103.56%)'\n  },\n  slippage: {\n    padding: '0 1.25rem',\n    border: '1px solid #A68EFD',\n    borderRadius: '0px 0px 0.5rem 0.5rem',\n    marginTop: '0.625rem',\n    backgroundColor: '#1F2023'\n  },\n  slippageTitlte: {\n    display: 'flex',\n    alignItems: 'center'\n  },\n  estimateContainer: {\n    padding: '2rem 1.25rem',\n    border: '1px solid #A68EFD',\n    marginTop: '0.625rem',\n    backgroundColor: '#1F2023'\n  },\n  estimateTitle: {\n    paddingBottom: '0.75rem'\n  },\n  estimateBalance: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'flex-end'\n  },\n  tokenList: {\n    padding: '0.5rem',\n    overflow: 'auto',\n    border: '1px solid rgb(166, 142, 254)',\n    borderRadius: '0.5rem'\n  },\n  arrow: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  buttonGroup: {\n    marginTop: '0.625rem'\n  },\n  okWrapper: {\n    paddingLeft: '1rem'\n  },\n  okButton: {\n    width: '100%'\n  },\n  cancelButton: {\n    width: '100%'\n  },\n  addToken: {\n    cursor: 'pointer'\n  },\n  swapError: {\n    display: 'flex',\n    alignItems: 'center',\n    marginBottom: '1rem',\n    color: '#ff7875',\n    textAlign: 'left'\n  },\n  textOverflow: {\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap'\n  },\n  loading: {\n    animation: 'loading 1s linear infinite'\n  },\n  reloadIcon: {\n    cursor: 'pointer',\n    verticalAlign: 'text-bottom'\n  }\n})\n\nexport default componentsStyle\n","/* eslint-disable */\r\nimport React, { useEffect, useState, useCallback, useRef } from 'react'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport PropTypes from 'prop-types'\r\nimport classNames from 'classnames'\r\n\r\n// === Components === //\r\nimport GridContainer from '@/components/Grid/GridContainer'\r\nimport GridItem from '@/components/Grid/GridItem'\r\nimport SimpleSelect from '@/components/SimpleSelect'\r\nimport Button from '@/components/CustomButtons/Button'\r\nimport CustomTextField from '@/components/CustomTextField'\r\nimport Loading from '@/components/LoadingComponent'\r\nimport AddIcon from '@material-ui/icons/Add'\r\nimport RefreshIcon from '@material-ui/icons/Refresh'\r\nimport CachedIcon from '@material-ui/icons/Cached'\r\nimport TokenItem from '@/components/TokenItem'\r\n\r\n// === Utils === //\r\nimport { useDispatch } from 'react-redux'\r\nimport * as ethers from 'ethers'\r\nimport get from 'lodash/get'\r\nimport map from 'lodash/map'\r\nimport some from 'lodash/some'\r\nimport size from 'lodash/size'\r\nimport uniq from 'lodash/uniq'\r\nimport first from 'lodash/first'\r\nimport isNil from 'lodash/isNil'\r\nimport every from 'lodash/every'\r\nimport assign from 'lodash/assign'\r\nimport reduce from 'lodash/reduce'\r\nimport isEmpty from 'lodash/isEmpty'\r\nimport debounce from 'lodash/debounce'\r\nimport compact from 'lodash/compact'\r\nimport find from 'lodash/find'\r\nimport findIndex from 'lodash/findIndex'\r\nimport isEqual from 'lodash/isEqual'\r\nimport isNumber from 'lodash/isNumber'\r\nimport min from 'lodash/min'\r\nimport { toFixed } from '@/helpers/number-format'\r\nimport { getBestSwapInfo } from 'piggy-finance-utils'\r\nimport BN from 'bignumber.js'\r\nimport { addToken } from '@/helpers/wallet'\r\nimport { warmDialog } from '@/reducers/meta-reducer'\r\nimport { getProtocolsFromBestRouter } from '@/helpers/swap-util'\r\nimport { errorTextOutput, isLossMuch } from '@/helpers/error-handler'\r\n\r\n// === Constants === //\r\nimport {\r\n  IERC20_ABI,\r\n  EXCHANGE_EXTRA_PARAMS,\r\n  ORACLE_ADDITIONAL_SLIPPAGE,\r\n  USDT_ADDRESS,\r\n  USDC_ADDRESS,\r\n  DAI_ADDRESS,\r\n  MULTIPLE_OF_GAS,\r\n  MAX_GAS_LIMIT\r\n} from '@/constants'\r\nimport { ETH_ADDRESS, WETH_ADDRESS } from '@/constants/tokens'\r\nimport { BN_6, BN_18 } from '@/constants/big-number'\r\n\r\n// === Styles === //\r\nimport styles from './style'\r\nimport { current } from '@reduxjs/toolkit'\r\n\r\nconst { Contract, BigNumber } = ethers\r\nconst useStyles = makeStyles(styles)\r\nlet sycIndex = 0\r\nconst MAX_RETRY_TIME = 2\r\n\r\nconst ApproveArrayV2 = props => {\r\n  const classes = useStyles()\r\n  const dispatch = useDispatch()\r\n  const {\r\n    isEthi,\r\n    userProvider,\r\n    tokens,\r\n    address: userAddress,\r\n    exchangeManager,\r\n    EXCHANGE_AGGREGATOR_ABI,\r\n    EXCHANGE_ADAPTER_ABI,\r\n    handleClose,\r\n    onSlippageChange\r\n  } = props\r\n\r\n  const refArray = map(tokens, () => useRef(null))\r\n  const [exchangePlatformAdapters, setExchangePlatformAdapters] = useState({})\r\n  const [receiveToken, setReceiveToken] = useState(isEthi ? ETH_ADDRESS : USDT_ADDRESS)\r\n  const [slippage, setSlippage] = useState('0.3')\r\n  const [isSwapping, setIsSwapping] = useState(false)\r\n  const [count, setCount] = useState(0)\r\n  const [callStateArray, setCallStateArray] = useState(map(tokens, () => undefined))\r\n\r\n  const swapInfoArray = map(refArray, item => get(item, 'current.swapInfo', {}))\r\n  // some tokens is fetching swap path\r\n  const someFetching = some(refArray, item => {\r\n    return get(item, 'current.isFetching')\r\n  })\r\n  // some tokens approve enough but not done\r\n  const someSwapError = () => {\r\n    return some(refArray, item => {\r\n      if (!item.current?.retryTimes) {\r\n        return false\r\n      }\r\n      return item.current.retryTimes > MAX_RETRY_TIME\r\n    })\r\n  }\r\n  // all tokens done\r\n  const allDone = () => {\r\n    return every(refArray, (item, index) => {\r\n      if (isReciveToken(index) || item.current.isEmptyValue()) {\r\n        return true\r\n      }\r\n      return get(item, 'current.done', true)\r\n    })\r\n  }\r\n  // check the receive token is current index?\r\n  const isReciveToken = index => {\r\n    return tokens[index]?.address === receiveToken\r\n  }\r\n  // check the slippage is valid or not\r\n  const isValidSlippage = () => {\r\n    if (isNaN(slippage)) return false\r\n    if (slippage < 0.01 || slippage > 45) return false\r\n    return true\r\n  }\r\n  // some error input value\r\n  const someErrorValue = some(refArray, item => {\r\n    const isErrorValue = get(item, 'current.isErrorValue')\r\n    if (typeof isErrorValue !== 'function') {\r\n      return false\r\n    }\r\n    return isErrorValue()\r\n  })\r\n\r\n  const receiveAmount = reduce(\r\n    refArray,\r\n    (rs, item) => {\r\n      if (!item.current?.swapInfo?.bestSwapInfo?.toTokenAmount) {\r\n        return rs\r\n      }\r\n      return rs.add(BigNumber.from(item.current.swapInfo.bestSwapInfo.toTokenAmount))\r\n    },\r\n    BigNumber.from(0)\r\n  )\r\n\r\n  const noNeedSwap = size(tokens) === 1 && get(first(tokens), 'address', '') === receiveToken\r\n\r\n  const getExchangePlatformAdapters = async (exchangeAggregator, userProvider) => {\r\n    const { _exchangeAdapters: adapters } = await exchangeAggregator.getExchangeAdapters()\r\n    const exchangeAdapters = {}\r\n    for (const address of adapters) {\r\n      const contract = new ethers.Contract(address, EXCHANGE_ADAPTER_ABI, userProvider)\r\n      exchangeAdapters[await contract.identifier()] = address\r\n    }\r\n    return exchangeAdapters\r\n  }\r\n\r\n  const selectOptions = isEthi\r\n    ? [\r\n        {\r\n          label: 'ETH',\r\n          value: ETH_ADDRESS,\r\n          img: `./images/${ETH_ADDRESS}.png`,\r\n          decimal: BN_18\r\n        }\r\n      ]\r\n    : [\r\n        {\r\n          label: 'USDT',\r\n          value: USDT_ADDRESS,\r\n          img: `./images/${USDT_ADDRESS}.png`,\r\n          decimal: BN_6\r\n        },\r\n        {\r\n          label: 'USDC',\r\n          value: USDC_ADDRESS,\r\n          img: `./images/${USDC_ADDRESS}.png`,\r\n          decimal: BN_6\r\n        },\r\n        {\r\n          label: 'DAI',\r\n          value: DAI_ADDRESS,\r\n          img: `./images/${DAI_ADDRESS}.png`,\r\n          decimal: BN_18\r\n        }\r\n      ]\r\n\r\n  const receiveTokenDecimals = selectOptions.find(el => el.value === receiveToken).decimal\r\n  const receiveTokenAmount = find(tokens, el => el.address === receiveToken)?.amount || '0'\r\n\r\n  const approveAll = async () => {\r\n    console.groupCollapsed('approveAll call')\r\n    try {\r\n      for (let i = 0; i < tokens.length; i++) {\r\n        console.log(`tokens[${i}] isReciveToken=`, isReciveToken(i))\r\n        if (isReciveToken(i)) continue\r\n        const enough = refArray[i].current.isApproveEnough()\r\n        console.log(`refArray[${i}] isApproveEnough=`, enough)\r\n        if (enough) continue\r\n        await refArray[i].current.approve()\r\n      }\r\n    } catch (error) {\r\n      setIsSwapping(false)\r\n      const message = errorTextOutput(error)\r\n      dispatch(\r\n        warmDialog({\r\n          open: true,\r\n          type: 'error',\r\n          message\r\n        })\r\n      )\r\n      console.groupEnd('approveAll call')\r\n      return\r\n    }\r\n    const someApproveNotEnough = some(refArray, item => {\r\n      if (!item.current) {\r\n        return false\r\n      }\r\n      return !item.current.isApproveEnough()\r\n    })\r\n    if (someApproveNotEnough) {\r\n      setIsSwapping(false)\r\n      dispatch(\r\n        warmDialog({\r\n          open: true,\r\n          type: 'error',\r\n          message: 'Allowance not enough'\r\n        })\r\n      )\r\n      return\r\n    }\r\n    console.groupEnd('approveAll call')\r\n  }\r\n\r\n  // All done, swap\r\n  const batchSwap = debounce(async () => {\r\n    console.groupCollapsed('batchSwap call')\r\n    const nextSwapArray = compact(\r\n      map(swapInfoArray, item => {\r\n        if (isEmpty(item) || item instanceof Error) return\r\n        const {\r\n          bestSwapInfo: { platform, method, encodeExchangeArgs },\r\n          info\r\n        } = item\r\n        return {\r\n          platform,\r\n          method,\r\n          data: encodeExchangeArgs,\r\n          swapDescription: info\r\n        }\r\n      })\r\n    )\r\n    console.log('nextSwapArray=', nextSwapArray)\r\n    const constract = new Contract(exchangeManager, EXCHANGE_AGGREGATOR_ABI, userProvider)\r\n    const signer = userProvider.getSigner()\r\n    const contractWithSigner = constract.connect(signer)\r\n\r\n    try {\r\n      let tx\r\n      // if gasLimit times not 1, need estimateGas\r\n      if (isNumber(MULTIPLE_OF_GAS) && MULTIPLE_OF_GAS !== 1) {\r\n        const gas = await contractWithSigner.estimateGas.batchSwap(nextSwapArray)\r\n        const gasLimit = Math.ceil(gas * MULTIPLE_OF_GAS)\r\n        // gasLimit not exceed maximum\r\n        const maxGasLimit = gasLimit < MAX_GAS_LIMIT ? gasLimit : MAX_GAS_LIMIT\r\n        tx = await contractWithSigner.batchSwap(nextSwapArray, {\r\n          gasLimit: maxGasLimit\r\n        })\r\n      } else {\r\n        tx = await contractWithSigner.batchSwap(nextSwapArray)\r\n      }\r\n      await tx.wait()\r\n      dispatch(\r\n        warmDialog({\r\n          open: true,\r\n          type: 'success',\r\n          message: 'Swap Success!'\r\n        })\r\n      )\r\n      handleClose()\r\n    } catch (error) {\r\n      const errorMsg = errorTextOutput(error)\r\n      let message = 'Swap Failed'\r\n      if (isLossMuch(errorMsg)) {\r\n        message = 'Swap Failed, please increase the exchange slippage'\r\n      } else if (error.code === 4001) {\r\n        message = errorMsg\r\n      }\r\n      dispatch(\r\n        warmDialog({\r\n          open: true,\r\n          type: 'error',\r\n          message\r\n        })\r\n      )\r\n      setIsSwapping(false)\r\n    }\r\n    console.groupEnd('batchSwap call')\r\n  }, 500)\r\n\r\n  const clickSwap = () => {\r\n    console.groupCollapsed('clickSwap call')\r\n    setIsSwapping(true)\r\n    if (allDone()) {\r\n      batchSwap()\r\n    } else {\r\n      approveAll()\r\n    }\r\n    console.groupEnd('clickSwap call')\r\n  }\r\n\r\n  const changeSlippage = value => {\r\n    onSlippageChange(value)\r\n  }\r\n\r\n  // when child state change, reRender component\r\n  const onChildStateChange = useCallback(() => {\r\n    // setCount(count + 1)\r\n    setCount(Math.random())\r\n  }, [])\r\n\r\n  const onStaticCallFinish = useCallback(\r\n    (index, bool) => {\r\n      console.groupCollapsed(`onStaticCallFinish call ${index} ${bool}`)\r\n      const nextArray = map(callStateArray, (item, i) => {\r\n        if (isReciveToken(i) || refArray[i].current.isEmptyValue()) {\r\n          return true\r\n        }\r\n        if (i === index) {\r\n          return bool\r\n        }\r\n        return item\r\n      })\r\n      setCallStateArray(nextArray)\r\n      console.log('nextArray', nextArray)\r\n      if (!isSwapping) {\r\n        console.log('isSwapping', isSwapping)\r\n        console.groupEnd(`onStaticCallFinish call ${index} ${bool}`)\r\n        return\r\n      }\r\n      const allFinish = every(nextArray, item => item !== undefined)\r\n      if (!allFinish) {\r\n        console.log('allFinish', allFinish)\r\n        console.groupEnd(`onStaticCallFinish call ${index} ${bool}`)\r\n        return\r\n      }\r\n      const someError = some(nextArray, item => item === false)\r\n      if (someError) {\r\n        console.log('someError', someError)\r\n        setIsSwapping(false)\r\n        dispatch(\r\n          warmDialog({\r\n            open: true,\r\n            type: 'error',\r\n            message: 'Swap Failed'\r\n          })\r\n        )\r\n        console.groupEnd(`onStaticCallFinish call ${index} ${bool}`)\r\n        return\r\n      }\r\n      console.groupEnd(`onStaticCallFinish call ${index} ${bool}`)\r\n      batchSwap()\r\n    },\r\n    [callStateArray, isSwapping]\r\n  )\r\n\r\n  const onReceiveChange = v => {\r\n    if (someFetching) {\r\n      return\r\n    }\r\n    setReceiveToken(v)\r\n  }\r\n\r\n  useEffect(() => {\r\n    async function getAdapters() {\r\n      console.groupCollapsed(`getAdapters useEffect call:${++sycIndex}`)\r\n      const exchangeManagerContract = new Contract(exchangeManager, EXCHANGE_AGGREGATOR_ABI, userProvider)\r\n      const exchangeAdapters = await getExchangePlatformAdapters(exchangeManagerContract, userProvider)\r\n      console.log('exchangeAdapters', exchangeAdapters)\r\n      setExchangePlatformAdapters(exchangeAdapters)\r\n      console.groupEnd(`getAdapters useEffect call:${sycIndex}`)\r\n    }\r\n    getAdapters()\r\n  }, [exchangeManager])\r\n\r\n  return (\r\n    <div className={classes.main}>\r\n      <div className={classes.title}>Swap to single token</div>\r\n      <div className={classes.approveContainer}>\r\n        <div>Swap tokens:</div>\r\n        {map(tokens, (token, index) => {\r\n          const style = {}\r\n          if (token.amount === '0' || (tokens.length > 1 && isReciveToken(index))) {\r\n            style.display = 'none'\r\n          }\r\n          return (\r\n            <TokenItem\r\n              style={style}\r\n              ref={refArray[index]}\r\n              key={`${token.address}-${receiveToken}`}\r\n              userAddress={userAddress}\r\n              userProvider={userProvider}\r\n              token={token}\r\n              slippage={slippage}\r\n              receiveToken={receiveToken}\r\n              exchangeManager={exchangeManager}\r\n              exchangePlatformAdapters={exchangePlatformAdapters}\r\n              receiveTokenDecimals={receiveTokenDecimals}\r\n              EXCHANGE_AGGREGATOR_ABI={EXCHANGE_AGGREGATOR_ABI}\r\n              disabled={isSwapping}\r\n              onChange={onChildStateChange}\r\n              onStaticCallFinish={bool => {\r\n                onStaticCallFinish(index, bool)\r\n              }}\r\n            />\r\n          )\r\n        })}\r\n      </div>\r\n      <div className={classes.estimateContainer}>\r\n        <div className={classes.estimateTitle}>To receive estimated:</div>\r\n        <GridContainer>\r\n          <GridItem xs={4} sm={4} md={4}>\r\n            <SimpleSelect\r\n              options={selectOptions}\r\n              disabled={selectOptions.length <= 1 || isSwapping || someFetching}\r\n              value={receiveToken}\r\n              onChange={v => onReceiveChange(v)}\r\n            />\r\n          </GridItem>\r\n          <GridItem xs={8} sm={8} md={8} className={classes.estimateBalance}>\r\n            <Loading loading={someFetching} className={classes.reloadIcon}>\r\n              <div className={classes.textOverflow}>{toFixed(receiveAmount, receiveTokenDecimals, 6)} from token swap</div>\r\n              {receiveTokenAmount !== '0' && <div>{`+${toFixed(receiveTokenAmount, receiveTokenDecimals, 6)}`} from withdrawal</div>}\r\n            </Loading>\r\n          </GridItem>\r\n        </GridContainer>\r\n      </div>\r\n      <GridContainer className={classes.slippage}>\r\n        <GridItem xs={4} sm={4} md={4} className={classes.slippageTitlte}>\r\n          Slippage tolerance:\r\n        </GridItem>\r\n        <GridItem xs={8} sm={8} md={8}>\r\n          <CustomTextField\r\n            value={slippage}\r\n            placeholder=\"Allow slippage percent\"\r\n            maxEndAdornment\r\n            disabled={isSwapping || someFetching}\r\n            onMaxClick={() => setSlippage('45')}\r\n            onChange={e => setSlippage(e.target.value)}\r\n            error={!isValidSlippage()}\r\n          />\r\n        </GridItem>\r\n      </GridContainer>\r\n      <GridContainer className={classes.buttonGroup}>\r\n        <GridItem xs={4} sm={4} md={4}>\r\n          <Button color=\"danger\" onClick={handleClose} className={classes.cancelButton}>\r\n            Cancel\r\n          </Button>\r\n        </GridItem>\r\n        <GridItem xs={8} sm={8} md={8} className={classes.okWrapper}>\r\n          <Button\r\n            color=\"colorfull\"\r\n            onClick={clickSwap}\r\n            disabled={noNeedSwap || someFetching || isSwapping || someSwapError() || !isValidSlippage() || receiveAmount.lte(0) || someErrorValue}\r\n            className={classes.okButton}\r\n            startIcon={isSwapping ? <CachedIcon className={classes.loading} /> : null}\r\n          >\r\n            Swap\r\n          </Button>\r\n        </GridItem>\r\n      </GridContainer>\r\n    </div>\r\n  )\r\n}\r\n\r\nApproveArrayV2.propTypes = {\r\n  address: PropTypes.string.isRequired,\r\n  exchangeManager: PropTypes.string.isRequired\r\n}\r\n\r\nexport default ApproveArrayV2\r\n","export const BETA_V1_5_9 = 'beta-v1.5.9'\nexport const BETA_V1_5_10 = 'beta-v1.5.10'\nexport const ETHI = 'ethi'\nexport const ETHI_v1_5_10 = 'ethi-v1.5.10'\nexport const USDI_V1_6_0 = 'usdi-v1.6.0'\nexport const ETHI_V1_6_0 = 'ethi-v1.6.0'\n\nexport const COMMON = 'common'\n\n// abi rely on\nexport const ABI_SEQUENCE = {\n  [BETA_V1_5_10]: [COMMON, BETA_V1_5_9, BETA_V1_5_10],\n  [BETA_V1_5_9]: [COMMON, BETA_V1_5_9],\n  [ETHI]: [COMMON, ETHI],\n  [ETHI_v1_5_10]: [COMMON, ETHI, ETHI_v1_5_10],\n  [USDI_V1_6_0]: [COMMON, BETA_V1_5_9, USDI_V1_6_0],\n  [ETHI_V1_6_0]: [COMMON, ETHI, ETHI_V1_6_0]\n}\n","// === Utils === //\nimport isEmpty from 'lodash/isEmpty'\nimport findIndex from 'lodash/findIndex'\n\n// === Constants === //\nimport { ABI_SEQUENCE } from '@/constants/abi'\n\nfunction abiLoader(version, file) {\n  try {\n    const data = require(`./../abis/${version}/${file}`)\n    return data\n  } catch (error) {\n    const array = ABI_SEQUENCE[version]\n    const index = findIndex(array, i => i === version)\n    if (index <= 0) {\n      throw new Error('abi json file load failed:' + file)\n    }\n    return abiLoader(array[index - 1], file)\n  }\n}\n\nfunction useAbiResolver(abiPrefix) {\n  if (isEmpty(abiPrefix)) return {}\n\n  let VAULT_BUFFER_ABI, VAULT_ABI, EXCHANGE_ADAPTER_ABI, PRICE_ORCALE_ABI, EXCHANGE_AGGREGATOR_ABI\n\n  try {\n    VAULT_ABI = abiLoader(abiPrefix, 'vault-abi.json')\n  } catch (error) {\n    VAULT_ABI = []\n  }\n\n  try {\n    EXCHANGE_AGGREGATOR_ABI = abiLoader(abiPrefix, 'exchange-aggregator-abi.json')\n  } catch (error) {\n    EXCHANGE_AGGREGATOR_ABI = []\n  }\n\n  try {\n    EXCHANGE_ADAPTER_ABI = abiLoader(abiPrefix, 'exchange-adapter-abi.json')\n  } catch (error) {\n    EXCHANGE_ADAPTER_ABI = []\n  }\n\n  try {\n    PRICE_ORCALE_ABI = abiLoader(abiPrefix, 'price-oracle.json')\n  } catch (error) {\n    PRICE_ORCALE_ABI = []\n  }\n\n  try {\n    VAULT_BUFFER_ABI = abiLoader(abiPrefix, 'vault-buffer.json')\n  } catch (error) {\n    VAULT_BUFFER_ABI = []\n  }\n\n  return {\n    VAULT_ABI,\n    VAULT_BUFFER_ABI,\n    PRICE_ORCALE_ABI,\n    EXCHANGE_ADAPTER_ABI,\n    EXCHANGE_AGGREGATOR_ABI\n  }\n}\n\nexport default useAbiResolver\n","import React from 'react'\n\n// === Constants === //\nimport { VAULTS } from '@/constants'\n\n// === Utils === //\nimport find from 'lodash/find'\nimport useAbiResolver from '@/hooks/useAbiResolver'\n\nexport default function useVersionWapper(WrappedComponent, id) {\n  const item = find(VAULTS, { id }) || {}\n  const abi = useAbiResolver(item.abi_version)\n\n  return function Wrapper(props) {\n    const nextProps = {\n      ...abi,\n      ...item,\n      ...props\n    }\n    return <WrappedComponent {...nextProps} />\n  }\n}\n","import isEmpty from 'lodash/isEmpty'\nimport { getNoDataGraphic } from '@/components/Echarts/options/optionHelper'\n\n/**\n * Created by linyu on 2018/5/3.\n */\n\nconst DATA_ZOOM_HEIGHT = '52px'\n\nexport default function (obj) {\n  const showDataZoom = !isEmpty(obj.seriesData) && obj.dataZoom\n  const option = {\n    animation: false,\n    textStyle: {\n      color: '#fff'\n    },\n    grid: {\n      top: 40,\n      left: '0%',\n      right: '5%',\n      bottom: showDataZoom ? DATA_ZOOM_HEIGHT : '0%',\n      containLabel: true\n    },\n    tooltip: {\n      trigger: 'axis',\n      borderWidth: 0,\n      backgroundColor: '#292B2E',\n      textStyle: {\n        color: '#fff'\n      }\n    },\n    xAxis: {\n      type: 'category',\n      data: obj.xAxisData\n    },\n    yAxis: {\n      type: 'value'\n    },\n    dataZoom: showDataZoom ? obj.dataZoom : null,\n    color: ['#A68EFE', '#5470c6', '#91cc75'],\n    series: [\n      {\n        name: obj.seriesName ? obj.seriesName : '',\n        data: obj.seriesData,\n        type: 'line',\n        lineStyle: {\n          color: obj.color\n            ? obj.color\n            : {\n                type: 'linear',\n                colorStops: [\n                  {\n                    offset: 0,\n                    color: 'rgb(204, 186, 250)'\n                  },\n                  {\n                    offset: 0.5,\n                    color: 'rgb(144, 123, 247)'\n                  },\n                  {\n                    offset: 0.6,\n                    color: 'rgb(95, 128, 249)'\n                  },\n                  {\n                    offset: 0.95,\n                    color: 'rgb(80, 132, 250)'\n                  },\n                  {\n                    offset: 1,\n                    color: 'rgb(166, 192, 252)'\n                  }\n                ]\n              },\n          width: 3\n        },\n        smooth: obj.smooth,\n        step: obj.step\n      }\n    ]\n  }\n\n  return {\n    ...getNoDataGraphic(obj.seriesData.length > 0),\n    ...option\n  }\n}\n","export function getNoDataGraphic(hasdata = false) {\n  if (hasdata) {\n    return {}\n  } else {\n    return {\n      graphic: {\n        type: 'text',\n        left: 'center',\n        top: 'middle',\n        silent: true, // not response for event\n        invisible: false,\n        style: {\n          fill: '#9d9d9d',\n          fontWeight: 'bold',\n          text: 'No Data',\n          fontSize: '25px'\n        }\n      }\n    }\n  }\n}\n","import moment from 'moment'\nimport lineSimple from '@/components/Echarts/options/line/lineSimple'\nimport forEach from 'lodash/forEach'\nimport isNaN from 'lodash/isNaN'\nimport isUndefined from 'lodash/isUndefined'\nimport isNil from 'lodash/isNil'\nimport filter from 'lodash/filter'\nimport size from 'lodash/size'\n\nconst getLineEchartOpt = (data, dataValueKey, seriesName, options = {}) => {\n  const {\n    format = 'MM-DD HH:mm',\n    xAxis,\n    yAxis,\n    smooth = false,\n    step,\n    dataZoom,\n    needMinMax = true,\n    yAxisMin = value => parseInt(value.min * 0.9999 * 10 ** 4) / 10 ** 4,\n    yAxisMax = value => parseInt(value.max * 1.0001 * 10 ** 4) / 10 ** 4,\n    tootlTipSuffix = '(UTC)',\n    tootlTipFormat = 'YYYY-MM-DD HH:mm'\n  } = options\n  const xAxisData = []\n  const seriesData = []\n  const xAxisLabels = {}\n  data.forEach(o => {\n    // TODO: need comments\n    let value = moment(o.date).add(1, 'days').format(tootlTipFormat)\n    if (tootlTipSuffix) {\n      value = `${value} ${tootlTipSuffix}`\n    }\n    xAxisLabels[value] = moment(o.date).add(1, 'days').format(format)\n    xAxisData.push(value)\n    seriesData.push(o[dataValueKey])\n  })\n  const option = lineSimple({\n    xAxisData,\n    seriesName: seriesName,\n    seriesData,\n    smooth,\n    dataZoom\n  })\n  option.yAxis = {\n    ...option.yAxis,\n    ...yAxis\n  }\n  option.xAxis = {\n    axisLabel: {\n      formatter: value => xAxisLabels[value]\n    },\n    ...option.xAxis,\n    ...xAxis\n  }\n  option.yAxis.splitLine = {\n    lineStyle: {\n      color: '#454459'\n    }\n  }\n  if (needMinMax) {\n    option.yAxis.min = yAxisMin\n    option.yAxis.max = yAxisMax\n  }\n  option.series[0].connectNulls = true\n  option.series[0].showSymbol = size(filter(seriesData, i => !isNil(i))) === 1\n  option.series[0].lineStyle = {\n    width: 5,\n    cap: 'round'\n  }\n  if (step) {\n    const seriesData = option.series[0].data\n    forEach(seriesData, (value, index) => {\n      if ((isUndefined(value) || isNaN(value)) && index !== 0) {\n        seriesData[index] = seriesData[index - 1]\n      }\n    })\n  }\n  return option\n}\n\nexport default getLineEchartOpt\n","export const APY_DURATION = {\n  daily: 'daily',\n  monthly: 'monthly',\n  weekly: 'weekly',\n  yearly: 'yearly'\n}\n","import BN from 'bignumber.js'\n\nexport const RECENT_ACTIVITY_TYPE = {\n  Mint: 'Mint',\n  Deposit: 'Deposit',\n  Burn: 'Burn',\n  Rebase: 'Rebase',\n  Transfer: 'Transfer'\n}\n\nexport const USDI_DECIMALS = 18\n\nexport const USDI_BN_DECIMALS = BN(1e18)\n","import { useEffect, useState } from 'react'\n\n// === Services === //\nimport { getProfits, getPersonTvlArray, getMonthProfits, getAccountApyByAddress, getLatestProfit } from '@/services/api-service'\n\n// === Utils === //\nimport moment from 'moment'\nimport { toFixed } from '@/helpers/number-format'\nimport { map, isEmpty, reverse, find } from 'lodash'\n\n// === Constants === //\nimport { APY_DURATION } from '@/constants/apy-duration'\nimport { USDI_BN_DECIMALS } from '@/constants/usdi'\nimport { ETHI_DISPLAY_DECIMALS } from '@/constants/ethi'\nimport { VAULT_TYPE, TOKEN_DISPLAY_DECIMALS } from '@/constants/vault'\n\nconst dataMerge = (account, chain, vault, tokenType) => {\n  if (isEmpty(account)) return Promise.resolve({})\n\n  const params = {\n    chainId: chain,\n    tokenType\n  }\n  // date string of UTC0 today\n  const date = moment().subtract(1, 'days').utc(0).format('yyyy-MM-DD')\n  return Promise.all([\n    // get weekly apy\n    getAccountApyByAddress(account, date, {\n      duration: APY_DURATION.weekly,\n      ...params\n    }),\n    // get monthly apy\n    getAccountApyByAddress(account, date, {\n      duration: APY_DURATION.monthly,\n      ...params\n    }),\n    // get tvl\n    getPersonTvlArray(account, params),\n    // get monthly profit\n    getMonthProfits(account, params),\n    getProfits(account, params),\n    getLatestProfit(account, chain, tokenType).catch(() => {\n      return {\n        profit: '0'\n      }\n    })\n  ])\n    .then(rs => {\n      const [day7Apy, day30Apy, tvls, monthProfits, profit, latestProfit, balanceOfToken] = rs\n      const displayDecimals = {\n        [VAULT_TYPE.USDi]: TOKEN_DISPLAY_DECIMALS,\n        [VAULT_TYPE.ETHi]: ETHI_DISPLAY_DECIMALS\n      }[vault]\n\n      const monthProfitsData = []\n      for (let i = 0; i < 12; i++) {\n        const month = moment().utcOffset(0).subtract(i, 'months').format('YYYY-MM')\n        const profit = find(monthProfits, item => item.month === month)?.profit || 0\n        monthProfitsData.push(toFixed(profit, USDI_BN_DECIMALS, displayDecimals))\n      }\n      const nextData = {\n        day7Apy,\n        day30Apy,\n        tvls: reverse(\n          map(tvls.content, item => ({\n            date: item.date,\n            balance: toFixed(item.balance, USDI_BN_DECIMALS, displayDecimals)\n          }))\n        ),\n        monthProfits: reverse(monthProfitsData),\n        profit: profit.profit,\n        balanceOfToken,\n        latestProfit\n      }\n\n      return nextData\n    })\n    .catch(error => {\n      console.error('init PersonalV2 data failed', error)\n      return {}\n    })\n}\n\nexport default function usePersonalData(chain, vault, address, tokenType) {\n  const [data, setData] = useState({})\n  const [loading, setLoading] = useState(false)\n\n  useEffect(() => {\n    if (isEmpty(address) || isEmpty(chain)) {\n      return\n    }\n    setLoading(true)\n    dataMerge(address?.toLowerCase(), chain, vault, tokenType)\n      .then(setData)\n      .finally(() => setLoading(false))\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [address, chain, vault])\n\n  return {\n    dataSource: data,\n    loading: loading\n  }\n}\n","const style = {\n  selectWrapper: {\n    height: '51px',\n    position: 'relative',\n    lineHeight: '51px'\n  },\n  selectTrigger: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    height: '100%',\n    cursor: 'pointer',\n    border: '1px solid #666666',\n    borderRadius: '20px',\n    paddingLeft: 16,\n    paddingRight: 24\n  },\n  disabled: {\n    backgroundColor: '#313036'\n  },\n  triggerLabelWrapper: {\n    display: 'flex',\n    alignItems: 'center'\n  },\n  triggerLabel: {\n    color: '#A0A0A0',\n    fontWeight: 'bold'\n  },\n  caret: {\n    color: '#A68EFE',\n    transition: 'all 150ms ease-in'\n  },\n  expandLess: {\n    transform: 'rotate(180deg)'\n  },\n  selectPop: {\n    display: 'none',\n    position: 'absolute',\n    left: '50%',\n    top: '100%',\n    minWidth: '206px',\n    marginTop: '12px',\n    padding: '8px 0',\n    zIndex: 100,\n    background: '#292b2e',\n    borderRadius: '12px',\n    transformOrigin: 'top',\n    transform: 'translate(-50%, 0)',\n    boxShadow: '0 0 0px 1px rgba(161, 161, 161, 0.2)'\n  },\n  selectPopVisible: {\n    display: 'block'\n  },\n  selectItem: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: '0 24px',\n    cursor: 'pointer',\n\n    '&:hover': {\n      background: '#323438'\n    }\n  },\n  optImg: {\n    width: 'auto',\n    height: '30px',\n    marginRight: '8px',\n    borderRadius: '50%'\n  },\n  optMultiImgWrapper: {\n    height: '30px',\n    whiteSpace: 'nowrap'\n  },\n  optMultiImg: {\n    width: 'auto',\n    height: '30px',\n    borderRadius: '50%',\n    marginLeft: '-12px',\n    '&:first-child': {\n      marginLeft: 0\n    },\n    '&:last-child': {\n      marginRight: '8px'\n    }\n  },\n  optLabel: {\n    color: '#A0A0A0'\n  }\n}\n\nexport default style\n","import React, { useState } from 'react'\nimport classNames from 'classnames'\nimport map from 'lodash/map'\nimport find from 'lodash/find'\nimport isArray from 'lodash/isArray'\nimport { makeStyles } from '@material-ui/core/styles'\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport styles from './style'\n\nconst useStyles = makeStyles(styles)\n\nfunction Select({ value, onChange = () => {}, options = [], disabled, className }) {\n  const [popVisible, setPopVisible] = useState(false)\n  const classes = useStyles()\n  const selectedOpt = find(options, opt => opt.value === value) || {}\n  const handleClickAway = () => {\n    setPopVisible(false)\n  }\n\n  const handleTogglePop = () => {\n    if (disabled) return\n    setPopVisible(!popVisible)\n  }\n\n  const handlePopSelect = value => {\n    setPopVisible(false)\n    onChange(value)\n  }\n\n  return (\n    <ClickAwayListener onClickAway={handleClickAway}>\n      <div className={classNames(classes.selectWrapper, className)}>\n        <div\n          className={classNames(classes.selectTrigger, {\n            [classes.disabled]: disabled\n          })}\n          onClick={handleTogglePop}\n        >\n          <div className={classes.triggerLabelWrapper}>\n            {selectedOpt.img &&\n              (!isArray(selectedOpt.img) ? (\n                <img className={classes.optImg} src={selectedOpt.img} alt=\"logo\" />\n              ) : (\n                <div className={classes.optMultiImgWrapper}>\n                  {map(selectedOpt.img, img => (\n                    <img key={img} className={classes.optMultiImg} src={img} alt=\"logo\" />\n                  ))}\n                </div>\n              ))}\n            <span className={classes.triggerLabel}>{selectedOpt.label}</span>\n          </div>\n          {!disabled && (\n            <ExpandMoreIcon\n              className={classNames(classes.caret, {\n                [classes.expandLess]: popVisible\n              })}\n            />\n          )}\n        </div>\n        <ul\n          className={classNames(classes.selectPop, {\n            [classes.selectPopVisible]: popVisible\n          })}\n        >\n          {map(options, opt => (\n            <li\n              key={opt.value}\n              className={classNames(classes.selectItem, {\n                [classes.selectActiveItem]: value === opt.value\n              })}\n              onClick={() => handlePopSelect(opt.value)}\n            >\n              {opt.img &&\n                (!isArray(opt.img) ? (\n                  <img className={classes.optImg} src={opt.img} alt=\"logo\" />\n                ) : (\n                  <div className={classes.optMultiImgWrapper}>\n                    {map(opt.img, img => (\n                      <img key={img} className={classes.optMultiImg} src={img} alt=\"logo\" />\n                    ))}\n                  </div>\n                ))}\n              <span className={classes.optLabel}>{opt.label}</span>\n            </li>\n          ))}\n        </ul>\n      </div>\n    </ClickAwayListener>\n  )\n}\n\nexport default Select\n","var map = {\n\t\"./beta-v1.5.9/exchange-adapter-abi\": 1184,\n\t\"./beta-v1.5.9/exchange-adapter-abi.json\": 1184,\n\t\"./beta-v1.5.9/exchange-aggregator-abi\": 1185,\n\t\"./beta-v1.5.9/exchange-aggregator-abi.json\": 1185,\n\t\"./beta-v1.5.9/vault-abi\": 1186,\n\t\"./beta-v1.5.9/vault-abi.json\": 1186,\n\t\"./beta-v1.5.9/vault-buffer\": 1187,\n\t\"./beta-v1.5.9/vault-buffer.json\": 1187,\n\t\"./ethi-v1.6.0/exchange-aggregator-abi\": 1188,\n\t\"./ethi-v1.6.0/exchange-aggregator-abi.json\": 1188,\n\t\"./ethi-v1.6.0/vault-abi\": 1189,\n\t\"./ethi-v1.6.0/vault-abi.json\": 1189,\n\t\"./ethi/exchange-adapter-abi\": 1190,\n\t\"./ethi/exchange-adapter-abi.json\": 1190,\n\t\"./ethi/exchange-aggregator-abi\": 1191,\n\t\"./ethi/exchange-aggregator-abi.json\": 1191,\n\t\"./ethi/price-oracle\": 1192,\n\t\"./ethi/price-oracle.json\": 1192,\n\t\"./ethi/vault-abi\": 1193,\n\t\"./ethi/vault-abi.json\": 1193,\n\t\"./ethi/vault-buffer\": 1194,\n\t\"./ethi/vault-buffer.json\": 1194,\n\t\"./usdi-v1.6.0/exchange-aggregator-abi\": 1195,\n\t\"./usdi-v1.6.0/exchange-aggregator-abi.json\": 1195,\n\t\"./usdi-v1.6.0/vault-abi\": 1196,\n\t\"./usdi-v1.6.0/vault-abi.json\": 1196\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1610;","import BN from 'bignumber.js'\nimport isEmpty from 'lodash/isEmpty'\nimport padEnd from 'lodash/padEnd'\nimport { isNil, isNull } from 'lodash'\n\nexport const toFixed = (value, precision = 1, ...args) => {\n  if (isNil(value)) return undefined\n  if (isNull(precision)) return value.toString()\n  const precisionBN = BN(precision.toString())\n  if (isEmpty(value) || precisionBN.isZero()) {\n    return '0'\n  }\n  const results = BN(value.toString()).div(precisionBN)\n  if (results.isInteger()) {\n    return results.toFixed()\n  }\n  return results.toFixed(...args)\n}\n\nconst DISPLAY_DECIMALS = 6\nconst MATH_FLOOR_SIGN = 1\nexport const formatBalance = (balance, decimals, options = {}) => {\n  const { displayDecimals = DISPLAY_DECIMALS, showAll = false } = options\n  const value = BN(balance.toString())\n  const decimalsValue = BN(10).pow(decimals)\n  if (showAll) {\n    let fixedValue = toFixed(value, decimalsValue, undefined, MATH_FLOOR_SIGN)\n    const dotIndex = fixedValue.indexOf('.')\n    if (dotIndex !== -1) {\n      fixedValue = padEnd(fixedValue, DISPLAY_DECIMALS + dotIndex + 1, '0')\n    }\n    return fixedValue\n  }\n  // If number lt 0.000000, add ...\n  const isLessThenDisplay = decimals > 6 && !value.eq(0) && value.lt(BN(10).pow(decimals - displayDecimals + 1))\n  const displayBalance = toFixed(value, decimalsValue, displayDecimals, MATH_FLOOR_SIGN)\n  return isLessThenDisplay ? `${displayBalance}...` : displayBalance\n}\n","import React from 'react'\n\nconst Loading = props => {\n  const { loading, children = '', width = '20px', height = '20px', background, className } = props\n  const loadingElement = (\n    <svg className={className} style={{ background: background }} width={width} height={height} viewBox=\"0 0 100 100\" preserveAspectRatio=\"xMidYMid\">\n      <circle cx=\"16\" cy=\"50\" r=\"10\" fill=\"#e15b64\">\n        <animate\n          attributeName=\"r\"\n          repeatCount=\"indefinite\"\n          dur=\"1.8518518518518516s\"\n          calcMode=\"spline\"\n          keyTimes=\"0;0.25;0.5;0.75;1\"\n          values=\"0;0;10;10;10\"\n          keySplines=\"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1\"\n          begin=\"0s\"\n        ></animate>\n        <animate\n          attributeName=\"cx\"\n          repeatCount=\"indefinite\"\n          dur=\"1.8518518518518516s\"\n          calcMode=\"spline\"\n          keyTimes=\"0;0.25;0.5;0.75;1\"\n          values=\"16;16;16;50;84\"\n          keySplines=\"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1\"\n          begin=\"0s\"\n        ></animate>\n      </circle>\n      <circle cx=\"50\" cy=\"50\" r=\"10\" fill=\"#f47e60\">\n        <animate\n          attributeName=\"r\"\n          repeatCount=\"indefinite\"\n          dur=\"1.8518518518518516s\"\n          calcMode=\"spline\"\n          keyTimes=\"0;0.25;0.5;0.75;1\"\n          values=\"0;0;10;10;10\"\n          keySplines=\"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1\"\n          begin=\"-0.4629629629629629s\"\n        ></animate>\n        <animate\n          attributeName=\"cx\"\n          repeatCount=\"indefinite\"\n          dur=\"1.8518518518518516s\"\n          calcMode=\"spline\"\n          keyTimes=\"0;0.25;0.5;0.75;1\"\n          values=\"16;16;16;50;84\"\n          keySplines=\"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1\"\n          begin=\"-0.4629629629629629s\"\n        ></animate>\n      </circle>\n      <circle cx=\"84\" cy=\"50\" r=\"10\" fill=\"#f8b26a\">\n        <animate\n          attributeName=\"r\"\n          repeatCount=\"indefinite\"\n          dur=\"1.8518518518518516s\"\n          calcMode=\"spline\"\n          keyTimes=\"0;0.25;0.5;0.75;1\"\n          values=\"0;0;10;10;10\"\n          keySplines=\"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1\"\n          begin=\"-0.9259259259259258s\"\n        ></animate>\n        <animate\n          attributeName=\"cx\"\n          repeatCount=\"indefinite\"\n          dur=\"1.8518518518518516s\"\n          calcMode=\"spline\"\n          keyTimes=\"0;0.25;0.5;0.75;1\"\n          values=\"16;16;16;50;84\"\n          keySplines=\"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1\"\n          begin=\"-0.9259259259259258s\"\n        ></animate>\n      </circle>\n      <circle cx=\"16\" cy=\"50\" r=\"10\" fill=\"#abbd81\">\n        <animate\n          attributeName=\"r\"\n          repeatCount=\"indefinite\"\n          dur=\"1.8518518518518516s\"\n          calcMode=\"spline\"\n          keyTimes=\"0;0.25;0.5;0.75;1\"\n          values=\"0;0;10;10;10\"\n          keySplines=\"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1\"\n          begin=\"-1.3888888888888888s\"\n        ></animate>\n        <animate\n          attributeName=\"cx\"\n          repeatCount=\"indefinite\"\n          dur=\"1.8518518518518516s\"\n          calcMode=\"spline\"\n          keyTimes=\"0;0.25;0.5;0.75;1\"\n          values=\"16;16;16;50;84\"\n          keySplines=\"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1\"\n          begin=\"-1.3888888888888888s\"\n        ></animate>\n      </circle>\n    </svg>\n  )\n  return loading ? loadingElement : children\n}\n\nexport default Loading\n","import { dangerColor } from '@/assets/jss/material-kit-react.js'\n\nconst style = {\n  root: {\n    width: '100%',\n    margin: '12px 0 8px',\n    '& .MuiInputBase-root': {\n      color: '#fff',\n      borderRadius: '1.25rem'\n    },\n    '& .MuiOutlinedInput-input': {\n      padding: '1rem',\n      textAlign: 'right'\n    },\n    '& .MuiOutlinedInput-notchedOutline': {\n      borderWidth: '1px',\n      borderColor: '#666'\n    },\n    '& .MuiOutlinedInput-root:hover .MuiOutlinedInput-notchedOutline': {\n      borderWidth: '1px',\n      borderColor: '#666'\n    },\n    '& .MuiOutlinedInput-root.Mui-focused .MuiOutlinedInput-notchedOutline': {\n      borderWidth: '1px',\n      borderColor: '#666'\n    },\n    '& .MuiOutlinedInput-root.Mui-error .MuiOutlinedInput-notchedOutline': {\n      borderWidth: '1px',\n      borderColor: dangerColor\n    },\n    '& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline': {\n      borderColor: '#666'\n    }\n  },\n  endAdornment: {\n    color: '#A68EFE',\n    cursor: 'pointer'\n  },\n  endAdornmentActive: {\n    color: '#A68EFE',\n    fontWeight: 'bold'\n  }\n}\n\nexport default style\n","import React from 'react'\nimport classNames from 'classnames'\nimport TextField from '@material-ui/core/TextField'\nimport { makeStyles } from '@material-ui/core/styles'\nimport styles from './style'\n\nconst useStyles = makeStyles(styles)\n\nfunction CustomTextField({\n  classes = {},\n  variant = 'outlined',\n  maxEndAdornment = false,\n  onMaxClick = () => {},\n  isMax = false,\n  InputProps,\n  disabled,\n  ...restProps\n}) {\n  const styleClasses = useStyles()\n  const { root: rootClass, ...restClass } = classes\n\n  return (\n    <TextField\n      classes={{\n        root: classNames(styleClasses.root, rootClass),\n        ...restClass\n      }}\n      InputProps={{\n        ...InputProps,\n        endAdornment: maxEndAdornment ? (\n          <span\n            className={classNames(styleClasses.endAdornment, {\n              [styleClasses.endAdornmentActive]: isMax\n            })}\n            onClick={() => {\n              if (disabled) {\n                return\n              }\n              onMaxClick()\n            }}\n          >\n            Max\n          </span>\n        ) : null\n      }}\n      variant={variant}\n      disabled={!!disabled}\n      {...restProps}\n    />\n  )\n}\n\nexport default CustomTextField\n","/**\n * analysis text in error\n * @param {*} error\n * @returns\n */\nexport const errorTextOutput = error => {\n  let errorMsg = error.toString()\n  if (error?.message) {\n    errorMsg = error.message\n  }\n  if (error?.data?.message) {\n    errorMsg = error.data.message\n  }\n  if (error?.error?.data?.originalError?.message) {\n    errorMsg = error.error.data.originalError.message\n  }\n  if (error?.error?.data?.message) {\n    errorMsg = error.error.data.message\n  }\n  return errorMsg\n}\n\n/**\n * adjustment\n * @param {*} errorMsg\n * @returns\n */\nexport const isAd = (errorMsg = '') => {\n  return errorMsg.endsWith(\"'AD'\")\n}\n\n/**\n * emergency shutdown\n * @param {*} errorMsg\n * @returns\n */\nexport const isEs = (errorMsg = '') => {\n  return errorMsg.endsWith(\"'ES or AD'\") || errorMsg.endsWith(\"'ES'\")\n}\n\n/**\n * rebase pause\n * @param {*} errorMsg\n * @returns\n */\nexport const isRp = (errorMsg = '') => {\n  return errorMsg.endsWith(\"'RP'\")\n}\n\n/**\n * exchange error slippage not enough\n * @param {*} errorMsg\n * @returns\n */\nexport const isLossMuch = (errorMsg = '') => {\n  return (\n    errorMsg.endsWith(\"'Return amount is not enough'\") ||\n    errorMsg.endsWith(\"'callBytes failed: Error(Uniswap: INSUFFICIENT_OUTPUT_AMOUNT)'\") ||\n    errorMsg.endsWith(\"'1inch V4 swap failed: Error(Min return not reached)'\") ||\n    errorMsg.endsWith(\"'callBytes failed: Error(Received amount of tokens are less then expected)'\") ||\n    errorMsg.endsWith(\"'1inch V4 swap failed: Error(Return amount is not enough)'\") ||\n    errorMsg.endsWith(\"'Received amount of tokens are less then expected'\") ||\n    errorMsg.endsWith(\"Error: VM Exception while processing transaction: reverted with reason string 'OL'\") ||\n    errorMsg.endsWith(\"'paraswap callBytes failed: Error(UniswapV2Router: INSUFFICIENT_OUTPUT_AMOUNT)'\") ||\n    errorMsg.endsWith(\"'1inch V4 swap failed: Error(IIA)'\") ||\n    errorMsg.endsWith(\"'paraswap callBytes failed: Error(Received amount of tokens are less then expected)'\") ||\n    errorMsg.endsWith(\"'1inch V4 swap failed: Error(UNIV3R: min return)'\") ||\n    errorMsg.endsWith(\"'1inch V4 swap failed: Error(LOP: bad signature)'\")\n  )\n}\n\n/**\n * withdraw error\n * @param {*} errorMsg\n * @returns\n */\nexport const isMaxLoss = (errorMsg = '') => {\n  return errorMsg.indexOf('loss much') !== -1 || errorMsg.indexOf('amount lower than minimum') !== -1\n}\n\n/**\n * exchange error in fork chain\n * @param {*} errorMsg\n * @returns\n */\nexport const isExchangeFail = (errorMsg = '') => {\n  return errorMsg.endsWith('callBytes failed: Error(Call to adapter failed)')\n}\n\n/**\n * distributing\n * @param {*} errorMsg\n * @returns\n */\nexport const isDistributing = (errorMsg = '') => {\n  return errorMsg.endsWith(\"'is distributing'\")\n}\n\n/**\n * less then minimum\n * @param {*} errorMsg\n * @returns\n */\nexport const isLessThanMinValue = (errorMsg = '') => {\n  return errorMsg.endsWith(\"'Amount must be gt minimum Investment Amount'\")\n}\n\n/**\n * transfer not enough\n * @param {*} errorMsg\n * @returns\n */\nexport const isTransferNotEnough = (errorMsg = '') => {\n  return errorMsg.endsWith(\"'ERC20: transfer amount exceeds allowance'\")\n}\n","import BN from 'bignumber.js'\n\nexport const BN_6 = new BN(1e6)\nexport const BN_18 = new BN(1e18)\nexport const BN_27 = new BN(1e27)\n","import { withStyles } from '@material-ui/core/styles'\nimport Stepper from '@material-ui/core/Stepper'\n\nconst BocStepper = withStyles({\n  root: {\n    background: 'transparent'\n  }\n})(Stepper)\n\nexport default BocStepper\n","import { withStyles } from '@material-ui/core/styles'\nimport StepLabel from '@material-ui/core/StepLabel'\n\nconst BocStepLabel = withStyles({\n  label: {\n    color: '#fff'\n  },\n  active: {\n    color: 'rgba(255, 255, 255, 0.87) !important'\n  },\n  completed: {\n    color: 'rgba(255, 255, 255, 0.87) !important'\n  }\n})(StepLabel)\n\nexport default BocStepLabel\n","import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Check from '@material-ui/icons/Check'\nimport clsx from 'clsx'\n\nconst useQontoStepIconStyles = makeStyles({\n  root: {\n    color: '#eaeaf0',\n    display: 'flex',\n    height: 22,\n    alignItems: 'center'\n  },\n  active: {\n    color: '#784af4'\n  },\n  circle: {\n    width: 8,\n    height: 8,\n    borderRadius: '50%',\n    backgroundColor: 'currentColor'\n  },\n  completed: {\n    color: '#784af4',\n    zIndex: 1,\n    fontSize: 18\n  }\n})\n\nfunction BocStepIcon(props) {\n  const classes = useQontoStepIconStyles()\n  const { active, completed } = props\n\n  return (\n    <div\n      className={clsx(classes.root, {\n        [classes.active]: active\n      })}\n    >\n      {completed ? <Check className={classes.completed} /> : <div className={classes.circle} />}\n    </div>\n  )\n}\n\nexport default BocStepIcon\n","import { withStyles } from '@material-ui/core/styles'\nimport StepConnector from '@material-ui/core/StepConnector'\n\nconst BocStepConnector = withStyles({\n  alternativeLabel: {\n    top: 10,\n    left: 'calc(-50% + 16px)',\n    right: 'calc(50% + 16px)'\n  },\n  active: {\n    '& $line': {\n      borderColor: '#784af4'\n    }\n  },\n  completed: {\n    '& $line': {\n      borderColor: '#784af4'\n    }\n  },\n  line: {\n    borderColor: '#eaeaf0',\n    borderTopWidth: 3,\n    borderRadius: 1\n  }\n})(StepConnector)\n\nexport default BocStepConnector\n","export const gradientText = {\n  color: '#A68EFD',\n  backgroundImage: '-webkit-linear-gradient(223.3deg, #A68EFD 20.71%, #F4ACF3 103.56%)',\n  '-webkit-background-clip': 'text',\n  '-webkit-text-fill-color': 'transparent'\n}\n","// === Utils === //\nimport parser from 'cron-parser'\nimport min from 'lodash/min'\n\n// === Constants === //\nimport { DO_HARDWORK_CRON, DO_ALLOCATION_CRON } from '@/constants/cron'\n\nvar options = {\n  tz: 'Asia/Shanghai'\n}\n\n/**\n * get next dohardwork time\n */\nexport const getLastDohardworkTime = () => {\n  const dohardworkCron = parser.parseExpression(DO_HARDWORK_CRON, options)\n  const nextDohardworkTime = dohardworkCron.next().getTime()\n  return nextDohardworkTime\n}\n\n/**\n * get next allocation time\n */\nexport const getLastAllocationTime = () => {\n  const allocationCron = parser.parseExpression(DO_ALLOCATION_CRON, options)\n  const nextAllocationTime = allocationCron.next().getTime()\n  return nextAllocationTime\n}\n\n/**\n * get next rebase time\n */\nexport const getLastPossibleRebaseTime = () => {\n  return min([getLastDohardworkTime(), getLastAllocationTime()])\n}\n","export const DO_HARDWORK_CRON = '0 0 7 * * 0,2,3,4,5,6'\nexport const DO_ALLOCATION_CRON = '0 0 7 * * 1'\n","import axios from 'axios'\n\n// === Utils === //\nimport map from 'lodash/map'\nimport isEmpty from 'lodash/isEmpty'\n\n// === Constants === //\nimport { BOC_SERVER, NET_WORKS, ENV_NETWORK_TYPE } from '@/constants'\n\nconst ETH = NET_WORKS[0]\n\nexport const getDefiRate = async (chain = '1', type) => {\n  if (isEmpty(chain) || isEmpty(type)) return Promise.reject('chainId & type must not be null')\n  const params = {\n    chain,\n    type\n  }\n  const rs = await axios.get(`${BOC_SERVER}/v1/defi/rate`, { params }).then(resp => resp.data)\n  if (isEmpty(rs)) throw new Error('fetch error')\n  return rs\n}\n\nexport const getAPY = async ({ duration = 'monthly', chainId = ENV_NETWORK_TYPE, tokenType = 'USDi' } = {}) => {\n  const validChainId = !map(NET_WORKS, 'chainId').includes(parseInt(chainId)) ? ETH.chainId : chainId\n  const rs = await axios\n    .get(`${BOC_SERVER}/apy/vault_apy`, {\n      params: {\n        chainId: validChainId,\n        duration,\n        offset: 0,\n        limit: 1,\n        tokenType\n      }\n    })\n    .then(resp => {\n      return resp.data.content[0]?.apy\n    })\n  return rs\n}\n\n/**\n * get account profit, include unrealized and realized\n * @param {*} account\n * @param {*} params\n * @returns\n */\nexport const getProfits = (account, params) => {\n  return axios\n    .get(`${BOC_SERVER}/profit/account/${account}`, {\n      params\n    })\n    .then(resp => resp.data)\n}\n\n/**\n * get account tvl, default recent 1 year\n * @param {*} account\n * @param {*} params\n * @returns\n */\nexport const getPersonTvlArray = (account, params) => {\n  return axios\n    .get(`${BOC_SERVER}/token/balance/account/${account}`, {\n      params: {\n        limit: 365,\n        ...params\n      }\n    })\n    .then(resp => resp.data)\n}\n\n/**\n * get account monthly profit\n * @param {*} account\n * @param {*} params\n * @returns\n */\nexport const getMonthProfits = (account, params) => {\n  return axios\n    .get(`${BOC_SERVER}/month_profit/account/${account}`, {\n      params\n    })\n    .then(resp => resp.data)\n}\n\n/**\n * get account apy\n * @param {*} account\n * @param {*} date\n * @param {*} params\n * @returns\n */\nexport const getAccountApyByAddress = (account, date, params) => {\n  return axios\n    .get(`${BOC_SERVER}/apy/account_apy/accountAddress/${account}/date/${date}`, {\n      params\n    })\n    .then(resp => resp.data)\n}\n\n/**\n * get latest profits\n * @param {*} address user address\n * @param {*} chainId\n * @param {*} tokenType USDI or ETHI\n * @returns\n */\nexport const getLatestProfit = (address, chainId, tokenType) => {\n  if (isEmpty(address) || isEmpty(chainId) || isEmpty(tokenType)) return Promise.reject('address & chainId & tokenType must not be null')\n\n  return axios\n    .get(`${BOC_SERVER}/account_profit_history/last_time_profit/account/${address}`, {\n      params: {\n        chainId,\n        tokenType\n      }\n    })\n    .then(resp => resp.data)\n}\n\n/**\n * get segment profits in DAY/WEEK/MONTH\n * @param {*} address user address\n * @param {*} chainId\n * @param {*} tokenType USDI or ETHI\n * @param {*} segmentType DAY OR WEEK OR MONTH\n * @returns\n */\nexport const getSegmentProfit = (address, chainId, tokenType, segmentType) => {\n  if (isEmpty(address) || isEmpty(chainId) || isEmpty(tokenType) || isEmpty(segmentType))\n    return Promise.reject('address & chainId & tokenType & segmentType must not be null')\n\n  return axios\n    .get(`${BOC_SERVER}/account_profit_history/segment_profit/account/${address}`, {\n      params: {\n        chainId,\n        tokenType,\n        segmentType\n      }\n    })\n    .then(resp => resp.data)\n}\n","import BN from 'bignumber.js'\n\nexport const RECENT_ACTIVITY_TYPE = {\n  Mint: 'Mint',\n  Deposit: 'Deposit',\n  Burn: 'Burn',\n  Rebase: 'Rebase',\n  Transfer: 'Transfer'\n}\n\nexport const ETHI_DECIMALS = 18\n\nexport const ETHI_BN_DECIMALS = BN(1e18)\n\nexport const ETHI_DISPLAY_DECIMALS = 4\n\nexport const ETHI_PROFITS_DISPLAY_DECIMALS = 6\n","export const VAULT_TYPE = {\n  USDi: 'USDi',\n  ETHi: 'ETHi'\n}\n\nexport const TOKEN_DISPLAY_DECIMALS = 2\n","import { useState, useEffect } from 'react'\n\n// === Utils === //\nimport * as ethers from 'ethers'\nimport isEmpty from 'lodash/isEmpty'\n\nconst { Contract, BigNumber } = ethers\n\nconst useRedeemFeeBps = props => {\n  const { userProvider, VAULT_ADDRESS, VAULT_ABI } = props\n  const [value, setValue] = useState(BigNumber.from(0))\n  const [error, setError] = useState()\n  const [loading, setLoading] = useState(false)\n\n  const reload = () => {\n    setLoading(true)\n    const vaultContract = new Contract(VAULT_ADDRESS, VAULT_ABI, userProvider)\n    vaultContract\n      .redeemFeeBps()\n      .then(setValue)\n      .catch(setError)\n      .finally(() => setLoading(false))\n  }\n\n  useEffect(() => {\n    if (isEmpty(userProvider) || isEmpty(VAULT_ADDRESS)) {\n      setLoading(false)\n      setError()\n      return\n    }\n    reload()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [userProvider, VAULT_ADDRESS])\n\n  return {\n    value,\n    loading,\n    error,\n    reload\n  }\n}\n\nexport default useRedeemFeeBps\n","import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\n\n// === Components === //\nimport Card from '@material-ui/core/Card'\nimport CardHeader from '@material-ui/core/CardHeader'\nimport CardContent from '@material-ui/core/CardContent'\nimport Typography from '@material-ui/core/Typography'\nimport Loading from '@/components/LoadingComponent'\n\n// === Utils === //\nimport isEmpty from 'lodash/isEmpty'\n\nconst useStyles = makeStyles({\n  root: {\n    background: '#323338',\n    borderRadius: '20px',\n    color: '#fff',\n    marginRight: '1rem',\n    height: '100%',\n    padding: '0 0.5rem'\n  },\n  action: {\n    flex: 'none',\n    alignSelf: 'auto',\n    margin: 0\n  },\n  bullet: {\n    display: 'inline-block',\n    margin: '0 2px',\n    transform: 'scale(0.8)'\n  },\n  title: {\n    color: '#fff',\n    fontSize: '1.25rem',\n    lineHeight: '1.875rem'\n  },\n  pos: {\n    marginBottom: 12\n  },\n  unit: {\n    marginLeft: '0.5rem',\n    fontSize: '1.3rem',\n    backgroundImage: 'linear-gradient(223.3deg,#a68efd 20.71%,#f4acf3 103.56%)',\n    '-webkitBackgroundClip': 'text',\n    textFillColor: 'transparent'\n  },\n  content: {\n    fontSize: '2.5rem',\n    fontWeight: 700\n  },\n  footer: {\n    paddingTop: '1rem'\n  },\n  header: {\n    paddingTop: '2rem',\n    paddingBottom: 0\n  }\n})\n\nconst CardComponent = props => {\n  const { title, children, footer, content, loading, tip, unit, loadingOption = {} } = props\n  const classes = useStyles()\n\n  return (\n    <Card className={classes.root}>\n      <CardHeader\n        classes={{\n          action: classes.action,\n          title: classes.title,\n          root: classes.header\n        }}\n        action={tip}\n        title={title}\n      />\n      <CardContent>\n        {!isEmpty(content) && (\n          <Loading loading={loading}>\n            <Typography className={classes.content} style={{ fontFamily: 'DM Sans' }} variant=\"h5\" component=\"h2\">\n              {content}\n              <span className={classes.unit}>{unit}</span>\n            </Typography>\n          </Loading>\n        )}\n        <Loading {...loadingOption} loading={loading}>\n          {children}\n        </Loading>\n\n        {!isEmpty(footer) && (\n          <Loading loading={loading}>\n            <Typography className={classes.footer} variant=\"body2\" component=\"p\">\n              {footer}\n            </Typography>\n          </Loading>\n        )}\n      </CardContent>\n    </Card>\n  )\n}\n\nexport default CardComponent\n","import React from 'react'\n\nimport loadable from '@loadable/component'\n\nconst loaddingCom = (\n  <span\n    style={{\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      minHeight: 20,\n      fontSize: 14\n    }}\n  >\n    Loading....\n  </span>\n)\nconst LineEchart = loadable(() => import('./line'), { fallback: loaddingCom })\nconst BarEchart = loadable(() => import('./bar'), { fallback: loaddingCom })\nconst PieEchart = loadable(() => import('./pie'), { fallback: loaddingCom })\n\nexport { LineEchart, BarEchart, PieEchart }\n","import { container } from '@/assets/jss/material-kit-react.js'\n\nconst componentsStyle = () => ({\n  container,\n  lineChart: {\n    minHeight: '20rem',\n    paddingTop: '1rem'\n  },\n  barChart: {\n    minHeight: '20rem',\n    paddingTop: '1rem'\n  },\n  groupedOutlinedPrimary: {\n    border: '2px solid #a0a0a0',\n    color: '#fff',\n    width: '7.5rem',\n    height: '2.25rem',\n    lineHeight: '2rem',\n    '&:hover': {\n      border: '2px solid #A68EFE'\n    }\n  },\n  groupButtonCheck: {\n    border: '2px solid #A68EFE'\n  }\n})\n\nexport default componentsStyle\n","import { useState, useEffect } from 'react'\n\n// === Utils === //\nimport * as ethers from 'ethers'\nimport isEmpty from 'lodash/isEmpty'\n\n// === Hooks === //\nimport useUserAddress from './useUserAddress'\n\nconst { Contract } = ethers\n\nconst useVault = (VAULT_ADDRESS, VAULT_ABI, userProvider) => {\n  const [error, setError] = useState()\n  const [loading, setLoading] = useState(false)\n  const [exchangeManager, setExchangeManager] = useState('')\n  const [decimals, setDecimals] = useState(ethers.BigNumber.from(0))\n  const [totalAsset, setTotalAsset] = useState(ethers.BigNumber.from(0))\n  const [rebaseThreshold, setRebaseThreshold] = useState(ethers.BigNumber.from(0))\n  const [underlyingUnitsPerShare, setUnderlyingUnitsPerShare] = useState(ethers.BigNumber.from(0))\n  const [minimumInvestmentAmount, setMinimumInvestmentAmount] = useState(ethers.BigNumber.from(0))\n\n  const address = useUserAddress(userProvider)\n\n  const valid = () => {\n    if (isEmpty(VAULT_ADDRESS)) return new Error('VAULT_ADDRESS is need!')\n    if (isEmpty(VAULT_ABI)) return new Error('VAULT_ABI is need!')\n    if (isEmpty(userProvider)) return new Error('userProvider is need!')\n  }\n\n  /**\n   * query vault base info\n   * @returns\n   */\n  const queryBaseInfo = () => {\n    const error = valid()\n    if (error) return setError(error)\n    setLoading(true)\n    const vaultContract = new ethers.Contract(VAULT_ADDRESS, VAULT_ABI, userProvider)\n    const requestArray = [\n      vaultContract.totalAssets().catch(() => ethers.BigNumber.from(0)),\n      vaultContract.totalDebt().catch(() => ethers.BigNumber.from(0)),\n      vaultContract.rebaseThreshold().catch(() => ethers.BigNumber.from(0)),\n      vaultContract.minimumInvestmentAmount(),\n      vaultContract.exchangeManager(),\n      fetchUnderlyingUnitsPerShare()\n    ]\n    return Promise.all(requestArray)\n      .then(([totalAsset, decimals, rebaseThreshold, minimumInvestmentAmount, exchangeManager]) => {\n        setTotalAsset(totalAsset)\n        setDecimals(decimals)\n        setRebaseThreshold(rebaseThreshold)\n        setMinimumInvestmentAmount(minimumInvestmentAmount)\n        setExchangeManager(exchangeManager)\n        return {\n          totalAsset,\n          decimals,\n          rebaseThreshold\n        }\n      })\n      .catch(setError)\n      .finally(() => setLoading(false))\n  }\n\n  const updateRebaseThreshold = value => {\n    const error = valid()\n    if (error) return setError(error)\n    setLoading(true)\n    const vaultContract = new ethers.Contract(VAULT_ADDRESS, VAULT_ABI, userProvider)\n    const signer = userProvider.getSigner()\n    vaultContract\n      .connect(signer)\n      .setRebaseThreshold(value)\n      .then(tx => tx.wait())\n      .finally(() => setLoading(false))\n  }\n\n  const updateMinimumInvestmentAmount = value => {\n    const error = valid()\n    if (error) return setError(error)\n    setLoading(true)\n    const vaultContract = new ethers.Contract(VAULT_ADDRESS, VAULT_ABI, userProvider)\n    const signer = userProvider.getSigner()\n    vaultContract\n      .connect(signer)\n      .setMinimumInvestmentAmount(value)\n      .then(tx => tx.wait())\n      .finally(() => setLoading(false))\n  }\n\n  const fetchUnderlyingUnitsPerShare = () => {\n    const vaultContract = new Contract(VAULT_ADDRESS, VAULT_ABI, userProvider)\n    setLoading(true)\n    vaultContract\n      .underlyingUnitsPerShare()\n      .catch(setError)\n      .then(setUnderlyingUnitsPerShare)\n      .finally(() => setLoading(false))\n  }\n\n  useEffect(() => {\n    const error = valid()\n    if (error) {\n      setLoading(false)\n      setError()\n      return\n    }\n    queryBaseInfo()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [address, VAULT_ADDRESS, VAULT_ABI, userProvider])\n\n  return {\n    loading,\n    error,\n    totalAsset,\n    decimals,\n    exchangeManager,\n    minimumInvestmentAmount,\n    fetchUnderlyingUnitsPerShare,\n    rebaseThreshold,\n    queryBaseInfo,\n    updateRebaseThreshold,\n    updateMinimumInvestmentAmount,\n    underlyingUnitsPerShare\n  }\n}\n\nexport default useVault\n"],"sourceRoot":""}