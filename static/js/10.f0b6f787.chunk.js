/*! For license information please see 10.f0b6f787.chunk.js.LICENSE.txt */
(this["webpackJsonpboc-web"]=this["webpackJsonpboc-web"]||[]).push([[10],{1010:function(e,t){},1014:function(e,t){},1020:function(e,t,r){"use strict";var n=r(10),a=r(172),o=r(107),i=r.n(o);function c(){c=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(S){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),i=new j(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return A()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=E(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,i),o}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(S){return{type:"throw",arg:S}}}e.wrap=s;var f={};function d(){}function p(){}function m(){}var h={};l(h,a,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(k([])));v&&v!==t&&r.call(v,a)&&(h=v);var b=m.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var n;this._invoke=function(a,o){function i(){return new t((function(n,i){!function n(a,o,i,c){var l=u(e[a],e,o);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(a,o,n,i)}))}return n=n?n.then(i,i):i()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function k(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=m,l(b,"constructor",m),l(m,"constructor",p),p.displayName=l(m,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,i,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(w.prototype),l(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new w(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),l(b,i,"Generator"),l(b,a,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}var l=a.b;t.a=function(e){var t=e.userProvider,r=e.VAULT_ADDRESS,a=e.VAULT_ABI,o=e.PRICE_ORCALE_ABI;return{getPriceProvider:function(){var e=Object(n.a)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i()(t)&&!i()(r)){e.next=2;break}throw new Error("userProvider or VAULT_ADDRESS is empty");case 2:return n=new l(r,a,t),e.abrupt("return",n.priceProvider().then((function(e){return new l(e,o,t)})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}},1021:function(e,t,r){var n=r(963);e.exports=function(e){return(null==e?0:e.length)?n(e,1):[]}},1022:function(e,t,r){"use strict";var n=r(65),a=r(116);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(r(0)),i=(0,n(r(117)).default)(o.createElement("path",{d:"M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z"}),"Build");t.default=i},1023:function(e,t,r){"use strict";var n=r(65),a=r(116);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(r(0)),i=(0,n(r(117)).default)(o.createElement("path",{d:"M9.01 14H2v2h7.01v3L13 15l-3.99-4v3zm5.98-1v-3H22V8h-7.01V5L11 9l3.99 4z"}),"CompareArrows");t.default=i},1042:function(e,t,r){"use strict";var n=r(0),a=r.n(n),o=r(441),i=r(291),c=r(115),l=r(81),s=r(1022),u=r.n(s),f=r(938),d=r.n(f),p=r(1023),m=r.n(p),h=r(314),g=r.n(h),v=r(868),b=r(10),y=r(62),w=r(172),E=r(78),x=r.n(E),O=r(107),j=r.n(O),k=r(1021),A=r.n(k),S=r(296),L=r(294);function C(){C=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(A){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),i=new O(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return k()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=w(i,r);if(c){if(c===u)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,i),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(A){return{type:"throw",arg:A}}}e.wrap=l;var u={};function f(){}function d(){}function p(){}var m={};c(m,a,(function(){return this}));var h=Object.getPrototypeOf,g=h&&h(h(j([])));g&&g!==t&&r.call(g,a)&&(m=g);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var n;this._invoke=function(a,o){function i(){return new t((function(n,i){!function n(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(a,o,n,i)}))}return n=n?n.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(y.prototype),c(y.prototype,o,(function(){return this})),e.AsyncIterator=y,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new y(l(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,a,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=j,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var T=w.b,I=[L.e,L.c],N=function(e,t,r){var a=Object(n.useState)([]),o=Object(y.a)(a,2),i=o[0],c=o[1],l=Object(n.useState)([]),s=Object(y.a)(l,2),u=s[0],f=s[1],d=Object(n.useState)(!1),p=Object(y.a)(d,2),m=p[0],h=p[1],g=Object(n.useState)(!1),v=Object(y.a)(g,2),w=v[0],E=v[1],O=Object(S.a)(r),k=Object(n.useCallback)((function(){j()(e)||j()(r)||new T(e,t,r).getVaultImplList().then(c)}),[e,r,t]),N=Object(n.useCallback)((function(){if(!(j()(e)||j()(r)||j()(i)||j()(O))){E(!0);var n=new T(e,t,r),a=x()(i,(function(e){return Promise.all(x()(I,(function(t,r){return n.vaultAddressMap(O,e,r).then((function(r){return r===L.f?{hasCreate:!1,type:e,token:t}:{address:r,type:e,hasCreate:!0,token:t}}))})))}));Promise.all(a).then((function(e){f(A()(e))})).finally((function(){setTimeout((function(){E(!1)}),3e3)}))}}),[O,e,r,i,t]),_=Object(n.useCallback)(function(){var n=Object(b.a)(C().mark((function n(a,o){var i;return C().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return h(!0),i=new T(e,t,r),n.next=4,i.connect(r.getSigner()).createNewVault(a,o).then((function(e){return e.wait()})).then(N).finally((function(){h(!1)}));case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),[e,r,N,t]),F=Object(n.useCallback)(function(){var n=Object(b.a)(C().mark((function n(a,o){return C().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:h(!0),new T(e,t,r).connect(r.getSigner()).deleteVaultAddressMapForDebug(O,a,o).then((function(e){return e.wait()})).then(N).finally((function(){h(!1)}));case 3:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),[e,N,O,r,t]);return Object(n.useEffect)(k,[k]),Object(n.useEffect)(N,[N]),{vaultFactoryAddress:e,vaultImplList:i,personalVault:u,adding:m,loading:w,addVault:_,deleteVault:F}},_=r(45),F=r(295),R=r.n(F),B=r(947),P=r.n(B),D=function(){return{template:{display:"flex",alignItems:"center",padding:"2rem",borderRadius:"1rem",background:"linear-gradient(111.68deg, rgba(87, 97, 125, 0.2) 7.59%, rgba(255, 255, 255, 0.078) 102.04%)",cursor:"pointer"},vault:{padding:"2rem",borderRadius:"1rem",background:"linear-gradient(111.68deg, rgba(87, 97, 125, 0.2) 7.59%, rgba(255, 255, 255, 0.078) 102.04%)"},vaultTitle:{textAlign:"center",height:"203px"},icon:{width:"100%",borderRadius:"50%"},button:{width:"100%",marginTop:"1rem"},logo:{width:"30px",borderRadius:"50%"},checked:{border:"2px solid #A68EFD"},token:{display:"flex",alignItems:"center",marginTop:"1rem"},tokenInfo:{flex:1,display:"flex",alignItems:"center"},name:{marginLeft:"1rem"},input:{maxWidth:"14rem"},setting:{position:"absolute",right:"0rem",top:"-0.5rem",cursor:"pointer"}}},G=r(900),V=Object(o.a)(D);t.a=function(e){var t=e.vaultChangeHandle,r=e.userProvider,o=e.VAULT_FACTORY_ADDRESS,s=e.VAULT_FACTORY_ABI,f=e.tokens,p=N(o,s,r),h=p.personalVault,b=p.addVault,y=p.loading,w=V(),E=Object(_.g)().push,O=P()(h,(function(e){return f.includes(e.token)}));return O.length=2,Object(n.useEffect)((function(){var e=R()(O,{hasCreate:!0});Object(G.isEmpty)(e)||t(e.address,e.token)}),[O,t]),a.a.createElement(i.a,{spacing:2},a.a.createElement(c.a,{md:12},a.a.createElement("div",{className:w.setting},a.a.createElement(g.a,{style:{color:"#A0A0A0"},onClick:function(){return E("/usdi")}}))),a.a.createElement(v.a,{loading:y},x()(O,(function(e,r){return a.a.createElement(c.a,{md:6,key:r},Object(G.isEmpty)(e)?a.a.createElement("div",{className:w.vault},a.a.createElement("div",{className:w.vaultTitle},a.a.createElement("img",{alt:"",className:w.icon,src:"https://bankofchain.io/logo256.png"})),a.a.createElement(l.a,{color:"colorfull",startIcon:a.a.createElement(u.a,null),className:w.button},"on Building...")):a.a.createElement("div",{className:w.vault},a.a.createElement("div",{className:w.vaultTitle},a.a.createElement("img",{alt:"",className:w.icon,src:"https://bankofchain.io/images/".concat(e.token,".png")})),e.hasCreate?a.a.createElement(l.a,{color:"colorfull",startIcon:a.a.createElement(m.a,null),className:w.button,onClick:function(){return t(e.address,e.token)}},"Deposit"):a.a.createElement(l.a,{color:"colorfull",startIcon:a.a.createElement(d.a,null),className:w.button,onClick:function(){return b(e.token,e.type)}},"Create")))}))))}},1043:function(e,t,r){"use strict";var n=r(62),a=r(0),o=r.n(a),i=r(441),c=r(291),l=r(115),s=r(969),u=r(970),f=r(973),d=r.n(f),p=r(839),m=r(989),h=r(915),g=r(990),v=r(977);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}"undefined"!==typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!==typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var y="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?a.useLayoutEffect:a.useEffect,w={status:"not-requested",loading:!1,result:void 0,error:void 0},E={status:"loading",loading:!0,result:void 0,error:void 0},x=function(){},O={initialState:function(e){return e&&e.executeOnMount?E:w},executeOnMount:!0,executeOnUpdate:!0,setLoading:function(e){return E},setResult:function(e,t){return{status:"success",loading:!1,result:e,error:void 0}},setError:function(e,t){return{status:"error",loading:!1,result:void 0,error:e}},onSuccess:x,onError:x},j=function(e,t,r){!t&&(t=[]);var n=function(e){return b({},O,{},e)}(r),o=Object(a.useState)(null),i=o[0],c=o[1],l=function(e){var t=Object(a.useState)((function(){return e.initialState(e)})),r=t[0],n=t[1],o=Object(a.useCallback)((function(){return n(e.initialState(e))}),[n,e]),i=Object(a.useCallback)((function(){return n(e.setLoading(r))}),[r,n]),c=Object(a.useCallback)((function(t){return n(e.setResult(t,r))}),[r,n]),l=Object(a.useCallback)((function(t){return n(e.setError(t,r))}),[r,n]),s=Object(a.useCallback)((function(e){return n(b({},r,{},e))}),[r,n]);return{value:r,set:n,merge:s,reset:o,setLoading:i,setResult:c,setError:l}}(n),s=function(){var e=Object(a.useRef)(!1);return Object(a.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),function(){return e.current}}(),u=function(){var e=Object(a.useRef)(null);return{set:function(t){return e.current=t},get:function(){return e.current},is:function(t){return e.current===t}}}(),f=function(e){return s()&&u.is(e)},d=function(e){var t=Object(a.useRef)(e);return y((function(){t.current=e})),Object(a.useCallback)((function(){return t.current}),[t])}((function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var o=function(){try{return Promise.resolve(e.apply(void 0,r))}catch(t){return Promise.reject(t)}}();return c(r),u.set(o),l.setLoading(),o.then((function(e){f(o)&&l.setResult(e),n.onSuccess(e,{isCurrent:function(){return u.is(o)}})}),(function(e){f(o)&&l.setError(e),n.onError(e,{isCurrent:function(){return u.is(o)}})})),o})),p=Object(a.useCallback)((function(){return d().apply(void 0,arguments)}),[d]),m=!s();return Object(a.useEffect)((function(){var e=function(){return d().apply(void 0,t)};m&&n.executeOnMount&&e(),!m&&n.executeOnUpdate&&e()}),t),b({},l.value,{set:l.set,merge:l.merge,reset:l.reset,execute:p,currentPromise:u.get(),currentParams:i})};function k(e,t,r){return j(e,t,r)}var A=r(971),S=r.n(A),L=r(78),C=r.n(L),T=r(865),I=r(17),N=r(951),_=r(952),F=r(32),R=r(972),B=I.a,P=Object(i.a)(R.a);t.a=function(e){var t,r=e.address,i=e.type,f=e.chain,b=e.userProvider,y=e.wantTokenSymbol,w=e.VAULT_FACTORY_ADDRESS,E=e.VAULT_FACTORY_ABI,x=e.personalVaultAddress,O=e.UNISWAPV3_RISK_ON_VAULT,j=e.UNISWAPV3_RISK_ON_HELPER,A="USDi"===i,L=P(),I=Object(a.useState)({}),R=Object(n.a)(I,2),D=R[0],G=R[1],V=k((function(){return Object(h.c)(F.b,x,"aave-outstanding-loan")}),[x]),M=k((function(){return Object(h.c)(F.b,x,"aave-collateral")}),[x]),H=k((function(){return Object(h.c)(F.b,x,"aave-health-ratio")}),[x]),W=k((function(){return Object(h.c)(F.b,x,"uniswap-position-value")}),[x]),U=k((function(){return Object(h.c)(F.b,x,"profit")}),[x]),z=Object(g.a)(f,i,r,i),Y=z.dataSource,X=z.loading,q=Object(v.a)(w,E,x,O,j,b).baseInfo,J=q.netMarketMakingAmount,K=q.result,Z=q.estimatedTotalAssets,Q=q.wantInfo,$=void 0===Q?{}:Q,ee=q.borrowInfo,te=void 0===ee?{}:ee,re=$.wantTokenDecimals,ne=void 0===re?B.from(0):re,ae=te.borrowTokenDecimals,oe=void 0===ae?B.from(0):ae;console.log("borrowTokenDecimals=",oe),Object(a.useEffect)((function(){var e=Object(m.a)([{date:"2022-10-11",balance:"1"},{date:"2022-10-12",balance:"10"},{date:"2022-10-13",balance:"10"},{date:"2022-10-14",balance:"20"},{date:"2022-10-15",balance:"20"},{date:"2022-10-16",balance:"20"},{date:"2022-10-17",balance:"30"}],"balance",Y.token,{format:"MM-DD",xAxis:{axisTick:{alignWithLabel:!0}}});G(e)}),[Y,r]);var ie=[{title:"Net Deposit",tip:o.a.createElement(p.a,{classes:{tooltip:L.tooltip},placement:"right",title:"Total profits from BoC that are withdrawable and cumulative."},o.a.createElement(d.a,{style:{fontSize:"1.375rem",color:"rgba(255,255,255,0.45)"}})),content:S()(Object(T.b)(J,ne,A?_.a:N.b)).format(A?"0,0.[00]":"0,0.[0000]"),unit:y},{title:"Current Value",tip:o.a.createElement(p.a,{classes:{tooltip:L.tooltip},placement:"right",title:"Yield over the past week."},o.a.createElement(d.a,{style:{fontSize:"1.375rem",color:"rgba(255,255,255,0.45)"}})),content:S()(Object(T.b)(Z,ne,A?_.a:N.b)).format(A?"0,0.[00]":"0,0.[0000]"),isAPY:!0,unit:y},{title:"Profit",tip:o.a.createElement(p.a,{classes:{tooltip:L.tooltip},placement:"right",title:"Yield over the past month."},o.a.createElement(d.a,{style:{fontSize:"1.375rem",color:"rgba(255,255,255,0.45)"}})),content:S()(Object(T.b)(K,ne,A?_.a:N.b)).format(A?"0,0.[00]":"0,0.[0000]"),isAPY:!0,unit:y}];return o.a.createElement(c.a,null,o.a.createElement(l.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement(c.a,null,C()(ie,(function(e,t){return o.a.createElement(l.a,{key:t,xs:12,sm:12,md:4,lg:4},o.a.createElement(s.a,Object.assign({loading:X},e)))}))),o.a.createElement(c.a,{className:L.lineChart},o.a.createElement(l.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement(s.a,{loading:V.loading||M.loading||H.loading,title:o.a.createElement("span",null,"AAVE Lines",o.a.createElement(p.a,{title:"Curve of daily change in the total ".concat(A?"USDi":"ETHi"," held by the user.")},o.a.createElement(d.a,{style:{marginLeft:8,fontSize:"1rem"}}))),loadingOption:{width:"100%",height:"2rem"}},V.error||M.error||H.error?o.a.createElement("div",null,"Error: ",null===V||void 0===V||null===(t=V.error)||void 0===t?void 0:t.message):o.a.createElement(u.b,{option:D,style:{minHeight:"20rem"}})))),o.a.createElement(c.a,{className:L.lineChart},o.a.createElement(l.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement(s.a,{loading:W.loading,title:o.a.createElement("span",null,"Uniswap Position Value",o.a.createElement(p.a,{title:"Curve of daily change in the total ".concat(A?"USDi":"ETHi"," held by the user.")},o.a.createElement(d.a,{style:{marginLeft:8,fontSize:"1rem"}}))),loadingOption:{width:"100%",height:"2rem"}},W.error?o.a.createElement("div",null,"Error: ",W.error.message):o.a.createElement(u.b,{option:D,style:{minHeight:"20rem"}})))),o.a.createElement(c.a,{className:L.lineChart},o.a.createElement(l.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement(s.a,{loading:U.loading,title:o.a.createElement("span",null,"Profits",o.a.createElement(p.a,{title:"Curve of daily change in the total ".concat(A?"USDi":"ETHi"," held by the user.")},o.a.createElement(d.a,{style:{marginLeft:8,fontSize:"1rem"}}))),loadingOption:{width:"100%",height:"2rem"}},U.error?o.a.createElement("div",null,"Error: ",U.error.message):o.a.createElement(u.b,{option:D,style:{minHeight:"20rem"}}))))))}},1320:function(e,t,r){"use strict";r.r(t);var n=r(62),a=r(0),o=r.n(a),i=r(44),c=r.n(i),l=r(441),s=r(291),u=r(115),f=r(1305),d=r(938),p=r.n(d),m=r(810),h=r(811),g=r(1308),v=r(1309),b=r(974),y=r.n(b),w=r(975),E=r.n(w),x=r(976),O=r.n(x),j=r(868),k=r(843),A=r(21),S=r(10),L=r(17),C=r(172),T=r(872),I=r.n(T),N=r(79),_=r(236),F=r.n(_),R=r(877),B=r.n(R),P=r(107),D=r.n(P),G=r(78),V=r.n(G),M=r(871),H=r.n(M),W=r(901),U=r.n(W),z=r(1304),Y=r(918),X=r(919),q=r(920),J=r(921),K=r(852),Z=r(855),Q=r(809),$=r(839),ee=r(903),te=r.n(ee),re=r(1302),ne=r(884),ae=r(81),oe=r(89),ie=r(865),ce=r(154),le=r.n(ce),se=r(929),ue=r(878),fe=r(879),de=r(32),pe=r(19),me=function(){return{container:pe.b,modal:{display:"flex",alignItems:"center",justifyContent:"center"},modalBody:{textAlign:"center"},depositContainer:{border:"1px solid #A68EFD",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem",padding:"2.6875rem 2.25rem"},estimateContainer:{border:"1px solid #A68EFD",marginTop:"0.5rem",borderBottomLeftRadius:"1rem",borderBottomRightRadius:"1rem",padding:"2.0625rem 2.6875rem"},estimateText:{color:"#A0A0A0",margin:0,display:"flex"},estimateBalanceTitle:{fontSize:"1.625rem"},estimateBalanceNum:{float:"right",fontSize:"1rem"},footerContainer:{marginTop:"2.5rem"},tokenInputWrapper:{marginBottom:"16px"},inputLabelWrapper:{display:"flex",justifyContent:"space-between",alignItems:"center"},input:{maxWidth:"12.5rem"},depositComfirmArea:{display:"flex",justifyContent:"space-between"},tokenInfo:{display:"flex",alignItems:"center"},tokenName:{fontSize:"1.625rem"},tokenLogo:{width:30,borderRadius:"50%",marginRight:8},flexText:{display:"inline-flex",justifyContent:"center",alignItems:"center"},ModalTokenLogo:{width:25,borderRadius:"50%",margin:"0 8px"},labelToolTipIcon:{fontSize:16},depositModal:{padding:"1rem",maxWidth:"500px",color:"rgba(255, 255, 255, 0.87)",border:"1px solid #A68EFE",backgroundColor:"#000",borderRadius:"1rem"},root:{padding:"1.5rem 0"},item:{paddingTop:"3rem"},subTitle:{color:"#A68EFE"}}};function he(){he=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(A){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),i=new O(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return k()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=w(i,r);if(c){if(c===u)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,i),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(A){return{type:"throw",arg:A}}}e.wrap=l;var u={};function f(){}function d(){}function p(){}var m={};c(m,a,(function(){return this}));var h=Object.getPrototypeOf,g=h&&h(h(j([])));g&&g!==t&&r.call(g,a)&&(m=g);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var n;this._invoke=function(a,o){function i(){return new t((function(n,i){!function n(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(a,o,n,i)}))}return n=n?n.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(y.prototype),c(y.prototype,o,(function(){return this})),e.AsyncIterator=y,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new y(l(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,a,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=j,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var ge=L.a,ve=Object(l.a)(me),be=["Step1: Deposit","Get ETHi Ticket","Step2: Allocation Action","Get ETHi"];function ye(e){var t=e.address,r=e.ethBalance,i=e.ethDecimals,c=e.ethiDecimals,l=e.userProvider,f=e.VAULT_ABI,d=e.VAULT_ADDRESS,p=e.ETH_ADDRESS,m=e.isBalanceLoading,h=e.minimumInvestmentAmount,g=ve(),v=Object(N.b)(),b=Object(a.useState)(""),y=Object(n.a)(b,2),w=y[0],E=y[1],x=Object(a.useState)(ge.from("174107")),O=Object(n.a)(x,2),k=O[0],L=O[1],T=Object(a.useState)(),_=Object(n.a)(T,2),R=_[0],P=_[1],G=Object(a.useState)(!1),M=Object(n.a)(G,2),W=M[0],ee=M[1],ce=Object(a.useState)(!1),pe=Object(n.a)(ce,2),me=pe[0],ye=pe[1],we=Object(a.useState)(ge.from(0)),Ee=Object(n.a)(we,2),xe=Ee[0],Oe=Ee[1],je=Object(a.useRef)(),ke=Object(se.a)(),Ae=function(){if(!R)return ge.from(0);var e=ge.from(parseInt(R,16).toString());return k.add(114).mul(e)};function Se(){var e=r,t=i,n=w;if(""!==n&&"-"!==n&&"0"!==n&&!D()(n.replace(/ /g,""))){if(isNaN(Number(n)))return!1;var a=I()(n),o=a.multipliedBy(ge.from(10).pow(t).toString());return!o.lte(0)&&(-1===a.multipliedBy(ge.from(10).pow(t).toString()).toFixed().indexOf(".")&&(!e.lt(ge.from(o.toFixed()))&&!e.sub(ge.from(o.toFixed())).lt(Ae())))}}var Le=function(){var e=Object(S.a)(he().mark((function e(){var r,n,a,o,c,s,u,m,g;return he().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(clearTimeout(je.current),Se()){e.next=4;break}return e.abrupt("return",v(Object(oe.b)({open:!0,type:"warning",message:"Please enter the correct value"})));case 4:if(ee(!0),r=ge.from(I()(w).multipliedBy(ge.from(10).pow(i).toString()).toFixed()),console.log("nextTokens=",p,r),n=l.getSigner(),a=new C.b(d,f,l),o=a.connect(n),c=!1,s={},!H()(de.o)||1===de.o){e.next=19;break}return e.next=15,o.estimateGas.mint(p,r,0,{from:t,value:r});case 15:u=e.sent,m=Math.ceil(u*de.o),g=m<de.m?m:de.m,s.gasLimit=g;case 19:return e.next=21,o.mint(p,r,0,Object(A.a)(Object(A.a)({},s),{},{from:t,value:r})).then((function(e){return e.wait()})).then((function(){c=!0})).catch((function(e){var t=Object(ue.a)(e),r="";Object(ue.d)(t)?r="Vault has been shut down, please try again later!":Object(ue.b)(t)?r="Vault is in adjustment status, please try again later!":Object(ue.i)(t)?r="Vault is in rebase status, please try again later!":Object(ue.c)(t)?r="Vault is in distributing, please try again later!":Object(ue.f)(t)&&(r="Deposit Amount must be greater than ".concat(Object(ie.b)(h,fe.a,2),"ETH!")),r&&v(Object(oe.b)({open:!0,type:"error",message:r})),ee(!1)}));case 21:c&&E(""),je.current=setTimeout((function(){ee(!1),ye(!1),c&&v(Object(oe.b)({open:!0,type:"success",message:"Success!"}))}),2e3);case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ce=Object(a.useCallback)(B()(Object(S.a)(he().mark((function e(){var t,r,n;return he().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Se()){e.next=4;break}return Oe(ge.from(0)),e.abrupt("return");case 4:return t=new C.b(d,f,l),r=ge.from(I()(w).multipliedBy(ge.from(10).pow(i).toString()).toFixed()),e.next=8,t.estimateMint(p,r).catch((function(e){var t=Object(ue.a)(e),r="";return Object(ue.d)(t)?r="Vault has been shut down, please try again later!":Object(ue.b)(t)?r="Vault is in adjustment status, please try again later!":Object(ue.i)(t)?r="Vault is in rebase status, please try again later!":Object(ue.c)(t)?r="Vault is in distributing, please try again later!":Object(ue.f)(t)&&(r="Deposit Amount must be greater than ".concat(Object(ie.b)(h,fe.a,2),"ETH!")),r&&v(Object(oe.b)({open:!0,type:"error",message:r})),ge.from(0)}));case 8:n=e.sent,Oe(n);case 10:case"end":return e.stop()}}),e)}))),1500));Object(a.useEffect)((function(){return Ce(),function(){return Ce.cancel()}}),[w]),Object(a.useEffect)((function(){if(l){l.send("eth_gasPrice").then(P).catch(le.a);var e=setInterval((function(){l.send("eth_gasPrice").then(P).catch(le.a)}),15e3);return function(){return clearInterval(e)}}}),[l]),Object(a.useEffect)((function(){var e=ge.from(10).pow(i);if(!(D()(l)||D()(d)||D()(f)||r.lt(e))){var n=l.getSigner();new C.b(d,f,l).connect(n).estimateGas.mint(p,e,{from:t,value:e}).then(L).catch(le.a)}}),[l,d,r,f]);var Te=!D()(l),Ie=Se();return o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,{classes:{root:g.depositContainer}},o.a.createElement("p",{className:g.estimateText},"From"),o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12,className:g.tokenInputWrapper},o.a.createElement(s.a,null,o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("div",{className:g.inputLabelWrapper},o.a.createElement("div",{className:g.tokenInfo},o.a.createElement("img",{className:g.tokenLogo,alt:"",src:"./images/0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619.png"}),o.a.createElement("span",{className:g.tokenName},"WETH")),o.a.createElement(ne.a,{classes:{root:g.input},value:w,onChange:function(e){E(e.target.value)},placeholder:"deposit amount",maxEndAdornment:!0,onMaxClick:function(){var e=Ae();if(e.lte(0))v(Object(oe.b)({open:!0,type:"warning",message:"Since the latest Gasprice is not available, it is impossible to estimate the gas fee currently!"}));else{var t=r.sub(e);E(Object(ie.a)(t.gt(0)?t:0,i,{showAll:!0}))}},error:!F()(Ie)&&!Ie}))),o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("p",{className:g.estimateText,title:Object(ie.a)(r,i,{showAll:!0})},"Balance:\xa0\xa0",o.a.createElement(j.a,{loading:m},Object(ie.a)(r,i))))))),o.a.createElement(s.a,null,o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("div",{className:g.footerContainer},o.a.createElement(ae.a,{disabled:!Te||Te&&!Ie,color:"colorfull",onClick:function(){ye(!0)},style:{width:"100%"}},"Deposit")))),o.a.createElement(Z.a,{className:g.modal,open:me,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},o.a.createElement(Q.a,{elevation:3,className:g.depositModal},o.a.createElement(Y.a,{classes:{root:g.root},alternativeLabel:!0,activeStep:1,connector:o.a.createElement(J.a,null)},V()(be,(function(e,t){return o.a.createElement(z.a,{key:t},o.a.createElement(X.a,{StepIconComponent:q.a},e))}))),o.a.createElement(s.a,null,o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12,className:g.item},o.a.createElement(re.a,{variant:"subtitle1",gutterBottom:!0,className:g.subTitle},"Deposit Amounts:\xa0",o.a.createElement("span",{key:t,className:g.flexText},o.a.createElement("span",{style:{color:"chocolate",marginRight:5}},w)," ETH\xa0",o.a.createElement("img",{className:g.ModalTokenLogo,alt:"",src:"./images/0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE.png"})))),o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12,className:g.item},o.a.createElement(re.a,{variant:"subtitle1",gutterBottom:!0,className:g.subTitle},"Estimate User Get:\xa0",o.a.createElement("span",{style:{color:"darkturquoise"}},"\xa0 + ",Object(ie.b)(xe,ge.from(10).pow(c)),"\xa0"),"\xa0 ETHi Tickets")),o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12,className:g.item},o.a.createElement(re.a,{variant:"subtitle1",gutterBottom:!0,className:g.subTitle},"Exchange\xa0",o.a.createElement($.a,{classes:{tooltip:g.tooltip},placement:"top",title:"Estimated amount of ETHi that can be exchanged"},o.a.createElement(te.a,{classes:{root:g.labelToolTipIcon}})),":\xa0From\xa0",o.a.createElement("span",{style:{color:"chocolate"}},Object(ie.b)(xe,ge.from(10).pow(c))),"\xa0 ETHi Tickets ",o.a.createElement("span",{style:{fontWeight:"bold",color:"dimgrey"}},"To"),"\xa0",o.a.createElement("span",{style:{color:"darkturquoise"}},Object(ie.b)(xe.mul(9987).div(1e4),ge.from(10).pow(c),2)),"\xa0 ETHi")),o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12,className:g.item},o.a.createElement(re.a,{variant:"subtitle1",gutterBottom:!0,className:g.subTitle},"Exchange Time\xa0",o.a.createElement($.a,{classes:{tooltip:g.tooltip},placement:"top",title:"The latest planned execution date may not be executed due to cost and other factors"},o.a.createElement(te.a,{classes:{root:g.labelToolTipIcon}})),":\xa0",o.a.createElement("span",{style:{color:"chocolate"}},U()(ke).format("YYYY-MM-DD HH:mm:ss")))),o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12,className:g.item,style:{textAlign:"center"}},o.a.createElement(ae.a,{color:"colorfull",onClick:Le,style:{width:"50%"}},"Continue"),o.a.createElement(ae.a,{style:{marginLeft:20},color:"danger",onClick:function(){return ye(!1)}},"Cancel"))))),o.a.createElement(Z.a,{className:g.modal,open:W,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},o.a.createElement(Q.a,{elevation:3,className:g.depositModal},o.a.createElement("div",{className:g.modalBody},o.a.createElement(K.a,{color:"inherit"}),o.a.createElement("p",null,"On Deposit...")))))}var we=r(80),Ee=r(967),xe=r.n(Ee),Oe=r(896),je=r.n(Oe),ke=r(968),Ae=r.n(ke),Se=r(1303),Le=r(1017),Ce=r.n(Le),Te=r(1329),Ie=r(960),Ne=r(950),_e=r(1020),Fe=r(153),Re=r.n(Fe),Be=r(895),Pe=r.n(Be),De=r(292),Ge=function(){return{container:pe.b,switchBar:{backgroundColor:"#91d5ff !important"},img:{width:"25px"},switchBase:{color:"#ddd"},switchChecked:{color:"#40a9ff"},modal:{display:"flex",alignItems:"center",justifyContent:"center"},modalBody:{textAlign:"center"},swapBody:{width:"42rem",outline:0},withdrawContainer:{padding:"2.6875rem 2.25rem",border:"1px solid #A68EFD",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem"},outputContainer:{padding:"2.6875rem 2.25rem",border:"1px solid #A68EFD",marginTop:"0.5rem",borderBottomLeftRadius:"1rem",borderBottomRightRadius:"1rem"},estimateText:{height:"1.25rem",color:"#A0A0A0",margin:0,display:"flex",marginTop:"0.5rem",alignItems:"center"},input:{maxWidth:"12.5rem"},footerContainer:{marginTop:"2.5rem"},inputLabelWrapper:{display:"flex",justifyContent:"space-between",alignItems:"center"},tokenInfo:{display:"flex",alignItems:"center"},tokenName:{fontSize:"1.625rem"},receiveTokenItem:{marginBottom:0},settingBtn:{color:"#39d0d8",textAlign:"right",lineHeight:"36px",padding:"10px 0",marginRight:"16px"},settingTitle:{color:"#fff",fontSize:16,letterSpacing:"0.01071em",lineHeight:1.5,textAlign:"center",width:"100%"},settingItem:{height:38,lineHeight:"38px",marginBottom:16,"&:first-child":{marginTop:24}},settingItemLabel:{position:"relative",minWidth:100,marginRight:16,textAlign:"right"},mutedLabel:{position:"relative",display:"inline-block"},maxLossFormCtrl:{width:"160px"},exchanged:{position:"relative",paddingLeft:16},tooltip:{fontSize:"14px"},labelToolTipIcon:{position:"absolute",left:"-18px",top:"50%",color:"#fff",fontSize:16,transform:"translate(0, -50%)"},slippageItem:{display:"flex",alignItems:"center"},slippageInput:{width:96,marginLeft:16},widthdrawLoadingPaper:{padding:"1rem",maxWidth:"500px",color:"rgba(255, 255, 255, 0.87)",border:"1px solid #A68EFE",backgroundColor:"#000",borderRadius:"1rem",width:"100%"},estimateBalanceTitle:{fontSize:"1.625rem"},estimateBalanceNum:{float:"right",fontSize:"1rem"},estimateItem:{textAlign:"center",minHeight:"100px",color:"#A0A0A0",paddingTop:"35px"},setting:{position:"absolute",right:"1rem",top:"1rem",cursor:"pointer"},popover:{width:"15rem",background:"#292B2E",border:" 1px solid #666666",borderRadius:"1.25rem",padding:"1rem"},popoverTitle:{color:"#A0A0A0",margin:0,padding:"0.5rem 0"},root:{padding:"1.5rem 0"}}},Ve=r(900);function Me(){Me=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(A){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),i=new O(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return k()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=w(i,r);if(c){if(c===u)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,i),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(A){return{type:"throw",arg:A}}}e.wrap=l;var u={};function f(){}function d(){}function p(){}var m={};c(m,a,(function(){return this}));var h=Object.getPrototypeOf,g=h&&h(h(j([])));g&&g!==t&&r.call(g,a)&&(m=g);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var n;this._invoke=function(a,o){function i(){return new t((function(n,i){!function n(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(a,o,n,i)}))}return n=n?n.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(y.prototype),c(y.prototype,o,(function(){return this})),e.AsyncIterator=y,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new y(l(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,a,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=j,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var He=L.a,We=Object(l.a)(Ge),Ue=[{title:"Shares Validation"},{title:"Gas Estimates"},{title:"Withdraw"}],ze=He.from(10).pow(16);function Ye(e){var t=e.address,r=e.exchangeManager,i=e.ethiBalance,c=e.ethiDecimals,l=e.userProvider,f=e.ETH_ADDRESS,d=e.VAULT_ADDRESS,p=e.VAULT_ABI,m=e.EXCHANGE_AGGREGATOR_ABI,h=e.EXCHANGE_ADAPTER_ABI,g=e.isBalanceLoading,v=e.reloadBalance,b=e.PRICE_ORCALE_ABI,y=We(),w=Object(N.b)(),E=Object(a.useState)(""),x=Object(n.a)(E,2),O=x[0],k=x[1],A=Object(a.useState)("0.3"),L=Object(n.a)(A,2),T=L[0],_=L[1],R=Object(a.useState)("0.3"),P=Object(n.a)(R,2),G=P[0],M=P[1],W=Object(a.useState)([]),U=Object(n.a)(W,2),ee=U[0],re=U[1],ce=Object(a.useState)(!1),le=Object(n.a)(ce,2),se=le[0],pe=le[1],me=Object(a.useState)(!1),he=Object(n.a)(me,2),ge=he[0],ve=he[1],be=Object(a.useState)(0),ye=Object(n.a)(be,2),Ee=ye[0],Oe=ye[1],ke=Object(a.useState)({}),Fe=Object(n.a)(ke,2),Be=Fe[0],Ge=Fe[1],Ye=Object(a.useState)([]),Xe=Object(n.a)(Ye,2),qe=Xe[0],Je=Xe[1],Ke=Object(a.useState)(!1),Ze=Object(n.a)(Ke,2),Qe=Ze[0],$e=Ze[1],et=Object(a.useState)(fe.a),tt=Object(n.a)(et,2),rt=tt[0],nt=tt[1],at=Object(Ne.a)({userProvider:l,VAULT_ADDRESS:d,VAULT_ABI:p}).value,ot=Object(_e.a)({userProvider:l,VAULT_ADDRESS:d,VAULT_ABI:p,PRICE_ORCALE_ABI:b}).getPriceProvider,it=at.toNumber()/100,ct=Object(a.useCallback)(B()(Object(S.a)(Me().mark((function e(){var t,r,a,o,i,s,u,f,m,h,g,v,b;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe(!0),t=new C.b(d,p,l),r=He.from(I()(O).multipliedBy(He.from(10).pow(c).toString()).toFixed()),a=r.mul(rt).div(fe.a.toFixed()),o=He.from(1e4-parseInt(100*(parseFloat(T)+it))).mul(a).div(He.from(1e4)),i=l.getSigner(),s=t.connect(i),e.prev=7,e.next=10,s.callStatic.burn(r,o);case 10:return u=e.sent,f=Object(n.a)(u,2),m=f[0],h=f[1],console.log("estimate withdraw result:",m,h),e.t0=Pe.a,e.next=18,Promise.all(V()(m,function(){var e=Object(S.a)(Me().mark((function e(t,r){var n;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=Re()(h,r,He.from(0))).gt(0)){e.next=3;break}return e.abrupt("return",{tokenAddress:t,decimals:c,amounts:n});case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 18:e.t1=e.sent,g=(0,e.t0)(e.t1),re(g),e.next=32;break;case 23:e.prev=23,e.t2=e.catch(7),console.log("estimate withdraw error",e.t2),console.log("withdraw original error :",e.t2),v=Object(ue.a)(e.t2),b="",b=Object(ue.d)(v)?"Vault has been shut down, please try again later!":Object(ue.b)(v)?"Vault is in adjustment status, please try again later!":Object(ue.i)(v)?"Vault is in rebase status, please try again later!":Object(ue.h)(v)?"Failed to withdraw, please increase the Max Loss!":Object(ue.g)(v)?"Failed to exchange, please increase the exchange slippage!":Object(ue.e)(v)?"Failed to exchange, Please try again later!":v,w(Object(oe.b)({open:!0,type:"error",message:b})),re(void 0);case 32:return e.prev=32,setTimeout((function(){pe(!1)}),500),e.finish(32);case 35:case"end":return e.stop()}}),e,null,[[7,23,32,35]])}))),1500)),lt=function(){var e=Object(S.a)(Me().mark((function e(r,n,a,o,i,c){var s;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleBurn"),console.log("tokens",i),console.log("amounts",c.map((function(e){return e.toString()}))),e.next=5,ot();case 5:return s=e.sent,e.abrupt("return",Promise.all(V()(i,function(){var e=Object(S.a)(Me().mark((function e(r,n){var a,o,i,u;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(ie.b)(c[n],1),e.next=3,s.valueInEth(r,a);case 3:if(o=e.sent,!ze.gt(o)){e.next=6;break}return e.abrupt("return");case 6:if(i=He.from(0),r!==f){e.next=13;break}return e.next=10,l.getBalance(t);case 10:i=e.sent,e.next=17;break;case 13:return u=new C.b(r,de.i,l),e.next=16,u.balanceOf(t);case 16:i=e.sent;case 17:return e.abrupt("return",{address:r,amount:i.gt(c[n])?a:i.toString()});case 18:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())).then((function(e){var t=Pe()(e);Object(Ve.some)(t,(function(e){return e.address!==f&&"0"!==e.amount}))&&(Je(t),$e(!0))})));case 7:case"end":return e.stop()}}),e)})));return function(t,r,n,a,o,i){return e.apply(this,arguments)}}(),st=function(){var e=Object(S.a)(Me().mark((function e(){var t,r,n,a,o,i,s,u,f,m,h,g,v,b,y,E,x,j,A,S,L,N,_,F,R,B,P,D,G,V,M,W,U,z,Y,X;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Date.now(),r=0,n=0,a=0,o=0,i=0,s=0,ve(!0),console.log("----------start withdraw----------"),ft()){e.next=5;break}return e.abrupt("return",Ge({type:"warning",message:"Please enter the correct value."}));case 5:if(dt()){e.next=7;break}return e.abrupt("return",Ge({type:"warning",message:"Enter the correct Max Loss value."}));case 7:if(pt()){e.next=9;break}return e.abrupt("return",Ge({type:"warning",message:"Please enter the correct slippage value."}));case 9:if(r=Date.now(),Oe(1),u=new C.b(d,p,l),f=l.getSigner(),m=He.from(I()(O).multipliedBy(He.from(10).pow(c).toString()).toFixed()),h=m.mul(rt).div(fe.a.toFixed()),g=He.from(1e4-parseInt(100*(parseFloat(T)+it))).mul(h).div(He.from(1e4)),e.prev=16,v=u.connect(f),a=Date.now(),Oe(2),!H()(de.o)||1===de.o){e.next=33;break}return e.next=23,v.estimateGas.burn(m,g);case 23:return y=e.sent,Oe(3),o=Date.now(),E=Math.ceil(y*de.o),x=E<de.m?E:de.m,e.next=30,v.burn(m,g,{gasLimit:x});case 30:b=e.sent,e.next=36;break;case 33:return e.next=35,v.burn(m,g);case 35:b=e.sent;case 36:return i=Date.now(),e.next=39,b.wait();case 39:j=e.sent,A=j.events,S=[],L=A.length-1;case 43:if(!(L>=0)){e.next=50;break}if("Burn"!==A[L].event){e.next=47;break}return S=A[L].args,e.abrupt("break",50);case 47:L--,e.next=43;break;case 50:lt.apply(void 0,Object(we.a)(S)),s=Date.now(),Oe(4),k(""),w(Object(oe.b)({open:!0,type:"success",message:"Success!"})),e.next=64;break;case 57:e.prev=57,e.t0=e.catch(16),console.log("withdraw original error :",e.t0),N=Object(ue.a)(e.t0),_="",_=Object(ue.d)(N)?"Vault has been shut down, please try again later!":Object(ue.b)(N)?"Vault is in adjustment status, please try again later!":Object(ue.i)(N)?"Vault is in rebase status, please try again later!":Object(ue.h)(N)?"Failed to withdraw, please increase the Max Loss!":Object(ue.g)(N)?"Failed to exchange, please increase the exchange slippage!":Object(ue.e)(N)?"Failed to exchange, Please try again later!":N,w(Object(oe.b)({open:!0,type:"error",message:_}));case 64:setTimeout((function(){ve(!1),Ge({}),Oe(0)}),2e3),B=(100*(R=r-t)/(F=s-t)).toFixed(2),D=(100*(P=0===n?0:n-r)/F).toFixed(2),V=(100*(G=0===n?a-r:a-n)/F).toFixed(2),W=(100*(M=0===o?0:o-a)/F).toFixed(2),z=(100*(U=0===o?i-a:i-o)/F).toFixed(2),X=(100*(Y=s-i)/F).toFixed(2),console.table({valid:"".concat(R,"(").concat(B,"%)"),preWithdraw:"".concat(P,"(").concat(D,"%)"),getSwapPath:"".concat(G,"(").concat(V,"%)"),estimateGas:"".concat(M,"(").concat(W,"%)"),withdraw:"".concat(U,"(").concat(z,"%)"),transaction:"".concat(Y,"(").concat(X,"%)")});case 79:case"end":return e.stop()}}),e,null,[[16,57]])})));return function(){return e.apply(this,arguments)}}();function ut(e){var t=e;(t.srcElement?t.srcElement:t.target).src="/default.png"}var ft=function(){if(""!==O&&"-"!==O&&!D()(O.replace(/ /g,""))){if(isNaN(Number(O)))return!1;var e=I()(O),t=e.multipliedBy(He.from(10).pow(c).toString());return!t.lte(0)&&(-1===e.multipliedBy(He.from(10).pow(c).toString()).toFixed().indexOf(".")&&!i.lt(He.from(t.toFixed())))}},dt=function(){if(""!==T&&!D()(T.replace(/ /g,"")))return!isNaN(T)&&!(T<0||T>50)},pt=function(){if(""!==G&&!D()(G.replace(/ /g,"")))return!isNaN(G)&&!(G<0||G>45)};Object(a.useEffect)((function(){return dt()&&pt()&&ft()&&ct(),D()(O)&&re([]),function(){return re([]),ct.cancel()}}),[O,T,G]);var mt=function(){var e=Object(S.a)(Me().mark((function e(){var t,r,a;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:t=e.sent,r=Object(n.a)(t,1),a=r[0],k(Object(ie.a)(a,c,{showAll:!0}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ht=ft(),gt=dt(),vt=!D()(l);return Object(a.useEffect)((function(){if(!(D()(t)||D()(d)||D()(p))){var e=setInterval(function e(){return new C.b(d,p,l).getPegTokenPrice().then((function(e){setTimeout((function(){nt(e)}),500)})),e}(),1e4);return function(){return clearInterval(e)}}}),[t]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:y.setting},o.a.createElement(Ce.a,{variant:"popover",popupId:"setting-popover"},(function(e){return o.a.createElement("div",null,o.a.createElement("svg",Object.assign({width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(Le.bindTrigger)(e)),o.a.createElement("path",{d:"M15 20.625C18.1066 20.625 20.625 18.1066 20.625 15C20.625 11.8934 18.1066 9.375 15 9.375C11.8934 9.375 9.375 11.8934 9.375 15C9.375 18.1066 11.8934 20.625 15 20.625Z",stroke:"#A0A0A0",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round"}),o.a.createElement("path",{d:"M21.5273 7.62891C21.8242 7.90234 22.1055 8.18359 22.3711 8.47266L25.5703 8.92969C26.0916 9.83497 26.4934 10.804 26.7656 11.8125L24.8203 14.4023C24.8203 14.4023 24.8555 15.1992 24.8203 15.5977L26.7656 18.1875C26.4946 19.1965 26.0928 20.1656 25.5703 21.0703L22.3711 21.5273C22.3711 21.5273 21.8203 22.1016 21.5273 22.3711L21.0703 25.5703C20.165 26.0916 19.196 26.4934 18.1875 26.7656L15.5977 24.8203C15.2 24.8555 14.8 24.8555 14.4023 24.8203L11.8125 26.7656C10.8035 26.4946 9.83438 26.0928 8.92969 25.5703L8.47266 22.3711C8.18359 22.0977 7.90234 21.8164 7.62891 21.5273L4.42969 21.0703C3.90842 20.165 3.50663 19.196 3.23438 18.1875L5.17969 15.5977C5.17969 15.5977 5.14453 14.8008 5.17969 14.4023L3.23438 11.8125C3.50537 10.8035 3.90722 9.83438 4.42969 8.92969L7.62891 8.47266C7.90234 8.18359 8.18359 7.90234 8.47266 7.62891L8.92969 4.42969C9.83497 3.90842 10.804 3.50663 11.8125 3.23438L14.4023 5.17969C14.8 5.14452 15.2 5.14452 15.5977 5.17969L18.1875 3.23438C19.1965 3.50537 20.1656 3.90722 21.0703 4.42969L21.5273 7.62891Z",stroke:"#A0A0A0",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round"})),o.a.createElement(Se.a,Object.assign({classes:{paper:y.popover}},Object(Le.bindPopover)(e),{anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}}),o.a.createElement(Te.a,{p:2},o.a.createElement(s.a,null,o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("p",{className:y.popoverTitle},"Max Loss"),o.a.createElement(ne.a,{classes:{root:y.input},value:T,placeholder:"Allow loss percent",maxEndAdornment:!0,onMaxClick:function(){return _("50")},onChange:function(e){var t=e.target.value;_(t)},error:!F()(gt)&&!gt}))))))}))),o.a.createElement(s.a,{className:y.withdrawContainer},o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("p",{className:y.estimateText},"From")),o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("div",{className:y.inputLabelWrapper},o.a.createElement("div",{className:y.tokenInfo},o.a.createElement("span",{className:y.tokenName},"WETH")),o.a.createElement(ne.a,{classes:{root:y.input},value:O,placeholder:"withdraw amount",maxEndAdornment:!0,onMaxClick:function(){return mt()},onChange:function(e){try{k(e.target.value)}catch(t){k("")}},error:!F()(ht)&&!ht&&"0"!==O}))),o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("p",{className:y.estimateText,title:Object(ie.a)(i,c,{showAll:!0})},"Balance:\xa0",o.a.createElement(j.a,{loading:g},Object(ie.a)(i,c))))),o.a.createElement(s.a,{className:y.outputContainer},o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("p",{className:y.estimateText},"To")),o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("div",{className:y.selectorlWrapper},o.a.createElement("p",{className:y.estimateBalanceTitle},"WETH"))),o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},se?o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("div",{className:y.estimateItem},o.a.createElement(K.a,{fontSize:"large",color:"primary"}))):F()(ee)?o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("div",{className:y.estimateItem},o.a.createElement(xe.a,{fontSize:"large"}),o.a.createElement("p",null,"Amount estimate failed, please try again!"))):D()(ee)||D()(O)?o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("div",{className:y.estimateItem},o.a.createElement("p",{style:{fontSize:26,textAlign:"right"}},"0.00"))):V()(ee,(function(e){return o.a.createElement(u.a,{key:e.tokenAddress,xs:12,sm:12,md:6,lg:6},o.a.createElement(ae.a,{title:Object(ie.b)(e.amounts,He.from(10).pow(e.decimals)),color:"transparent",target:"_blank",style:{fontSize:14,paddingBottom:20},onClick:function(){return Object(De.a)(e.tokenAddress)}},e.tokenAddress!==f&&o.a.createElement(je.a,{fontSize:"small",style:{position:"absolute",top:25,left:45}}),o.a.createElement("img",{title:"Add token address to wallet",className:y.img,style:{borderRadius:"50%"},alt:"",src:"./images/".concat(e.tokenAddress,".png"),onError:ut}),"\xa0\xa0~\xa0",Object(ie.b)(e.amounts,He.from(10).pow(e.decimals),6)))})))),o.a.createElement(s.a,null,o.a.createElement(u.a,{xs:12,sm:12,md:12,lg:12},o.a.createElement("div",{className:y.footerContainer},o.a.createElement(ae.a,{disabled:!vt||vt&&(F()(ht)||!ht),color:"colorfull",onClick:st,style:{width:"100%",padding:"12px 16px"}},"Withdraw",o.a.createElement($.a,{classes:{tooltip:y.tooltip},placement:"top",title:"".concat(it,"% withdrawal fee of the principal.")},o.a.createElement(te.a,{style:{marginLeft:"0.5rem"}})))))),o.a.createElement(Z.a,{className:y.modal,open:ge,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},o.a.createElement(Q.a,{elevation:3,className:y.widthdrawLoadingPaper},o.a.createElement("div",{className:y.modalBody},D()(Be)&&o.a.createElement(K.a,{color:"inherit"}),D()(Be)?o.a.createElement("p",null,"In Withdrawing..."):o.a.createElement("p",null,"Withdraw Error !"),o.a.createElement(Y.a,{classes:{root:y.root},alternativeLabel:!0,activeStep:Ee,connector:o.a.createElement(J.a,null)},V()(Ue,(function(e,t){return o.a.createElement(z.a,{key:t},o.a.createElement(X.a,{StepIconComponent:q.a},e.title))}))),!D()(Be)&&o.a.createElement("p",{style:{color:"error"===Be.type?"red":"yellow"}},o.a.createElement(Ae.a,{style:{verticalAlign:"bottom"}}),"\xa0\xa0\xa0",Be.message),o.a.createElement(ae.a,{color:"danger",onClick:function(){ve(!1),Ge({}),Oe(0)}},"Cancel")))),o.a.createElement(Z.a,{className:y.modal,open:Qe&&!!t,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},o.a.createElement("div",{className:y.swapBody},!D()(t)&&!D()(r)&&o.a.createElement(Ie.a,{isEthi:!0,address:t,tokens:qe,userProvider:l,exchangeManager:r,EXCHANGE_ADAPTER_ABI:h,EXCHANGE_AGGREGATOR_ABI:m,slippage:G,onSlippageChange:M,handleClose:function(){return $e(!1)}}))))}var Xe=r(1043),qe=r(1042),Je=r(184),Ke=r(294),Ze=r(299),Qe=r(1019),$e=r.n(Qe),et=r(988),tt=r(953),rt=r(18),nt=r(914),at=function(e){var t;return{container:Object(A.a)({zIndex:"12",color:"#FFFFFF",marginTop:"1rem",marginBottom:100},pe.b),center:(t={justifyContent:"center",padding:"50px 72px 50px",backgroundColor:"#0c0735cc"},Object(rt.a)(t,e.breakpoints.down("md"),{padding:"50px 16px 50px"}),Object(rt.a)(t,"margin",0),t),wrapper:{padding:"5rem 3rem",borderRadius:"1.25rem",background:"linear-gradient(111.68deg, rgba(87, 97, 125, 0.2) 7.59%, rgba(255, 255, 255, 0.078) 102.04%)"},wrapperMobile:{padding:"3rem 2rem",borderRadius:"1.25rem",background:"linear-gradient(111.68deg, rgba(87, 97, 125, 0.2) 7.59%, rgba(255, 255, 255, 0.078) 102.04%)"},deposit:{padding:"1rem",border:"1px solid #F4ACF3",borderTopLeftRadius:"1.25rem",borderTopRightRadius:"1.25rem"},balance:{marginTop:"0.5rem",marginBottom:"2rem",padding:"1rem",border:"1px solid #F4ACF3",borderBottomLeftRadius:"1.25rem",borderBottomRightRadius:"1.25rem"},symbol:Object(A.a)({color:"#A68EFD",marginLeft:"1rem"},nt.a),footer:{},item:{color:"#fff",marginBottom:20,"& .MuiListItemIcon-root":{minWidth:"38px"}},centerItem:{width:"630px"},balanceCard:{position:"relative",display:"flex",alignItems:"center",justifyContent:"flex-start",margin:"0 1rem 1rem 0",textAlign:"left",padding:"2.8125rem 2.4375rem",background:"#323338",color:"#fff",borderRadius:"1.25rem"},check:{color:"#A68EFE"},balanceCardValue:{display:"flex",alignItems:"center",justifyContent:"flex-start",height:30,lineHeight:"30px",fontSize:26,fontWeight:"bold",color:"#fff",marginBottom:8},balanceCardLabel:{color:"#b2add1",fontSize:14},tokenInfo:{display:"flex",position:"absolute",right:12,top:9},addTokenIcon:{cursor:"pointer",marginLeft:"1rem",display:"flex"},scanToken:{width:24,height:"auto",cursor:"pointer",borderRadius:"50%",backgroundColor:"#fff"},hidden:{display:"none"},brand:{color:"#FFFFFF",textAlign:"left"},title:{fontSize:"4.2rem",fontWeight:"600",display:"inline-block",position:"relative"},subtitle:{fontSize:"1.313rem",width:"auto",margin:"10px 0 0"},main:{position:"relative",backgroundColor:"transparent"},mainRaised:{margin:"0 auto",marginTop:65},link:{textDecoration:"none"},textCenter:{textAlign:"center"},switchBar:{backgroundColor:"#91d5ff !important"},img:{width:"25px"},radioUnchecked:{width:"0px",height:"0px",padding:"7px",border:"1px solid #fff",borderRadius:"50%"},radioChecked:{width:"16px",height:"16px",border:"1px solid #fff",borderRadius:"50%"},radioRoot:{padding:"12px","&:hover":{backgroundColor:"unset"}},radio:{color:"#fff !important"},investCard:{padding:"20px 24px",borderRadius:6,backgroundColor:"rgba(39, 31, 114, 0.8)",overflow:"visible"},table:{backgroundColor:"#150752",border:"1px solid rgb(222, 217, 213)"},tableCell:{color:"#fff",fontSize:"12px",letterSpacing:"0.01071em"},switchBase:{color:"#ddd"},switchChecked:{color:"#40a9ff"},modal:{display:"flex",alignItems:"center",justifyContent:"center","& .MuiPaper-root":{minWidth:430,minHeight:120,padding:"32px 24px",fontSize:16,border:0,color:"#fff",boxShadow:"0px 15px 15px rgba(0, 0, 0, 0.05)",borderRadius:"20px",background:"#292B2E",outline:0,width:"550px"}},modalBody:{textAlign:"center"},stepContainer:{padding:20},stepItem:{color:"#fff"},tabsRoot:{padding:"0 20px"},tabsIndicator:{backgroundColor:"transparent",display:"flex",justifyContent:"center","& > span":{maxWidth:120,width:"100%",backgroundColor:"#fff"}},tabTextColor:{color:"#fff"},tabRoot:{width:"50%",fontSize:"16px",maxWidth:"none"},detailWrapper:{margin:"42px 0 0 0"},slider:{position:"absolute",top:"50px",left:"calc(50% - 33rem)",backgroundColor:"#271f72",color:"azure"},text:{color:"azure"},spliter:{display:"flex",justifyContent:"center",bottom:0,height:2,position:"absolute",transition:"all 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",width:"54%",backgroundColor:"#fff"}}},ot=Object(l.a)(at),it=L.a;t.default=Object(et.a)((function(e){var t=ot(),r=Object(N.b)(),i=Object(k.a)("(max-width: 960px)"),l=Object(a.useState)(),d=Object(n.a)(l,2),b=d[0],w=d[1],x=Object(a.useState)(!0),A=Object(n.a)(x,2),S=A[0],L=A[1],T=e.address,I=e.userProvider,_=e.ETHI_ADDRESS,F=e.VAULT_ADDRESS,R=e.VAULT_ABI,B=e.EXCHANGE_AGGREGATOR_ABI,P=e.EXCHANGE_ADAPTER_ABI,G=e.PRICE_ORCALE_ABI,V=e.VAULT_BUFFER_ADDRESS,M=e.VAULT_BUFFER_ABI,H=e.VAULT_FACTORY_ADDRESS;console.log("Usdr VAULT_FACTORY_ADDRESS=",H);var W=Object(a.useState)(it.from(0)),U=Object(n.a)(W,2),z=U[0],Y=U[1],X=Object(a.useState)(it.from(0)),q=Object(n.a)(X,2),J=q[0],K=q[1],$=Object(a.useState)(0),ee=Object(n.a)($,2),te=ee[0],re=ee[1],ne=Ke.b,ae=Object(a.useState)(it.from(0)),ce=Object(n.a)(ae,2),se=ce[0],ue=ce[1],fe=Object(a.useState)(it.from(0)),pe=Object(n.a)(fe,2),me=pe[0],he=pe[1],ge=Object(a.useState)(it.from(0)),ve=Object(n.a)(ge,2),be=ve[0],we=ve[1],Ee=Object(a.useState)(0),xe=Object(n.a)(Ee,2),Oe=xe[0],je=xe[1],ke=Object(a.useState)(!1),Ae=Object(n.a)(ke,2),Se=Ae[0],Le=Ae[1],Ce=Object(N.c)((function(e){return e.investReducer.currentTab})),Te=function(e){Re(),r(Object(Je.b)(e))},Ie=Object(tt.a)(F,R,I),Ne=Ie.minimumInvestmentAmount,_e=Ie.exchangeManager,Fe=function(){if(!(D()(T)||D()(I)||D()(_)||D()(V))){var e=new C.b(V,M,I),t=new C.b(_,de.i,I);Promise.all([Re(),t.decimals().then(re).catch((function(){return re(1)})),e.decimals().then(je).catch((function(){return je(1)}))]).catch((function(){r(Object(oe.b)({open:!0,type:"warning",message:"Please confirm wallet's network!"}))}))}},Re=function(){if(!(D()(T)||D()(I)||D()(_)||D()(V))){Le(!0);var e=new C.b(V,M,I),t=new C.b(_,de.i,I);return Promise.all([t.balanceOf(T).catch((function(){return it.from(0)})),I.getBalance(T),e.balanceOf(T).catch((function(){return it.from(0)}))]).then((function(e){var t=Object(n.a)(e,3),r=t[0],a=t[1],o=t[2];return Y(a),K(r),we(o),[r,a,o]})).finally((function(){setTimeout((function(){Le(!1)}),500)}))}};function Be(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];console.log("Mint=",t);var n=$e()(t);n&&n.getTransaction().then((function(e){return e.wait()})).then(Fe)}function Pe(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];console.log("Burn=",t);var n=$e()(t);n&&n.getTransaction().then((function(e){return e.wait()})).then(Fe)}Object(a.useEffect)((function(){if(!D()(F)){var e=setInterval((function(){return Ge().then((function(e){e.eq(se)||(ue(me),he(e))})).catch(le.a)}),3e3);return function(){return clearInterval(e)}}}),[me.toString()]),Object(a.useEffect)((function(){return function(){if(!D()(R)&&!D()(I)&&(Fe(),!D()(F))){var e=new C.b(F,R,I);return D()(T)?void 0:(e.on("Mint",Be),e.on("Burn",Pe),function(){e.off("Mint",Be),e.off("Burn",Pe)})}}()}),[T,F,R,I]);var Ge=function(){return new C.b(_,de.i,I).totalSupply()};return o.a.createElement("div",{className:t.container},o.a.createElement(s.a,{spacing:0},o.a.createElement(u.a,{xs:2,sm:2,md:3,style:{paddingLeft:"2rem"}},o.a.createElement(m.a,null,o.a.createElement(h.a,{key:"My Account",button:!0,className:c()(t.item),onClick:function(){return Te(Ze.a.account)}},o.a.createElement(g.a,null,o.a.createElement(y.a,{style:{color:Ce===Ze.a.account?"#A68EFE":"#fff"}})),!i&&o.a.createElement(v.a,{primary:"My Account",className:c()(Ce===Ze.a.account?t.check:t.text)})),o.a.createElement(h.a,{key:"Deposit",button:!0,className:c()(t.item,Ce===Ze.a.deposit&&t.check),onClick:function(){return Te(Ze.a.deposit)}},o.a.createElement(g.a,null,o.a.createElement(E.a,{style:{color:Ce===Ze.a.deposit?"#A68EFE":"#fff"}})),!i&&o.a.createElement(v.a,{primary:"Deposit",className:c()(Ce===Ze.a.deposit?t.check:t.text)})),o.a.createElement(h.a,{key:"Withdraw",button:!0,className:c()(t.item),onClick:function(){return Te(Ze.a.withdraw)}},o.a.createElement(g.a,null,o.a.createElement(O.a,{style:{color:Ce===Ze.a.withdraw?"#A68EFE":"#fff"}})),!i&&o.a.createElement(v.a,{primary:"Withdraw",className:c()(Ce===Ze.a.withdraw?t.check:t.text)})))),Ce===Ze.a.deposit&&o.a.createElement(u.a,{xs:9,sm:9,md:6},o.a.createElement("div",{className:i?t.wrapperMobile:t.wrapper},o.a.createElement(ye,{address:T,ethBalance:z,ethDecimals:ne,ethiBalance:J,ethiDecimals:te,userProvider:I,VAULT_ABI:R,IERC20_ABI:de.i,VAULT_ADDRESS:F,ETH_ADDRESS:Ke.a,vaultBufferBalance:be,vaultBufferDecimals:Oe,isBalanceLoading:Se,reloadBalance:Re,minimumInvestmentAmount:Ne}))),Ce===Ze.a.withdraw&&o.a.createElement(u.a,{xs:9,sm:9,md:6},o.a.createElement("div",{className:i?t.wrapperMobile:t.wrapper},o.a.createElement(Ye,{address:T,exchangeManager:_e,ethiBalance:J,ethiDecimals:te,userProvider:I,VAULT_ADDRESS:F,ETH_ADDRESS:Ke.a,VAULT_ABI:R,IERC20_ABI:de.i,EXCHANGE_AGGREGATOR_ABI:B,EXCHANGE_ADAPTER_ABI:P,PRICE_ORCALE_ABI:G,isBalanceLoading:Se,reloadBalance:Re}))),Ce===Ze.a.account&&o.a.createElement(u.a,{xs:9,sm:9,md:9},o.a.createElement("div",{className:i?t.wrapperMobile:t.wrapper,style:{background:"none",paddingTop:"1rem",paddingLeft:0}},o.a.createElement(f.a,{className:t.balanceCard},o.a.createElement("div",{className:t.balanceCardItem},o.a.createElement("div",{className:t.balanceCardValue},o.a.createElement("span",{title:Object(ie.a)(J,te,{showAll:!0})},o.a.createElement(j.a,{loading:Se},Object(ie.a)(J,te))),o.a.createElement("span",{className:t.symbol},"WETH"),I&&o.a.createElement("span",{title:"Add token address to wallet"},o.a.createElement(p.a,{className:t.addTokenIcon,onClick:function(){Object(De.a)(_,"ETHi",18)},fontSize:"small"}))),o.a.createElement("div",{className:t.balanceCardLabel},"AVAILABLE BALANCE"))),!D()(T)&&!D()(b)&&o.a.createElement(Xe.a,{address:T,chain:"".concat(de.b),VAULT_ADDRESS:F,type:"ETHi"}))),o.a.createElement(Z.a,{className:t.modal,open:S,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},o.a.createElement(Q.a,{elevation:3},o.a.createElement(qe.a,{setPersonalVaultAddress:function(e){L(!1),w(e)}})))))}),"ethr")},929:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(1009),a=r.n(n),o=r(902),i=r.n(o),c={tz:"Asia/Shanghai"},l=function(){return i()([a.a.parseExpression("0 0 7 * * 0,2,3,4,5,6",c).next().getTime(),a.a.parseExpression("0 0 7 * * 1",c).next().getTime()])}},946:function(e,t,r){"use strict";var n=r(18),a=r(62),o=r(0),i=r.n(o),c=r(44),l=r.n(c),s=r(78),u=r.n(s),f=r(295),d=r.n(f),p=r(88),m=r.n(p),h=r(441),g=r(848),v=r(304),b=r.n(v),y={selectWrapper:{height:"51px",position:"relative",lineHeight:"51px"},selectTrigger:{display:"flex",justifyContent:"space-between",alignItems:"center",height:"100%",cursor:"pointer",border:"1px solid #666666",borderRadius:"20px",paddingLeft:16,paddingRight:24},disabled:{backgroundColor:"#313036"},triggerLabelWrapper:{display:"flex",alignItems:"center"},triggerLabel:{color:"#A0A0A0",fontWeight:"bold"},caret:{color:"#A68EFE",transition:"all 150ms ease-in"},expandLess:{transform:"rotate(180deg)"},selectPop:{display:"none",position:"absolute",left:"50%",top:"100%",minWidth:"206px",marginTop:"12px",padding:"8px 0",zIndex:100,background:"#292b2e",borderRadius:"12px",transformOrigin:"top",transform:"translate(-50%, 0)",boxShadow:"0 0 0px 1px rgba(161, 161, 161, 0.2)"},selectPopVisible:{display:"block"},selectItem:{display:"flex",alignItems:"center",padding:"0 24px",cursor:"pointer","&:hover":{background:"#323438"}},optImg:{width:"auto",height:"30px",marginRight:"8px",borderRadius:"50%"},optMultiImgWrapper:{height:"30px",whiteSpace:"nowrap"},optMultiImg:{width:"auto",height:"30px",borderRadius:"50%",marginLeft:"-12px","&:first-child":{marginLeft:0},"&:last-child":{marginRight:"8px"}},optLabel:{color:"#A0A0A0"}},w=Object(h.a)(y);t.a=function(e){var t=e.value,r=e.onChange,c=void 0===r?function(){}:r,s=e.options,f=void 0===s?[]:s,p=e.disabled,h=e.className,v=Object(o.useState)(!1),y=Object(a.a)(v,2),E=y[0],x=y[1],O=w(),j=d()(f,(function(e){return e.value===t}))||{};return i.a.createElement(g.a,{onClickAway:function(){x(!1)}},i.a.createElement("div",{className:l()(O.selectWrapper,h)},i.a.createElement("div",{className:l()(O.selectTrigger,Object(n.a)({},O.disabled,p)),onClick:function(){p||x(!E)}},i.a.createElement("div",{className:O.triggerLabelWrapper},j.img&&(m()(j.img)?i.a.createElement("div",{className:O.optMultiImgWrapper},u()(j.img,(function(e){return i.a.createElement("img",{key:e,className:O.optMultiImg,src:e,alt:"logo"})}))):i.a.createElement("img",{className:O.optImg,src:j.img,alt:"logo"})),i.a.createElement("span",{className:O.triggerLabel},j.label)),!p&&i.a.createElement(b.a,{className:l()(O.caret,Object(n.a)({},O.expandLess,E))})),i.a.createElement("ul",{className:l()(O.selectPop,Object(n.a)({},O.selectPopVisible,E))},u()(f,(function(e){return i.a.createElement("li",{key:e.value,className:l()(O.selectItem,Object(n.a)({},O.selectActiveItem,t===e.value)),onClick:function(){return function(e){x(!1),c(e)}(e.value)}},e.img&&(m()(e.img)?i.a.createElement("div",{className:O.optMultiImgWrapper},u()(e.img,(function(e){return i.a.createElement("img",{key:e,className:O.optMultiImg,src:e,alt:"logo"})}))):i.a.createElement("img",{className:O.optImg,src:e.img,alt:"logo"})),i.a.createElement("span",{className:O.optLabel},e.label))})))))}},950:function(e,t,r){"use strict";var n=r(62),a=r(0),o=r(172),i=r(17),c=r(107),l=r.n(c),s=o.b,u=i.a;t.a=function(e){var t=e.userProvider,r=e.VAULT_ADDRESS,o=e.VAULT_ABI,i=Object(a.useState)(u.from(0)),c=Object(n.a)(i,2),f=c[0],d=c[1],p=Object(a.useState)(),m=Object(n.a)(p,2),h=m[0],g=m[1],v=Object(a.useState)(!1),b=Object(n.a)(v,2),y=b[0],w=b[1],E=function(){w(!0),new s(r,o,t).redeemFeeBps().then(d).catch(g).finally((function(){return w(!1)}))};return Object(a.useEffect)((function(){if(l()(t)||l()(r))return w(!1),void g();E()}),[t,r]),{value:f,loading:y,error:h,reload:E}}},953:function(e,t,r){"use strict";var n=r(62),a=r(0),o=r(172),i=r(17),c=r(107),l=r.n(c),s=r(296),u=o.b;t.a=function(e,t,r){var c=Object(a.useState)(),f=Object(n.a)(c,2),d=f[0],p=f[1],m=Object(a.useState)(!1),h=Object(n.a)(m,2),g=h[0],v=h[1],b=Object(a.useState)(""),y=Object(n.a)(b,2),w=y[0],E=y[1],x=Object(a.useState)(i.a.from(0)),O=Object(n.a)(x,2),j=O[0],k=O[1],A=Object(a.useState)(i.a.from(0)),S=Object(n.a)(A,2),L=S[0],C=S[1],T=Object(a.useState)(i.a.from(0)),I=Object(n.a)(T,2),N=I[0],_=I[1],F=Object(a.useState)(i.a.from(0)),R=Object(n.a)(F,2),B=R[0],P=R[1],D=Object(a.useState)(i.a.from(0)),G=Object(n.a)(D,2),V=G[0],M=G[1],H=Object(s.a)(r),W=function(){return l()(e)?new Error("VAULT_ADDRESS is need!"):l()(t)?new Error("VAULT_ABI is need!"):l()(r)?new Error("userProvider is need!"):void 0},U=function(){var a=W();if(a)return p(a);v(!0);var c=new o.b(e,t,r),l=[c.totalAssets().catch((function(){return i.a.from(0)})),c.totalDebt().catch((function(){return i.a.from(0)})),c.rebaseThreshold().catch((function(){return i.a.from(0)})),c.minimumInvestmentAmount(),c.exchangeManager(),z()];return Promise.all(l).then((function(e){var t=Object(n.a)(e,5),r=t[0],a=t[1],o=t[2],i=t[3],c=t[4];return C(r),k(a),_(o),M(i),E(c),{totalAsset:r,decimals:a,rebaseThreshold:o}})).catch(p).finally((function(){return v(!1)}))},z=function(){var n=new u(e,t,r);v(!0),n.underlyingUnitsPerShare().catch(p).then(P).finally((function(){return v(!1)}))};return Object(a.useEffect)((function(){if(W())return v(!1),void p();U()}),[H,e,t,r]),{loading:g,error:d,totalAsset:L,decimals:j,exchangeManager:w,minimumInvestmentAmount:V,fetchUnderlyingUnitsPerShare:z,rebaseThreshold:N,queryBaseInfo:U,updateRebaseThreshold:function(n){var a=W();if(a)return p(a);v(!0);var i=new o.b(e,t,r),c=r.getSigner();i.connect(c).setRebaseThreshold(n).then((function(e){return e.wait()})).finally((function(){return v(!1)}))},updateMinimumInvestmentAmount:function(n){var a=W();if(a)return p(a);v(!0);var i=new o.b(e,t,r),c=r.getSigner();i.connect(c).setMinimumInvestmentAmount(n).then((function(e){return e.wait()})).finally((function(){return v(!1)}))},underlyingUnitsPerShare:B}}},960:function(e,t,r){"use strict";var n=r(301),a=r(10),o=r(62),i=r(0),c=r.n(i),l=r(441),s=r(44),u=r.n(s),f=r(291),d=r(115),p=r(946),m=r(81),h=r(884),g=r(868),v=r(1016),b=r.n(v),y=r(80),w=r(18),E=r(21),x=r(896),O=r.n(x),j=r(937),k=r.n(j),A=r(172),S=r(17),L=r(153),C=r.n(L),T=r(78),I=r.n(T),N=r(916),_=r.n(N),F=r(922),R=r.n(F),B=r(932),P=r.n(B),D=r(933),G=r.n(D),V=r(893),M=r.n(V),H=r(917),W=r.n(H),U=r(934),z=r.n(U),Y=r(894),X=r.n(Y),q=r(107),J=r.n(q),K=r(877),Z=r.n(K),Q=r(895),$=r.n(Q),ee=(r(448),r(935),r(871)),te=r.n(ee),re=(r(902),r(292)),ne=r(865),ae=r(936),oe=r(872),ie=r.n(oe),ce=r(89),le=r(966),se=r.n(le),ue=["paraswap","oneInchV4"],fe=function(e){var t=[],r=C()(e,"0.0.0");if(J()(r))return t;var n=r.name;return t.push(n),t},de=function(e){return X()(e,(function(e,t){var r=C()(t,"swaps[0].swapExchanges[0].exchange","");return e.push(r),e}),[])},pe=r(878),me=r(32),he=r(294),ge=r(879),ve=r(19),be=function(){return{container:ve.b,main:{padding:"2rem 3rem",color:"#A0A0A0",background:"linear-gradient(111.68deg, #2C2F36 7.59%, #333437 102.04%)",borderRadius:"2.5rem"},title:{paddingBottom:"1.5rem",fontSize:"1.5rem",lineHeight:"1.5rem",textAlign:"center"},tokenLogo:{width:30,borderRadius:"50%",marginRight:8},approveContainer:{maxHeight:"20rem",padding:"2rem 1.25rem",border:"1px solid #A68EFD",borderRadius:"0.5rem 0.5rem 0px 0px",backgroundColor:"#1F2023",overflowY:"auto"},approveItemWrapper:{paddingBottom:"0.5rem","&:last-child":{padding:0}},success:{border:"1px solid forestgreen"},swappingContainer:{margin:0,color:"#A68EFD",textAlign:"center",fontSize:"0.875rem",lineHeight:"0.875rem"},swapSuccessContainer:{margin:0,color:"#56CC8C",textAlign:"center",fontSize:"0.875rem",lineHeight:"0.875rem"},swapErrorContainer:{height:"2rem",border:"1px solid #F36767",borderRadius:"0.625rem",margin:0,color:"#F36767",textAlign:"center",fontSize:"0.875rem",lineHeight:"2rem",cursor:"pointer"},approveItem:{textAlign:"left",display:"flex"},approveButton:{margin:"12px 8px 8px"},balanceText:{textAlign:"left",fontSize:"0.875rem",lineHeight:"0.875rem"},errorText:{color:"#ff7875"},errorContainer:{border:"1px solid #ff7875",margin:"2px 0"},successContainer:{border:"1px solid forestgreen",margin:"2px 0"},isSwappingContainer:{border:"1px solid #A68EFE",margin:"2px 0"},reciveContainer:{background:"linear-gradient(223.3deg, #A68EFD 20.71%, #F4ACF3 103.56%)"},slippage:{padding:"0 1.25rem",border:"1px solid #A68EFD",borderRadius:"0px 0px 0.5rem 0.5rem",marginTop:"0.625rem",backgroundColor:"#1F2023"},slippageTitlte:{display:"flex",alignItems:"center"},estimateContainer:{padding:"2rem 1.25rem",border:"1px solid #A68EFD",marginTop:"0.625rem",backgroundColor:"#1F2023"},estimateTitle:{paddingBottom:"0.75rem"},estimateBalance:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-end"},tokenList:{padding:"0.5rem",overflow:"auto",border:"1px solid rgb(166, 142, 254)",borderRadius:"0.5rem"},arrow:{display:"flex",justifyContent:"center",alignItems:"center"},buttonGroup:{marginTop:"0.625rem"},okWrapper:{paddingLeft:"1rem"},okButton:{width:"100%"},cancelButton:{width:"100%"},addToken:{cursor:"pointer"},swapError:{display:"flex",alignItems:"center",marginBottom:"1rem",color:"#ff7875",textAlign:"left"},textOverflow:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},loading:{animation:"loading 1s linear infinite"},reloadIcon:{cursor:"pointer",verticalAlign:"text-bottom"}}};function ye(){ye=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(A){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),i=new O(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return k()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=w(i,r);if(c){if(c===u)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,i),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(A){return{type:"throw",arg:A}}}e.wrap=l;var u={};function f(){}function d(){}function p(){}var m={};c(m,a,(function(){return this}));var h=Object.getPrototypeOf,g=h&&h(h(j([])));g&&g!==t&&r.call(g,a)&&(m=g);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var n;this._invoke=function(a,o){function i(){return new t((function(n,i){!function n(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(a,o,n,i)}))}return n=n?n.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(y.prototype),c(y.prototype,o,(function(){return this})),e.AsyncIterator=y,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new y(l(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,a,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=j,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var we=0,Ee=A.b,xe=S.a,Oe=Object(l.a)(be),je=xe.from("0"),ke=Object(i.forwardRef)((function(e,t){var r,n=Oe(),l=e.token,s=void 0===l?{}:l,f=e.userAddress,d=e.userProvider,p=e.slippage,m=e.receiveToken,v=e.exchangePlatformAdapters,b=e.exchangeManager,x=e.receiveTokenDecimals,j=e.EXCHANGE_AGGREGATOR_ABI,A=e.style,S=e.disabled,L=e.onChange,C=e.onStaticCallFinish,T=s.address,I=(s.amount,Object(i.useState)(!1)),N=Object(o.a)(I,2),_=N[0],F=N[1],R=Object(i.useState)(""),B=Object(o.a)(R,2),D=B[0],G=B[1],V=Object(i.useState)(je),H=Object(o.a)(V,2),W=H[0],U=H[1],Y=Object(i.useState)(0),X=Object(o.a)(Y,2),q=X[0],K=X[1],Q=Object(i.useState)(je),$=Object(o.a)(Q,2),ee=$[0],oe=$[1],ce=Object(i.useState)({}),le=Object(o.a)(ce,2),pe=le[0],ge=le[1],ve=Object(i.useState)(void 0),be=Object(o.a)(ve,2),ke=be[0],Ae=be[1],Se=Object(i.useState)(!1),Le=Object(o.a)(Se,2),Ce=Le[0],Te=Le[1],Ie=Object(i.useState)(!1),Ne=Object(o.a)(Ie,2),_e=Ne[0],Fe=Ne[1],Re=Object(i.useState)(!1),Be=Object(o.a)(Re,2),Pe=Be[0],De=Be[1],Ge=Object(i.useState)(0),Ve=Object(o.a)(Ge,2),Me=Ve[0],He=Ve[1],We=Object(i.useState)(!1),Ue=Object(o.a)(We,2),ze=Ue[0],Ye=Ue[1],Xe=s.address===m,qe=!Xe&&(Ce||_e),Je=Me>2;console.groupCollapsed("init state:".concat(T,":").concat(we++)),console.log("isReload=",_),console.log("value=",D),console.log("balance=",W.toString()),console.log("decimals=",q.toString()),console.log("allowances=",ee.toString()),console.log("exclude=",pe),console.log("swapInfo=",ke),console.log("isSwapInfoFetching=",Ce),console.log("isStaticCalling=",_e),console.log("done=",Pe),console.log("retryTimes=",Me),console.log("isApproving=",ze),console.log("isReciveToken=",Xe),console.log("userAddress=",f),console.log("slippage=",p),console.log("token=",s),console.log("exchangePlatformAdapters=",v),console.log("exchangeManager=",b),console.log("receiveTokenDecimals=",x.toString()),console.groupEnd("init state:".concat(T,":").concat(we++));var Ke=Object(i.useCallback)((function(){F(!1),ge({}),Ae(void 0),Te(!1),Fe(!1),De(!1),He(0),Ye(!1),setTimeout((function(){L()}))}),[]),Ze=Object(i.useCallback)((function(){if(s.address===he.a||Xe)return!0;try{return new ie.a(D).multipliedBy(q.toString()).lte(ee)}catch(e){return!1}}),[s,D,ee,q,Xe]),Qe=Object(i.useCallback)(Z()((function(){console.groupCollapsed("staticCall call:".concat(T,":").concat(++we)),console.log("swapInfo=",ke);var e=new Ee(b,j,d),t=d.getSigner(),r=e.connect(t),n=ke.bestSwapInfo,a=n.platform,i=n.method,c=n.encodeExchangeArgs,l=ke.info;Fe(!0),Te(!1),L(),r.callStatic.swap(a,i,c,l).then((function(){console.log("staticCall success"),console.groupEnd("staticCall call:".concat(T,":").concat(we)),De(!0),C(!0)})).catch((function(e){console.log("staticCall error",e),console.groupEnd("staticCall call:".concat(T,":").concat(we));var t=ke.bestSwapInfo,r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(J()(e)||te()(e)||se()(e))return[];var t=e.name,r=e.bestRoute;if(ue.includes(t)){var n;switch(t){case"oneInchV4":n=fe;break;case"paraswap":n=de}return n(r)}throw new Error("not support")}(t),n=Object(o.a)(r,1)[0],a=t.name,i=pe[a]||[n],c=i.includes(n)?i:i.concat([n]),l=Object(E.a)(Object(E.a)({},pe),{},Object(w.a)({},a,c));ge(l),Ae(void 0),He(Me+1),De(!1),Te(Me+1<=2),C(!1)})).finally((function(){Fe(!1),L()}))}),500),[d,ke,L,pe,Me,C]),$e=function(){var e=Object(a.a)(ye().mark((function e(){var t,r,n,a,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!J()(s)&&!M()(D)&&"0"!==D){e.next=2;break}return e.abrupt("return");case 2:console.groupCollapsed("approve call:".concat(T,":").concat(++we)),t=d.getSigner(),r=new Ee(T,me.i,d),n=r.connect(t),e.prev=6,a=xe.from(new ie.a(D).multipliedBy(q.toString()).toFixed()),e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(6),e.abrupt("return");case 13:return e.next=15,n.allowance(f,b);case 15:if(o=e.sent,!a.gt(o)){e.next=24;break}if(!o.gt(0)){e.next=23;break}if(T!==he.d){e.next=20;break}return e.abrupt("return",n.approve(b,0).then((function(e){return e.wait()})).then((function(){return at(),n.approve(b,a).then((function(e){return e.wait()}))})));case 20:return e.abrupt("return",n.increaseAllowance(b,a.sub(o)).then((function(e){return e.wait()})).catch((function(e){return 4001===e.code?Promise.reject(e):n.approve(b,0).then((function(e){return e.wait()})).then((function(){return at(),n.approve(b,a).then((function(e){return e.wait()}))}))})));case 23:return e.abrupt("return",n.approve(b,a).then((function(e){return e.wait()})).catch((function(e){if(4001===e.code)return Promise.reject(e)})));case 24:console.groupEnd("approve call:".concat(T,":").concat(we));case 25:case"end":return e.stop()}}),e,null,[[6,10]])})));return function(){return e.apply(this,arguments)}}(),et=!qe&&!Xe&&Je,tt=function(){if(!D)return!1;if(!q)return!1;var e=new ie.a(D).multipliedBy(q.toString());return!Xe&&!J()(D)&&(e.gt(W)||-1!==e.toFixed().indexOf("."))},rt=function(){return!Xe&&(J()(D)||0===Number(D))},nt=function(e){var t=Number(e);isNaN(t)||t<0||(G(e),Ae(void 0),Fe(!1),He(0),ge({}),De(!1),setTimeout((function(){L()})))},at=Object(i.useCallback)(Object(a.a)(ye().mark((function e(){var t,r,n,a,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.address,console.groupCollapsed("reload call:".concat(t,":").concat(++we)),F(!0),r=new Ee(t,me.i,d),e.next=6,r.allowance(f,b).catch((function(){return je}));case 6:return n=e.sent.toString(),e.next=9,r.balanceOf(f).catch((function(){return je}));case 9:return a=e.sent.toString(),e.t0=xe.from(10),e.next=13,r.decimals().catch((function(){return je}));case 13:e.t1=e.sent,o=e.t0.pow.call(e.t0,e.t1),U(a),K(o),oe(n),F(!1),console.groupEnd("reload call:".concat(t,":").concat(we));case 20:case"end":return e.stop()}}),e)}))),[s,f,b]),ot=Object(i.useCallback)(Object(a.a)(ye().mark((function e(){var t,r,n,a,o,i,c,l,u,h,g,b;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(M()(q)||rt()||"0"===D||Xe)){e.next=2;break}return e.abrupt("return");case 2:if(console.groupCollapsed("queryBestSwapInfo call:".concat(T,":").concat(++we)),console.log("exclude=",pe),console.log("value=",D),console.log("swapInfo=",ke),-1===(t=new ie.a(D).multipliedBy(q.toString()).toFixed()).indexOf(".")){e.next=9;break}return e.abrupt("return");case 9:if(r=xe.from(t),n={},a={},s.address!==he.a){e.next=16;break}n={decimals:18,address:s.address},e.next=24;break;case 16:return o=new Ee(s.address,me.i,d),e.t0=parseInt,e.next=20,o.decimals();case 20:e.t1=e.sent.toString(),e.t2=(0,e.t0)(e.t1),e.t3=s.address,n={decimals:e.t2,address:e.t3};case 24:if(m!==he.a){e.next=28;break}a={decimals:18,address:m},e.next=36;break;case 28:return i=new Ee(m,me.i,d),e.t4=parseInt,e.next=32,i.decimals();case 32:e.t5=e.sent.toString(),e.t6=(0,e.t4)(e.t5),e.t7=m,a={decimals:e.t6,address:e.t7};case 36:return console.groupCollapsed("fetch best swap path: ".concat(n.address,"-").concat(a.address,":").concat(r,":").concat(++we)),c=z()({},me.h,(J()(v.testAdapter),{})),J()(pe)||(console.log("exclude=",pe),l=pe.oneInchV4,u=void 0===l?[]:l,h=pe.paraswap,g=void 0===h?[]:h,c=z()({},c,{oneInchV4:Object(E.a)(Object(E.a)({},c.oneInchV4),{},{excludeProtocols:P()(u.concat(c.oneInchV4.excludeProtocols))}),paraswap:Object(E.a)(Object(E.a)({},c.paraswap),{},{excludeDEXS:P()([].concat(Object(y.a)(g),[c.paraswap.excludeDEXS.split(",")])).join(",")})})),e.next=41,Object(ae.getBestSwapInfo)(n,a,r,parseInt(100*parseFloat(p))||0,me.q,v,c).catch((function(e){throw new Error(e)}));case 41:if(b=e.sent,console.groupEnd("fetch best swap path: ".concat(n.address,"-").concat(a.address,":").concat(r,":").concat(we)),!J()(b)){e.next=45;break}throw new Error("fetch error");case 45:return console.groupEnd("queryBestSwapInfo call:".concat(we)),e.abrupt("return",{bestSwapInfo:b,info:{amount:r,srcToken:s.address,dstToken:m,receiver:f}});case 47:case"end":return e.stop()}}),e)}))),[s,D,q,v,pe,m,Xe,p]),it=Object(i.useCallback)(Z()(Object(a.a)(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!rt()){e.next=3;break}return L(),e.abrupt("return");case 3:return console.groupCollapsed("estimateWithValue call:".concat(T,":").concat(++we)),Te(!0),L(),e.next=8,ot().then((function(e){console.log("estimateWithValue call success"),console.groupEnd("estimateWithValue call:".concat(T,":").concat(we)),Ae(e),Ze()||Te(!1)})).catch((function(){console.log("estimateWithValue call error"),console.groupEnd("estimateWithValue call:".concat(T,":").concat(we)),Je?Te(!1):(He(Me+1),Te(Me+1<=2))})).finally((function(){L()}));case 8:case"end":return e.stop()}}),e)}))),500),[b,s,q,Me,ot,L]);Object(i.useEffect)(Ke,[m,p]),Object(i.useEffect)((function(){G(Object(ne.b)(s.amount,q))}),[s,q.toString()]),Object(i.useEffect)((function(){at()}),[at]);var ct=!Ce&&!J()(ke)&&!Je,lt=!qe&&!Xe&&(Ze()&&Pe||!Ze()&&!J()(ke))&&!Je;return Object(i.useEffect)((function(){console.groupCollapsed("estimateWithValue useEffect call:".concat(T,":").concat(++we));var e=!isNaN(p)&&!(p<.01||p>45);return console.log("isReload=",_),console.log("swapInfo=",ke),console.log("isValidSlippage()=",e),console.log("isGetSwapInfoSuccess=",ct),Xe||_||!e||J()(v)||ct||Je||tt()||rt()?(console.log("estimateWithValue useEffect return"),void console.groupEnd("estimateWithValue useEffect call:".concat(T,":").concat(we))):(console.groupEnd("estimateWithValue useEffect call:".concat(T,":").concat(we)),it(),function(){return it.cancel()})}),[_,D,ke,it,Me,Ce]),Object(i.useEffect)((function(){console.groupCollapsed("staticCall useEffect call:".concat(T,":").concat(++we));var e=Ze();if(console.log("done=",Pe),console.log("retryTimes=",Me),console.log("isApproveEnoughValue=",e),console.log("swapInfo=",ke),console.log("isStaticCalling=",_e),console.log("isOverMaxRetry=",Je),console.log("isReciveToken=",Xe),Xe||Pe||J()(ke)||!e||_e||Je||tt()||rt())return console.log("staticCall useEffect return"),void console.groupEnd("staticCall useEffect call:".concat(T,":").concat(we));console.groupEnd("staticCall useEffect call:".concat(T,":").concat(we)),Qe()}),[Pe,D,Me,ke,Qe,_e,Ze]),Object(i.useImperativeHandle)(t,(function(){return{approve:function(){return $e().then(at)},value:D,isApproving:ze,isFetching:qe,swapInfo:ke,done:Pe,isApproveEnough:Ze,retryTimes:Me,isErrorValue:tt,isEmptyValue:rt}})),c.a.createElement("div",{key:T,className:u()(n.approveItemWrapper),style:A},c.a.createElement("div",{className:n.approveItem},c.a.createElement(h.a,{classes:{root:n.input},placeholder:"approve amount",maxEndAdornment:!0,InputProps:{startAdornment:c.a.createElement("div",{className:n.addToken,onClick:function(){return Object(re.a)(T)}},T!==he.a&&c.a.createElement(O.a,{fontSize:"small",style:{position:"absolute",top:28,left:35}}),c.a.createElement("img",{className:n.tokenLogo,src:"./images/".concat(T,".png")}))},disabled:S||Xe||qe,error:tt(),value:D,onChange:function(e){return nt(e.target.value)},onMaxClick:function(){return nt(Object(ne.b)(W,q))}})),!Xe&&c.a.createElement("p",{className:n.balanceText},"Balance:"," ",c.a.createElement(g.a,{loading:_,className:n.reloadIcon},c.a.createElement("span",{title:Object(ne.b)(W,q)},Object(ne.b)(W,q,6))),c.a.createElement("span",{style:{float:"right"}},"Allowance:"," ",c.a.createElement(g.a,{loading:_,className:n.reloadIcon},c.a.createElement("span",{title:Object(ne.b)(ee,q)},Object(ne.b)(ee,q,6))))),!Xe&&lt&&c.a.createElement("p",{className:n.swapSuccessContainer},"Swap into ".concat(Object(ne.b)(null===ke||void 0===ke||null===(r=ke.bestSwapInfo)||void 0===r?void 0:r.toTokenAmount,x))),!Xe&&et&&c.a.createElement("div",{className:n.swapErrorContainer,onClick:function(){console.groupCollapsed("reloadSwap call:".concat(T,":").concat(++we)),Ae(void 0),Te(!0),He(0),C(void 0),console.groupEnd("reloadSwap call:".concat(T,":").concat(we))}},c.a.createElement("span",null,"Swap path fetch error"),"\xa0\xa0",c.a.createElement(k.a,{className:n.reloadIcon,fontSize:"small"})),!Xe&&qe&&c.a.createElement("p",{className:n.swappingContainer},c.a.createElement(g.a,{className:n.reloadIcon,loading:!0})," \xa0\xa0",c.a.createElement("span",null,"Swap path fetching")))})),Ae=r(79),Se=r(295),Le=r.n(Se),Ce=function(){return{container:ve.b,main:{padding:"2rem 3rem",color:"#A0A0A0",background:"linear-gradient(111.68deg, #2C2F36 7.59%, #333437 102.04%)",borderRadius:"2.5rem"},title:{paddingBottom:"1.5rem",fontSize:"1.5rem",lineHeight:"1.5rem",textAlign:"center"},tokenLogo:{width:30,borderRadius:"50%",marginRight:8},approveContainer:{maxHeight:"20rem",padding:"2rem 1.25rem",border:"1px solid #A68EFD",borderRadius:"0.5rem 0.5rem 0px 0px",backgroundColor:"#1F2023",overflowY:"auto"},approveItemWrapper:{paddingBottom:"0.5rem","&:last-child":{padding:0}},success:{border:"1px solid forestgreen"},swappingContainer:{margin:0,color:"#A68EFD",textAlign:"center",fontSize:"0.875rem",lineHeight:"0.875rem"},swapSuccessContainer:{margin:0,color:"#56CC8C",textAlign:"center",fontSize:"0.875rem",lineHeight:"0.875rem"},swapErrorContainer:{height:"2rem",border:"1px solid #F36767",borderRadius:"0.625rem",margin:0,color:"#F36767",textAlign:"center",fontSize:"0.875rem",lineHeight:"2rem",cursor:"pointer"},approveItem:{textAlign:"left",display:"flex"},approveButton:{margin:"12px 8px 8px"},balanceText:{textAlign:"left",fontSize:"0.875rem",lineHeight:"0.875rem"},errorText:{color:"#ff7875"},errorContainer:{border:"1px solid #ff7875",margin:"2px 0"},successContainer:{border:"1px solid forestgreen",margin:"2px 0"},isSwappingContainer:{border:"1px solid #A68EFE",margin:"2px 0"},reciveContainer:{background:"linear-gradient(223.3deg, #A68EFD 20.71%, #F4ACF3 103.56%)"},slippage:{padding:"0 1.25rem",border:"1px solid #A68EFD",borderRadius:"0px 0px 0.5rem 0.5rem",marginTop:"0.625rem",backgroundColor:"#1F2023"},slippageTitlte:{display:"flex",alignItems:"center"},estimateContainer:{padding:"2rem 1.25rem",border:"1px solid #A68EFD",marginTop:"0.625rem",backgroundColor:"#1F2023"},estimateTitle:{paddingBottom:"0.75rem"},estimateBalance:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-end"},tokenList:{padding:"0.5rem",overflow:"auto",border:"1px solid rgb(166, 142, 254)",borderRadius:"0.5rem"},arrow:{display:"flex",justifyContent:"center",alignItems:"center"},buttonGroup:{marginTop:"0.625rem"},okWrapper:{paddingLeft:"1rem"},okButton:{width:"100%"},cancelButton:{width:"100%"},addToken:{cursor:"pointer"},swapError:{display:"flex",alignItems:"center",marginBottom:"1rem",color:"#ff7875",textAlign:"left"},textOverflow:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},loading:{animation:"loading 1s linear infinite"},reloadIcon:{cursor:"pointer",verticalAlign:"text-bottom"}}};function Te(){Te=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(A){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),i=new O(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return k()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=w(i,r);if(c){if(c===u)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,i),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(A){return{type:"throw",arg:A}}}e.wrap=l;var u={};function f(){}function d(){}function p(){}var m={};c(m,a,(function(){return this}));var h=Object.getPrototypeOf,g=h&&h(h(j([])));g&&g!==t&&r.call(g,a)&&(m=g);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var n;this._invoke=function(a,o){function i(){return new t((function(n,i){!function n(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(a,o,n,i)}))}return n=n?n.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(y.prototype),c(y.prototype,o,(function(){return this})),e.AsyncIterator=y,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new y(l(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,a,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=j,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var Ie=A.b,Ne=S.a,_e=Object(l.a)(Ce),Fe=0;t.a=function(e){var t,r=_e(),l=Object(Ae.b)(),s=e.isEthi,u=e.userProvider,v=e.tokens,y=e.address,w=e.exchangeManager,E=e.EXCHANGE_AGGREGATOR_ABI,x=e.EXCHANGE_ADAPTER_ABI,O=e.handleClose,j=(e.onSlippageChange,I()(v,(function(){return Object(i.useRef)(null)}))),k=Object(i.useState)({}),S=Object(o.a)(k,2),L=S[0],T=S[1],N=Object(i.useState)(s?he.a:me.w),F=Object(o.a)(N,2),B=F[0],P=F[1],D=Object(i.useState)("0.3"),V=Object(o.a)(D,2),M=V[0],H=V[1],U=Object(i.useState)(!1),z=Object(o.a)(U,2),Y=z[0],q=z[1],K=Object(i.useState)(0),Q=Object(o.a)(K,2),ee=(Q[0],Q[1]),re=Object(i.useState)(I()(v,(function(){}))),ae=Object(o.a)(re,2),oe=ae[0],ie=ae[1],le=I()(j,(function(e){return C()(e,"current.swapInfo",{})})),se=_()(j,(function(e){return C()(e,"current.isFetching")})),ue=function(e){var t;return(null===(t=v[e])||void 0===t?void 0:t.address)===B},fe=function(){return!isNaN(M)&&!(M<.01||M>45)},de=_()(j,(function(e){var t=C()(e,"current.isErrorValue");return"function"===typeof t&&t()})),ve=X()(j,(function(e,t){var r,n,a;return(null===(r=t.current)||void 0===r||null===(n=r.swapInfo)||void 0===n||null===(a=n.bestSwapInfo)||void 0===a?void 0:a.toTokenAmount)?e.add(Ne.from(t.current.swapInfo.bestSwapInfo.toTokenAmount)):e}),Ne.from(0)),be=1===R()(v)&&C()(G()(v),"address","")===B,ye=function(){var e=Object(a.a)(Te().mark((function e(t,r){var a,o,i,c,l,s,u;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getExchangeAdapters();case 2:a=e.sent,o=a._exchangeAdapters,i={},c=Object(n.a)(o),e.prev=6,c.s();case 8:if((l=c.n()).done){e.next=17;break}return s=l.value,u=new A.b(s,x,r),e.next=13,u.identifier();case 13:e.t0=e.sent,i[e.t0]=s;case 15:e.next=8;break;case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(6),c.e(e.t1);case 22:return e.prev=22,c.f(),e.finish(22);case 25:return e.abrupt("return",i);case 26:case"end":return e.stop()}}),e,null,[[6,19,22,25]])})));return function(t,r){return e.apply(this,arguments)}}(),we=s?[{label:"ETH",value:he.a,img:"./images/".concat(he.a,".png"),decimal:ge.a}]:[{label:"USDT",value:me.w,img:"./images/".concat(me.w,".png"),decimal:ge.b},{label:"USDC",value:me.v,img:"./images/".concat(me.v,".png"),decimal:ge.b},{label:"DAI",value:me.d,img:"./images/".concat(me.d,".png"),decimal:ge.a}],Ee=we.find((function(e){return e.value===B})).decimal,xe=(null===(t=Le()(v,(function(e){return e.address===B})))||void 0===t?void 0:t.amount)||"0",Oe=function(){var e=Object(a.a)(Te().mark((function e(){var t,r,n;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.groupCollapsed("approveAll call"),e.prev=1,t=0;case 3:if(!(t<v.length)){e.next=16;break}if(console.log("tokens[".concat(t,"] isReciveToken="),ue(t)),!ue(t)){e.next=7;break}return e.abrupt("continue",13);case 7:if(r=j[t].current.isApproveEnough(),console.log("refArray[".concat(t,"] isApproveEnough="),r),!r){e.next=11;break}return e.abrupt("continue",13);case 11:return e.next=13,j[t].current.approve();case 13:t++,e.next=3;break;case 16:e.next=25;break;case 18:return e.prev=18,e.t0=e.catch(1),q(!1),n=Object(pe.a)(e.t0),l(Object(ce.b)({open:!0,type:"error",message:n})),console.groupEnd("approveAll call"),e.abrupt("return");case 25:if(!_()(j,(function(e){return!!e.current&&!e.current.isApproveEnough()}))){e.next=30;break}return q(!1),l(Object(ce.b)({open:!0,type:"error",message:"Allowance not enough"})),e.abrupt("return");case 30:console.groupEnd("approveAll call");case 31:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(){return e.apply(this,arguments)}}(),je=Z()(Object(a.a)(Te().mark((function e(){var t,r,n,a,o,i,c,s,f,d;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.groupCollapsed("batchSwap call"),t=$()(I()(le,(function(e){if(!(J()(e)||e instanceof Error)){var t=e.bestSwapInfo;return{platform:t.platform,method:t.method,data:t.encodeExchangeArgs,swapDescription:e.info}}}))),console.log("nextSwapArray=",t),r=new Ie(w,E,u),n=u.getSigner(),a=r.connect(n),e.prev=6,!te()(me.o)||1===me.o){e.next=18;break}return e.next=10,a.estimateGas.batchSwap(t);case 10:return i=e.sent,c=Math.ceil(i*me.o),s=c<me.m?c:me.m,e.next=15,a.batchSwap(t,{gasLimit:s});case 15:o=e.sent,e.next=21;break;case 18:return e.next=20,a.batchSwap(t);case 20:o=e.sent;case 21:return e.next=23,o.wait();case 23:l(Object(ce.b)({open:!0,type:"success",message:"Swap Success!"})),O(),e.next=34;break;case 27:e.prev=27,e.t0=e.catch(6),f=Object(pe.a)(e.t0),d="Swap Failed",Object(pe.g)(f)?d="Swap Failed, please increase the exchange slippage":4001===e.t0.code&&(d=f),l(Object(ce.b)({open:!0,type:"error",message:d})),q(!1);case 34:console.groupEnd("batchSwap call");case 35:case"end":return e.stop()}}),e,null,[[6,27]])}))),500),Se=Object(i.useCallback)((function(){ee(Math.random())}),[]),Ce=Object(i.useCallback)((function(e,t){console.groupCollapsed("onStaticCallFinish call ".concat(e," ").concat(t));var r=I()(oe,(function(r,n){return!(!ue(n)&&!j[n].current.isEmptyValue())||(n===e?t:r)}));if(ie(r),console.log("nextArray",r),!Y)return console.log("isSwapping",Y),void console.groupEnd("onStaticCallFinish call ".concat(e," ").concat(t));var n=W()(r,(function(e){return void 0!==e}));if(!n)return console.log("allFinish",n),void console.groupEnd("onStaticCallFinish call ".concat(e," ").concat(t));var a=_()(r,(function(e){return!1===e}));if(a)return console.log("someError",a),q(!1),l(Object(ce.b)({open:!0,type:"error",message:"Swap Failed"})),void console.groupEnd("onStaticCallFinish call ".concat(e," ").concat(t));console.groupEnd("onStaticCallFinish call ".concat(e," ").concat(t)),je()}),[oe,Y]);return Object(i.useEffect)((function(){function e(){return(e=Object(a.a)(Te().mark((function e(){var t,r;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.groupCollapsed("getAdapters useEffect call:".concat(++Fe)),t=new Ie(w,E,u),e.next=4,ye(t,u);case 4:r=e.sent,console.log("exchangeAdapters",r),T(r),console.groupEnd("getAdapters useEffect call:".concat(Fe));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[w]),c.a.createElement("div",{className:r.main},c.a.createElement("div",{className:r.title},"Swap to single token"),c.a.createElement("div",{className:r.approveContainer},c.a.createElement("div",null,"Swap tokens:"),I()(v,(function(e,t){var r={};return("0"===e.amount||v.length>1&&ue(t))&&(r.display="none"),c.a.createElement(ke,{style:r,ref:j[t],key:"".concat(e.address,"-").concat(B),userAddress:y,userProvider:u,token:e,slippage:M,receiveToken:B,exchangeManager:w,exchangePlatformAdapters:L,receiveTokenDecimals:Ee,EXCHANGE_AGGREGATOR_ABI:E,disabled:Y,onChange:Se,onStaticCallFinish:function(e){Ce(t,e)}})}))),c.a.createElement("div",{className:r.estimateContainer},c.a.createElement("div",{className:r.estimateTitle},"To receive estimated:"),c.a.createElement(f.a,null,c.a.createElement(d.a,{xs:4,sm:4,md:4},c.a.createElement(p.a,{options:we,disabled:we.length<=1||Y||se,value:B,onChange:function(e){return function(e){se||P(e)}(e)}})),c.a.createElement(d.a,{xs:8,sm:8,md:8,className:r.estimateBalance},c.a.createElement(g.a,{loading:se,className:r.reloadIcon},c.a.createElement("div",{className:r.textOverflow},Object(ne.b)(ve,Ee,6)," from token swap"),"0"!==xe&&c.a.createElement("div",null,"+".concat(Object(ne.b)(xe,Ee,6))," from withdrawal"))))),c.a.createElement(f.a,{className:r.slippage},c.a.createElement(d.a,{xs:4,sm:4,md:4,className:r.slippageTitlte},"Slippage tolerance:"),c.a.createElement(d.a,{xs:8,sm:8,md:8},c.a.createElement(h.a,{value:M,placeholder:"Allow slippage percent",maxEndAdornment:!0,disabled:Y||se,onMaxClick:function(){return H("45")},onChange:function(e){return H(e.target.value)},error:!fe()}))),c.a.createElement(f.a,{className:r.buttonGroup},c.a.createElement(d.a,{xs:4,sm:4,md:4},c.a.createElement(m.a,{color:"danger",onClick:O,className:r.cancelButton},"Cancel")),c.a.createElement(d.a,{xs:8,sm:8,md:8,className:r.okWrapper},c.a.createElement(m.a,{color:"colorfull",onClick:function(){console.groupCollapsed("clickSwap call"),q(!0),W()(j,(function(e,t){return!(!ue(t)&&!e.current.isEmptyValue())||C()(e,"current.done",!0)}))?je():Oe(),console.groupEnd("clickSwap call")},disabled:be||se||Y||_()(j,(function(e){var t;return!!(null===(t=e.current)||void 0===t?void 0:t.retryTimes)&&e.current.retryTimes>2}))||!fe()||ve.lte(0)||de,className:r.okButton,startIcon:Y?c.a.createElement(b.a,{className:r.loading}):null},"Swap"))))}},977:function(e,t,r){"use strict";var n=r(10),a=r(62),o=r(0),i=r(172),c=r(17),l=r(107),s=r.n(l),u=r(296),f=r(32);function d(){d=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(S){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),i=new j(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return A()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=E(i,r);if(c){if(c===u)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,i),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(S){return{type:"throw",arg:S}}}e.wrap=l;var u={};function f(){}function p(){}function m(){}var h={};c(h,a,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(k([])));v&&v!==t&&r.call(v,a)&&(h=v);var b=m.prototype=f.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var n;this._invoke=function(a,o){function i(){return new t((function(n,i){!function n(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(a,o,n,i)}))}return n=n?n.then(i,i):i()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function k(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=m,c(b,"constructor",m),c(m,"constructor",p),p.displayName=c(m,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,i,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(w.prototype),c(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new w(l(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),c(b,i,"Generator"),c(b,a,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var p=i.b,m=c.a;t.a=function(e,t,r,i,c,l){var h=Object(o.useState)(),g=Object(a.a)(h,2),v=g[0],b=g[1],y=Object(o.useState)(!1),w=Object(a.a)(y,2),E=w[0],x=w[1],O=Object(o.useState)({}),j=Object(a.a)(O,2),k=j[0],A=j[1],S=Object(u.a)(l),L=function(){return s()(r)?new Error("VAULT_ADDRESS is need!"):s()(i)?new Error("VAULT_ABI is need!"):s()(l)?new Error("userProvider is need!"):void 0},C=function(){var o=L();if(o)return b(o);x(!0),new p(e,t,l).uniswapV3RiskOnHelper().then((function(e){var t=new p(r,i,l),o=new p(e,c,l);return Promise.all([t.borrowToken().then(function(){var e=Object(n.a)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new p(t,f.i,l),e.t0=t,e.next=4,r.symbol();case 4:return e.t1=e.sent,e.t2=m.from(10),e.next=8,r.decimals();case 8:return e.t3=e.sent,e.t4=e.t2.pow.call(e.t2,e.t3),e.abrupt("return",{borrowToken:e.t0,name:e.t1,borrowTokenDecimals:e.t4});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.wantToken().then(function(){var e=Object(n.a)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new p(t,f.i,l),e.t0=t,e.next=4,r.symbol();case 4:return e.t1=e.sent,e.t2=m.from(10),e.next=8,r.decimals();case 8:return e.t3=e.sent,e.t4=e.t2.pow.call(e.t2,e.t3),e.abrupt("return",{wantToken:e.t0,name:e.t1,wantTokenDecimals:e.t4});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())]).then((function(e){var n=Object(a.a)(e,2),i=n[0],c=n[1],l=i.borrowToken,s=c.wantToken;return Promise.all([t.netMarketMakingAmount(),o.getCurrentBorrow(l,2,r),o.getTotalCollateralTokenAmount(r,s),t.depositTo3rdPoolTotalAssets(),t.estimatedTotalAssets()]).then((function(e){var t=Object(a.a)(e,5),r=t[0],n=t[1],u=t[2],f=t[3],d=t[4];return o.calcCanonicalAssetValue(l,n,s).then((function(e){var t={netMarketMakingAmount:r,currentBorrow:n,currentBorrowWithCanonical:e,depositTo3rdPoolTotalAssets:f,totalCollateralTokenAmount:u,estimatedTotalAssets:d,wantInfo:c,borrowInfo:i,result:f.add(u).sub(r).sub(e)};return A(t),t}))}))})).finally((function(){setTimeout((function(){x(!1)}),300)}))}))};return Object(o.useEffect)((function(){if(L())return x(!1),void b();C()}),[S,r,i,l]),{loading:E,error:v,baseInfo:k,queryBaseInfo:C}}}}]);
//# sourceMappingURL=10.f0b6f787.chunk.js.map